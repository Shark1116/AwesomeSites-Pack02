(function(t){function e(e){for(var i,a,r=e[0],l=e[1],c=e[2],h=0,u=[];h<r.length;h++)a=r[h],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&u.push(n[a][0]),n[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);d&&d(e);while(u.length)u.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],i=!0,a=1;a<s.length;a++){var l=s[a];0!==n[l]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=s[0]))}return t}var i={},n={app:0},o=[];function a(t){return r.p+"js/"+({"icon-arrow-big-down-svg":"icon-arrow-big-down-svg","icon-arrow-big-left-svg":"icon-arrow-big-left-svg","icon-arrow-left-svg":"icon-arrow-left-svg","icon-arrow-right-svg":"icon-arrow-right-svg","icon-arrow-small-left-svg":"icon-arrow-small-left-svg","icon-arrow-small-right-svg":"icon-arrow-small-right-svg","icon-brightness-svg":"icon-brightness-svg","icon-camera-svg":"icon-camera-svg","icon-close-svg":"icon-close-svg","icon-contrast-svg":"icon-contrast-svg","icon-download-svg":"icon-download-svg","icon-facebook-svg":"icon-facebook-svg","icon-gallery-svg":"icon-gallery-svg","icon-info-svg":"icon-info-svg","icon-instagram-svg":"icon-instagram-svg","icon-landscape-svg":"icon-landscape-svg","icon-logo-facebook-svg":"icon-logo-facebook-svg","icon-logo-freunde-der-nationalgalerie-svg":"icon-logo-freunde-der-nationalgalerie-svg","icon-logo-kunsthal-charlottenborg-svg":"icon-logo-kunsthal-charlottenborg-svg","icon-logo-meta-svg":"icon-logo-meta-svg","icon-logo-nationalgalerie-svg":"icon-logo-nationalgalerie-svg","icon-mobile-rectangle-svg":"icon-mobile-rectangle-svg","icon-mobile-spin-arrow-svg":"icon-mobile-spin-arrow-svg","icon-night-svg":"icon-night-svg","icon-play-svg":"icon-play-svg","icon-portrait-svg":"icon-portrait-svg","icon-preset-svg":"icon-preset-svg","icon-saturation-svg":"icon-saturation-svg","icon-see-all-svg":"icon-see-all-svg","icon-square-svg":"icon-square-svg","icon-sun-svg":"icon-sun-svg","icon-temperature-svg":"icon-temperature-svg"}[t]||t)+"."+{"icon-arrow-big-down-svg":"69c3c89d","icon-arrow-big-left-svg":"62cddf55","icon-arrow-left-svg":"c0c833f3","icon-arrow-right-svg":"ae7fda35","icon-arrow-small-left-svg":"43e2ffe9","icon-arrow-small-right-svg":"399bf3a7","icon-brightness-svg":"2dce3326","icon-camera-svg":"f56b5961","icon-close-svg":"62e37be7","icon-contrast-svg":"9987af25","icon-download-svg":"da72e6b7","icon-facebook-svg":"2dbd78c9","icon-gallery-svg":"c20755cf","icon-info-svg":"a924108b","icon-instagram-svg":"fe65dad1","icon-landscape-svg":"9ec25283","icon-logo-facebook-svg":"8688c2c9","icon-logo-freunde-der-nationalgalerie-svg":"3c61ad60","icon-logo-kunsthal-charlottenborg-svg":"b560c193","icon-logo-meta-svg":"1a165255","icon-logo-nationalgalerie-svg":"ce87c7a5","icon-mobile-rectangle-svg":"e5bed529","icon-mobile-spin-arrow-svg":"77b77557","icon-night-svg":"6ecdc8ac","icon-play-svg":"b700a27d","icon-portrait-svg":"79111e42","icon-preset-svg":"a8a970ce","icon-saturation-svg":"38d84da7","icon-see-all-svg":"062ec0b7","icon-square-svg":"3a74d869","icon-sun-svg":"4a212956","icon-temperature-svg":"204daaf4"}[t]+".js"}function r(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.e=function(t){var e=[],s=n[t];if(0!==s)if(s)e.push(s[2]);else{var i=new Promise((function(e,i){s=n[t]=[e,i]}));e.push(s[2]=i);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=a(t);var c=new Error;o=function(e){l.onerror=l.onload=null,clearTimeout(h);var s=n[t];if(0!==s){if(s){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",c.name="ChunkLoadError",c.type=i,c.request=o,s[1](c)}n[t]=void 0}};var h=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(e)},r.m=t,r.c=i,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var h=0;h<l.length;h++)e(l[h]);var d=c;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("cd49")},"0062":function(t,e){var s=function(t){var e="";return e+="attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uMVP;\n\nvarying vec2 vTexCoord;\nvarying vec2 vDotCoord;\n\nvoid main(void){\n\n  gl_Position = uMVP * vec4(aPosition, 1.0);\n  vTexCoord = aTexCoord;\n  vDotCoord = aTexCoord * 13.0;\n\n}",e};s.toString=s,t.exports=s},"01a4":function(t,e){var s=function(t){var e="";return e+="uniform sampler2D tDitherNoise;\nuniform vec2 uDitherTCScale;",e};s.toString=s,t.exports=s},"0214":function(t,e,s){"use strict";s("419a")},"024a":function(t,e,s){},"03fb":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_7_eldest_hansen_L0.jpg.dxt.f7492d99.ktx"},"043c":function(t,e){var s=function(t){var e="";return e+="\n\n{\nc += texture2D(tDitherNoise, texCoordVP*uDitherTCScale.xy).xyz/255.0;\n}",e};s.toString=s,t.exports=s},"04da":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_7_lund_jensen_L0.jpg.etc.5936d1f3.ktx"},"04ec":function(t,e,s){"use strict";s("5959")},"0518":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_6_lamplight_ring_L0.jpg.5a2be169.webp"},"06d2":function(t,e,s){},"07b7":function(t,e,s){"use strict";s("1781")},"07df":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_12_gertrud_juel_L0.jpg.etc.892c7ebd.ktx"},"08bb":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_7_lund_jensen_L0.jpg.dxt.9bda1e2d.ktx"},"08bd":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_8_child_syberg_L0.jpg.etc.cfd7de4b.ktx"},"090e":function(t,e){var s=function(t){var e="";return e+="uniform samplerCube tCube;\nvarying vec3 vView;\n\nvoid main(void){\n\n  gl_FragColor = textureCube(tCube, vView);\n  \n}",e};s.toString=s,t.exports=s},"0a2d":function(t,e){var s=function(t){var e="";return e+="uniform sampler2D tTexture;\n\nvarying vec2 vTexCoord;\n\nvoid main(void){\n\n  gl_FragColor = texture2D(tTexture, vTexCoord);\n  \n}",e};s.toString=s,t.exports=s},"0a4f":function(t,e,s){"use strict";s.r(e);const i=s("a708"),n={};i.keys().forEach(t=>{const e=t.substring(2,t.length),s=i(t);n[e]=s});const o={getPath(t){const e=n[t];return e||console.error("con't find asset "+t),e}};e["default"]=o},"0ad2":function(t,e,s){},"0b6d":function(t,e){var s=function(t){var e="";return e+="attribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord0;\n\n  \nvoid main( void ){\n  gl_Position = vec4( aPosition, 0.0, 1.0 );\n  vTexCoord0 = aTexCoord;\n}\n",e};s.toString=s,t.exports=s},"0d4c":function(t,e,s){"use strict";s("e282")},"0e3c":function(t,e){var s=function(t){var e="";return e+="\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord0;\n\nuniform mat4 uMVP;\n\nvoid main( void ){\n  gl_Position = uMVP * vec4( aPosition.y, 0.0, -aPosition.x, 1.0 );\n  vTexCoord0 = aTexCoord;\n}\n",e};s.toString=s,t.exports=s},"11e5":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_7_eldest_hansen_L0.00846b46.jpg"},"11f2":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_5_saleswoman_metsu_L0.jpg.dxt.6988a0b0.ktx"},1325:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_6_lamplight_ring_L0.jpg.pvr.075dc24e.ktx"},"139d":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_1_schandorph_kroyer_L0.jpg.etc.bb6bc7eb.ktx"},1402:function(t,e,s){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#if __VERSION__ == 300\n  precision lowp sampler2DShadow;\n  #define DepthSampler sampler2DShadow\n#else\n  #define DepthSampler sampler2D\n#endif\n\n#pragma SLOT precision\n\n"+s("dc9a")()+"\n\n#pragma SLOT pf\n\n\n#define LCOLOR vec3(1.,0.992,0.753)\n\nvoid main( void ){\n  #pragma SLOT f\n  FragColor = vec4(LCOLOR, 1.0);\n  #pragma SLOT postf_linear\n}",e};i.toString=i,t.exports=i},"14bb":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_12_gertrud_juel_L0.jpg.e624bc2c.webp"},"14f3":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_9_architect_bindesboll_L0.63ffc761.jpg"},1536:function(t,e,s){"use strict";s("e863")},"153d":function(t,e,s){var i={"./arrow-big-down.svg":["8b36","icon-arrow-big-down-svg"],"./arrow-big-left.svg":["5a44","icon-arrow-big-left-svg"],"./arrow-left.svg":["ac3b","icon-arrow-left-svg"],"./arrow-right.svg":["cd8c","icon-arrow-right-svg"],"./arrow-small-left.svg":["735e","icon-arrow-small-left-svg"],"./arrow-small-right.svg":["1ded","icon-arrow-small-right-svg"],"./brightness.svg":["c196","icon-brightness-svg"],"./camera.svg":["24e5","icon-camera-svg"],"./close.svg":["8b1b","icon-close-svg"],"./contrast.svg":["acd7","icon-contrast-svg"],"./download.svg":["f28e","icon-download-svg"],"./facebook.svg":["8485","icon-facebook-svg"],"./gallery.svg":["6ec0","icon-gallery-svg"],"./info.svg":["76ed","icon-info-svg"],"./instagram.svg":["bd6c","icon-instagram-svg"],"./landscape.svg":["2fae","icon-landscape-svg"],"./logo-facebook.svg":["ad96","icon-logo-facebook-svg"],"./logo-freunde-der-nationalgalerie.svg":["850d","icon-logo-freunde-der-nationalgalerie-svg"],"./logo-kunsthal-charlottenborg.svg":["f0b4","icon-logo-kunsthal-charlottenborg-svg"],"./logo-meta.svg":["bccf","icon-logo-meta-svg"],"./logo-nationalgalerie.svg":["db9f","icon-logo-nationalgalerie-svg"],"./meta-collab-logo-desktop.svg":["a77e"],"./meta-collab-logo-mobile.svg":["df98"],"./mobile-rectangle.svg":["7054","icon-mobile-rectangle-svg"],"./mobile-spin-arrow.svg":["6cb3b","icon-mobile-spin-arrow-svg"],"./night.svg":["4ed4","icon-night-svg"],"./play.svg":["dab1","icon-play-svg"],"./portrait.svg":["5b2c","icon-portrait-svg"],"./preset.svg":["fcf2","icon-preset-svg"],"./saturation.svg":["6bc3","icon-saturation-svg"],"./see-all.svg":["1979","icon-see-all-svg"],"./square.svg":["d8a7","icon-square-svg"],"./sun.svg":["3961","icon-sun-svg"],"./temperature.svg":["816a","icon-temperature-svg"]};function n(t){if(!s.o(i,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=i[t],n=e[0];return Promise.all(e.slice(1).map(s.e)).then((function(){return s(n)}))}n.keys=function(){return Object.keys(i)},n.id="153d",t.exports=n},1551:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_6_marine_ditlev_L0.jpg.etc.f563f3f8.ktx"},"158b":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_10_fader_svendsen_L0.jpg.astc.02f4927c.ktx"},"15cf":function(t,e,s){"use strict";s("4a7f")},1781:function(t,e,s){},"187c":function(t,e,s){"use strict";s("ff38")},"18d5":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_2_knitting_bendz_L0.jpg.dxt.32f71c02.ktx"},"193e":function(t,e){var s=function(t){var e="";return e+="EnvironmentBRDF( brdfData, geometryData, lightingData, surface.occlusion );\n// lightingData.lightingColor *= .0001;",e};s.toString=s,t.exports=s},1948:function(t,e,s){t.exports=s.p+"img/background-1@2x.64cc0c74.jpg"},"1a1f":function(t,e,s){"use strict";s("43cd")},"1a68":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_5_petersen_kobke_L0.jpg.etc.50158bc9.ktx"},"1ac0":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_5_petersen_kobke_L0.8f956b9c.jpg"},"1af7":function(t,e,s){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+s("dc9a")()+"\n#pragma SLOT pf\n\nIN vec2 vTexCoord;\n\nuniform sampler2D uTexture;\nuniform vec4 uColor;\n\nvoid main(void){\n  float xFactor = 7.;\n  float yFactor = 1.2;\n\n  float x = (1. - vTexCoord.x) * xFactor - sceneTime() * 0.5;\n  vec2 coords = vec2(x, 1. - vTexCoord.y * yFactor);\n  vec4 tex = texture2D(uTexture, coords);\n\n  vec4 color = uColor;\n  float dist = (0.5 - tex.r);\n  vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n  float pixelDist = dist / length(ddist);\n  color.a = clamp(0.5 - pixelDist, 0.0, 1.0) * uColor.a;\n\n  float alphaStep = step(0., coords.y);\n  float alpha = mix(0., color.a, alphaStep);\n\n  FragColor = vec4(color.rgb, alpha * globalAlpha());\n}",e};i.toString=i,t.exports=i},"1c19":function(t,e,s){t.exports=s.p+"img/about.b57450da.jpg"},"1c20":function(t,e,s){},"1cc3":function(t,e,s){},"1d69":function(t,e,s){},"1da2":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_12_gertrud_juel_L0.jpg.astc.f0ebccc4.ktx"},"1f34":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_11_freunds_wurden_L0.jpg.etc.22554a35.ktx"},"1f47":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_9_wife_kobke_L0.cc75c56b.jpg"},"204c":function(t,e,s){t.exports=s.p+"assets/webgl/intro.c383236f.glb"},2293:function(t,e){var s=function(t){var e="";return e+="\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nuniform mat4 uMVP;\nuniform vec4 uV4Model;\nuniform mat4 uProjection;\nuniform vec2 uScale;\n\nvarying vec2 vTexCoord;\n\nvoid main(void){\n\n  gl_Position = uProjection * ( uV4Model + vec4(aPosition * uScale, 0.0, 0.0) );\n\n  vTexCoord = aTexCoord;\n}",e};s.toString=s,t.exports=s},2387:function(t,e){var s=function(t){var e="";return e+="#if __VERSION__ == 300\n  #define IN in\n  #define texture2D(a,b) texture( a, b )\n#else\n  #define IN varying\n  #define FragColor gl_FragColor\n#endif\n\n#if __VERSION__ == 300\n  out vec4 FragColor;\n#endif",e};s.toString=s,t.exports=s},"244e":function(t,e,s){},"25cd":function(t,e,s){"use strict";s("4058")},2625:function(t,e,s){"use strict";s("5c63")},"26c9":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_10_fruits_roed_L0.jpg.dxt.16b434a2.ktx"},2756:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_4_pig_thomsen_L0.jpg.pvr.b54c746a.ktx"},"27e5":function(t,e,s){t.exports=s.p+"assets/webgl/names.jpg.d22b6b69.webp"},2904:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_7_eldest_hansen_L0.jpg.49aade96.webp"},"29a6":function(t,e){var s=function(t){var e="";return e+="varying vec2 vTexCoord;\n\nuniform sampler2D tTex;\nuniform vec4 uScaleMode;\nuniform float uProcessMode;\n\nvoid main(void){\n\n  vec3 c = texture2D(tTex, vTexCoord).rgb;\n  vec3 frame = c * uScaleMode.rgb;\n  frame = vec3(1.0) * clamp(frame.r + frame.g + frame.b, 0.0, 1.0);\n\n  c *= (1.0 - uProcessMode);\n  \n  gl_FragColor = vec4(mix(c, frame, uScaleMode.w), 1.0);\n}",e};s.toString=s,t.exports=s},"2b48":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_8_child_syberg_L0.jpg.6b14ea33.webp"},"2dd4":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_5_saleswoman_metsu_L0.jpg.pvr.554ce873.ktx"},"2f3f":function(t,e,s){},"2f6b":function(t,e,s){"use strict";s("b39a")},"2ff1":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_11_kreuger_bergh_L0.jpg.2ab1480d.webp"},3023:function(t,e,s){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n\n#ifndef hasNormals\n  #define hasNormals 1\n#endif \n#ifndef hasTangents\n  #define hasTangents hasNormals\n#endif \n\n#if hasTangents && !hasNormals \n  #pragma error tan but no nrm\n  error\n#endif\n\n#pragma SLOT precision\n\n"+s("f5de")()+"\n\n#pragma SLOT pv\n\n\nIN vec3 aPosition;\nIN vec2 aTexCoord1;\n\n#if hasNormals\nIN vec3 aNormal;\nOUT mediump vec3 vWorldNormal;\n#endif\n\n// has normal map and tangent attribute\n#if hasTangents\nIN vec4 aTangent;\n#endif\n\n#if HAS_normal && hasTangents\nOUT mediump vec3 vWorldTangent;\nOUT mediump vec3 vWorldBitangent;\n#endif\n\n\n// uniform mat4 uMVP;\nuniform mat4 uWorldMatrix;\nuniform mat4 uVP;\n\nOUT vec3 vWorldPosition;\n\n\nvec3 rotate( mat4 m, vec3 v )\n{\n  return m[0].xyz*v.x + m[1].xyz*v.y + m[2].xyz*v.z;\n}\n\n\nstruct VertexData {\n  highp vec3 position;\n  highp vec3 worldPos;\n  #if hasNormals\n    vec3 normal;\n  #endif\n  #if hasTangents\n    vec3 tangent;\n  #endif\n  mat4 worldMatrix;\n};\n\n\nvoid InitVertexData( out VertexData vertex ){\n\n  vertex.position = aPosition;\n  #if hasNormals\n    vertex.normal = aNormal;\n  #endif\n  #if hasTangents\n    vertex.tangent = aTangent.xyz;\n  #endif\n\n  vertex.worldMatrix = uWorldMatrix;\n   \n}\n\n\nvoid main( void ){\n\n  #pragma SLOT v\n\n  VertexData vertex;\n  InitVertexData( vertex );\n\n  #pragma SLOT vertex_warp\n\n  vec4 worldPos = vertex.worldMatrix * vec4( vertex.position, 1.0 );\n  vertex.worldPos.xyz = worldPos.xyz / worldPos.w;\n\n  #pragma SLOT vertex_warp_world\n\n  gl_Position     = vec4( aTexCoord1*2.0-1.0, 0.5, 1.0 );\n  vWorldPosition  = vertex.worldPos;\n  \n  #if hasNormals\n  vWorldNormal    = normalize( rotate( vertex.worldMatrix, vertex.normal ) );\n  #endif\n\n  #if HAS_normal && hasTangents\n    vWorldTangent   = normalize( rotate( vertex.worldMatrix, vertex.tangent.xyz ) );\n    vWorldBitangent = normalize( cross( vWorldNormal, vWorldTangent ) * aTangent.w );\n  #endif\n\n  // IBL lighting may sample SH here if per vertex irrad enabled\n\n  #pragma SLOT postv\n  // vDebugColor = vec4( -position, 1.0 );\n}",e};i.toString=i,t.exports=i},3089:function(t,e,s){t.exports=s.p+"assets/webgl/texts_spritesheet.jpg.etc.6bb894aa.ktx"},"314e":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_8_selvportraet_hunaeus_L0.a50aa626.jpg"},"31b1":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_5_petersen_kobke_L0.jpg.pvr.7060694e.ktx"},"31c5":function(t,e,s){},"327b":function(t,e,s){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+s("dc9a")()+"\n#pragma SLOT pf\n\nuniform vec3 uCameraPosition;\nuniform vec3 uBaseColor;\n\nIN vec3 vWorldPosition;\nIN vec3 vWorldNormal;\nIN vec3 vViewNormal;\n\nfloat power = 0.6;\nfloat scale = 1.0;\n\nvoid main(void){\n  #pragma SLOT f\n\n  vec3 viewDir = normalize( uCameraPosition - vWorldPosition );\n  vec3 normal = vWorldNormal;\n\n\tfloat fresnel = scale * pow(dot(viewDir, vWorldNormal), power);\n\n  vec3 color = vec3(1.0);\n  vec2 matcapUV = vViewNormal.xy * 0.5 + 0.5;\n  matcapUV.y = 1.0 - matcapUV.y;\n  matcapUV *= 0.99;\n\n  // color *= 0.8 + fresnel * 0.6;\n\n  FragColor = vec4(uBaseColor.rgb, 0.3 + fresnel * 0.4);\n\n}",e};i.toString=i,t.exports=i},"32d3":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_9_wife_kobke_L0.jpg.etc.f9be823e.ktx"},3566:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_2_knitting_bendz_L0.jpg.9265afbe.webp"},"35c7":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_2_gardener_denner_L0.jpg.a04fa109.webp"},"35e3":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_4_pig_thomsen_L0.jpg.etc.79717f73.ktx"},"35fd":function(t,e,s){},3623:function(t,e){var s=function(t){var e="";return e+="precision lowp float;\n\nvarying vec2 vTexCoord0;\nuniform sampler2D tTex;\nuniform vec3 uColorValid;\nuniform vec3 uColorInvalid;\nuniform float uValid;\n\nvoid main(void){\n  vec3 color = mix(uColorInvalid, uColorValid, uValid);\n  float alpha = texture2D(tTex, vTexCoord0).r;\n  gl_FragColor = vec4(color, alpha);\n}\n",e};s.toString=s,t.exports=s},3690:function(t,e){var s=function(t){var e="";return e+="\nuniform sampler2D tChromaShiftTex;\n\nuniform float uAmount;",e};s.toString=s,t.exports=s},3704:function(t,e,s){t.exports=s.p+"img/background-1-mobile@2x.c0811ae1.jpg"},3802:function(t,e){var s=function(t){var e="";return e+="\n\nattribute vec2 aData;\n\n#define BASE_RADIUS 0.5\n#define BASE_THICKNESS 0.5\n\nuniform vec2 uParams;\n\nvarying vec2 vUvs;\nvarying float vAlpha;\n\n\n//screen space  angle of the sun direction from the center of the screen\n#define SUN_DIR uParams.x\n//screen space  dist of the sun direction from the center of the screen\n#define SUN_DIST uParams.y\n\n\n\nvoid main(void){\n  vec2 pos = vec2(\n    cos( aData.x ),\n    sin( aData.x )\n  );\n\n  float distfromsa = -cos(uParams.x-aData.x) * .5 + .5;\n  float thickness = BASE_THICKNESS * distfromsa;\n  float radius = BASE_RADIUS * uParams.y;\n\n  float r = radius + thickness * (aData.y-.5);\n  pos *= r; \n\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n\n  vUvs = vec2(\n    aData.x / (2.0 * 3.14159),\n    aData.y*3.0\n  );\n\n  vAlpha = clamp( pow( distfromsa*1.5-.5, 4.0), 0.0, 1.0);\n\n}",e};s.toString=s,t.exports=s},"386b":function(t,e,s){},"38fa":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_2_gardener_denner_L0.jpg.etc.6c667dd4.ktx"},"3bcd":function(t,e,s){"use strict";s("5cc7")},"3c62":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_2_gardener_denner_L0.jpg.dxt.484fd539.ktx"},"3c94":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_6_lamplight_ring_L0.jpg.etc.d8d2b546.ktx"},"3cd0":function(t,e,s){},"3d8b":function(t,e){var s=function(t){var e="";return e+="attribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord0;\n\n  \nvoid main( void ){\n  gl_Position = vec4( aPosition, 0.0, 1.0 );\n  vTexCoord0 = aTexCoord;\n}\n",e};s.toString=s,t.exports=s},"3ef2":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_2_knitting_bendz_L0.jpg.astc.d17763d6.ktx"},4020:function(t,e,s){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+s("dc9a")()+"\n#pragma SLOT pf\n\nIN vec2 vTexCoord;\n\n// hsv2rgb from http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl\n\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvoid main(void){\n  vec3 hueColor = hsv2rgb(vec3(hue(), 1., 1.));\n  vec3 defaultColor = vec3(1., 253. / 255., 192. / 255.);\n  vec3 centerColor = mix(defaultColor, hueColor, isHue());\n\n  vec3 blackColor = vec3(0., 0., 0.);\n  vec3 borderColor = mix(blackColor, defaultColor, isHue());\n\n  float distCenter = distance(vTexCoord, vec2(0.5, 0.5));\n  float a = step(0.55, 1. - distCenter);\n\n  float stepBorder = step(0.7, 1. - distCenter);\n\n  vec3 color = mix(borderColor, centerColor, stepBorder);\n\n  FragColor = vec4(color.rgb, a);\n}",e};i.toString=i,t.exports=i},4054:function(t,e,s){var i=function(t){var e="";return e+=s("2387")()+"\n\nIN vec2 vTexCoord;\nIN vec2 vTexCoordGrad;\n\nuniform sampler2D tFontTex;\nuniform sampler2D tGradient;\nuniform vec3 uOffset;\n\n// https://drewcassidy.me/2020/06/26/sdf-antialiasing/\n\nvoid main(void) {\n\n  vec2 tcoord = vTexCoord;\n  tcoord.y = 1.0 - tcoord.y;\n\n  vec4 color = texture2D(tGradient, vTexCoordGrad);\n  float dist = (0.5 - texture2D(tFontTex, tcoord).r);\n  vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n  float pixelDist = dist / length(ddist);\n  color.a = clamp(0.5 - pixelDist, 0.0, 1.0) * uOffset.z;\n\n  FragColor = color;\n\n}",e};i.toString=i,t.exports=i},4058:function(t,e,s){},"40fc":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_3_husband_baumann_L0.jpg.ce3cf9c1.webp"},"419a":function(t,e,s){},"42c0":function(t,e,s){"use strict";s("42f0")},"42f0":function(t,e,s){},"431b":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_9_wife_kobke_L0.jpg.pvr.abfa776d.ktx"},4331:function(t,e,s){},"43cd":function(t,e,s){},4471:function(t,e){var s=function(t){var e="";return e+="precision lowp float;\n\nvarying vec2 vTexCoord0;\nuniform sampler2D tTex;\n#define LCOLOR vec3(1.,0.992,0.753)\n\nvoid main(void){\n  float alpha = texture2D( tTex, vTexCoord0 ).r;\n  gl_FragColor = vec4( LCOLOR, alpha );\n}\n",e};s.toString=s,t.exports=s},"451d":function(t){t.exports=JSON.parse('{"src":["assets\\\\audio\\\\ui.mp3"],"sprite":{"ui_click_camera_function":[0,287.3469387755102],"ui_click_camera_snap":[2000,1280.0000000000002],"ui_click_move":[5000,1906.9387755102039],"ui_click":[8000,1071.0204081632658],"ui_rollover_camera_enter_snap":[11000,391.8367346938769],"ui_rollover_circle":[13000,757.5510204081635],"ui_rollover_long":[15000,1018.7755102040832],"ui_rollover_short":[18000,783.6734693877538],"ui_rollover_switch":[20000,548.571428571428],"ui_transition":[22000,6060.408163265308],"ui_zoom_adjust":[30000,182.8571428571415]}}')},"45c6":function(t,e,s){},"46af":function(t,e,s){},"496d":function(t,e,s){t.exports=s.p+"img/rectangle_mobile.7411b9b3.png"},"49f8":function(t,e,s){var i={"./en.json":"edd4"};function n(t){var e=o(t);return s(e)}function o(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=o,t.exports=n,n.id="49f8"},"4a7f":function(t,e,s){},"4a9c":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_9_architect_bindesboll_L0.jpg.dxt.0abd3b67.ktx"},"4ac0":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_11_kreuger_bergh_L0.jpg.astc.8cda0611.ktx"},"4bb7":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_2_gardener_denner_L0.jpg.astc.3dbeaab4.ktx"},"4c97":function(t,e,s){},"4ce5":function(t,e,s){},"4d644":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_10_fader_svendsen_L0.jpg.a51cd8e8.webp"},"4df7":function(t,e,s){"use strict";s("ffc1")},"4ef7":function(t,e){var s=function(t){var e="";return e+="\n\n{\n\n  #define CS_SAMPLES 8\n  #define CS_P .068\n  vec2 tc = texCoordVP - vec2(.5);\n\n//   if( tc.x < 0.0 ){\n\n\n    for( int i = 0; i < CS_SAMPLES; i++ ){\n        float shift = float(i)/float(CS_SAMPLES-1);\n\n        vec2 ftc = tc * (1.0 + uAmount*(shift - .5));\n        c += texture2D( tInput, ftc + .5 ).xyz * texture2D( tChromaShiftTex, vec2( shift * (1.0-2.0*CS_P) + CS_P , .5 ) ).rgb;\n    }\n\n\n    c /= (float( CS_SAMPLES ) *.4)*1.1;\n//   }\n}",e};s.toString=s,t.exports=s},"4f2f":function(t,e,s){var i=function(t){var e="";return e+="\n"+s("efd0")()+"\n\nIN vec2 aPosition;\nIN vec2 aTexCoord0;\n\nvoid main(void){\n\n  gl_Position.xy = aPosition;\n  gl_Position.zw = vec2(0.0,1.0);\n  \n}",e};i.toString=i,t.exports=i},"4f9f":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_3_husband_baumann_L0.jpg.dxt.d827a300.ktx"},5024:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_6_marine_ditlev_L0.jpg.54c8cf5a.webp"},5092:function(t,e){var s=function(t){var e="";return e+="attribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nvarying mediump vec2 vTexCoord0;\n\n  \nvoid main( void ){\n  gl_Position = vec4( aPosition, 0.0, 1.0 );\n  vTexCoord0 = aTexCoord;\n}\n",e};s.toString=s,t.exports=s},"50f7":function(t,e,s){var i=function(t){var e="";return e+=s("f5de")()+"\n\nIN vec3 aPosition;\nIN vec2 aTexcoord;\n\nOUT vec2 vTexCoord;\n\nuniform mat4 uMVP;\n\nvoid main(void) {\n  gl_Position = uMVP * vec4(aPosition, 1.0);\n  vTexCoord = vec2(1. - aTexcoord.x, 1. - aTexcoord.y);\n}",e};i.toString=i,t.exports=i},5137:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_11_kreuger_bergh_L0.9fdb1a2e.jpg"},5191:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_10_fader_svendsen_L0.jpg.pvr.060e27a5.ktx"},5336:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_6_lamplight_ring_L0.jpg.astc.3bed2862.ktx"},5414:function(t,e,s){},"551b":function(t,e){var s=function(t){var e="";return e+="varying vec3 vView;\nvarying vec2 vTexcoord;\n\nuniform vec3 uColor;\nuniform float uAlpha;\n\nvoid main(void){\n  gl_FragColor = vec4(uColor, uAlpha);\n}",e};s.toString=s,t.exports=s},"57c2":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_1_schandorph_kroyer_L0.jpg.pvr.b1504729.ktx"},"58d2":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_1_schandorph_kroyer_L0.jpg.astc.f04a75bd.ktx"},5953:function(t,e,s){},5959:function(t,e,s){},"5b1e":function(t,e,s){t.exports=s.p+"assets/webgl/rainbow-ring.e1f7acfe.png"},"5c63":function(t,e,s){},"5cc7":function(t,e,s){},"5dc1":function(t,e,s){t.exports=s.p+"img/background-1.4c65b553.jpg"},"5de7":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_9_architect_bindesboll_L0.jpg.c5d1ddd2.webp"},"5ee1":function(t,e,s){"use strict";s("06d2")},"5fff":function(t,e,s){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+s("dc9a")()+"\n\nIN vec2 vTexCoord;\n\nuniform sampler2D uTex;\nuniform float uAlpha;\n\nvoid main(void){\n  vec4 tex = texture2D(uTex, vec2(1. - vTexCoord.x, vTexCoord.y));\n  gl_FragColor = vec4(tex.rgb, tex.a * uAlpha);\n}",e};i.toString=i,t.exports=i},6007:function(t,e,s){"use strict";s("c47c")},"600e":function(t,e,s){},"605a":function(t,e){var s=function(t){var e="";return e+="\n\n\n\n#if HAS_normal\n\n  vec3 GetScaledNormal( vec3 normalMap, float scale ){\n    vec3 nrm = normalMap = normalMap*vec3(2.0) - vec3(1.0);\n    return normalize( nrm * vec3(scale, scale, 1.0 ) );\n  }\n\n  #if HAS_normalScale\n    #define NormalMap(k) GetScaledNormal( normal(), normalScale() )\n  #else\n    #define NormalMap(k) normal()*vec3(2.0)-vec3(1.0)\n  #endif\n\n#endif\n\n\n#if HAS_normal\n  \n  mat3 computeTangentSpaceMatrix( vec2 nrmTexCoords ){\n\n  #if hasTangents\n    return mat3( vWorldTangent, vWorldBitangent, vWorldNormal );\n  #else\n\n      vec3 pos_dx = dFdx(vWorldPosition);\n      vec3 pos_dy = dFdy(vWorldPosition);\n      vec2 tex_dx = dFdx(nrmTexCoords);\n      vec2 tex_dy = dFdy(nrmTexCoords);\n\n      vec3 tangent = (tex_dy.y * pos_dx - tex_dx.y * pos_dy) / (tex_dx.x * tex_dy.y - tex_dy.x * tex_dx.y);\n\n      #if hasNormals \n        vec3 worldNormal = normalize( vWorldNormal );\n      #else\n        vec3 worldNormal = normalize( cross(pos_dx, pos_dy) );\n      #endif\n      \n\n      tangent = normalize(tangent - worldNormal * dot(worldNormal, tangent));\n      vec3 binormal = normalize(cross(worldNormal, tangent));\n      return mat3(tangent, binormal, worldNormal);\n  #endif\n  }\n\n  #define COMPUTE_NORMAL(k) ComputeWorldNormal( NormalMap(), normal_texCoord() )\n  vec3 ComputeWorldNormal( vec3 nrmTex, vec2 nrmTexCoords ){\n    mat3 tbn = computeTangentSpaceMatrix( nrmTexCoords );\n    return tbn*nrmTex;\n  }\n\n#else\n  #define COMPUTE_NORMAL(k) ComputeWorldNormal( )\n  vec3 ComputeWorldNormal(){\n    #if hasNormals \n      // return normalize( gl_FrontFacing ? vWorldNormal : -vWorldNormal );\n      return normalize( vWorldNormal );\n    #else\n      vec3 pos_dx = dFdx(vWorldPosition);\n      vec3 pos_dy = dFdy(vWorldPosition);\n      return normalize( cross(pos_dx, pos_dy) );\n    #endif\n  }\n#endif\n\n\n\n\n\n",e};s.toString=s,t.exports=s},6093:function(t,e){var s=function(t){var e="";return e+="attribute vec3 aPosition;\nattribute vec3 aNextPosition;\nattribute vec3 aPreviousPosition;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 uResolution;\nuniform float uLineWidth;\n\nvarying vec2 vTexCoord;\n\nvec2 fix( vec4 i, float aspect ) {\n  vec2 res = i.xy / i.w;\n  res.x *= aspect;\n  return res;\n}\n\nvoid main(void){\n\n  float aspect = uResolution.x / uResolution.y;\n  \n  mat4 m = uProjectionMatrix * uModelViewMatrix;\n  vec4 finalPosition = m * vec4( aPosition, 1.0 );\n  vec4 prevPos = m * vec4( aPreviousPosition, 1.0 );\n  vec4 nextPos = m * vec4( aNextPosition, 1.0 );\n\n  vec2 currentP = fix( finalPosition, aspect );\n  vec2 prevP = fix( prevPos, aspect );\n  vec2 nextP = fix( nextPos, aspect );\n\n  float w = uLineWidth;\n\n  vec2 dir;\n  if( nextP == currentP ) dir = normalize( currentP - prevP );\n  else if( prevP == currentP ) dir = normalize( nextP - currentP );\n  else {\n    vec2 dir1 = normalize( currentP - prevP );\n    vec2 dir2 = normalize( nextP - currentP );\n    dir = normalize( dir1 + dir2 );\n\n    vec2 perp = vec2( -dir1.y, dir1.x );\n    vec2 miter = vec2( -dir.y, dir.x );\n  \n  }\n\n  vec4 normal = vec4( -dir.y, dir.x, 0., 1. );\n  normal.xy *= .5 * w;\n  normal *= uProjectionMatrix;\n\n  float side = step(aTexCoord.x, 0.5) * 1.0 + step(0.5, aTexCoord.x) * -1.0;\n  finalPosition.xy += normal.xy * side;\n\n  gl_Position = finalPosition;\n\n  vTexCoord = aTexCoord;\n  \n}",e};s.toString=s,t.exports=s},6197:function(t,e,s){var i=function(t){var e="";return e+=s("2387")()+"\n\nIN vec2 vTexCoord;\nIN vec3 vWorldPosition;\n\nuniform sampler2D tFontTex;\nuniform vec4 uColor;\nuniform float uUseFog;\nuniform vec2 uFog;\n\n// https://drewcassidy.me/2020/06/26/sdf-antialiasing/\n\nvoid main(void) {\n  float fog = abs(vWorldPosition.x);\n  fog = 1.0 - clamp(fog / uFog.x, 0.0, 1.0);\n  fog = smoothstep(0.0, uFog.y, fog);\n  fog = mix(1., fog, uUseFog);\n\n  if (fog == 0.0) discard;\n\n  vec2 tcoord = vTexCoord;\n  tcoord.y = 1.0 - tcoord.y;\n\n  vec4 color = uColor;\n  float dist = (0.5 - texture2D(tFontTex, tcoord).r);\n  vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n  float pixelDist = dist / length(ddist);\n  color.a = clamp(0.5 - pixelDist, 0.0, 1.0) * uColor.a * clamp(fog, 0.0, 1.0);\n\n  FragColor = color;\n\n}",e};i.toString=i,t.exports=i},"61dc":function(t,e,s){"use strict";s("dc05")},"630e":function(t,e,s){"use strict";s("bd43")},6338:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_6_marine_ditlev_L0.80ca7370.jpg"},"64d2":function(t,e,s){"use strict";s("4331")},6531:function(t,e,s){"use strict";s("b133")},"65ee":function(t){t.exports=JSON.parse('{"src":["assets\\\\audio\\\\painting.mp3"],"sprite":{"dog_1":[0,2533.877551020408],"dog_2":[4000,1071.0204081632658],"kids_looking_bowl_1":[7000,1619.5918367346937],"kids_looking_bowl_2":[10000,1828.5714285714291],"kids_walking_1":[13000,2063.673469387755],"kids_walking_2":[17000,1933.0612244897977],"man_oldman_1":[20000,992.653061224491],"man_oldman_2":[22000,1462.8571428571427],"uhlan_cantian_1":[25000,1018.7755102040832],"uhlan_cantian_2":[28000,1462.8571428571427],"uhlan_solo_1":[31000,1462.8571428571463],"uhlan_solo_2":[34000,2063.6734693877515],"women_yellow_green_1":[38000,1358.3673469387777],"women_yellow_green_2":[41000,757.5510204081652]}}')},6614:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_7_eldest_hansen_L0.jpg.etc.5ffa8b3f.ktx"},"66d8":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_3_soster_hansen_L0.jpg.astc.eb5302c5.ktx"},"674d":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_11_freunds_wurden_L0.jpg.pvr.099d9de5.ktx"},"67ba":function(t,e,s){t.exports=s.p+"img/rectangle_desktop.03f1a6c1.png"},"67d1":function(t,e,s){},6847:function(t,e,s){"use strict";s("96ee")},"690a":function(t,e,s){(function(t,s){s(e)})(0,(function(t){"use strict";var e=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function s(t){var e=t.nodeType,i="";if(1===e||9===e||11===e){if("string"===typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=s(t)}else if(3===e||4===e)return t.nodeValue;return i}
/*!
   * SplitText: 3.10.4
   * https://greensock.com
   *
   * @license Copyright 2008-2022, GreenSock. All rights reserved.
   * Subject to the terms at https://greensock.com/standard-license or for
   * Club GreenSock members, the agreement issued with that membership.
   * @author: Jack Doyle, jack@greensock.com
  */var i,n,o,a=/(?:\r|\n|\t\t)/g,r=/(?:\s\s+)/g,l=function(){i=document,n=window,o=1},c=function(t){return n.getComputedStyle(t)},h=Array.isArray,d=[].slice,u=function(t,e){var s;return h(t)?t:"string"===(s=typeof t)&&!e&&t?d.call(i.querySelectorAll(t),0):t&&"object"===s&&"length"in t?d.call(t,0):t?[t]:[]},p=function(t){return"absolute"===t.position||!0===t.absolute},g=function(t,e){var s,i=e.length;while(--i>-1)if(s=e[i],t.substr(0,s.length)===s)return s.length},m=" style='position:relative;display:inline-block;'",_=function(t,e){void 0===t&&(t="");var s=~t.indexOf("++"),i=1;return s&&(t=t.split("++").join("")),function(){return"<"+e+m+(t?" class='"+t+(s?i++:"")+"'>":">")}},b=function t(e,s,i){var n=e.nodeType;if(1===n||9===n||11===n)for(e=e.firstChild;e;e=e.nextSibling)t(e,s,i);else 3!==n&&4!==n||(e.nodeValue=e.nodeValue.split(s).join(i))},f=function(t,e){var s=e.length;while(--s>-1)t.push(e[s])},v=function(t,e,s){var i;while(t&&t!==e){if(i=t._next||t.nextSibling,i)return i.textContent.charAt(0)===s;t=t.parentNode||t._parent}},x=function t(e){var s,i,n=u(e.childNodes),o=n.length;for(s=0;s<o;s++)i=n[s],i._isSplit?t(i):s&&i.previousSibling&&3===i.previousSibling.nodeType?(i.previousSibling.nodeValue+=3===i.nodeType?i.nodeValue:i.firstChild.nodeValue,e.removeChild(i)):3!==i.nodeType&&(e.insertBefore(i.firstChild,i),e.removeChild(i))},T=function(t,e){return parseFloat(e[t])||0},E=function(t,e,s,n,o,a,r){var l,h,d,u,g,m,_,E,w,O,A,y,D=c(t),j=T("paddingLeft",D),R=-999,S=T("borderBottomWidth",D)+T("borderTopWidth",D),C=T("borderLeftWidth",D)+T("borderRightWidth",D),I=T("paddingTop",D)+T("paddingBottom",D),P=T("paddingLeft",D)+T("paddingRight",D),L=T("fontSize",D)*(e.lineThreshold||.2),M=D.textAlign,k=[],N=[],F=[],B=e.wordDelimiter||" ",U=e.tag?e.tag:e.span?"span":"div",H=e.type||e.split||"chars,words,lines",G=o&&~H.indexOf("lines")?[]:null,V=~H.indexOf("words"),z=~H.indexOf("chars"),X=p(e),W=e.linesClass,q=~(W||"").indexOf("++"),Y=[],K="flex"===D.display,Z=t.style.display;for(q&&(W=W.split("++").join("")),K&&(t.style.display="block"),h=t.getElementsByTagName("*"),d=h.length,g=[],l=0;l<d;l++)g[l]=h[l];if(G||X)for(l=0;l<d;l++)u=g[l],m=u.parentNode===t,(m||X||z&&!V)&&(y=u.offsetTop,G&&m&&Math.abs(y-R)>L&&("BR"!==u.nodeName||0===l)&&(_=[],G.push(_),R=y),X&&(u._x=u.offsetLeft,u._y=y,u._w=u.offsetWidth,u._h=u.offsetHeight),G&&((u._isSplit&&m||!z&&m||V&&m||!V&&u.parentNode.parentNode===t&&!u.parentNode._isSplit)&&(_.push(u),u._x-=j,v(u,t,B)&&(u._wordEnd=!0)),"BR"===u.nodeName&&(u.nextSibling&&"BR"===u.nextSibling.nodeName||0===l)&&G.push([])));for(l=0;l<d;l++)if(u=g[l],m=u.parentNode===t,"BR"!==u.nodeName)if(X&&(w=u.style,V||m||(u._x+=u.parentNode._x,u._y+=u.parentNode._y),w.left=u._x+"px",w.top=u._y+"px",w.position="absolute",w.display="block",w.width=u._w+1+"px",w.height=u._h+"px"),!V&&z)if(u._isSplit){u._next=h=u.nextSibling,u.parentNode.appendChild(u);while(h&&3===h.nodeType&&" "===h.textContent)u._next=h.nextSibling,u.parentNode.appendChild(h),h=h.nextSibling}else u.parentNode._isSplit?(u._parent=u.parentNode,!u.previousSibling&&u.firstChild&&(u.firstChild._isFirst=!0),u.nextSibling&&" "===u.nextSibling.textContent&&!u.nextSibling.nextSibling&&Y.push(u.nextSibling),u._next=u.nextSibling&&u.nextSibling._isFirst?null:u.nextSibling,u.parentNode.removeChild(u),g.splice(l--,1),d--):m||(y=!u.nextSibling&&v(u.parentNode,t,B),u.parentNode._parent&&u.parentNode._parent.appendChild(u),y&&u.parentNode.appendChild(i.createTextNode(" ")),"span"===U&&(u.style.display="inline"),k.push(u));else u.parentNode._isSplit&&!u._isSplit&&""!==u.innerHTML?N.push(u):z&&!u._isSplit&&("span"===U&&(u.style.display="inline"),k.push(u));else G||X?(u.parentNode&&u.parentNode.removeChild(u),g.splice(l--,1),d--):V||t.appendChild(u);l=Y.length;while(--l>-1)Y[l].parentNode.removeChild(Y[l]);if(G){X&&(O=i.createElement(U),t.appendChild(O),A=O.offsetWidth+"px",y=O.offsetParent===t?0:t.offsetLeft,t.removeChild(O)),w=t.style.cssText,t.style.cssText="display:none;";while(t.firstChild)t.removeChild(t.firstChild);for(E=" "===B&&(!X||!V&&!z),l=0;l<G.length;l++){for(_=G[l],O=i.createElement(U),O.style.cssText="display:block;text-align:"+M+";position:"+(X?"absolute;":"relative;"),W&&(O.className=W+(q?l+1:"")),F.push(O),d=_.length,h=0;h<d;h++)"BR"!==_[h].nodeName&&(u=_[h],O.appendChild(u),E&&u._wordEnd&&O.appendChild(i.createTextNode(" ")),X&&(0===h&&(O.style.top=u._y+"px",O.style.left=j+y+"px"),u.style.top="0px",y&&(u.style.left=u._x-y+"px")));0===d?O.innerHTML="&nbsp;":V||z||(x(O),b(O,String.fromCharCode(160)," ")),X&&(O.style.width=A,O.style.height=u._h+"px"),t.appendChild(O)}t.style.cssText=w}X&&(r>t.clientHeight&&(t.style.height=r-I+"px",t.clientHeight<r&&(t.style.height=r+S+"px")),a>t.clientWidth&&(t.style.width=a-P+"px",t.clientWidth<a&&(t.style.width=a+C+"px"))),K&&(Z?t.style.display=Z:t.style.removeProperty("display")),f(s,k),V&&f(n,N),f(o,F)},w=function(t,n,o,l){var c,h,d,u,m,_,f,v,x=n.tag?n.tag:n.span?"span":"div",T=n.type||n.split||"chars,words,lines",E=~T.indexOf("chars"),w=p(n),O=n.wordDelimiter||" ",A=" "!==O?"":w?"&#173; ":" ",y="</"+x+">",D=1,j=n.specialChars?"function"===typeof n.specialChars?n.specialChars:g:null,R=i.createElement("div"),S=t.parentNode;for(S.insertBefore(R,t),R.textContent=t.nodeValue,S.removeChild(t),t=R,c=s(t),f=-1!==c.indexOf("<"),!1!==n.reduceWhiteSpace&&(c=c.replace(r," ").replace(a,"")),f&&(c=c.split("<").join("{{LT}}")),m=c.length,h=(" "===c.charAt(0)?A:"")+o(),d=0;d<m;d++)if(_=c.charAt(d),j&&(v=j(c.substr(d),n.specialChars)))_=c.substr(d,v||1),h+=E&&" "!==_?l()+_+"</"+x+">":_,d+=v-1;else if(_===O&&c.charAt(d-1)!==O&&d){h+=D?y:"",D=0;while(c.charAt(d+1)===O)h+=A,d++;d===m-1?h+=A:")"!==c.charAt(d+1)&&(h+=A+o(),D=1)}else"{"===_&&"{{LT}}"===c.substr(d,6)?(h+=E?l()+"{{LT}}</"+x+">":"{{LT}}",d+=5):_.charCodeAt(0)>=55296&&_.charCodeAt(0)<=56319||c.charCodeAt(d+1)>=65024&&c.charCodeAt(d+1)<=65039?(u=((c.substr(d,12).split(e)||[])[1]||"").length||2,h+=E&&" "!==_?l()+c.substr(d,u)+"</"+x+">":c.substr(d,u),d+=u-1):h+=E&&" "!==_?l()+_+"</"+x+">":_;t.outerHTML=h+(D?y:""),f&&b(S,"{{LT}}","<")},O=function t(e,s,i,n){var o,a,r=u(e.childNodes),l=r.length,h=p(s);if(3!==e.nodeType||l>1){for(s.absolute=!1,o=0;o<l;o++)a=r[o],a._next=a._isFirst=a._parent=a._wordEnd=null,(3!==a.nodeType||/\S+/.test(a.nodeValue))&&(h&&3!==a.nodeType&&"inline"===c(a).display&&(a.style.display="inline-block",a.style.position="relative"),a._isSplit=!0,t(a,s,i,n));return s.absolute=h,void(e._isSplit=!0)}w(e,s,i,n)},A=function(){function t(t,e){o||l(),this.elements=u(t),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=e||{},this.split(e)}var e=t.prototype;return e.split=function(t){this.isSplit&&this.revert(),this.vars=t=t||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;var e,s,i,n=this.elements.length,o=t.tag?t.tag:t.span?"span":"div",a=_(t.wordsClass,o),r=_(t.charsClass,o);while(--n>-1)i=this.elements[n],this._originals[n]=i.innerHTML,e=i.clientHeight,s=i.clientWidth,O(i,t,a,r),E(i,t,this.chars,this.words,this.lines,s,e);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},e.revert=function(){var t=this._originals;if(!t)throw"revert() call wasn't scoped properly.";return this.elements.forEach((function(e,s){return e.innerHTML=t[s]})),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},t.create=function(e,s){return new t(e,s)},t}();A.version="3.10.4",t.SplitText=A,t.default=A,Object.defineProperty(t,"__esModule",{value:!0})}))},"691a":function(t,e){var s=function(t){var e="";return e+="\n{\n  vec3 lightPositionWS                    = uLSpotPositions  ["+t.index+"]    ;\n  mediump vec3 lightColor                 = uLSpotColors     ["+t.index+"].rgb;\n\n  vec3 lightVector = lightPositionWS - geometryData.worldPos;\n  float distanceSqr = dot(lightVector, lightVector);\n\n  mediump vec3 lightDirection = vec3(lightVector * inversesqrt(distanceSqr));\n\n\n\n  mediump float NdotL = sdot(geometryData.worldNrm, lightDirection);\n  mediump vec3 inputLight = lightColor * Lightmap["+t.index+"];\n\n\n  vec3 halfDir = normalize(lightDirection + geometryData.viewDir);\n  float NoH = saturate(dot(geometryData.worldNrm, halfDir));\n  mediump float LoH = sdot(lightDirection, halfDir);\n  float d = NoH * NoH * brdfData.roughness2MinusOne + 1.00001;\n  mediump float LoH2 = LoH * LoH;\n  mediump float specularTerm = brdfData.roughness2 / ((d * d) * max(0.1, LoH2) * brdfData.normalizationTerm);\n  mediump vec3 color = specularTerm * brdfData.specular;// + brdfData.diffuse;\n\n  lightingData.lightingColor += color * inputLight;\n\n}",e};s.toString=s,t.exports=s},6921:function(t,e,s){"use strict";s("e6a1")},6977:function(t,e,s){"use strict";s("83b3")},"6a4c":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_3_husband_baumann_L0.jpg.etc.339d1164.ktx"},"6b15":function(t,e){var s=function(t){var e="";return e+="attribute vec3 aPosition;\nattribute vec3 aDirection;\nattribute vec3 aNormal;\n\nuniform mat4 uMVP;\n\nvarying vec3 vView;\n\nvoid main(void){\n\n  gl_Position = uMVP * vec4(aPosition, 1.0);\n  gl_Position.z = 0.01;\n  vView = aPosition;\n\n}",e};s.toString=s,t.exports=s},"6b8e":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_8_child_syberg_L0.jpg.dxt.9bbbae40.ktx"},"6c43":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_9_wife_kobke_L0.jpg.astc.8624c28b.ktx"},"6e58":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_12_gertrud_juel_L0.jpg.dxt.fbf83e42.ktx"},"703d":function(t,e,s){t.exports=s.p+"assets/webgl/texts_spritesheet.jpg.pvr.445f45d1.ktx"},"72d1":function(t,e,s){"use strict";s("2f3f")},7409:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_10_fader_svendsen_L0.jpg.dxt.db2f2582.ktx"},7519:function(t,e,s){"use strict";s("45c6")},"75b4":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_2_knitting_bendz_L0.jpg.etc.798a2769.ktx"},"75e1":function(t,e,s){"use strict";s("31c5")},"760c":function(t,e){var s=function(t){var e="";return e+="\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord0;\n\nuniform mat4 uMVP;\n\nvoid main( void ){\n  gl_Position = uMVP * vec4( aPosition.x, 0.0, aPosition.y, 1.0 );\n  vTexCoord0 = aTexCoord;\n}\n",e};s.toString=s,t.exports=s},"76ef":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_10_fruits_roed_L0.jpg.astc.d6ff9cec.ktx"},"770d":function(t,e){var s=function(t){var e="";return e+="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\n\nuniform mat4 uMVP;\n\nvarying vec2 vTexCoord;\n\nvoid main(void){\n\n  gl_Position = uMVP * vec4(aPosition, 1.0);\n\n  vTexCoord = aTexCoord;\n  \n}",e};s.toString=s,t.exports=s},"778e":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_11_kreuger_bergh_L0.jpg.dxt.a26228ca.ktx"},"78c5":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_11_kreuger_bergh_L0.jpg.etc.ba3fd622.ktx"},"7b16":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_10_fader_svendsen_L0.4f57d64c.jpg"},"7ceb":function(t,e){var s=function(t){var e="";return e+="uniform vec4 uColor;\n\n// varying vec2 vTexCoord;\n\nvoid main(void){\n\n  gl_FragColor = vec4(uColor);\n  \n}",e};s.toString=s,t.exports=s},"7d5b":function(t,e){var s=function(t){var e="";return e+="precision lowp float;\n\nvarying vec2 vTexCoord0;\nuniform sampler2D tTex;\n\nvarying vec2 vHazeTexCoord1;\nvarying vec2 vHazeTexCoord2;\nvarying vec2 vHazeDiscardCoords;\n\nuniform float uHazeMix;\nuniform vec3 uTint;\nuniform vec3 uLineColor;\nuniform float uIntensity;\nuniform float uLineIntensity;\n\n#define LRADIUS 0.17\n// #define LCOLOR vec3(1.,0.992,0.753)\n\nvoid main(void){\n  float glow = texture2D( tTex, vTexCoord0 ).r;\n\n  float dl = 1.0 - step( 0.5, length(vHazeDiscardCoords) );\n  float haze = dl * mix(texture2D( tTex, vHazeTexCoord1 ).g, texture2D( tTex, vHazeTexCoord2 ).g, uHazeMix);\n  // gl_FragColor = vec4( vec3(1.0), c.r );\n\n  // circle whan selected\n  float line = smoothstep( 0.003, 0.0, abs( length(vTexCoord0-0.5) - LRADIUS ) );\n  line = pow(line, .3);\n\n\n  gl_FragColor = vec4( uTint * vec3( (glow + haze)*uIntensity )    + uLineColor * (line*uLineIntensity) , 1.0 );\n}\n",e};s.toString=s,t.exports=s},"7eb8":function(t,e,s){t.exports=s.p+"assets/webgl/texts_spritesheet.jpg.astc.0b3b5e86.ktx"},"7ee8":function(t,e,s){"use strict";s("1c20")},"7ef8":function(t,e){var s=function(t){var e="";return e+="precision lowp float;\n\nvarying vec2 vTexCoord0;\n\nuniform sampler2D tTex;\nuniform vec3 uColor;\n\nvoid main(void){\n  \n  float smoke =  texture2D( tTex, vTexCoord0 ).r;\n  gl_FragColor = vec4( uColor, smoke );\n}\n",e};s.toString=s,t.exports=s},"7f38":function(t,e){var s=function(t){var e="";return e+="\nvarying vec2 vTexCoord0;\n\nuniform sampler2D tTex;\n\nvoid main(void){\n  \n  vec4 tex = texture2D( tTex, vTexCoord0 );\n  gl_FragColor.rgb = tex.rgb;\n  gl_FragColor.a = tex.a;\n  // gl_FragColor.rgb = vec3(tex.a);\n  // gl_FragColor.a = 1.0;\n\n}\n",e};s.toString=s,t.exports=s},"802c":function(t,e,s){},8076:function(t,e,s){},"813d":function(t,e){var s=function(t){var e="";return e+="\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nuniform mat4 uIMVP;\nuniform float uTime;\n\nvarying vec3 vView;\nvarying vec2 vTexcoord;\n\nvoid main(void){\n\n  gl_Position.xy = aPosition;\n  gl_Position.zw = vec2(1.0,1.0);\n\n  vec4 pos = vec4(aPosition.xy, 1.0, 1.0);\n\n  vView = (uIMVP * pos).xyz;\n  vView.x += uTime;\n  vTexcoord = aTexCoord * 20.0;\n\n}",e};s.toString=s,t.exports=s},"81f6":function(t,e,s){},"826d":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_11_freunds_wurden_L0.jpg.dxt.c0e7c49b.ktx"},"829f":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_1_schandorph_kroyer_L0.jpg.dxt.0f53248c.ktx"},"83b3":function(t,e,s){},"84e1":function(t,e,s){"use strict";s("fc8f")},8534:function(t,e,s){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+s("f5de")()+"\n#pragma SLOT pv\n\nIN vec3 aPosition;\nIN vec3 aNormal;\n\nuniform mat4 uWorldMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uVP;\n\nmat3 toMat3(mat4 m4) {\n  return mat3(\n      m4[0][0], m4[0][1], m4[0][2],\n      m4[1][0], m4[1][1], m4[1][2],\n      m4[2][0], m4[2][1], m4[2][2]);\n}\n\n\nOUT vec2 vTexCoord;\nOUT vec3 vWorldPosition;\nOUT vec3 vWorldNormal;\nOUT vec3 vViewNormal;\n\nvec3 rotate( mat4 m, vec3 v )\n{\n  return m[0].xyz*v.x + m[1].xyz*v.y + m[2].xyz*v.z;\n}\n\nvoid main(void){\n\n  #pragma SLOT v\n\n  vec3 worldPosition = (uWorldMatrix * vec4(aPosition, 1.0)).xyz;\n  gl_Position = uProjectionMatrix * uViewMatrix * vec4(worldPosition, 1.0);\n  vWorldPosition = worldPosition;\n\n  vWorldNormal = normalize( rotate( uWorldMatrix, aNormal ) );\n\n  mat3 viewM3 = toMat3(uViewMatrix);\n  vViewNormal = viewM3 * vWorldNormal;\n\n}",e};i.toString=i,t.exports=i},"879d":function(t,e,s){},"880e":function(t,e,s){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+s("f5de")()+"\n#pragma SLOT pv\n\nIN vec3 aPosition;\nIN vec2 aTexCoord0;\n\nuniform mat4 uWorldMatrix;\nuniform mat4 uVP;\n\nOUT vec3 vTexCoord;\n\nvec3 rotate( mat4 m, vec3 v )\n{\n  return m[0].xyz*v.x + m[1].xyz*v.y + m[2].xyz*v.z;\n}\n\nvoid main(void){\n\n  vec3 worldPosition = (uWorldMatrix * vec4(aPosition, 1.0)).xyz;\n  gl_Position = uVP * vec4(worldPosition, 1.0);\n\n  vTexCoord = vec3(aTexCoord0, (aTexCoord0.x - 0.25) * 2.0);\n}",e};i.toString=i,t.exports=i},"88b9":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_11_freunds_wurden_L0.jpg.astc.9f2fa5b1.ktx"},"88fb":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_4_kaulbach_bendz_L0.jpg.etc.70d5eb89.ktx"},"890c":function(t,e,s){t.exports=s.p+"assets/webgl/main_artwork.jpg.pvr.c7c20217.ktx"},"8a5b":function(t,e,s){t.exports=s.p+"assets/webgl/names.jpg.etc.97fc4341.ktx"},"8a65":function(t,e,s){"use strict";s("4c97")},"8c5f":function(t,e,s){"use strict";s("879d")},"8d04":function(t,e,s){"use strict";s("4ce5")},"8ecf":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_5_petersen_kobke_L0.jpg.dxt.6786c7c8.ktx"},"8f28":function(t,e,s){t.exports=s.p+"img/background-2-mobile.8f0ae25e.png"},"8f52":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_4_pig_thomsen_L0.jpg.dxt.cd0cc4a2.ktx"},9019:function(t,e){var s=function(t){var e="";return e+="precision lowp float;\n\nuniform vec3 uParams;\nuniform vec3 uColor;\n\nvarying vec2 vUVs;\n\n#define OPACITY uParams.z\n\n\nvoid main( void ){\n  float fade = 1.0 - vUVs.x*vUVs.x;\n  // float y = vUVs.y*2.5;\n  // fade *= pow( exp(-y*y), .1);\n  gl_FragColor = vec4(uColor.rgb, fade*OPACITY);\n}",e};s.toString=s,t.exports=s},"905f":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_3_soster_hansen_L0.jpg.5f4d74c0.webp"},9066:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_4_kaulbach_bendz_L0.7c564501.jpg"},"90d0":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_7_lund_jensen_L0.jpg.pvr.3aff236c.ktx"},"90eb":function(t,e,s){"use strict";s("46af")},9183:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_3_husband_baumann_L0.6964c376.jpg"},9197:function(t,e,s){"use strict";s("244e")},9488:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_10_fader_svendsen_L0.jpg.etc.e1dfa20c.ktx"},"95ad":function(t,e,s){},"96eb":function(t,e,s){"use strict";s("386b")},"96ee":function(t,e,s){},9855:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_9_architect_bindesboll_L0.jpg.pvr.c27069b6.ktx"},"98bc":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_10_fruits_roed_L0.jpg.etc.f9c2b74e.ktx"},"99a7":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_2_knitting_bendz_L0.2f467ff4.jpg"},"9a52":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_4_kaulbach_bendz_L0.jpg.pvr.207a148a.ktx"},"9a73":function(t,e,s){t.exports=s.p+"img/about@2x.5dfacd0a.jpg"},"9aa5":function(t,e,s){},"9b11":function(t,e,s){"use strict";s("81f6")},"9d29":function(t,e,s){"use strict";s("adc8")},"9e18":function(t,e,s){"use strict";s("9aa5")},"9f86":function(t,e,s){t.exports=s.p+"assets/webgl/art_1_9_wife_kobke_L0.jpg.dxt.edd6c1fb.ktx"},"9ff7":function(t,e,s){t.exports=s.p+"assets/webgl/art_2_2_gardener_denner_L0.13d8067c.jpg"},a0c4:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_11_kreuger_bergh_L0.jpg.pvr.a8123272.ktx"},a0e6:function(t,e){var s=function(t){var e="";return e+="attribute vec2 aPosition;\n\nuniform mat4 uWorldMatrix;\nuniform mat4 uViewProjMatrix;\nuniform vec3 uCameraWorldPos;\nuniform lowp vec3 uParams;\n\nvarying vec2 vUVs;\n\n#define A_ZPOS aPosition.x\n#define A_SIDE aPosition.y\n\n#define THICKNESS uParams.x*0.5\n#define LENGTH uParams.y\n\nvoid main(void){\n\n  vec3 localPos = vec3(0.0, 0.0, -A_ZPOS*LENGTH);\n  vec3 localDps = vec3(0.0, 0.0, -A_ZPOS*LENGTH+1.0);\n\n  vec3 worldPos = (uWorldMatrix * vec4(localPos, 1.0)).xyz;\n  vec3 worldDps = (uWorldMatrix * vec4(localDps, 1.0)).xyz;\n\n  vec3 wTangent = normalize(worldDps - worldPos);\n\n  vec3 viewDir = normalize(uCameraWorldPos-worldPos);\n  vec3 bitanAxis = normalize( cross( viewDir, wTangent ) );\n\n  bitanAxis = normalize( bitanAxis );\n\n  worldPos += bitanAxis * (THICKNESS*A_SIDE);\n\n  gl_Position = uViewProjMatrix*vec4(worldPos, 1.0);\n\n  vUVs = vec2(A_ZPOS, A_SIDE);\n}",e};s.toString=s,t.exports=s},a0e8:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_1_oldwoman_honthorst_L0.jpg.dd5af9d4.webp"},a1d6:function(t,e){var s=function(t){var e="";return e+="\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord0;\n\nuniform mat4 uMVP;\n\n\nvoid main( void ){\n  gl_Position = uMVP * vec4( aPosition.x, 0.0, aPosition.y, 1.0 );\n  vTexCoord0 = aTexCoord;\n}\n",e};s.toString=s,t.exports=s},a405:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_8_selvportraet_hunaeus_L0.jpg.etc.036a8a5a.ktx"},a4b5:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_1_oldwoman_honthorst_L0.jpg.dxt.41133481.ktx"},a4b9:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_8_child_syberg_L0.d496a9c0.jpg"},a5d4:function(t,e,s){"use strict";s("1cc3")},a5e5:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_1_oldwoman_honthorst_L0.jpg.pvr.2adf2405.ktx"},a5ea:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_3_soster_hansen_L0.jpg.etc.92cf5a3e.ktx"},a708:function(t,e,s){var i={".":"0a4f","./":"0a4f","./index":"0a4f","./index.ts":"0a4f","./intro/art_1_10_fruits_roed_L0.jpg":"f8c6","./intro/art_1_10_fruits_roed_L0.jpg.astc.ktx":"76ef","./intro/art_1_10_fruits_roed_L0.jpg.dxt.ktx":"26c9","./intro/art_1_10_fruits_roed_L0.jpg.etc.ktx":"98bc","./intro/art_1_10_fruits_roed_L0.jpg.pvr.ktx":"f6a1","./intro/art_1_10_fruits_roed_L0.jpg.webp":"d4ad","./intro/art_1_11_freunds_wurden_L0.jpg":"a881","./intro/art_1_11_freunds_wurden_L0.jpg.astc.ktx":"88b9","./intro/art_1_11_freunds_wurden_L0.jpg.dxt.ktx":"826d","./intro/art_1_11_freunds_wurden_L0.jpg.etc.ktx":"1f34","./intro/art_1_11_freunds_wurden_L0.jpg.pvr.ktx":"674d","./intro/art_1_11_freunds_wurden_L0.jpg.webp":"b7c8","./intro/art_1_12_gertrud_juel_L0.jpg":"c456","./intro/art_1_12_gertrud_juel_L0.jpg.astc.ktx":"1da2","./intro/art_1_12_gertrud_juel_L0.jpg.dxt.ktx":"6e58","./intro/art_1_12_gertrud_juel_L0.jpg.etc.ktx":"07df","./intro/art_1_12_gertrud_juel_L0.jpg.pvr.ktx":"d8d7","./intro/art_1_12_gertrud_juel_L0.jpg.webp":"14bb","./intro/art_1_1_oldwoman_honthorst_L0.jpg":"c50d","./intro/art_1_1_oldwoman_honthorst_L0.jpg.astc.ktx":"cd45","./intro/art_1_1_oldwoman_honthorst_L0.jpg.dxt.ktx":"a4b5","./intro/art_1_1_oldwoman_honthorst_L0.jpg.etc.ktx":"e95e","./intro/art_1_1_oldwoman_honthorst_L0.jpg.pvr.ktx":"a5e5","./intro/art_1_1_oldwoman_honthorst_L0.jpg.webp":"a0e8","./intro/art_1_2_knitting_bendz_L0.jpg":"99a7","./intro/art_1_2_knitting_bendz_L0.jpg.astc.ktx":"3ef2","./intro/art_1_2_knitting_bendz_L0.jpg.dxt.ktx":"18d5","./intro/art_1_2_knitting_bendz_L0.jpg.etc.ktx":"75b4","./intro/art_1_2_knitting_bendz_L0.jpg.pvr.ktx":"ea12","./intro/art_1_2_knitting_bendz_L0.jpg.webp":"3566","./intro/art_1_3_soster_hansen_L0.jpg":"ccfd","./intro/art_1_3_soster_hansen_L0.jpg.astc.ktx":"66d8","./intro/art_1_3_soster_hansen_L0.jpg.dxt.ktx":"b55f","./intro/art_1_3_soster_hansen_L0.jpg.etc.ktx":"a5ea","./intro/art_1_3_soster_hansen_L0.jpg.pvr.ktx":"d03e","./intro/art_1_3_soster_hansen_L0.jpg.webp":"905f","./intro/art_1_4_pig_thomsen_L0.jpg":"ad64","./intro/art_1_4_pig_thomsen_L0.jpg.astc.ktx":"d79f","./intro/art_1_4_pig_thomsen_L0.jpg.dxt.ktx":"8f52","./intro/art_1_4_pig_thomsen_L0.jpg.etc.ktx":"35e3","./intro/art_1_4_pig_thomsen_L0.jpg.pvr.ktx":"2756","./intro/art_1_4_pig_thomsen_L0.jpg.webp":"de4c","./intro/art_1_5_saleswoman_metsu_L0.jpg":"e74b","./intro/art_1_5_saleswoman_metsu_L0.jpg.astc.ktx":"c6a8","./intro/art_1_5_saleswoman_metsu_L0.jpg.dxt.ktx":"11f2","./intro/art_1_5_saleswoman_metsu_L0.jpg.etc.ktx":"ba7c","./intro/art_1_5_saleswoman_metsu_L0.jpg.pvr.ktx":"2dd4","./intro/art_1_5_saleswoman_metsu_L0.jpg.webp":"b7de","./intro/art_1_6_lamplight_ring_L0.jpg":"bcf0","./intro/art_1_6_lamplight_ring_L0.jpg.astc.ktx":"5336","./intro/art_1_6_lamplight_ring_L0.jpg.dxt.ktx":"dc3d","./intro/art_1_6_lamplight_ring_L0.jpg.etc.ktx":"3c94","./intro/art_1_6_lamplight_ring_L0.jpg.pvr.ktx":"1325","./intro/art_1_6_lamplight_ring_L0.jpg.webp":"0518","./intro/art_1_7_eldest_hansen_L0.jpg":"11e5","./intro/art_1_7_eldest_hansen_L0.jpg.astc.ktx":"d7a9","./intro/art_1_7_eldest_hansen_L0.jpg.dxt.ktx":"03fb","./intro/art_1_7_eldest_hansen_L0.jpg.etc.ktx":"6614","./intro/art_1_7_eldest_hansen_L0.jpg.pvr.ktx":"fba8","./intro/art_1_7_eldest_hansen_L0.jpg.webp":"2904","./intro/art_1_8_child_syberg_L0.jpg":"a4b9","./intro/art_1_8_child_syberg_L0.jpg.astc.ktx":"f1b4","./intro/art_1_8_child_syberg_L0.jpg.dxt.ktx":"6b8e","./intro/art_1_8_child_syberg_L0.jpg.etc.ktx":"08bd","./intro/art_1_8_child_syberg_L0.jpg.pvr.ktx":"b1a1","./intro/art_1_8_child_syberg_L0.jpg.webp":"2b48","./intro/art_1_9_wife_kobke_L0.jpg":"1f47","./intro/art_1_9_wife_kobke_L0.jpg.astc.ktx":"6c43","./intro/art_1_9_wife_kobke_L0.jpg.dxt.ktx":"9f86","./intro/art_1_9_wife_kobke_L0.jpg.etc.ktx":"32d3","./intro/art_1_9_wife_kobke_L0.jpg.pvr.ktx":"431b","./intro/art_1_9_wife_kobke_L0.jpg.webp":"e69d","./intro/art_2_10_fader_svendsen_L0.jpg":"7b16","./intro/art_2_10_fader_svendsen_L0.jpg.astc.ktx":"158b","./intro/art_2_10_fader_svendsen_L0.jpg.dxt.ktx":"7409","./intro/art_2_10_fader_svendsen_L0.jpg.etc.ktx":"9488","./intro/art_2_10_fader_svendsen_L0.jpg.pvr.ktx":"5191","./intro/art_2_10_fader_svendsen_L0.jpg.webp":"4d644","./intro/art_2_11_kreuger_bergh_L0.jpg":"5137","./intro/art_2_11_kreuger_bergh_L0.jpg.astc.ktx":"4ac0","./intro/art_2_11_kreuger_bergh_L0.jpg.dxt.ktx":"778e","./intro/art_2_11_kreuger_bergh_L0.jpg.etc.ktx":"78c5","./intro/art_2_11_kreuger_bergh_L0.jpg.pvr.ktx":"a0c4","./intro/art_2_11_kreuger_bergh_L0.jpg.webp":"2ff1","./intro/art_2_1_schandorph_kroyer_L0.jpg":"f58e","./intro/art_2_1_schandorph_kroyer_L0.jpg.astc.ktx":"58d2","./intro/art_2_1_schandorph_kroyer_L0.jpg.dxt.ktx":"829f","./intro/art_2_1_schandorph_kroyer_L0.jpg.etc.ktx":"139d","./intro/art_2_1_schandorph_kroyer_L0.jpg.pvr.ktx":"57c2","./intro/art_2_1_schandorph_kroyer_L0.jpg.webp":"bcb0","./intro/art_2_2_gardener_denner_L0.jpg":"9ff7","./intro/art_2_2_gardener_denner_L0.jpg.astc.ktx":"4bb7","./intro/art_2_2_gardener_denner_L0.jpg.dxt.ktx":"3c62","./intro/art_2_2_gardener_denner_L0.jpg.etc.ktx":"38fa","./intro/art_2_2_gardener_denner_L0.jpg.pvr.ktx":"ab01","./intro/art_2_2_gardener_denner_L0.jpg.webp":"35c7","./intro/art_2_3_husband_baumann_L0.jpg":"9183","./intro/art_2_3_husband_baumann_L0.jpg.astc.ktx":"e335","./intro/art_2_3_husband_baumann_L0.jpg.dxt.ktx":"4f9f","./intro/art_2_3_husband_baumann_L0.jpg.etc.ktx":"6a4c","./intro/art_2_3_husband_baumann_L0.jpg.pvr.ktx":"d142","./intro/art_2_3_husband_baumann_L0.jpg.webp":"40fc","./intro/art_2_4_kaulbach_bendz_L0.jpg":"9066","./intro/art_2_4_kaulbach_bendz_L0.jpg.astc.ktx":"bbca","./intro/art_2_4_kaulbach_bendz_L0.jpg.dxt.ktx":"b16d","./intro/art_2_4_kaulbach_bendz_L0.jpg.etc.ktx":"88fb","./intro/art_2_4_kaulbach_bendz_L0.jpg.pvr.ktx":"9a52","./intro/art_2_4_kaulbach_bendz_L0.jpg.webp":"c576","./intro/art_2_5_petersen_kobke_L0.jpg":"1ac0","./intro/art_2_5_petersen_kobke_L0.jpg.astc.ktx":"e13b","./intro/art_2_5_petersen_kobke_L0.jpg.dxt.ktx":"8ecf","./intro/art_2_5_petersen_kobke_L0.jpg.etc.ktx":"1a68","./intro/art_2_5_petersen_kobke_L0.jpg.pvr.ktx":"31b1","./intro/art_2_5_petersen_kobke_L0.jpg.webp":"f25b","./intro/art_2_6_marine_ditlev_L0.jpg":"6338","./intro/art_2_6_marine_ditlev_L0.jpg.astc.ktx":"fef0","./intro/art_2_6_marine_ditlev_L0.jpg.dxt.ktx":"c896","./intro/art_2_6_marine_ditlev_L0.jpg.etc.ktx":"1551","./intro/art_2_6_marine_ditlev_L0.jpg.pvr.ktx":"f62c","./intro/art_2_6_marine_ditlev_L0.jpg.webp":"5024","./intro/art_2_7_lund_jensen_L0.jpg":"e210","./intro/art_2_7_lund_jensen_L0.jpg.astc.ktx":"c6e3","./intro/art_2_7_lund_jensen_L0.jpg.dxt.ktx":"08bb","./intro/art_2_7_lund_jensen_L0.jpg.etc.ktx":"04da","./intro/art_2_7_lund_jensen_L0.jpg.pvr.ktx":"90d0","./intro/art_2_7_lund_jensen_L0.jpg.webp":"c95b","./intro/art_2_8_selvportraet_hunaeus_L0.jpg":"314e","./intro/art_2_8_selvportraet_hunaeus_L0.jpg.astc.ktx":"ee26","./intro/art_2_8_selvportraet_hunaeus_L0.jpg.dxt.ktx":"a961","./intro/art_2_8_selvportraet_hunaeus_L0.jpg.etc.ktx":"a405","./intro/art_2_8_selvportraet_hunaeus_L0.jpg.pvr.ktx":"e98d","./intro/art_2_8_selvportraet_hunaeus_L0.jpg.webp":"fd92","./intro/art_2_9_architect_bindesboll_L0.jpg":"14f3","./intro/art_2_9_architect_bindesboll_L0.jpg.astc.ktx":"db97","./intro/art_2_9_architect_bindesboll_L0.jpg.dxt.ktx":"4a9c","./intro/art_2_9_architect_bindesboll_L0.jpg.etc.ktx":"d747","./intro/art_2_9_architect_bindesboll_L0.jpg.pvr.ktx":"9855","./intro/art_2_9_architect_bindesboll_L0.jpg.webp":"5de7","./intro/intro.glb":"204c","./intro/main_artwork.jpg":"a7a6","./intro/main_artwork.jpg.astc.ktx":"ab20","./intro/main_artwork.jpg.dxt.ktx":"dc77","./intro/main_artwork.jpg.etc.ktx":"b7e8","./intro/main_artwork.jpg.pvr.ktx":"890c","./intro/main_artwork.jpg.webp":"df3c","./intro/names.jpg":"db8b","./intro/names.jpg.astc.ktx":"b131","./intro/names.jpg.dxt.ktx":"bb60","./intro/names.jpg.etc.ktx":"8a5b","./intro/names.jpg.pvr.ktx":"c7a1","./intro/names.jpg.webp":"27e5","./intro/texts_spritesheet.jpg":"ad03","./intro/texts_spritesheet.jpg.astc.ktx":"7eb8","./intro/texts_spritesheet.jpg.dxt.ktx":"c6f5","./intro/texts_spritesheet.jpg.etc.ktx":"3089","./intro/texts_spritesheet.jpg.pvr.ktx":"703d","./intro/texts_spritesheet.jpg.webp":"d0d5","./lensflares/rainbow-ring.png":"5b1e"};function n(t){var e=o(t);return s(e)}function o(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=o,t.exports=n,n.id="a708"},a731:function(t,e,s){},a77e:function(t,e,s){"use strict";s.r(e);var i=s("7a23");const n={width:"166",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o=Object(i["k"])('<g clip-path="url(#clip0_1816_656)"><path d="M124.612 9.525L119.586.501h-2.957v14.83h2.411V3.965l4.408 7.87h2.262l4.407-7.87V15.33h2.413V.5h-2.892l-5.026 9.025zm18.256-4.76c-.766-.498-1.678-.748-2.739-.748-1.067 0-2.012.246-2.834.741a5.169 5.169 0 00-1.927 2.055c-.462.875-.693 1.88-.693 3.018 0 1.123.238 2.119.709 2.988a5.181 5.181 0 001.979 2.038c.847.49 1.828.737 2.946.737 1.85 0 3.41-.579 4.685-1.736l-1.281-1.557c-.456.43-.943.752-1.462.964-.518.212-1.138.318-1.856.318-.896 0-1.638-.259-2.226-.778-.588-.52-.955-1.231-1.105-2.135h8.186v-.656c0-1.208-.206-2.26-.619-3.156-.41-.899-1-1.596-1.763-2.094zm-5.8 4.157c.143-.883.482-1.585 1.018-2.108.536-.523 1.204-.785 2.001-.783.819 0 1.481.256 1.985.767.505.512.794 1.22.865 2.124h-5.869zm13.435-7.88h-2.326v3.242h-2.221v1.96h2.22v5.242c0 2.726 1.255 4.089 3.767 4.089.349.002.697-.023 1.041-.075.302-.043.599-.106.891-.19v-1.94c-.256.043-.49.077-.704.102a6.883 6.883 0 01-.78.038c-.69 0-1.177-.177-1.462-.53-.284-.353-.426-.943-.427-1.77V6.242h3.373v-1.96h-3.373l.001-3.24zm13.213 3.24v1.42a4.053 4.053 0 00-1.504-1.245c-.605-.293-1.287-.44-2.05-.44-1.01 0-1.905.246-2.684.741-.78.495-1.39 1.176-1.83 2.044-.442.869-.662 1.867-.662 2.998 0 1.123.217 2.12.651 2.992.434.872 1.03 1.557 1.787 2.055.758.497 1.627.747 2.609.747.797 0 1.508-.158 2.135-.471a4.105 4.105 0 001.548-1.34v1.546H166V4.282h-2.284zm-.042 7.182a3.12 3.12 0 01-1.217 1.484c-.563.368-1.202.55-1.921.55-.974 0-1.746-.332-2.315-.995s-.853-1.564-.853-2.7c0-1.13.295-2.026.886-2.691s1.383-.995 2.38-.995c.704 0 1.325.182 1.862.546.538.363.931.86 1.179 1.488l-.001 3.313zM104.976 0c-1.94 0-3.455 1.45-4.829 3.292-.002-.004-.005-.005-.006-.008-.055-.07-.11-.139-.165-.206l-.011-.013c-.027-.032-.054-.064-.079-.096l-.003-.003c-.028-.033-.055-.068-.083-.1a.068.068 0 01-.01-.011c-.025-.03-.05-.061-.077-.09-.001-.004-.004-.005-.006-.008l-.082-.096-.006-.006-.076-.087-.009-.011-.082-.092-.001-.002-.079-.086-.01-.01a18.8 18.8 0 00-.16-.17l-.01-.013c-.052-.055-.106-.11-.158-.162a1.137 1.137 0 01-.01-.011l-.158-.156-.011-.01a3.198 3.198 0 00-.076-.071l-.003-.003c-.026-.025-.051-.05-.078-.074a.041.041 0 00-.01-.008l-.072-.065c-.003-.002-.005-.005-.008-.006l-.078-.07-.007-.007a1.327 1.327 0 00-.081-.07c-.027-.022-.052-.045-.077-.067l-.004-.003-.073-.061-.011-.01a5.202 5.202 0 00-.153-.121l-.012-.01-.151-.115-.013-.01c-.05-.037-.1-.072-.15-.107-.006-.003-.009-.004-.013-.008-.024-.015-.048-.032-.071-.048l-.005-.003a2.096 2.096 0 00-.075-.05L97.623.85l-.068-.043-.01-.007c-.025-.015-.05-.03-.075-.047l-.01-.006c-.021-.014-.045-.026-.067-.04L97.383.7l-.076-.043c-.002-.002-.003-.002-.007-.003l-.069-.04-.014-.007-.075-.04a3.163 3.163 0 00-.074-.038L97.054.52a6.506 6.506 0 00-.15-.072L96.89.443a1.357 1.357 0 00-.071-.031L96.815.41c-.025-.01-.05-.022-.076-.03l-.014-.007c-.022-.01-.044-.019-.067-.027-.004-.001-.007-.001-.008-.003l-.074-.028-.014-.005-.065-.023-.012-.005-.074-.025-.013-.004a1.021 1.021 0 00-.064-.02l-.016-.005a4.146 4.146 0 01-.074-.024l-.01-.003a57.735 57.735 0 00-.065-.018l-.017-.005-.076-.02-.005-.002c-.023-.006-.047-.01-.069-.017l-.017-.005c-.05-.012-.1-.023-.151-.033l-.019-.003-.07-.014-.005-.001a1.265 1.265 0 00-.076-.013l-.019-.003a.788.788 0 01-.064-.01l-.013-.002-.075-.011-.017-.002-.063-.008-.016-.001-.076-.008-.015-.002a.899.899 0 01-.065-.006l-.017-.001-.077-.005h-.013c-.022-.002-.043-.003-.066-.003-.006 0-.012 0-.02-.002-.025-.001-.052-.001-.077-.003h-.01l-.07-.001h-.1C90.95 0 88 4.97 88 10.232c0 3.292 1.605 5.368 4.293 5.368 1.935 0 3.326-.905 5.8-5.196l1.74-3.052c.248.398.509.827.784 1.287l.174.29v-.001l.988 1.647c2.26 3.752 3.517 5.025 5.8 5.025 2.618 0 4.075-2.104 4.075-5.465C111.653 4.627 108.638 0 104.976 0zm-8.77 9.241c-2.005 3.12-2.698 3.82-3.816 3.82-1.149 0-1.831-1.002-1.831-2.787 0-3.819 1.92-7.725 4.206-7.725h.066a.43.43 0 01.046.002h.004c.018 0 .033.001.05.003h.013c.014.001.029.001.043.003h.01l.05.005.012.001.04.005.012.001.049.007.012.001a.37.37 0 01.041.006l.013.002.048.008.011.001.04.008c.004.002.01.002.014.003l.049.011.009.002.04.009.015.003.047.013.008.001c.014.003.028.008.042.013l.016.004.043.013.009.003.046.016.015.006.038.014.013.005c.015.006.03.01.045.017.007.001.011.004.017.006l.035.014.016.006.044.019.019.008.031.014.019.008.044.021.019.01.03.015.02.011.043.024.02.01.028.016a.543.543 0 01.055.031.584.584 0 01.032.02l.025.015.025.015.025.016.041.026c.008.005.016.01.022.016l.027.019.02.014.049.034.017.013.03.021.016.013.061.047.006.004a.491.491 0 01.033.027l.013.01c.036.029.07.059.107.088l.01.008c.037.031.075.064.112.098l.005.003c.52.464 1.082 1.13 1.736 2.061a288.565 288.565 0 00-2.42 3.725zm11.426 3.82c-1.143 0-1.688-.748-3.857-4.211l-1.387-2.296a48.35 48.35 0 00-1.081-1.673c1.25-1.915 2.281-2.869 3.507-2.869 2.548 0 4.585 3.723 4.585 8.295 0 1.742-.576 2.755-1.767 2.755z" fill="#fff"></path></g><path d="M.702 4.736V3.632h6.144v1.104H4.398V11H3.15V4.736H.702zm10.45 1.596c.472.52.708 1.188.708 2.004 0 .816-.236 1.484-.708 2.004-.464.52-1.072.78-1.824.78s-1.364-.26-1.836-.78c-.464-.52-.696-1.188-.696-2.004 0-.816.232-1.484.696-2.004.472-.52 1.084-.78 1.836-.78s1.36.26 1.824.78zm-.84 3.276c.232-.328.348-.752.348-1.272s-.116-.94-.348-1.26c-.232-.328-.56-.492-.984-.492-.424 0-.752.164-.984.492-.232.32-.348.74-.348 1.26s.116.944.348 1.272c.232.32.56.48.984.48.424 0 .752-.16.984-.48zm6.16 1.032v-.24a1.566 1.566 0 01-.565.396 1.97 1.97 0 01-.791.156c-.752 0-1.352-.264-1.8-.792-.449-.528-.673-1.164-.673-1.908s.224-1.38.672-1.908c.449-.528 1.049-.792 1.8-.792.288 0 .553.056.793.168.248.104.435.232.563.384v-.432h1.2v4.884c0 .864-.232 1.512-.695 1.944-.456.44-1.06.66-1.812.66-.672 0-1.22-.168-1.644-.504-.416-.328-.656-.784-.72-1.368h1.163c.12.592.52.888 1.2.888.872 0 1.308-.512 1.308-1.536zm0-1.38V7.244a1.223 1.223 0 00-.469-.456 1.345 1.345 0 00-.684-.18c-.448 0-.804.152-1.068.456-.255.304-.383.7-.383 1.188s.127.884.383 1.188c.264.304.62.456 1.069.456.248 0 .476-.06.683-.18.209-.12.364-.272.468-.456zm5.972.084h1.104c-.096.544-.34.976-.732 1.296-.384.32-.888.48-1.512.48-.744 0-1.352-.256-1.824-.768-.464-.512-.696-1.18-.696-2.004 0-.8.236-1.464.708-1.992a2.28 2.28 0 011.788-.804c.736 0 1.304.24 1.704.72.408.472.612 1.108.612 1.908v.432H19.96c.016.464.144.832.384 1.104.248.264.568.396.96.396.632 0 1.012-.256 1.14-.768zM21.292 6.56c-.336 0-.62.104-.852.312-.224.2-.372.488-.444.864h2.412c-.008-.344-.108-.624-.3-.84-.192-.224-.464-.336-.816-.336zm3.683 3V6.668h-.84v-.996h.84V4.244h1.2v1.428h1.2v.996h-1.2v2.76c0 .416.212.624.636.624.256 0 .484-.072.684-.216v1.092c-.216.128-.516.192-.9.192-.496 0-.892-.132-1.188-.396-.288-.264-.432-.652-.432-1.164zM28.72 11V3.2h1.2v2.976c.36-.416.84-.624 1.44-.624.592 0 1.052.18 1.38.54.336.36.504.84.504 1.44V11h-1.2V7.736c0-.344-.084-.612-.252-.804-.168-.192-.42-.288-.756-.288-.264 0-.5.08-.708.24a1.05 1.05 0 00-.408.612V11h-1.2zm9.229-1.656h1.104c-.096.544-.34.976-.732 1.296-.384.32-.888.48-1.512.48-.744 0-1.352-.256-1.824-.768-.464-.512-.696-1.18-.696-2.004 0-.8.236-1.464.708-1.992a2.28 2.28 0 011.788-.804c.736 0 1.304.24 1.704.72.408.472.612 1.108.612 1.908v.432h-3.636c.016.464.144.832.384 1.104.248.264.568.396.96.396.632 0 1.012-.256 1.14-.768zM36.796 6.56c-.336 0-.62.104-.852.312-.224.2-.372.488-.444.864h2.412c-.008-.344-.108-.624-.3-.84-.192-.224-.464-.336-.816-.336zm6.383-.912v1.236c-.168-.12-.404-.18-.708-.18a1.1 1.1 0 00-.684.228.978.978 0 00-.384.624V11h-1.2V5.672h1.2v.552c.104-.2.264-.36.48-.48.216-.128.452-.192.708-.192.28 0 .476.032.588.096zm7.482.024l.936 3.78 1.032-3.78h1.165L52.245 11h-1.2l-.949-3.708L49.15 11h-1.2L46.4 5.672h1.2l1.032 3.78.936-3.78h1.092zm5.297 0V11h-1.2V5.672h1.2zm-.084-2.124a.686.686 0 01.228.516c0 .2-.076.372-.228.516a.704.704 0 01-.516.216.745.745 0 01-.528-.216.704.704 0 01-.216-.516c0-.2.072-.372.216-.516a.745.745 0 01.528-.216c.2 0 .372.072.516.216zm1.843 6.012V6.668h-.84v-.996h.84V4.244h1.2v1.428h1.2v.996h-1.2v2.76c0 .416.212.624.636.624.256 0 .484-.072.684-.216v1.092c-.216.128-.516.192-.9.192-.496 0-.892-.132-1.188-.396-.288-.264-.432-.652-.432-1.164zM61.461 11V3.2h1.2v2.976c.36-.416.84-.624 1.44-.624.592 0 1.052.18 1.38.54.336.36.504.84.504 1.44V11h-1.2V7.736c0-.344-.084-.612-.252-.804-.168-.192-.42-.288-.756-.288-.264 0-.5.08-.708.24a1.05 1.05 0 00-.408.612V11h-1.2z" fill="#fff"></path><defs><clipPath id="clip0_1816_656"><path fill="#fff" transform="translate(88)" d="M0 0h78v15.6H0z"></path></clipPath></defs>',3),a=[o];function r(t,e){return Object(i["D"])(),Object(i["i"])("svg",n,a)}var l=s("b9a6"),c=s.n(l);const h={},d=c()(h,[["render",r]]);e["default"]=d},a7a6:function(t,e,s){t.exports=s.p+"assets/webgl/main_artwork.f88b28af.jpg"},a881:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_11_freunds_wurden_L0.1c6ea8cc.jpg"},a961:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_8_selvportraet_hunaeus_L0.jpg.dxt.9413d94a.ktx"},ab01:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_2_gardener_denner_L0.jpg.pvr.d9a44cc3.ktx"},ab20:function(t,e,s){t.exports=s.p+"assets/webgl/main_artwork.jpg.astc.8f3b1a88.ktx"},ad03:function(t,e,s){t.exports=s.p+"assets/webgl/texts_spritesheet.ae16ce1d.jpg"},ad64:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_4_pig_thomsen_L0.cb0de239.jpg"},adc8:function(t,e,s){},af0b:function(t,e,s){},b116:function(t,e){var s=function(t){var e="";return e+="uniform sampler2D tTexture;\n\nvarying vec2 vTexCoord;\n\nvoid main(void){\n\n  gl_FragColor = texture2D(tTexture, vTexCoord);\n  \n}",e};s.toString=s,t.exports=s},b131:function(t,e,s){t.exports=s.p+"assets/webgl/names.jpg.astc.20cc8c85.ktx"},b133:function(t,e,s){},b16d:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_4_kaulbach_bendz_L0.jpg.dxt.2ae46541.ktx"},b1a1:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_8_child_syberg_L0.jpg.pvr.76bd2ceb.ktx"},b39a:function(t,e,s){},b3cd:function(t,e,s){"use strict";s("1d69")},b55f:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_3_soster_hansen_L0.jpg.dxt.d1a3b296.ktx"},b77a:function(t,e,s){"use strict";s("35fd")},b7c8:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_11_freunds_wurden_L0.jpg.85bcf5d0.webp"},b7de:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_5_saleswoman_metsu_L0.jpg.b99e32df.webp"},b7e8:function(t,e,s){t.exports=s.p+"assets/webgl/main_artwork.jpg.etc.2ceed5f0.ktx"},b8d6:function(t,e,s){(function(t,s){s(e)})(0,(function(t){"use strict";var e=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,s=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,i=Math.PI/180,n=Math.sin,o=Math.cos,a=Math.abs,r=Math.sqrt,l=function(t){return"number"===typeof t},c=1e5,h=function(t){return Math.round(t*c)/c||0};function d(t,e,s,i,n,o,a){var r,l,c,h,d,u=t.length;while(--u>-1)for(r=t[u],l=r.length,c=0;c<l;c+=2)h=r[c],d=r[c+1],r[c]=h*e+d*i+o,r[c+1]=h*s+d*n+a;return t._dirty=1,t}function u(t,e,s,l,c,h,d,u,p){if(t!==u||e!==p){s=a(s),l=a(l);var g=c%360*i,m=o(g),_=n(g),b=Math.PI,f=2*b,v=(t-u)/2,x=(e-p)/2,T=m*v+_*x,E=-_*v+m*x,w=T*T,O=E*E,A=w/(s*s)+O/(l*l);A>1&&(s=r(A)*s,l=r(A)*l);var y=s*s,D=l*l,j=(y*D-y*O-D*w)/(y*O+D*w);j<0&&(j=0);var R=(h===d?-1:1)*r(j),S=R*(s*E/l),C=R*(-l*T/s),I=(t+u)/2,P=(e+p)/2,L=I+(m*S-_*C),M=P+(_*S+m*C),k=(T-S)/s,N=(E-C)/l,F=(-T-S)/s,B=(-E-C)/l,U=k*k+N*N,H=(N<0?-1:1)*Math.acos(k/r(U)),G=(k*B-N*F<0?-1:1)*Math.acos((k*F+N*B)/r(U*(F*F+B*B)));isNaN(G)&&(G=b),!d&&G>0?G-=f:d&&G<0&&(G+=f),H%=f,G%=f;var V,z=Math.ceil(a(G)/(f/4)),X=[],W=G/z,q=4/3*n(W/2)/(1+o(W/2)),Y=m*s,K=_*s,Z=_*-l,$=m*l;for(V=0;V<z;V++)c=H+V*W,T=o(c),E=n(c),k=o(c+=W),N=n(c),X.push(T-q*E,E+q*T,k+q*N,N-q*k,k,N);for(V=0;V<X.length;V+=2)T=X[V],E=X[V+1],X[V]=T*Y+E*Z+L,X[V+1]=T*K+E*$+M;return X[V-2]=u,X[V-1]=p,X}}function p(t){var i,n,o,r,l,c,h,d,p,g,m,_,b,f,v,x=(t+"").replace(s,(function(t){var e=+t;return e<1e-4&&e>-1e-4?0:e})).match(e)||[],T=[],E=0,w=0,O=2/3,A=x.length,y=0,D="ERROR: malformed path: "+t,j=function(t,e,s,i){g=(s-t)/3,m=(i-e)/3,h.push(t+g,e+m,s-g,i-m,s,i)};if(!t||!isNaN(x[0])||isNaN(x[1]))return console.log(D),T;for(i=0;i<A;i++)if(b=l,isNaN(x[i])?(l=x[i].toUpperCase(),c=l!==x[i]):i--,o=+x[i+1],r=+x[i+2],c&&(o+=E,r+=w),i||(d=o,p=r),"M"===l)h&&(h.length<8?T.length-=1:y+=h.length),E=d=o,w=p=r,h=[o,r],T.push(h),i+=2,l="L";else if("C"===l)h||(h=[0,0]),c||(E=w=0),h.push(o,r,E+1*x[i+3],w+1*x[i+4],E+=1*x[i+5],w+=1*x[i+6]),i+=6;else if("S"===l)g=E,m=w,"C"!==b&&"S"!==b||(g+=E-h[h.length-4],m+=w-h[h.length-3]),c||(E=w=0),h.push(g,m,o,r,E+=1*x[i+3],w+=1*x[i+4]),i+=4;else if("Q"===l)g=E+(o-E)*O,m=w+(r-w)*O,c||(E=w=0),E+=1*x[i+3],w+=1*x[i+4],h.push(g,m,E+(o-E)*O,w+(r-w)*O,E,w),i+=4;else if("T"===l)g=E-h[h.length-4],m=w-h[h.length-3],h.push(E+g,w+m,o+(E+1.5*g-o)*O,r+(w+1.5*m-r)*O,E=o,w=r),i+=2;else if("H"===l)j(E,w,E=o,w),i+=1;else if("V"===l)j(E,w,E,w=o+(c?w-E:0)),i+=1;else if("L"===l||"Z"===l)"Z"===l&&(o=d,r=p,h.closed=!0),("L"===l||a(E-o)>.5||a(w-r)>.5)&&(j(E,w,o,r),"L"===l&&(i+=2)),E=o,w=r;else if("A"===l){if(f=x[i+4],v=x[i+5],g=x[i+6],m=x[i+7],n=7,f.length>1&&(f.length<3?(m=g,g=v,n--):(m=v,g=f.substr(2),n-=2),v=f.charAt(1),f=f.charAt(0)),_=u(E,w,+x[i+1],+x[i+2],+x[i+3],+f,+v,(c?E:0)+1*g,(c?w:0)+1*m),i+=n,_)for(n=0;n<_.length;n++)h.push(_[n]);E=h[h.length-2],w=h[h.length-1]}else console.log(D);return i=h.length,i<6?(T.pop(),i=0):h[0]===h[i-2]&&h[1]===h[i-1]&&(h.closed=!0),T.totalPoints=y+i,T}function g(t){l(t[0])&&(t=[t]);var e,s,i,n,o="",a=t.length;for(s=0;s<a;s++){for(n=t[s],o+="M"+h(n[0])+","+h(n[1])+" C",e=n.length,i=2;i<e;i++)o+=h(n[i++])+","+h(n[i++])+" "+h(n[i++])+","+h(n[i++])+" "+h(n[i++])+","+h(n[i])+" ";n.closed&&(o+="z")}return o}
/*!
   * CustomEase 3.8.0
   * https://greensock.com
   *
   * @license Copyright 2008-2021, GreenSock. All rights reserved.
   * Subject to the terms at https://greensock.com/standard-license or for
   * Club GreenSock members, the agreement issued with that membership.
   * @author: Jack Doyle, jack@greensock.com
  */var m,_,b=function(){return m||"undefined"!==typeof window&&(m=window.gsap)&&m.registerPlugin&&m},f=function(){m=b(),m?(m.registerEase("_CE",y.create),_=1):console.warn("Please gsap.registerPlugin(CustomEase)")},v=1e20,x=function(t){return~~(1e3*t+(t<0?-.5:.5))/1e3},T=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,E=/[cLlsSaAhHvVtTqQ]/g,w=function(t){var e,s=t.length,i=v;for(e=1;e<s;e+=6)+t[e]<i&&(i=+t[e]);return i},O=function(t,e,s){s||0===s||(s=Math.max(+t[t.length-1],+t[1]));var i,n=-1*+t[0],o=-s,a=t.length,r=1/(+t[a-2]+n),l=-e||(Math.abs(+t[a-1]-+t[1])<.01*(+t[a-2]-+t[0])?w(t)+o:+t[a-1]+o);for(l=l?1/l:-r,i=0;i<a;i+=2)t[i]=(+t[i]+n)*r,t[i+1]=(+t[i+1]+o)*l},A=function t(e,s,i,n,o,a,r,l,c,h,d){var u,p=(e+i)/2,g=(s+n)/2,m=(i+o)/2,_=(n+a)/2,b=(o+r)/2,f=(a+l)/2,v=(p+m)/2,x=(g+_)/2,T=(m+b)/2,E=(_+f)/2,w=(v+T)/2,O=(x+E)/2,A=r-e,y=l-s,D=Math.abs((i-r)*y-(n-l)*A),j=Math.abs((o-r)*y-(a-l)*A);return h||(h=[{x:e,y:s},{x:r,y:l}],d=1),h.splice(d||h.length-1,0,{x:w,y:O}),(D+j)*(D+j)>c*(A*A+y*y)&&(u=h.length,t(e,s,p,g,v,x,w,O,c,h,d),t(w,O,T,E,b,f,r,l,c,h,d+1+(h.length-u))),h},y=function(){function t(t,e,s){_||f(),this.id=t,this.setData(e,s)}var e=t.prototype;return e.setData=function(t,e){e=e||{},t=t||"0,0,1,1";var s,i,n,o,a,r,l,c,h,d=t.match(T),u=1,g=[],_=[],b=e.precision||1,f=b<=1;if(this.data=t,(E.test(t)||~t.indexOf("M")&&t.indexOf("C")<0)&&(d=p(t)[0]),s=d.length,4===s)d.unshift(0,0),d.push(1,1),s=8;else if((s-2)%6)throw"Invalid CustomEase";for(0===+d[0]&&1===+d[s-2]||O(d,e.height,e.originY),this.segment=d,o=2;o<s;o+=6)i={x:+d[o-2],y:+d[o-1]},n={x:+d[o+4],y:+d[o+5]},g.push(i,n),A(i.x,i.y,+d[o],+d[o+1],+d[o+2],+d[o+3],n.x,n.y,1/(2e5*b),g,g.length-1);for(s=g.length,o=0;o<s;o++)l=g[o],c=g[o-1]||l,(l.x>c.x||c.y!==l.y&&c.x===l.x||l===c)&&l.x<=1?(c.cx=l.x-c.x,c.cy=l.y-c.y,c.n=l,c.nx=l.x,f&&o>1&&Math.abs(c.cy/c.cx-g[o-2].cy/g[o-2].cx)>2&&(f=0),c.cx<u&&(c.cx?u=c.cx:(c.cx=.001,o===s-1&&(c.x-=.001,u=Math.min(u,.001),f=0)))):(g.splice(o--,1),s--);if(s=1/u+1|0,a=1/s,r=0,l=g[0],f){for(o=0;o<s;o++)h=o*a,l.nx<h&&(l=g[++r]),i=l.y+(h-l.x)/l.cx*l.cy,_[o]={x:h,cx:a,y:i,cy:0,nx:9},o&&(_[o-1].cy=i-_[o-1].y);_[s-1].cy=g[g.length-1].y-i}else{for(o=0;o<s;o++)l.nx<o*a&&(l=g[++r]),_[o]=l;r<g.length-1&&(_[o-1]=g[g.length-2])}return this.ease=function(t){var e=_[t*s|0]||_[s-1];return e.nx<t&&(e=e.n),e.y+(t-e.x)/e.cx*e.cy},this.ease.custom=this,this.id&&m&&m.registerEase(this.id,this.ease),this},e.getSVGData=function(e){return t.getSVGData(this,e)},t.create=function(e,s,i){return new t(e,s,i).ease},t.register=function(t){m=t,f()},t.get=function(t){return m.parseEase(t)},t.getSVGData=function(e,s){s=s||{};var i,n,o,a,r,l,c,h,u,p,_=s.width||100,b=s.height||100,f=s.x||0,v=(s.y||0)+b,T=m.utils.toArray(s.path)[0];if(s.invert&&(b=-b,v=0),"string"===typeof e&&(e=m.parseEase(e)),e.custom&&(e=e.custom),e instanceof t)i=g(d([e.segment],_,0,0,-b,f,v));else{for(i=[f,v],c=Math.max(5,200*(s.precision||1)),a=1/c,c+=2,h=5/c,u=x(f+a*_),p=x(v+e(a)*-b),n=(p-v)/(u-f),o=2;o<c;o++)r=x(f+o*a*_),l=x(v+e(o*a)*-b),(Math.abs((l-p)/(r-u)-n)>h||o===c-1)&&(i.push(u,p),n=(l-p)/(r-u)),u=r,p=l;i="M"+i.join(",")}return T&&T.setAttribute("d",i),i},t}();b()&&m.registerPlugin(y),y.version="3.8.0",t.CustomEase=y,t.default=y,Object.defineProperty(t,"__esModule",{value:!0})}))},b9f5:function(t,e){var s=function(t){var e="";return e+="precision highp float;\n\nvarying vec2 vTexCoord0;\nuniform sampler2D tTex;\nuniform float uTime;\nuniform float uStrength;\nuniform vec3 ufadeColor;\n\n//\tSimplex 3D Noise \n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise(vec3 v){ \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //  x0 = x0 - 0. + 0.0 * C \n  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n// Permutations\n  i = mod(i, 289.0 ); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients\n// ( N*N points uniformly over a square, mapped onto an octahedron.)\n  float n_ = 1.0/7.0; // N=7\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\nvoid main(void){\n  vec2 displacement = vec2(\n    snoise(vec3(vTexCoord0 * 2.0, uTime)),\n    snoise(vec3(vTexCoord0 * 1.5, uTime+2.5))\n  );\n\n  displacement *= uStrength *0.08;\n  vec3 c = texture2D( tTex, vTexCoord0 + displacement ).rgb;\n  c = mix( c, ufadeColor, uStrength );\n  gl_FragColor = vec4( c, 1.0 );\n}\n",e};s.toString=s,t.exports=s},ba7c:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_5_saleswoman_metsu_L0.jpg.etc.d0ff5e0b.ktx"},baa2:function(t,e,s){"use strict";s("c272")},bb60:function(t,e,s){t.exports=s.p+"assets/webgl/names.jpg.dxt.cea33729.ktx"},bbca:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_4_kaulbach_bendz_L0.jpg.astc.082402e6.ktx"},bcb0:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_1_schandorph_kroyer_L0.jpg.268638e7.webp"},bcf0:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_6_lamplight_ring_L0.95342bd9.jpg"},bcf5:function(t,e,s){"use strict";s("8076")},bd0e:function(t,e,s){t.exports=s.p+"img/background-1-mobile.8325c178.jpg"},bd43:function(t,e,s){},bd43b:function(t,e){var s=function(t){var e="";return e+="\nvarying mediump vec2 vTexCoord0;\nuniform sampler2D tTex;\n\nuniform mediump vec2 uTexelSize;\n\nvoid main(void){\n  lowp vec3 c = vec3(0.0);\n\n  c = max( c, texture2D(tTex, vTexCoord0 + vec2(-uTexelSize.x, -uTexelSize.y )).rgb );\n  c = max( c, texture2D(tTex, vTexCoord0 + vec2( 0.0, -uTexelSize.y )).rgb );\n  c = max( c, texture2D(tTex, vTexCoord0 + vec2( uTexelSize.x, -uTexelSize.y )).rgb );\n  c = max( c, texture2D(tTex, vTexCoord0 + vec2(-uTexelSize.x,  0.0 )).rgb );\n  c = max( c, texture2D(tTex, vTexCoord0 + vec2( uTexelSize.x,  0.0 )).rgb );\n  c = max( c, texture2D(tTex, vTexCoord0 + vec2(-uTexelSize.x,  uTexelSize.y )).rgb );\n  c = max( c, texture2D(tTex, vTexCoord0 + vec2( 0.0,  uTexelSize.y )).rgb );\n  c = max( c, texture2D(tTex, vTexCoord0 + vec2( uTexelSize.x,  uTexelSize.y )).rgb );\n  \n  gl_FragColor.rgb = c;\n\n\n}\n",e};s.toString=s,t.exports=s},c174:function(t,e,s){"use strict";s("802c")},c1b2:function(t,e,s){"use strict";s("600e")},c272:function(t,e,s){},c327:function(t,e,s){var i=function(t){var e="";return e+=s("efd0")()+"\n\nIN vec4 aPosition;\nIN vec3 aTexCoord;\nIN vec3 aRand;\n\nOUT vec2 vTexCoord;\nOUT vec3 vWorldPosition;\n\nuniform mat4 uViewProjectionMatrix;\nuniform mat4 uWorldMatrix;\n\nvoid main(void) {\n  vec3 position = vec3(aPosition.xy, 0.0);\n  vec4 worldPosition = uWorldMatrix * vec4(position.xyz, 1.0);\n\n  vWorldPosition = worldPosition.xyz;\n  gl_Position = uViewProjectionMatrix * worldPosition;\n\n  vTexCoord = aTexCoord.xy;\n}",e};i.toString=i,t.exports=i},c456:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_12_gertrud_juel_L0.f4c822f0.jpg"},c47c:function(t,e,s){},c50d:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_1_oldwoman_honthorst_L0.2b346c38.jpg"},c56e:function(t,e,s){"use strict";s("5414")},c576:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_4_kaulbach_bendz_L0.jpg.04472333.webp"},c6a8:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_5_saleswoman_metsu_L0.jpg.astc.e5faa83e.ktx"},c6e3:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_7_lund_jensen_L0.jpg.astc.de7db8ef.ktx"},c6f5:function(t,e,s){t.exports=s.p+"assets/webgl/texts_spritesheet.jpg.dxt.eb36da02.ktx"},c7a1:function(t,e,s){t.exports=s.p+"assets/webgl/names.jpg.pvr.3d66bb6c.ktx"},c896:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_6_marine_ditlev_L0.jpg.dxt.c670976b.ktx"},c8f8:function(t,e,s){"use strict";s("95ad")},c95b:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_7_lund_jensen_L0.jpg.06fe4dd9.webp"},c9e4:function(t,e){var s=function(t){var e="";return e+="precision lowp float;\n\nuniform float uOpacity;\nuniform sampler2D uTexture;\nvarying vec2 vUvs;\nvarying float vAlpha;\n\nvoid main(void){\n  vec3 color = texture2D(uTexture, vUvs.yx).rgb;\n  gl_FragColor = vec4(color * (vAlpha*uOpacity), 1.0);\n}",e};s.toString=s,t.exports=s},ccfd:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_3_soster_hansen_L0.fa1d8d9d.jpg"},cd45:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_1_oldwoman_honthorst_L0.jpg.astc.d6bafbc1.ktx"},cd49:function(t,e,s){"use strict";s.r(e);s("fe46");var i=s("47e2");function n(){const t=s("49f8"),e={};return t.keys().forEach(s=>{const i=s.match(/([A-Za-z0-9-_]+)\./i);if(i&&i.length>1){const n=i[1];e[n]=t(s).default}}),e}var o=Object(i["a"])({legacy:!1,globalInjection:!0,locale:"en",fallbackLocale:"en",messages:n(),warnHtmlInMessage:"off"}),a=(s("024a"),s("9ab4")),r=s("8d27"),l=s("5502");const c=!1,h=!1,d=Symbol(),u={preloaded:!1,showCookieBanner:!0},p={onLoad({commit:t},e){t("_SET_PRELOADED",e)},toggleCookieBanner({commit:t},e){t("_SET_COOKIE_BANNER",e)}},g={_SET_PRELOADED(t,e){t.preloaded=e},_SET_COOKIE_BANNER(t,e){t.showCookieBanner=e}},m={isPreloaded(t){return t.preloaded}},_=Object(l["a"])({state:u,actions:p,mutations:g,getters:m,strict:c,plugins:h?[l["b"].createLogger()]:[]});var b,f,v=_;function x(){return Object(l["c"])(d)}(function(t){t["INTRO"]="intro",t["LOADING"]="loading",t["GALLERY"]="gallery",t["PAINTING"]="painting"})(b||(b={})),function(t){t["STANDARD"]="standard",t["XR"]="xr"}(f||(f={}));let T=class extends r["d"]{constructor(){super(...arguments),this.debug=!1,this.load_progress=0,this.glloaded=!1}setLoadProgress(t){this._SET_LOAD_PROGRESS(t)}_SET_GL_LOADED(t){this.glloaded=t}_SET_LOAD_PROGRESS(t){this.load_progress=t}};Object(a["a"])([r["a"]],T.prototype,"setLoadProgress",null),Object(a["a"])([r["c"]],T.prototype,"_SET_GL_LOADED",null),Object(a["a"])([r["c"]],T.prototype,"_SET_LOAD_PROGRESS",null),T=Object(a["a"])([r["b"]],T);new T({store:v,name:"app"});var E=s("7a23"),w=s("bd0e"),O=s.n(w),A=s("3704"),y=s.n(A),D=s("5dc1"),j=s.n(D),R=s("1948"),S=s.n(R),C=s("8f28"),I=s.n(C),P=s("e481"),L=s.n(P),M=s("1c19"),k=s.n(M),N=s("9a73"),F=s.n(N);const B=t=>(Object(E["F"])("data-v-4f323888"),t=t(),Object(E["E"])(),t),U=O.a+" 1x, "+y.a+" 2x",H=j.a+" 1x, "+S.a+" 2x",G=I.a,V=k.a+" 1x, "+F.a+" 2x",z={class:"Home__Wrapper"},X={class:"Home__Background"},W=B(()=>Object(E["j"])("source",{srcset:U,media:"(max-width: 1050px)"},null,-1)),q=B(()=>Object(E["j"])("source",{srcset:H},null,-1)),Y=B(()=>Object(E["j"])("source",{srcset:G,media:"(max-width: 1050px)"},null,-1)),K={class:"Home__Inner view-default__inner"},Z={class:"Home__Owner"},$={class:"Line__Parent Home__Owner__Name"},Q={class:"Line"},J={class:"Line__Parent Home__Owner__Name"},tt={class:"Line"},et={class:"Line__Parent Home__Owner__Verb italic-current"},st={class:"Line"},it={class:"Home__Title Title"},nt={class:"Home__ExhibitionName"},ot=Object(E["k"])('<h1 data-v-4f323888><span class="Title__Line" data-v-4f323888><span class="Title__Part Title__Part--italic Title__Part--left" data-v-4f323888><span data-v-4f323888>The </span></span></span><span class="Title__Line" data-v-4f323888><span class="Title__Part Title__Part--bold Title__Part--left" data-v-4f323888><span data-v-4f323888>fem</span></span><span class="Title__Part Title__Part--bold Title__Part--right" data-v-4f323888><span data-v-4f323888>ale </span></span></span><span class="Title__Line" data-v-4f323888><span class="Title__Part Title__Part--italic Title__Part--right" data-v-4f323888><span data-v-4f323888>gaze</span></span></span></h1>',1),at={class:"Home__Partnership"},rt={class:"",href:"https://about.facebook.com/",rel:"nofollow noopener",target:"_blank"},lt={class:"AboutCta__Inner"},ct={class:"AboutCta__Label cta"},ht={class:"AboutCta__Label__Inner"},dt={class:"Line__Parent"},ut={class:"Line"},pt={class:"AboutCta__Right"},gt={class:"AboutCta__Illustration"},mt=B(()=>Object(E["j"])("source",{srcset:V},null,-1)),_t={class:"AboutCta__Hover cta"},bt={class:"Home__Footer"},ft={key:0,class:"Line__Parent"},vt={key:1,class:"Line__Parent"},xt={key:2,class:"Line__Parent"},Tt={href:"javascript: Cookiebot.renew()",class:"Line cta"};function Et(t,e,s,i,n,o){const a=Object(E["K"])("PreLoader"),r=Object(E["K"])("LogoMetaDesktop"),l=Object(E["K"])("LogoMetaMobile"),c=Object(E["K"])("ui-btn-main"),h=Object(E["K"])("About"),d=Object(E["K"])("Credits"),u=Object(E["K"])("Legals");return Object(E["D"])(),Object(E["i"])(E["a"],null,[Object(E["m"])(a,{onDone:t.onPreloadComplete},null,8,["onDone"]),Object(E["j"])("div",z,[Object(E["j"])("div",{class:Object(E["w"])(["Home view-default",{"is-ready":t.isReady}]),ref:"root"},[Object(E["j"])("div",X,[Object(E["j"])("picture",{class:Object(E["w"])(["Home__Background__Part Home__Background__Part--1",{"is-loaded":this.isBackground1Loaded&&this.isBackground2Loaded}])},[W,q,Object(E["j"])("img",{src:j.a,onLoad:e[0]||(e[0]=t=>this.isBackground1Loaded=!0)},null,32)],2),Object(E["j"])("picture",{class:Object(E["w"])(["Home__Background__Part Home__Background__Part--2",{"is-loaded":this.isBackground1Loaded&&this.isBackground2Loaded}])},[Y,Object(E["j"])("img",{src:L.a,onLoad:e[1]||(e[1]=t=>this.isBackground2Loaded=!0)},null,32)],2)]),Object(E["j"])("div",K,[Object(E["j"])("div",Z,[Object(E["j"])("div",$,[Object(E["j"])("div",Q,Object(E["O"])(t.$t("common.owner_line1")),1)]),Object(E["j"])("div",J,[Object(E["j"])("div",tt,Object(E["O"])(t.$t("common.owner_line2")),1)]),Object(E["j"])("div",et,[Object(E["j"])("div",st,Object(E["O"])(t.$t("common.owner_verb")),1)])]),Object(E["j"])("div",it,[Object(E["j"])("div",nt,[ot,Object(E["j"])("div",at,[Object(E["j"])("a",rt,[Object(E["m"])(r,{class:"logo logo--desktop"}),Object(E["m"])(l,{class:"logo logo--mobile"})])])])])]),Object(E["m"])(c,{class:"Home__Cta",delay:1.66,onClick:t.onStart},{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("common.start")),1)]),_:1},8,["delay","onClick"]),t.hasAboutPage?(Object(E["D"])(),Object(E["i"])("button",{key:0,class:"AboutCta",onClick:e[3]||(e[3]=(...e)=>t.onAboutClick&&t.onAboutClick(...e))},[Object(E["j"])("span",lt,[Object(E["j"])("span",ct,[Object(E["j"])("span",ht,[Object(E["j"])("span",dt,[Object(E["j"])("span",ut,Object(E["O"])(t.$t("common.about")),1)])])]),Object(E["j"])("div",pt,[Object(E["j"])("picture",gt,[mt,Object(E["j"])("img",{src:k.a,class:Object(E["w"])({"is-loaded":this.isAboutLoaded}),onLoad:e[2]||(e[2]=t=>this.isAboutLoaded=!0)},null,34)])])]),Object(E["j"])("span",_t,[Object(E["j"])("span",null,[Object(E["j"])("span",null,Object(E["O"])(t.$t("common.about_part1")),1)]),Object(E["j"])("span",null,[Object(E["j"])("span",null,Object(E["O"])(t.$t("common.about_part2")),1)])])])):Object(E["h"])("",!0),Object(E["j"])("ul",bt,[t.hasCreditsPage?(Object(E["D"])(),Object(E["i"])("li",ft,[Object(E["j"])("button",{onClick:e[4]||(e[4]=Object(E["bb"])(e=>t.onFooterLinkClick(t.$t("common.footer.item1.action"),t.$t("common.footer.item1.gtm.action"),t.$t("common.footer.item1.gtm.label")),["prevent"])),class:"Line cta"},Object(E["O"])(t.$t("common.footer.item1.label")),1)])):Object(E["h"])("",!0),t.hasLegalsPage?(Object(E["D"])(),Object(E["i"])("li",vt,[Object(E["j"])("button",{onClick:e[5]||(e[5]=Object(E["bb"])(e=>t.onFooterLinkClick(t.$t("common.footer.item2.action"),t.$t("common.footer.item2.gtm.action"),t.$t("common.footer.item2.gtm.label")),["prevent"])),class:"Line cta",target:"_blank"},Object(E["O"])(t.$t("common.footer.item2.label")),1)])):Object(E["h"])("",!0),t.hasCookie?(Object(E["D"])(),Object(E["i"])("li",xt,[Object(E["j"])("a",Tt,Object(E["O"])(t.$t("common.footer.item3.label")),1)])):Object(E["h"])("",!0)])],2)]),t.state.matches("home.about")?(Object(E["D"])(),Object(E["g"])(h,{key:0})):Object(E["h"])("",!0),t.state.matches("home.credits")?(Object(E["D"])(),Object(E["g"])(d,{key:1})):Object(E["h"])("",!0),t.state.matches("home.legals")?(Object(E["D"])(),Object(E["g"])(u,{key:2})):Object(E["h"])("",!0)],64)}var wt=s("cffa"),Ot=s("3963");class At{constructor(){this._listeners=[]}on(t){-1===this._listeners.indexOf(t)&&this._listeners.push(t)}off(t){const e=this._listeners.indexOf(t);e>-1&&this._listeners.splice(e,1)}release(){this._listeners=[]}emit(t){for(const e of this._listeners)e(t)}}var yt=s("8cf2"),Dt=s.n(yt);class jt{constructor(){this._listeners=[]}on(t){-1===this._listeners.indexOf(t)&&this._listeners.push(t)}off(t){const e=this._listeners.indexOf(t);e>-1&&this._listeners.splice(e,1)}release(){this._listeners=[]}emit(t){for(const e of this._listeners)e(t)}}const Rt=["Right/Trigger","Right/Squeeze","Right/Touchpad","Right/Thumbstick","A","B","Right/Up","Right/Down","Right/Left","Right/Right"],St=["Left/Trigger","Left/Squeeze","Left/Touchpad","Left/Thumbstick","X","Y","Left/Up","Left/Down","Left/Left","Left/Right"],Ct=[...Rt,...St];let It={};for(let oB=0;oB<Rt.length;oB++)It[Rt[oB]]=oB;for(let oB=0;oB<St.length;oB++)It[St[oB]]=oB;class Pt{constructor(t,e){this.handedness=t,this.gamepad=e,this.mapping="left"==t?St:Rt,this._buttons=[],this._axes=[0,0];for(let s=0;s<this.gamepad.buttons.length;s++)this._buttons.push({pressed:!1,touched:!1,value:0});this.onBtnDown=new jt,this.onBtnUp=new jt}get buttons(){return this.gamepad.buttons}get axes(){return this.gamepad.axes}pulse(t,e){return this.gamepad.hapticActuators?this.gamepad.hapticActuators[0].pulse(t,e):Promise.resolve()}getButton(t){return this.buttons[It[t]]}getAxes(){return this._axes}update(){this._axes[0]>-.5&&this.axes[2]<=-.5&&this.onBtnDown.emit({name:this.mapping[8],button:null}),this._axes[0]<.5&&this.axes[2]>=.5&&this.onBtnDown.emit({name:this.mapping[9],button:null}),this._axes[1]>-.5&&this.axes[3]<=-.5&&this.onBtnDown.emit({name:this.mapping[6],button:null}),this._axes[1]<.5&&this.axes[3]>=.5&&this.onBtnDown.emit({name:this.mapping[7],button:null}),this._axes[0]=this.axes[2],this._axes[1]=this.axes[3];for(let t=0;t<this.gamepad.buttons.length;t++)this.gamepad.buttons[t].pressed&&!this._buttons[t].pressed&&(this._buttons[t].pressed=!0,this.onBtnDown.emit({name:this.mapping[t],button:this.gamepad.buttons[t]})),!this.gamepad.buttons[t].pressed&&this._buttons[t].pressed&&(this._buttons[t].pressed=!1,this.onBtnUp.emit({name:this.mapping[t],button:this.gamepad.buttons[t]}))}}s("907a"),s("3c5d"),s("fa9e"),s("77d9");class Lt{constructor(t){this.inputs=t,this._axisDownCount=0,this.keydown=t=>{switch(t.key){case"ArrowDown":this._axisDownCount+=1,this.axes.get("left")[1]=1,this.inputs.onBtnDown.emit({name:"Left/Down",button:null});break;case"ArrowLeft":this._axisDownCount+=1,this.axes.get("left")[0]=-1,this.inputs.onBtnDown.emit({name:"Left/Left",button:null});break;case"ArrowUp":this._axisDownCount+=1,this.axes.get("left")[1]=-1,this.inputs.onBtnDown.emit({name:"Left/Up",button:null});break;case"ArrowRight":this._axisDownCount+=1,this.axes.get("left")[0]=1,this.inputs.onBtnDown.emit({name:"Left/Right",button:null});break;case"5":this._axisDownCount+=1,this.axes.get("right")[1]=1,this.inputs.onBtnDown.emit({name:"Right/Down",button:null});break;case"4":this._axisDownCount+=1,this.axes.get("right")[0]=1,this.inputs.onBtnDown.emit({name:"Right/Left",button:null});break;case"8":this._axisDownCount+=1,this.axes.get("right")[1]=-1,this.inputs.onBtnDown.emit({name:"Right/Up",button:null});break;case"6":this._axisDownCount+=1,this.axes.get("right")[0]=-1,this.inputs.onBtnDown.emit({name:"Right/Right",button:null});break;case"a":this.inputs.onBtnDown.emit({name:"A",button:null});break;case"b":this.inputs.onBtnDown.emit({name:"B",button:null});break;case"x":this.inputs.onBtnDown.emit({name:"X",button:null});break;case"y":this.inputs.onBtnDown.emit({name:"Y",button:null});break;case"q":this.inputs.onBtnDown.emit({name:"Left/Squeeze",button:null});break;case"z":this.inputs.onBtnDown.emit({name:"Left/Trigger",button:null});break;case"d":this.inputs.onBtnDown.emit({name:"Left/Thumbstick",button:null});break;case"i":this.inputs.onBtnDown.emit({name:"Right/Trigger",button:null});break;case"l":this.inputs.onBtnDown.emit({name:"Right/Thumbstick",button:null});break;case"j":this.inputs.onBtnDown.emit({name:"Right/Squeeze",button:null});break;default:break}},this.keyup=t=>{switch(t.key){case"ArrowDown":this._axisDownCount-=1,this.axes.get("left")[1]=0,this.inputs.onBtnUp.emit({name:"Left/Down",button:null});break;case"ArrowLeft":this._axisDownCount-=1,this.axes.get("left")[0]=0,this.inputs.onBtnUp.emit({name:"Left/Left",button:null});break;case"ArrowUp":this._axisDownCount-=1,this.axes.get("left")[1]=0,this.inputs.onBtnUp.emit({name:"Left/Up",button:null});break;case"ArrowRight":this._axisDownCount-=1,this.axes.get("left")[0]=0,this.inputs.onBtnUp.emit({name:"Left/Right",button:null});break;case"5":this._axisDownCount-=1,this.axes.get("right")[1]=0,this.inputs.onBtnUp.emit({name:"Right/Down",button:null});break;case"4":this._axisDownCount-=1,this.axes.get("right")[0]=0,this.inputs.onBtnUp.emit({name:"Right/Left",button:null});break;case"8":this._axisDownCount-=1,this.axes.get("right")[1]=0,this.inputs.onBtnUp.emit({name:"Right/Up",button:null});break;case"6":this._axisDownCount-=1,this.axes.get("right")[0]=0,this.inputs.onBtnUp.emit({name:"Right/Right",button:null});break;case"a":this.inputs.onBtnUp.emit({name:"A",button:null});break;case"b":this.inputs.onBtnUp.emit({name:"B",button:null});break;case"x":this.inputs.onBtnUp.emit({name:"X",button:null});break;case"y":this.inputs.onBtnUp.emit({name:"Y",button:null});break;case"q":this.inputs.onBtnUp.emit({name:"Left/Squeeze",button:null});break;case"z":this.inputs.onBtnUp.emit({name:"Left/Trigger",button:null});break;case"d":this.inputs.onBtnUp.emit({name:"Left/Thumbstick",button:null});break;case"i":this.inputs.onBtnUp.emit({name:"Right/Trigger",button:null});break;case"l":this.inputs.onBtnUp.emit({name:"Right/Thumbstick",button:null});break;case"j":this.inputs.onBtnUp.emit({name:"Right/Squeeze",button:null});break;default:break}},this.axes=new Map,this.axes.set("left",new Float32Array(2)),this.axes.set("right",new Float32Array(2))}get shouldOverrideAxes(){return 0!=this._axisDownCount}attach(){document.addEventListener("keydown",this.keydown),document.addEventListener("keyup",this.keyup)}detach(){document.removeEventListener("keydown",this.keydown),document.removeEventListener("keyup",this.keyup)}}class Mt{constructor(t){this.source=t,this.handedness=this.source.handedness,this.hasGamepad=!1,this.source.gamepad&&(this.hasGamepad=!0,this.gamepad=new Pt(this.source.handedness,this.source.gamepad))}update(t,e){this.pose=t.getPose(this.source.targetRaySpace,e),this.hasGamepad&&this.gamepad.update()}}class kt{constructor(){this.onInput=t=>{for(const e of t.removed){const t=this.list.findIndex(t=>t.source==e);-1!==t&&(this.list[t].gamepad&&(this.list[t].gamepad.onBtnDown.release(),this.list[t].gamepad.onBtnUp.release()),this.list.splice(t,1))}for(const e of t.added){const t=new Mt(e);this.list.push(t),t.gamepad&&(t.gamepad.onBtnDown.on(t=>this.onBtnDown.emit(t)),t.gamepad.onBtnUp.on(t=>this.onBtnUp.emit(t)))}},this.list=[],this.onBtnDown=new jt,this.onBtnUp=new jt,this.keyboard=new Lt(this),this.keyboard.attach()}init(t){this.reset(),this.session=t,this.session.addEventListener("inputsourceschange",this.onInput)}reset(){for(const t of this.list)t.gamepad&&(t.gamepad.onBtnDown.release(),t.gamepad.onBtnUp.release());this.list=[]}getInput(t){return this.list.find(e=>e.handedness==t)}getButton(t){let e={pressed:!1,touched:!1,value:0};for(let s=0;s<this.list.length;s++)this.list[s].hasGamepad&&(e=this.list[s].gamepad.getButton(t));return e}getAxes(t){let e=[0,0];const s=this.list.find(e=>e.handedness==t);return s?(e=s.hasGamepad?s.gamepad.getAxes():e,this.keyboard.shouldOverrideAxes&&(e[0]=this.keyboard.axes.get(t)[0],e[1]=this.keyboard.axes.get(t)[1]),e):e}update(t,e){for(const s of this.list)s.update(t,e)}}var Nt=s("fc98"),Ft=s.n(Nt);class Bt{constructor(){this.resolve=t=>{this._resolve(t)},this.reject=t=>{this._reject(t)},this.promise=new Promise((t,e)=>{this._resolve=t,this._reject=e})}}class Ut{constructor(t){this.gl=t,this.onRender=new At,this.lowFPS=!0,this._poseReadyDeferred=new Bt,this.sessionStarted=async t=>{this.ended=!1,this.session=t;const e=t;e.updateTargetFrameRate&&e.updateTargetFrameRate(72);try{await this.gl.makeXRCompatible()}catch(s){switch(s){default:console.log(s);break}this.session.end()}this.session.addEventListener("end",this.sessionEnded),this.session.addEventListener("visibilitychange",this.visibilityChange),this.gl.viewport(0,0,500,500),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.DEPTH_BUFFER_BIT|this.gl.COLOR_BUFFER_BIT),this.session.updateRenderState({baseLayer:new XRWebGLLayer(this.session,this.gl,{antialias:!1,depth:!0,stencil:!1,alpha:!1,framebufferScaleFactor:1}),depthNear:.1,depthFar:50}),this.inputs.init(this.session),this.onSessionStarted.emit()},this.refSpaceCreated=t=>{console.log("Reference space created"),this.rotation=Nt["quat"].create(),this.position=Nt["vec3"].create(),this.referenceSpace=t,this.previousTime=Dt()(),this.session.requestAnimationFrame(this.init)},this.init=(t,e)=>{this.pose=e.getViewerPose(this.referenceSpace),this.frame(t,e),this._poseReadyDeferred.resolve()},this.frame=(t,e)=>{let s=(t-this.previousTime)/1e3;this.previousTime=t,(s>.2||s<1/180)&&(s=1/60),wt["a"].ticker.tick(),this.pose=e.getViewerPose(this.referenceSpace),this.inputs.update(e,this.referenceSpace),this.onRender.emit(s),this._requestFrame()},this.sessionEnded=()=>{this.ended=!0,this.onSessionEnded.emit()},this.visibilityChange=t=>{switch(t.session.visibilityState){case"visible":case"visible-blurred":this.onVisibilityChange.emit(!0),console.log("VISIBLE");break;case"hidden":console.log("HIDDEN"),this.onVisibilityChange.emit(!1);break}},this.onSessionStarted=new At,this.onSessionEnded=new At,this.onVisibilityChange=new At,this.previousTime=Dt()(),this.inputs=new kt}get poseReady(){return this._poseReadyDeferred.promise}get gllayer(){return this.session.renderState.baseLayer}static IsSessionSupportedAsync(t){return navigator.xr?navigator.xr.isSessionSupported(t):Promise.resolve(!1)}async requestSession(){return navigator.xr.requestSession("immersive-vr",{requiredFeatures:["local-floor"],optionalFeatures:["low-fixed-foveation-level"]}).then(this.sessionStarted)}start(){this.session.requestReferenceSpace("bounded-floor").then(this.refSpaceCreated).catch(()=>{console.log("No floor reference space available"),this.session.requestReferenceSpace("local-floor").then(this.refSpaceCreated).catch(()=>{console.log("No local-floor reference space available"),this.session.requestReferenceSpace("local").then(this.refSpaceCreated).catch(()=>{console.log("No local reference space available")})})})}_requestFrame(){this.ended||(this._rafId=this.session.requestAnimationFrame(this.frame))}}var Ht=s("a77e"),Gt=s("df98"),Vt=s("b8d6"),zt=s.n(Vt);const Xt=(t,e=30,s="second")=>{let i=0;switch(s){case"second":i=t/e;break}return i},Wt=t=>e=>Xt(e,t),qt=Object(E["o"])({});var Yt=Object(E["o"])({...qt,__name:"PreLoader",emits:["done"],setup(t,{emit:e}){wt["b"].registerPlugin(zt.a);const s=Object(E["H"])(null),i=Object(E["H"])(null);Object(E["H"])(null),Wt(60);function n(){const t=wt["b"].timeline({delay:1});t.to(i.value,{autoAlpha:0,duration:.75,ease:"quart.out",onStart:()=>{e("done")}},"start")}return Object(E["B"])(()=>{Object(E["v"])(n)}),(t,e)=>(Object(E["D"])(),Object(E["i"])("div",{class:"PreLoader",ref_key:"root",ref:s},[Object(E["j"])("div",{ref_key:"background",ref:i,class:"PreLoader__Background"},null,512)],512))}}),Kt=(s("96eb"),s("6b0d")),Zt=s.n(Kt);const $t=Zt()(Yt,[["__scopeId","data-v-1f24a9ac"]]);var Qt=$t;const Jt=t=>(Object(E["F"])("data-v-64008b30"),t=t(),Object(E["E"])(),t),te=Jt(()=>Object(E["j"])("span",{class:"Nav__Text Nav__Text--Italic Nav__Text--Right"},[Object(E["j"])("span",null," About ")],-1)),ee=Jt(()=>Object(E["j"])("svg",{class:"Nav__Stroke Nav__Stroke--desktop Nav__Stroke--1",viewBox:"0 0 241 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Object(E["j"])("path",{d:"M2.31055 14.1746C65.5195 14.1746 128.145 5.58933 191.164 2.47305C206.913 1.69423 222.812 2.26955 238.58 2.26955","stroke-width":"3","stroke-linecap":"round"})],-1)),se=Jt(()=>Object(E["j"])("svg",{class:"Nav__Stroke Nav__Stroke--mobile Nav__Stroke--1",viewBox:"0 0 66 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Object(E["j"])("path",{d:"M1.6604 6.89288C6.77079 6.52785 11.9848 5.60439 17.0596 4.87943C25.1495 3.72372 33.4084 3.8353 41.5565 3.16427C48.3015 2.6088 54.8325 2.19483 61.6164 2.19483C63.0033 2.19483 63.6275 2.08419 64.7485 1.52368",class:"stroke stroke--bold","stroke-width":"2","stroke-linecap":"round"})],-1)),ie=Jt(()=>Object(E["j"])("span",{class:"Nav__Text Nav__Text--Bold Nav__Text--Left"},[Object(E["j"])("span",null,"Male ")],-1)),ne=Jt(()=>Object(E["j"])("span",{class:"Nav__Text Nav__Text--Bold Nav__Text--Right"},[Object(E["j"])("span",null,"Gaze")],-1)),oe=Jt(()=>Object(E["j"])("svg",{class:"Nav__Stroke Nav__Stroke--desktop Nav__Stroke--2",viewBox:"0 0 477 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Object(E["j"])("path",{d:"M2 2C125 3 379.5 24 475 13","stroke-width":"3","stroke-linecap":"round"})],-1)),ae=Jt(()=>Object(E["j"])("svg",{class:"Nav__Stroke Nav__Stroke--mobile Nav__Stroke--2",viewBox:"0 0 144 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Object(E["j"])("path",{d:"M1 13.0002C24 12.0002 104.5 1.5002 142.5 2.0002","stroke-width":"2","stroke-linecap":"round"})],-1)),re=Jt(()=>Object(E["j"])("span",{class:"Nav__Text Nav__Text--Italic Nav__Text--Left"},[Object(E["j"])("span",null,"The Artist ")],-1)),le=Jt(()=>Object(E["j"])("span",{class:"Nav__Text Nav__Text--Italic Nav__Text--Right"},[Object(E["j"])("span",null,"And ")],-1)),ce=Jt(()=>Object(E["j"])("br",null,null,-1)),he=Jt(()=>Object(E["j"])("span",{class:"Nav__Text Nav__Text--Bold Nav__Text--Left"},[Object(E["j"])("span",null,"The Art")],-1)),de=Jt(()=>Object(E["j"])("span",{class:"Nav__Text Nav__Text--Bold Nav__Text--Right"},[Object(E["j"])("span",null,"work")],-1)),ue=Jt(()=>Object(E["j"])("svg",{class:"Nav__Stroke Nav__Stroke--desktop Nav__Stroke--3",viewBox:"0 0 571 71",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Object(E["j"])("path",{d:"M52 1.5C119 4 376 25 528 23.5","stroke-width":"3","stroke-linecap":"round"}),Object(E["j"])("path",{d:"M1.5 69C93 69 477.5 60 569 60","stroke-width":"3","stroke-linecap":"round"})],-1)),pe=Jt(()=>Object(E["j"])("svg",{class:"Nav__Stroke Nav__Stroke--mobile Nav__Stroke--3",viewBox:"0 0 308 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Object(E["j"])("path",{d:"M1 1C39.5 2 276 7.5 307 6.5","stroke-width":"2","stroke-linecap":"round"})],-1)),ge=Jt(()=>Object(E["j"])("span",{class:"Nav__Text Nav__Text--Italic Nav__Text--Left"},[Object(E["j"])("span",null,"The ")],-1)),me=Jt(()=>Object(E["j"])("span",{class:"Nav__Text Nav__Text--Bold Nav__Text--Left"},[Object(E["j"])("span",null,"Fem")],-1)),_e=Jt(()=>Object(E["j"])("span",{class:"Nav__Text Nav__Text--Bold Nav__Text--Right"},[Object(E["j"])("span",null,"ale ")],-1)),be=Jt(()=>Object(E["j"])("span",{class:"Nav__Text Nav__Text--Italic Nav__Text--Right"},[Object(E["j"])("span",null,"Gaze")],-1)),fe=Jt(()=>Object(E["j"])("svg",{class:"Nav__Stroke Nav__Stroke--desktop Nav__Stroke--4",viewBox:"0 0 663 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Object(E["j"])("path",{d:"M2 22.5C131 22.5 558.5 3 661 2","stroke-width":"3","stroke-linecap":"round"})],-1)),ve=Jt(()=>Object(E["j"])("svg",{class:"Nav__Stroke Nav__Stroke--mobile Nav__Stroke--4",viewBox:"0 0 191 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Object(E["j"])("path",{d:"M1 8C22.5 9.5 167 3 190 1.5","stroke-width":"2","stroke-linecap":"round"})],-1)),xe=Object(E["l"])("The VR experience "),Te=Jt(()=>Object(E["j"])("br",null,null,-1)),Ee=Object(E["l"])("The Female Gaze is "),we=Jt(()=>Object(E["j"])("br",null,null,-1)),Oe=Object(E["l"])("an interactive creative educational tool, where we invite you to create your own version of "),Ae=Jt(()=>Object(E["j"])("br",null,null,-1)),ye=Object(E["l"])("the iconic artwork Young Girl Preparing Chantarelles (1892)"),De=Jt(()=>Object(E["j"])("br",null,null,-1)),je=Object(E["l"])("by Danish artist "),Re=Jt(()=>Object(E["j"])("br",null,null,-1)),Se=Object(E["l"])("Peter Ilsted."),Ce=Object(E["l"])("We invite you to change and renew the work, to create the story you want to tell. How will your change of the framing, the positioning of the model, her facial expression, the background, and the lightning change the perspective and our perception of the model?"),Ie=Object(E["l"])("Once you have created the image you want, you can save it and share it with your friends on Social Media. For inspiration, we have invited three Danish photographers to create their own picture using the experience, applying all of their knowledge from working with art, media and photography to give the girl in the painting another story."),Pe=Object(E["l"])("The VR experience The Female Gaze is produced by Meta in collaboration with Kunsthal Charlottenborg and Make Me Pulse."),Le=Object(E["l"])("Do you ever think about not only what you see, but also how and why you see it?"),Me=Object(E["l"])("All visual representations are constructed – created – by an artist, photographer, journalist or someone else who wants to capture and show a piece of their world to an audience, and this is anything but objective."),ke=Object(E["l"])("For decades, it has been discussed in which ways depictions of women in art, film, advertisements and media maintain patriarchal structures in society. Laura Mulvey coins the term “The Male Gaze” back in 1975 in her essay Visual Pleasure and Narrative Cinema arguing how women in especially movies would be objectified and fetishized, empowering the male heterosexual movie-creator and male heterosexual audience. This is exemplified with the director’s use of close-ups and fragmented shots of women’s body parts."),Ne=Object(E["l"])("Another example is the voyeuristic view – looking at women without them knowing that they are being looked at or with the possibility to look back. Since then, multiple theories of the female gaze have emerged, focusing on visual means and to give agency to the subjects that are viewed upon and to shift to another and more including environment."),Fe=Object(E["l"])("Taking inspiration from all these theories of the gaze, we wish to raise awareness, adjust the lens, and renew the gaze, to emphasize and highlight why it is important to be conscious of how we look at what we look at and just how powerful perspective is. "),Be=Jt(()=>Object(E["j"])("br",null,null,-1)),Ue=Object(E["l"])("A multitude of interpretations can be created with the use of lighting, close-ups and angles – different backdrops, body-language and facial expressions can entirely change how we analyze an image. In “The Female Gaze” you are invited into a virtual photo studio, where you can try yourself. What story do you want to show?"),He=Object(E["l"])("The painting Young Girl Preparing Chantarelles [Original title: En ung pige, der renser kantareller] is from 1892 and is part of the permanent collection at SMK - the National Gallery of Denmark. The young girl in the picture is most likely of the painters wife Ingeborg Petersen, or his sister Ida Ilsted (later, Ida Hammershøi). "),Ge=Object(E["l"])("The artist, Peter Ilsted (4 February 1861 – 16 April 1933) is from Sakskøbing in the Southern part of Denmark."),Ve=Object(E["l"])("He graduated from The Royal Danish Academy of Fine Arts in 1883 and had his debut at the Charlottenborg Spring Exhibition in 1883. He married Ingeborg Lovisa Petersen (1869–1945) in 1891 and his brother-in-law was another famous Danish painter Vilhelm Hammershøi."),ze=Object(E["l"])("In 1890 and 1899 he was given the “Eckersberg Medal” by The Royal Danish Academy of Fine Arts, and he worked as an assistant at the Academy from 1893-1905. He was part of the progressive artist association Den Frie Udstilling, and also became famous for his work with printmaking later in his career."),Xe=Object(E["l"])("His artistic style and what gained him fame, was his depictions of interior and domestic settings, later referred to as the “Copenhagen Interior School”. Many of his paintings include women as part of the motive. Some of his works are portraits, fx of his sister or wife, but many of his works are “interior paintings” where the women are integrated in the room."),We=Object(E["l"])("Today, the painting Young Girl Preparing Chantarelles by Peter Ilsted is in the collection of SMK - the National Gallery of Denmark and part of the museums’ public domain: "),qe=Jt(()=>Object(E["j"])("a",{href:"http://open.smk.dk"},"http://open.smk.dk",-1)),Ye=["srcset"],Ke=["src"],Ze=Object(E["l"])("Peter Ilsted, Young Girl Preparing Chantarelles, 1892, SMK "),$e=Jt(()=>Object(E["j"])("br",null,null,-1)),Qe=Object(E["l"])(" the National Gallery of Denmark, open.smk.dk, public domain"),Je=["srcset"],ts=["src"],es=Object(E["l"])("Is a commercial photographer and co-owner of FERN, a climate-conscious production company. She has done work for Vogue, Nike, i-D and many others, and is in her own words a photographer that uses clear colors and an alternative casting to actively challenge and redefine outmoded ideas of body and beauty."),ss=["srcset"],is=["src"],ns=["srcset"],os=["src"],as=Object(E["l"])("Is a photographer and photo editor on the danish newspaper Information. Sigrid has won the Danish press photo of the year. She believes in the importance of consistently fighting for visual storytelling in a changing media landscape. She strives to commission and produce outstanding documentary photography, often with an eye to experimental forms and expressions."),rs=["srcset"],ls=["src"],cs=["srcset"],hs=["src"],ds=Object(E["l"])("An artist and photographer that graduated from the Royal Danish Academy of Fine Arts in 2020. Her art is often inspired by and critical of religion, and can take on anthropological perspective when she investigates her next project. Lina is heavily inspired by her Iraqi and muslim roots and has in several of her pieces taken a strong femenist stand against religion."),us=["srcset"],ps=["src"];function gs(t,e,s,i,n,o){const a=Object(E["K"])("PageNavItem"),r=Object(E["K"])("content-title"),l=Object(E["K"])("content-paragraph"),c=Object(E["K"])("content-section"),h=Object(E["K"])("content-image"),d=Object(E["K"])("content-portrait"),u=Object(E["K"])("content-video"),p=Object(E["K"])("Page");return Object(E["D"])(),Object(E["g"])(p,{class:"z-about",menuItems:t.menuItems,items:t.items,ref:"page"},{nav:Object(E["Z"])(()=>[Object(E["m"])(a,{index:1,item:t.items[0],onNavClick:t.onNavClick,ref:e=>{t.menuItems[t.items[0].id]=e}},{default:Object(E["Z"])(()=>[te,ee,se]),_:1},8,["item","onNavClick"]),Object(E["m"])(a,{index:2,item:t.items[1],onNavClick:t.onNavClick,ref:e=>{t.menuItems[t.items[1].id]=e}},{default:Object(E["Z"])(()=>[ie,ne,oe,ae]),_:1},8,["item","onNavClick"]),Object(E["m"])(a,{index:3,item:t.items[2],onNavClick:t.onNavClick,ref:e=>{t.menuItems[t.items[2].id]=e}},{default:Object(E["Z"])(()=>[re,le,ce,he,de,ue,pe]),_:1},8,["item","onNavClick"]),Object(E["m"])(a,{index:4,item:t.items[3],onNavClick:t.onNavClick,ref:e=>{t.menuItems[t.items[3].id]=e}},{default:Object(E["Z"])(()=>[ge,me,_e,be,fe,ve]),_:1},8,["item","onNavClick"])]),content:Object(E["Z"])(()=>[Object(E["m"])(c,{item:t.items[0],onReachChange:e[0]||(e[0]=t=>this.$refs.page&&this.$refs.page.onReachChange())},{default:Object(E["Z"])(()=>[Object(E["m"])(r,null,{default:Object(E["Z"])(()=>[xe,Te,Ee,we,Oe,Ae,ye,De,je,Re,Se]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[Ce]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[Ie]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[Pe]),_:1})]),_:1},8,["item"]),Object(E["m"])(c,{item:t.items[1],onReachChange:e[1]||(e[1]=t=>this.$refs.page&&this.$refs.page.onReachChange())},{default:Object(E["Z"])(()=>[Object(E["m"])(r,null,{default:Object(E["Z"])(()=>[Le]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[Me]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[ke]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[Ne]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[Fe,Be,Ue]),_:1})]),_:1},8,["item"]),Object(E["m"])(c,{item:t.items[2],onReachChange:e[2]||(e[2]=t=>this.$refs.page&&this.$refs.page.onReachChange())},{default:Object(E["Z"])(()=>[Object(E["m"])(r,null,{default:Object(E["Z"])(()=>[He]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[Ge]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[Ve]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[ze]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[Xe]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[We,qe]),_:1}),Object(E["m"])(h,{ratio:480/604},{caption:Object(E["Z"])(()=>[Ze,$e,Qe]),default:Object(E["Z"])(()=>[Object(E["j"])("source",{srcset:"/assets/images/about/example.jpg 1x, /assets/images/about/example@2x.jpg 2x"},null,8,Ye),Object(E["j"])("img",{src:"/assets/images/about/example.jpg",alt:"En ung pige, der renser kantareller"},null,8,Ke)]),_:1})]),_:1},8,["item"]),Object(E["m"])(c,{item:t.items[3],onReachChange:e[3]||(e[3]=t=>this.$refs.page&&this.$refs.page.onReachChange())},{default:Object(E["Z"])(()=>[Object(E["m"])(d,{firstname:"Kia",lastname:"Hartelius",ratio:208/276},{default:Object(E["Z"])(()=>[Object(E["j"])("source",{srcset:"/assets/images/about/portrait-kia-hartelius.jpg 1x, /assets/images/about/portrait-kia-hartelius@2x.jpg 2x"},null,8,Je),Object(E["j"])("img",{src:"/assets/images/about/portrait-kia-hartelius.jpg",alt:"Kia Hartelius"},null,8,ts)]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[es]),_:1}),Object(E["m"])(u,{ratio:480/271,vimeoUrl:"https://vimeo.com/747717621/8bfed903dd"},{default:Object(E["Z"])(()=>[Object(E["j"])("source",{srcset:"/assets/images/about/cover-kia-hartelius.jpg 1x, /assets/images/about/cover-kia-hartelius@2x.jpg 2x"},null,8,ss),Object(E["j"])("img",{src:"/assets/images/about/cover-kia-hartelius.jpg",alt:"Kia Hartelius"},null,8,is)]),_:1},8,["vimeoUrl"]),Object(E["m"])(d,{firstname:"Sigrid",lastname:"Nygaard",ratio:208/276},{default:Object(E["Z"])(()=>[Object(E["j"])("source",{srcset:"/assets/images/about/portrait-sigrid-nygaard.jpg 1x, /assets/images/about/portrait-sigrid-nygaard@2x.jpg 2x"},null,8,ns),Object(E["j"])("img",{src:"/assets/images/about/portrait-sigrid-nygaard.jpg",alt:"Sigrid Nygaard"},null,8,os)]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[as]),_:1}),Object(E["m"])(u,{ratio:480/271,vimeoUrl:"https://vimeo.com/747717775/0fd8958308"},{default:Object(E["Z"])(()=>[Object(E["j"])("source",{srcset:"/assets/images/about/cover-sigrid-nygaard.jpg 1x, /assets/images/about/cover-sigrid-nygaard@2x.jpg 2x"},null,8,rs),Object(E["j"])("img",{src:"/assets/images/about/cover-sigrid-nygaard.jpg",alt:"Sigrid Nygaard"},null,8,ls)]),_:1},8,["vimeoUrl"]),Object(E["m"])(d,{firstname:"Lina Hashim",lastname:"Nygaard",ratio:208/276},{default:Object(E["Z"])(()=>[Object(E["j"])("source",{srcset:"/assets/images/about/portrait-lina-hashim.jpg 1x, /assets/images/about/portrait-lina-hashim@2x.jpg 2x"},null,8,cs),Object(E["j"])("img",{src:"/assets/images/about/portrait-lina-hashim.jpg",alt:"Lina Hashim"},null,8,hs)]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[ds]),_:1}),Object(E["m"])(u,{ratio:480/271,vimeoUrl:"https://vimeo.com/747717705/db3c83cfd5"},{default:Object(E["Z"])(()=>[Object(E["j"])("source",{srcset:"/assets/images/about/cover-lina-hashim.jpg 1x, /assets/images/about/cover-lina-hashim@2x.jpg 2x"},null,8,us),Object(E["j"])("img",{src:"/assets/images/about/cover-lina-hashim.jpg",alt:"Lina Hashim"},null,8,ps)]),_:1},8,["vimeoUrl"])]),_:1},8,["item"])]),_:1},8,["menuItems","items"])}var ms=s("9420"),_s=(s("caad"),s("2cb2"));class bs{constructor(t,e){this._error=t,this._value=e,this._type=t?"error":"ok"}isOk(){return"ok"===this._type}isError(){return"error"===this._type}expect(t){if("error"===this._type)throw t;return this._value}unwrap(){if("error"===this._type)throw this._error;return this._value}unwrapOr(t){return"error"===this._type?t():this._value}get error(){return this._error}static Ok(t){return new bs(!1,t)}static Err(t){return new bs(t)}}const fs=()=>new Promise((t,e)=>{grecaptcha.ready(()=>{grecaptcha.execute("6LfuFz4hAAAAAMcMvbF8fAHJF2K73LhwISRreUbs",{action:"submit"}).then(e=>{t(bs.Ok(e))}).catch(t=>{e(bs.Err("Failed to create reCaptcha token."))})})});async function vs(t){const{Artwork:e,Image:s}=t,i=await fs(),n=i.unwrap(),o=await fetch("https://pvm2zxz5v7.execute-api.eu-west-1.amazonaws.com/production/artwork/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Token:n,Artwork:{ContentType:s.type,...e}})}),a=await o.json();if(201===o.status){const t=a;return await fetch(t.UploadURL,{method:"PUT",body:s}),bs.Ok({ArtworkID:t.ArtworkID})}return 403===o.status?bs.Err({error:"reCaptcha failed",response:a}):bs.Err({error:"Artwork creation failed",response:a})}async function xs(t){const e=await fs(),s=e.unwrap(),i=await fetch("https://pvm2zxz5v7.execute-api.eu-west-1.amazonaws.com/production/artwork/list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Token:s,Parameters:t||{}})}),n=await i.json();return 200===i.status?bs.Ok(n):bs.Err({error:"Artwork listing failed",response:n})}function Ts(t){const e=new URL("https://pvm2zxz5v7.execute-api.eu-west-1.amazonaws.com/production/share/"+t.ArtworkID);return t.lang&&e.searchParams.set("lang",t.lang),e.toString()}const Es=["state","tweak","debug-xr","painting","gallery","skipIntro"];class ws{constructor(){this.params=new Map,this.searchParams=new URLSearchParams(window.location.search);for(const t of Es)this.params.set(t,this.searchParams.get(t))}getBool(t){return"true"==this.params.get(t)||"1"==this.params.get(t)}getString(t){return this.params.get(t)}getNumber(t){return parseFloat(this.params.get(t))||null}}var Os=new ws,As=s("1b5e"),ys=s("e193"),Ds=s("6b23"),js=s("deef"),Rs=s("6848"),Ss=s("813d"),Cs=s.n(Ss),Is=s("551b"),Ps=s.n(Is);const Ls=Nt["mat4"].create();class Ms{constructor(t,e){this.scene=t,this.color=e,this.alpha=0,this.rect=new Ds["a"](t.gl),this.prg=new js["a"](t.gl,Cs()(),Ps()(),t.programs.getGlobalDefinitions());const s=this.scene.gl;this.blendedCfg=new Rs["c"],this.blendedCfg.enableDepthTest(!1).enableBlend(!0).blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA).enableCullface(!0).cullFace(s.FRONT),this.opaqueCfg=new Rs["c"],this.opaqueCfg.enableDepthTest(!1).enableBlend(!1).enableCullface(!0).cullFace(s.FRONT)}get cfg(){return 1!==this.alpha?this.blendedCfg:this.opaqueCfg}show(){return new Promise(t=>{wt["a"].to(this,{alpha:1,duration:.9,onComplete:t})})}hide(){return new Promise(t=>{wt["a"].to(this,{alpha:0,duration:1.5,onComplete:t})})}render(t){Nt["mat4"].invert(Ls,t._viewProj);const e=this.prg,s=this.rect,i=this.scene;e.use(),e.uIMVP(Ls),e.uColor(this.color),e.uAlpha(this.alpha),e.uTime(.08*this.scene.time%1),s.bind(),s.attribPointer(e),i.glstate.push(this.cfg),i.glstate.apply(),s.render(),i.glstate.pop()}}class ks{constructor(t){this.params=t,this._active=!1}get active(){return this._active}handleState(t){var e,s,i,n,o,a;const r=t.matches(this.params.match);r!==this._active&&(this._active=r,r?null===(s=(e=this.params).enter)||void 0===s||s.call(e,t):null===(n=(i=this.params).exit)||void 0===n||n.call(i)),this._active&&(null===(a=(o=this.params).update)||void 0===a||a.call(o,t))}stop(){var t,e;this._active&&(null===(e=(t=this.params).exit)||void 0===e||e.call(t)),this._active=!1}}class Ns{constructor(t){this._onTransition=t=>{this.handlers.filter(t=>t.active).forEach(e=>e.handleState(t)),this.handlers.filter(t=>!t.active).forEach(e=>e.handleState(t))},this.handlers=t.map(t=>new ks(t))}start(){Wx.onTransition(this._onTransition),this._onTransition(Wx.getSnapshot())}stop(){Wx.off(this._onTransition),this.handlers.forEach(t=>t.stop())}}const Fs=()=>{};class Bs{constructor(t){this.activity=t,this.btnDown=t=>{this._inputCallback(t)},this.enterGallery=()=>{this.xrmodule.tooltips.push("A","xr.painting"),this._inputCallback=this.btnDownGallery},this.exitGallery=()=>{this.xrmodule.tooltips.pop("A","xr.painting")},this.btnDownGallery=t=>{switch(t.name){case"A":this.activity.title.hide(),this.activity.floor.hide(),this.activity.background.hide().then(()=>{Wx.send("UPDATE_POV_DATA",{pov:kx}),Wx.send("GOTO_PAINTING")});break;default:break}},this.xrmodule=t.xrmodule,this.stateHelper=new Ns([{match:"gallery",enter:this.enterGallery,exit:this.exitGallery}])}start(){this.xrmodule.xrview.inputs.onBtnDown.on(this.btnDown),this.stateHelper.start()}stop(){this._inputCallback=Fs,this.xrmodule.xrview.inputs.onBtnDown.off(this.btnDown),this.stateHelper.stop()}}const Us=Nt["vec3"].create(),Hs=Nt["vec3"].create(),Gs=[{src:"",id:"oezifhzeifhzeifh",width:1080,height:1920,author:"Banksy",pov:{position:[4.551731586456299,2.5767663717269897,-5.623378276824951],rotation:[.0184288639575243,.8856275677680969,.03527455031871796,-.4626878499984741],format:"landscape",brightness:1,contrast:1,saturation:1,temperature:1,zoom:0,background:"bg2",pose:"pose2",lightDatas:[{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0},{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0},{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0}]}},{src:"",id:"zefzefezfzef",width:1920,height:1080,pov:{position:[3.784916400909424,2.015562057495117,-8.120975494384766],rotation:[.10782328248023987,.2442222535610199,.02733554318547249,-.9633185267448425],format:"landscape",brightness:1,contrast:.14,saturation:.41,temperature:1,zoom:0,background:"bg2",pose:"pose2",lightDatas:[{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0},{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0},{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0}]}},{src:"",id:"zefzefzefzefzef",width:1080,height:1920,pov:{position:[3.0846498012542725,2.061795949935913,-3.9843838214874268],rotation:[-.051345959305763245,-.5087366700172424,.030414551496505737,-.8588513135910034],format:"landscape",brightness:1,contrast:.14,saturation:.41,temperature:1,zoom:0,background:"bg2",pose:"pose1",lightDatas:[{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0},{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0},{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0}]}},{src:"",id:"gergergergergerg",width:1920,height:1080,pov:{position:[4.551731586456299,2.5767663717269897,-5.623378276824951],rotation:[.0184288639575243,.8856275677680969,.03527455031871796,-.4626878499984741],format:"landscape",brightness:1,contrast:1,saturation:1,temperature:1,zoom:0,background:"bg2",pose:"pose1",lightDatas:[{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0},{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0},{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0}]}},{src:"",id:"ergergergergdfhdbf",width:1920,height:1080,pov:{position:[3.784916400909424,2.015562057495117,-8.120975494384766],rotation:[.10782328248023987,.2442222535610199,.02733554318547249,-.9633185267448425],format:"landscape",brightness:1,contrast:.14,saturation:.41,temperature:1,zoom:0,background:"bg1",pose:"pose3",lightDatas:[{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0},{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0},{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0}]}},{src:"",id:"bvsdbedfberbbreb",width:1080,height:1920,pov:{position:[3.0846498012542725,2.061795949935913,-3.9843838214874268],rotation:[-.051345959305763245,-.5087366700172424,.030414551496505737,-.8588513135910034],format:"landscape",brightness:1,contrast:.14,saturation:.41,temperature:1,zoom:0,background:"bg3",pose:"pose3",lightDatas:[{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0},{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0},{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0}]}},{src:"",id:"berdcxbchyjiykll",width:1080,height:1080,pov:{position:[4.551731586456299,2.5767663717269897,-5.623378276824951],rotation:[.0184288639575243,.8856275677680969,.03527455031871796,-.4626878499984741],format:"landscape",brightness:1,contrast:1,saturation:1,temperature:1,zoom:0,background:"bg1",pose:"pose2",lightDatas:[{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0},{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0},{position:Us,lookat:Hs,hue:0,saturation:0,intensity:0,isOn:!0}]}}],Vs=[...Gs,...Gs,...Gs];s("d9e2"),s("2e9a");const zs=[Nt["vec3"].fromValues(1,0,0),Nt["vec3"].fromValues(1,1,0),Nt["vec3"].fromValues(0,1,1),Nt["vec3"].fromValues(0,0,1),Nt["vec3"].fromValues(0,1,0),Nt["vec3"].fromValues(1,0,1)],Xs=t=>(t%=zs.length,zs[t]),Ws={ctx:null,init(){if(!Ws.ctx){const t=document.createElement("canvas"),e=t.getContext("2d");Ws.ctx=e}return Ws}},qs=t=>{const{ctx:e}=Ws.init(),s=1;return e.canvas.width=t.width*s,e.canvas.height=t.height*s,e.canvas.style.width=t.width+"px",e.canvas.style.height=t.height+"px",e.fillStyle=t.color?`rgb(${Math.floor(255*t.color[0])}, ${Math.floor(255*t.color[1])}, ${Math.floor(255*t.color[2])})`:"#FFFFFF",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="#000000",e.font="bold 100px verdana, sans-serif",e.fillText(t.index.toString(),.5*e.canvas.width,.5*e.canvas.height),e.canvas.toDataURL()};function Ys(t){return new Promise(e=>{setTimeout(e,1e3*t)})}function Ks(t){const e=new Blob([t],{type:"application/javascript"});return new Worker(URL.createObjectURL(e))}Ks("\nconst BlobCache = new Map();\nconst BitmapCache = new Map();\nself.addEventListener(\"message\", async (e) => {\n  const Item = e.data;\n  try {\n    if (!BlobCache.has(Item.ImageURL)) {\n      const response = await fetch(Item.ImageURL);\n      const Blob = await response.blob();\n      BlobCache.set(Item.ImageURL, Blob);\n      if (Item.Debug) console.log('Load Blob');\n    }\n\n    if (!BitmapCache.has(Item.ImageURL) && typeof self.createImageBitmap === \"function\") {\n      const Blob = BlobCache.get(Item.ImageURL);\n      const Bitmap = await self.createImageBitmap(Blob, {\n        colorSpaceConversion: 'none',\n      });\n      BitmapCache.set(Item.ImageURL, Bitmap);\n      if (Item.Debug) console.log('Load Bitmap');\n    }\n\n    const Bitmap = BitmapCache.get(Item.ImageURL);\n    const Blob = BlobCache.get(Item.ImageURL);\n    self.postMessage({ ...Item, Bitmap, Blob, Success: true });\n  } catch (e) {\n    console.error(e);\n    self.postMessage({ ...Item, Success: false });\n  }\n});\n");class Zs{constructor(){this.loading={NextToken:void 0,Author:!0,HasMore:!0,PerPage:20,Promise:Promise.resolve()},this.datas=[],this.queue=[],this.listeners=new Set,this.sampleOffset=0,this.tick={delay:0,running:!1,enabled:!1},this.next=this.next.bind(this)}enable(t){if(this.tick.enabled=!0,this.queue.length>0){t.appendBehavior="default";for(const t of this.queue)this.dispatch(t);this.queue=[],t.appendBehavior="reveal"}}disable(){this.tick.enabled=!1}dispatch(t){this.datas.push(t);for(const e of this.listeners)e(t)}async load(t=!1){t?await this.loadFromSample():await this.loadFromAPI()}loadUserMedia(){var t,e,s,i;const n=null===(e=null===(t=null===Wx||void 0===Wx?void 0:Wx.state)||void 0===t?void 0:t.context)||void 0===e?void 0:e.sharedMedia,o=null===(i=null===(s=null===Wx||void 0===Wx?void 0:Wx.state)||void 0===s?void 0:s.context)||void 0===i?void 0:i.povDatas;if(!n||!n.blob)return!1;const a={id:n.artworkId,width:Lx[o.format].width,height:Lx[o.format].height,src:URL.createObjectURL(n.blob),pov:o};return this.datas.unshift(a),!0}async loadFromSample(){await this.loading.Promise,await Ys(3*Math.random());const t=Vs.slice(this.sampleOffset,this.sampleOffset+Math.min(this.loading.PerPage,Vs.length)).map((t,e)=>(e=this.datas.length+e,{ArtworkID:e.toString(),ContentType:"image/png",CreatedAt:Date.now(),Format:t.pov.format,ImageURL:qs({...t,color:Xs(e),index:e}),ImageKey:"",Status:"published",UserType:t.author?"Known":"Unknown",Author:t.author,PostProcessing:{Brightness:t.pov.brightness,Contrast:t.pov.contrast,Saturation:t.pov.saturation,Temperature:t.pov.temperature,Zoom:t.pov.zoom},PointOfView:{Position:t.pov.position,Rotation:t.pov.rotation},Background:t.pov.background,Pose:t.pov.pose}));this.loading.Promise=this.loadItems(t)}async loadFromAPI(){if(!this.loading.HasMore)return;await this.loading.Promise;const t=await xs({Author:this.loading.Author,Limit:this.loading.PerPage,NextToken:this.loading.NextToken}),e=t.unwrap();if(this.loading.NextToken=e.NextToken,0===e.Count&&this.loading.Author)return this.loading.Author=!1,this.loading.NextToken=void 0,this.loadFromAPI();e.NextToken||this.loading.Author||(this.loading.HasMore=!1),this.loading.Promise=this.loadItems(e.Items)}async loadItems(t){const e=await Promise.all(t.map(async t=>{try{const e=/^\/\//.test(t.ImageURL)?window.location.protocol+t.ImageURL:t.ImageURL;return{author:t.Author,id:t.ArtworkID,width:Lx[t.Format].width,height:Lx[t.Format].height,src:e,pov:{zoom:t.PostProcessing.Zoom,brightness:t.PostProcessing.Brightness,contrast:t.PostProcessing.Contrast,saturation:t.PostProcessing.Saturation,format:t.Format,temperature:t.PostProcessing.Temperature,position:t.PointOfView.Position,rotation:t.PointOfView.Rotation,background:t.Background,pose:t.Pose,lightDatas:[this.parseLight(t.Light0),this.parseLight(t.Light1),this.parseLight(t.Light2)]}}}catch(e){return null}}));e.filter(t=>!!t&&-1===this.datas.findIndex(e=>e.id===t.id)).forEach(t=>this.queue.push(t)),this.tick.running||this.next()}parseLight(t){return{position:new Float32Array(t.Position),lookat:new Float32Array(t.Lookat),intensity:t.Intensity,hue:t.Hue,saturation:t.Saturation,isOn:t.IsOn}}async next(){this.tick.enabled&&(this.tick.running=!0,await Ys(this.tick.delay),this.queue.length>0?(this.dispatch(this.queue.shift()),this.next()):this.tick.running=!1)}}var $s=s("085d"),Qs=s("7c26");const Js=new Float32Array([-1,-1,-1,1,1,1,1,-1]),ti=new Uint8Array([0,1,2,0,2,3]),ei="\nattribute vec2 aPosition;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nuniform mat4 uViewProjectionMatrix;\nuniform mat4 uWorldMatrix;\n\nvoid main(void) {\n  vUv = aPosition * 0.5 + 0.5;\n  vUv.y = 1.0 - vUv.y;\n  vec3 position = vec3(aPosition, 0.0);\n  vec4 worldPosition = uWorldMatrix * vec4(position.xyz, 1.0);\n  vWorldPosition = worldPosition.xyz;\n  gl_Position = uViewProjectionMatrix * worldPosition;\n}\n",si="precision lowp float;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nuniform vec4 uColor;\nuniform sampler2D uTexture;\nuniform vec2 uFog;\nuniform float uRatio;\nuniform vec2 uFrame;\n\nconst vec3 FRAME_COLOR = vec3(1.0);\n\nfloat computeFrame(in vec2 uv, in vec2 frameValues)\n{\n  float screenRatio = frameValues.x;\n  vec2 width = vec2(frameValues.y);\n\n  vec2 topLeft = uv;\n  topLeft = vec2(topLeft.x * screenRatio, topLeft.y);\n  topLeft = step(topLeft, width);\n\n  vec2 bottomRight = 1.0 - uv;\n  bottomRight = vec2(bottomRight.x * screenRatio, bottomRight.y);\n  bottomRight = step(bottomRight, width);\n\n  float frame = max(topLeft.x, topLeft.y) + max(bottomRight.x, bottomRight.y);\n  return clamp(frame, 0.0, 1.0);\n}\n\nvoid main(void)\n{\n  float fog = abs(vWorldPosition.x);\n  fog = 1.0 - clamp(fog / uFog.x, 0.0, 1.0);\n  fog = smoothstep(0.0, uFog.y, fog);\n  if (fog == 0.0) discard;\n  // vec3 color = texture2D(uTexture, vUv).rgb * uColor.rgb;\n  vec3 color = mix(uColor.rgb, texture2D(uTexture, vUv).rgb, uColor.a);\n  // float frame = computeFrame(vUv, uFrame);\n  // color = mix(color.rgb, FRAME_COLOR, frame);\n  // color *= fog;\n  gl_FragColor = vec4(color.rgb, clamp(fog, 0.0, 1.0));\n}\n",ii=Nt["vec2"].create(),ni=Nt["vec4"].fromValues(1,1,1,1);class oi{constructor(t,e){this.gl=t,this.state=e,this.frameWidth=.02,this.buffer=new $s["a"](t,Js),this.buffer.attrib("aPosition",2,t.FLOAT),this.ibuffer=new Qs["a"](t,t.UNSIGNED_BYTE,ti),this.program=new js["a"](t,ei,si),this.config=e.config(),this.config.enableDepthTest(!0).enableBlend(!0).blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)}render({camera:t,node:e,color:s,texture:i,fog:n}){s||(s=ni),this.state.push(this.config),this.state.apply(),this.program.use(),this.program.uViewProjectionMatrix(t._viewProj),this.program.uWorldMatrix(e._wmatrix),this.program.uTexture(i),this.program.uColor(s),Nt["vec2"].set(ii,2*n.worldRadius,n.edge),this.program.uFog(ii),this.buffer.bind(),this.buffer.attribPointer(this.program),this.ibuffer.bind(),this.ibuffer.drawTriangles(),this.state.pop(),this.state.apply()}}const ai={get public(){return s.p},resolve(t){return this.public+t}};var ri=ai,li=s("18c9");function ci(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,s="x"==t?e:3&e|8;return s.toString(16)}))}class hi{constructor(){this.id=ci(),this.resourceIdx=-1,this.loading=!1,this.loaded=!1,this.locked=!1,this.src="",this.loadedTime=Number.MAX_VALUE}}const di=512;let ui;const pi=void 0!==window.createImageBitmap;function gi(t){return ui||(ui=document.createElement("canvas").getContext("2d"),ui.canvas.width=ui.canvas.height=di),ui.drawImage(t,0,0,di,di),pi?createImageBitmap(ui.canvas,0,0,di,di):Promise.resolve(t)}class mi{constructor(t){this.onImageLoaded=async()=>{this.img.removeEventListener("load",this.onImageLoaded);const t=await gi(this.img);this.texture.fromImage(t),this._defer.resolve(this)},this.texture=new li["a"](t),this.texture.bind(),this.texture.setFilter(!0,!1,!1),this.texture.clamp(),this.img=document.createElement("img"),this.img.crossOrigin="anonymous",this.img.decoding="async"}load(t,e=null){return this.id=e,this._defer=new Bt,this.img.addEventListener("load",this.onImageLoaded),this.img.src=t,this._defer.promise}}class _i{constructor(t,e){this.id=e,this.tex=t,this.allocator=null}get available(){return null===this.allocator||!this.allocator.locked&&!this.loading}async setAllocator(t){null!=this.allocator&&(this.allocator.loadedTime=Number.MAX_VALUE,this.allocator.resourceIdx=-1),this.allocator!==t&&(this.allocator=t,this.allocator.loadedTime=Number.MAX_VALUE,null!=this.allocator&&this.load())}async load(){return this.allocator&&(this.allocator.loading=!0),this.loading=!0,this.tex.load(this.allocator.src,this.allocator.id).then(this.onTexLoaded.bind(this))}onTexLoaded(t){(null===this.allocator||null!=this.allocator&&t.id===this.allocator.id)&&this.allocator&&(this.allocator.loadedTime=Date.now(),this.allocator.loaded=!0,this.allocator.loading=!1),this.loading=!1}}class bi{constructor(t,e,s="stream_empty.png"){this._poolCount=1,this._lockTime=0,this._poolCount=e,this.gl=t,this._streamedPool=[],this._allocators=[],this._emptySrc=s,this._emptyTex=new mi(this.gl),this._emptyTex.load(s),this._bindedRegistry=[],this._lockloading=!1}get EmptyTexture(){return this._emptyTex.texture}alloc(){const t=[];for(var e=0;e<this._poolCount;e++){let s=new mi(this.gl),i=new _i(s,"sidx_"+e);t.push(s.load(this._emptySrc)),this._streamedPool.push(i)}return Promise.all(t)}prepare(t){this._lockTime+=t,this._lockTime>.024&&(this._lockTime=0,this._lockloading=!1)}registerAllocator(t){this._allocators.push(t)}isTexReady(t){const e=t.resourceIdx;return-1!==e&&!this._streamedPool[e].loading}getTex(t){let e=t.resourceIdx,s=-1!==e;if(this._lockloading&&!s)return this._emptyTex.texture;if(s)return this._streamedPool[e].loading?this._emptyTex.texture:this._streamedPool[e].tex.texture;let i=-1;for(let n=0;n<this._poolCount;n++)if(this._streamedPool[n].available){i=n;break}return t.resourceIdx=i,-1===i?this._emptyTex.texture:(this._streamedPool[i].setAllocator(t),this._lockloading=!0,this._streamedPool[i].loading?this._emptyTex.texture:this._streamedPool[i].tex.texture)}}class fi{constructor(t){this.gl=t,this._streamingPool={landscape:new bi(t,12,ri.resolve("assets/webgl/empty_landscape.png")),portrait:new bi(t,12,ri.resolve("assets/webgl/empty_portrait.png")),square:new bi(t,12,ri.resolve("assets/webgl/empty_square.png"))}}alloc(){return Promise.all([this._streamingPool["landscape"].alloc(),this._streamingPool["portrait"].alloc(),this._streamingPool["square"].alloc()])}registerAllocator(t,e){this._streamingPool[t].registerAllocator(e)}get(t,e){return this._streamingPool[t].getTex(e)}prepare(t){this._streamingPool["landscape"].prepare(t),this._streamingPool["portrait"].prepare(t),this._streamingPool["square"].prepare(t)}}var vi=s("cb06");function xi(t,e,s){return Nt["vec3"].transformMat4(t,t,e._wmatrix),Nt["vec3"].transformMat4(t,t,s._viewProj),t[0]=.5*t[0]+.5,t[1]=.5*t[1]+.5,t[2]=0,t}const Ti=Nt["vec3"].create(),Ei={a:Nt["vec3"].fromValues(-1,-1,0),b:Nt["vec3"].fromValues(1,-1,0),c:Nt["vec3"].fromValues(1,1,0),d:Nt["vec3"].fromValues(-1,1,0)};class wi{constructor(){this.node=new vi["a"],this.screen={left:0,top:0,right:0,bottom:0},this.world={a:Nt["vec3"].create(),b:Nt["vec3"].create(),c:Nt["vec3"].create(),d:Nt["vec3"].create()}}compute(t){xi(Nt["vec3"].copy(Ti,Ei.a),this.node,t),this.screen.left=Ti[0],this.screen.top=Ti[1],xi(Nt["vec3"].copy(Ti,Ei.c),this.node,t),this.screen.right=Ti[0],this.screen.bottom=Ti[1],Nt["vec3"].transformMat4(this.world.a,Ei.a,this.node._wmatrix),Nt["vec3"].transformMat4(this.world.b,Ei.b,this.node._wmatrix),Nt["vec3"].transformMat4(this.world.c,Ei.c,this.node._wmatrix),Nt["vec3"].transformMat4(this.world.d,Ei.d,this.node._wmatrix)}intersectScreen(t){return t[0]>=this.screen.left&&t[0]<=this.screen.right&&t[1]>=this.screen.top&&t[1]<=this.screen.bottom}isScreenVisible(){return(this.screen.left>=0&&this.screen.left<=1||this.screen.right>=0&&this.screen.right<=1)&&(this.screen.top>=0&&this.screen.top<=1||this.screen.bottom>=0&&this.screen.bottom<=1)}isRadiusVisible(t){return Nt["vec3"].length(this.world.a)<t||Nt["vec3"].length(this.world.b)<t||Nt["vec3"].length(this.world.c)<t||Nt["vec3"].length(this.world.d)<t}}function Oi(t,e){return new Promise(s=>{wt["a"].to(t,{...e,onComplete(...t){e.onComplete&&e.onComplete(...t),s()}})})}function Ai(t,e){return new Promise(s=>{const i={},n={};Object.entries(e).forEach(([t,e])=>{Array.isArray(e)?(i[t]=e[0],n[t]=e[1]):n[t]=e}),wt["a"].fromTo(t,i,{...n,onComplete(...t){e.onComplete&&e.onComplete(...t),s()}})})}const yi=Nt["mat3"].create(),Di=new Float32Array(yi.buffer,0,3),ji=new Float32Array(yi.buffer,12,3),Ri=new Float32Array(yi.buffer,24,3),Si=Nt["vec3"].fromValues(0,1,0),Ci=(Math.PI,Math.PI/180);function Ii(t){return Math.min(1,Math.max(0,t))}function Pi(t,e,s){return Math.min(s,Math.max(e,t))}function Li(t,e,s){return t*(1-s)+e*s}function Mi(t,e){Nt["vec3"].normalize(Ri,e),Nt["vec3"].cross(Di,Si,Ri),Nt["vec3"].normalize(Di,Di),Nt["vec3"].cross(ji,Ri,Di),t.set(yi)}const ki=Nt["vec3"].create(),Ni=220,Fi=Nt["mat3"].create(),Bi=Nt["quat"].create();class Ui{constructor(t){this.textures=t,this.visible=!1,this.visibleOnScreen=!1,this.focused=!1,this.revealState="done",this.index=-1,this.posX=0,this.root=new vi["a"],this.focusNode=new vi["a"],this.direction=Nt["vec3"].fromValues(0,0,0),this.staticBounds=new wi,this.movingBounds=new wi,this.gap=0,this.allocator=new hi,this.root.add(this.staticBounds.node),this.root.add(this.focusNode),this.focusNode.add(this.movingBounds.node),this.color=Nt["vec4"].fromValues(1,1,1,1),this.seed=100*Math.random()}get Allocator(){return this.allocator}get width(){return this.staticBounds.node.scale[0]*this.root.scale[0]*2}get height(){return this.staticBounds.node.scale[1]*this.root.scale[1]*2}setData(t){this.data=t,this.allocator.src=t.src;const e=Ni,s=this.data.width/this.data.height,i=.5*e;this.movingBounds.node.scale[0]=s*i,this.movingBounds.node.scale[1]=i,this.movingBounds.node.invalidate(),this.staticBounds.node.scale[0]=this.movingBounds.node.scale[0],this.staticBounds.node.scale[1]=this.movingBounds.node.scale[1],this.staticBounds.node.invalidate();let n="square";s<1?n="portrait":s>1&&(n="landscape")}enable(t){t.root.add(this.root),t.queued&&(this.revealState="idle",this.focusNode.setScale(Number.EPSILON))}disable(t){this.allocator.locked=!1,t.root.remove(this.root)}update(t){this.staticBounds.compute(t),this.movingBounds.compute(t),this.visible=this.staticBounds.isRadiusVisible(2*this.fog.worldRadius)&&"idle"!==this.revealState,this.visibleOnScreen=this.staticBounds.isScreenVisible(),this.allocator.locked=this.visible,Nt["vec3"].set(this.direction,0,0,1),Nt["mat3"].fromMat4(Fi,this.root._wmatrix),Nt["quat"].fromMat3(Bi,Fi),Nt["vec3"].transformQuat(this.direction,this.direction,Bi),Nt["vec3"].normalize(this.direction,this.direction)}async focus(t,e={distance:50,gap:50}){this.focused!==t&&(this.focused=t,Nt["vec3"].scale(ki,this.direction,e.distance),await Promise.all([Oi(this.focusNode,{x:t?ki[0]:0,z:t?ki[2]:0,duration:.25}),Oi(this,{gap:t?e.gap:0,duration:.25})]))}async reveal(){if("idle"!==this.revealState)return;this.revealState="running";const t={value:Number.EPSILON};await Oi(t,{value:1,onUpdate:()=>{this.focusNode.setScale(t.value)}}),this.revealState="done"}render(t,e,s){if(!this.visible)return;const i=.5*(Math.sin(8*(s+this.seed))+1);this.color[0]=.18*i,this.color[1]=.18*i,this.color[2]=.18*i,this.color[3]=0,this.allocator.loaded&&(this.color[3]=Ii((Date.now()-this.allocator.loadedTime)/1e3*3)),e.render({camera:t,texture:this.textures.get(this.data.pov.format,this.Allocator),node:this.movingBounds.node,color:this.color,fog:this.fog})}}class Hi{constructor(t){this.strip=t,this.root=new vi["a"],this.queued=!1,this.posX=0,this.states={index:-1,items:[]}}get width(){return this.ref.width}get height(){return this.ref.height}get data(){return this.ref.data}setData(t){const e=new Ui(this.strip.textures);e.setData(t),this.ref=e}createState(t){if(this.states.index++,!this.states.items[this.states.index]){const t=new Ui(this.strip.textures);t.setData(this.ref.data),this.states.items[this.states.index]=t}const e=this.states.items[this.states.index];return e.fog=t.fog,e.posX=this.posX,e.enable(this),e}currentState(){return this.states.items[this.states.index]}resetState(){this.states.index=-1;for(let t=0;t<=this.states.index;t++){const t=this.states.items[this.states.index];t.disable(this)}}render(t,e){for(let s=0;s<=this.states.index;s++){const i=this.states.items[s];i.render(t,e,this.strip.time.current/1e3)}}eachState(t){for(let e=0;e<this.states.items.length;e++){const s=this.states.items[e];t(s,e)}}}class Gi{constructor(){this._listeners=[]}indexOf(t,e){return this._listeners.findIndex(s=>s.type===t&&s.listener===e)}add(t,e,s){this._listeners.push({type:t,listener:e,once:!!(null===s||void 0===s?void 0:s.once)})}remove(t,e){const s=this.indexOf(t,e);-1!==s&&this._listeners.splice(s,1)}dispatch(t){const e=[];for(const s of this._listeners){const{listener:i,once:n,type:o}=s;o===t.type&&(i(t),n&&e.push(s))}if(e.length>0)for(const s of e)this.remove(s.type,s.listener)}}class Vi{constructor(){this.metrics={width:0,height:0},this.onPointer=this.onPointer.bind(this),this.onResize=this.onResize.bind(this)}setDispatcher(t){this.dispatcher=t}enable(){window.addEventListener("pointerup",this.onPointer),window.addEventListener("pointerdown",this.onPointer),window.addEventListener("pointermove",this.onPointer),window.addEventListener("pointercancel",this.onPointer),window.addEventListener("pointerleave",this.onPointer),window.addEventListener("pointerout",this.onPointer),window.addEventListener("resize",this.onResize),this.onResize()}disable(){window.removeEventListener("pointerup",this.onPointer),window.removeEventListener("pointerdown",this.onPointer),window.removeEventListener("pointermove",this.onPointer),window.removeEventListener("pointercancel",this.onPointer),window.removeEventListener("pointerleave",this.onPointer),window.removeEventListener("pointerout",this.onPointer),window.removeEventListener("resize",this.onResize)}onPointer(t){this.dispatcher.dispatch({type:t.type,pointerType:t.pointerType,clientX:t.clientX,clientY:t.clientY,normalizedX:t.clientX/this.metrics.width,normalizedY:t.clientY/this.metrics.height})}onResize(){this.metrics.width=window.innerWidth,this.metrics.height=window.innerHeight}}class zi{constructor(){this.onPointer=this.onPointer.bind(this)}setDispatcher(t){this.dispatcher=t}registerXRModule(t){this.xrmodule||(this.xrmodule=t)}enable(){}disable(){}preRender(){}onPointer(t){this.dispatcher.dispatch({type:"pointerup",pointerType:"xr_controller",clientX:0,clientY:0,normalizedX:0,normalizedY:0})}}class Xi extends Gi{constructor(){super(),this.mode="browser"}get mode(){return this._mode}set mode(t){t!==this._mode&&(this._mode=t,this.pointer&&(this.pointer.disable(),this.pointer=null),this.pointer="browser"===t?new Vi:new zi,this.pointer.setDispatcher(this),this.pointer.enable())}}class Wi{constructor(t){this.strip=t,this.pointer={type:"mouse",active:!1,canClick:!1,value:Nt["vec2"].fromValues(-1,-1)},this.screen={width:window.innerWidth,height:window.innerHeight},this.focus={enabled:!1,active:[],items:[],distance:200,gap:50,transitioning:!1,auto:{state:void 0}},this.drag={enabled:!1,isPointerDown:!1,startTime:0,startX:0,clientX:0,x:0,inertia:0,speedMultiplier:10,friction:.96},this.snap={enabled:!1,active:!1,snapping:!1,time:0,delay:2e3},this.nextLoading={enabled:!1,stripOffset:0,stripLength:0,stride:800,progress:0,time:0,pending:!1,timeTarget:1e4},this.events=document.createElement("div"),this.onDrag=this.onDrag.bind(this),this.onPointer=this.onPointer.bind(this),this.onResize=this.onResize.bind(this),this.inputs=new Xi}enable(){this.inputs.add("pointerup",this.onDrag),this.inputs.add("pointerdown",this.onDrag),this.inputs.add("pointermove",this.onDrag),this.inputs.add("pointercancel",this.onDrag),this.inputs.add("pointerleave",this.onDrag),this.inputs.add("pointerout",this.onDrag),this.inputs.add("pointermove",this.onPointer),this.inputs.add("pointercancel",this.onPointer),this.inputs.add("pointerleave",this.onPointer),this.inputs.add("pointerout",this.onPointer),this.inputs.add("pointerdown",this.onPointer),this.inputs.add("pointerup",this.onPointer),window.addEventListener("resize",this.onResize),this.onResize()}disable(){this.inputs.remove("pointerup",this.onDrag),this.inputs.remove("pointerdown",this.onDrag),this.inputs.remove("pointermove",this.onDrag),this.inputs.remove("pointercancel",this.onDrag),this.inputs.remove("pointerleave",this.onDrag),this.inputs.remove("pointerout",this.onDrag),this.inputs.remove("pointermove",this.onPointer),this.inputs.remove("pointercancel",this.onPointer),this.inputs.remove("pointerleave",this.onPointer),this.inputs.remove("pointerout",this.onPointer),this.inputs.remove("pointerdown",this.onPointer),this.inputs.remove("pointerup",this.onPointer),window.removeEventListener("resize",this.onResize)}update(t){const e=this.nextLoading,s=Math.abs(e.stripLength+e.stripOffset);if(this.nextLoading.enabled&&s<e.stride&&!this.nextLoading.pending&&(this.events.dispatchEvent(new CustomEvent("i:load")),this.nextLoading.pending=!0),"mobile"===this.strip.mode){const e=this.strip.findClosestFromCenter();if(!e)return;return!this.drag.isPointerDown&&this.snap.enabled?this.snap.active||(this.snap.time+=t,this.snap.time>=this.snap.delay&&(this.snap.active=!0,this.snap.time=0,this.onSnap())):this.snap.time=0,void(this.focus.auto.state!==e&&(this.focus.auto.state=e,this.events.dispatchEvent(new CustomEvent("i:over",{detail:e}))))}}onDrag(t){if(!this.strip.introTween.running&&!this.snap.snapping)switch(t.type){case"pointerdown":this.drag.isPointerDown=!0,this.drag.startTime=Date.now(),this.drag.startX=t.clientX,this.drag.x=0,this.drag.clientX=t.clientX;break;case"pointermove":if(!this.drag.isPointerDown)return;this.drag.x=t.clientX-this.drag.startX,this.drag.clientX=t.clientX,!this.drag.enabled&&Math.abs(this.drag.x)>=10&&(this.drag.enabled=!0,this.events.dispatchEvent(new CustomEvent("i:dragstart")));break;case"pointerout":case"pointerleave":case"pointercancel":case"pointerup":{if(!this.drag.isPointerDown)return;const t=Date.now()-this.drag.startTime,e=this.drag.clientX-this.drag.startX,s=e/t;this.strip.offset+=e,this.events.dispatchEvent(new CustomEvent("i:dragend")),this.drag.enabled=!1,this.drag.isPointerDown=!1,this.drag.startTime=0,this.drag.startX=0,this.drag.x=0,this.drag.clientX=0,this.drag.inertia=s*this.drag.speedMultiplier,this.snap.active=!1;break}}}onPointer(t){if(!this.strip.introTween.running&&!this.snap.snapping&&(this.pointer.type=t.pointerType,"touch"!==this.pointer.type&&(this.pointer.active=!0),"pointerout"!==t.type||"touch"!==this.pointer.type))switch(t.type){case"pointerup":"touch"!==this.pointer.type&&this.click(),this.snap.time=0;break;case"pointerdown":"touch"===this.pointer.type&&(Nt["vec2"].set(this.pointer.value,t.normalizedX,t.normalizedY),this.pointer.active=!this.pointer.active,this.pointer.active||this.click()),this.pointer.canClick=!0,this.snap.time=0;break;case"pointermove":Nt["vec2"].set(this.pointer.value,t.normalizedX,t.normalizedY),this.pointer.canClick=!1,this.snap.time=0;break;case"pointerout":case"pointerleave":case"pointercancel":Nt["vec2"].set(this.pointer.value,-1,-1),this.pointer.canClick=!1,this.pointer.active=!1,this.snap.time=0;break}}click(){const t=Array.from(this.focus.items).find(t=>t.focused);if(t){const e=t.staticBounds.intersectScreen(this.pointer.value);e&&!this.drag.enabled&&this.pointer.canClick&&(this.cleanup(),this.events.dispatchEvent(new CustomEvent("i:click",{detail:t})))}this.pointer.canClick=!1}onResize(){this.screen.width=window.innerWidth,this.screen.height=window.innerHeight,this.strip.computePositions(),this.events.dispatchEvent(new CustomEvent("i:resize"))}onFocus(t,e){"mobile"!==this.strip.mode&&(e=e&&this.pointer.active,this.focus.transitioning||!e||this.focus.items.includes(t)?!e&&this.focus.active.includes(t)&&(this.focus.active.splice(this.focus.active.indexOf(t),1),this.events.dispatchEvent(new CustomEvent("i:out",{detail:t})),t.focus(!1,this.focus).then(()=>{this.focus.items.splice(this.focus.items.indexOf(t),1)})):(this.focus.items.push(t),this.events.dispatchEvent(new CustomEvent("i:over",{detail:t})),this.strip.mode,this.focus.transitioning=!0,t.focus(!0,this.focus).then(()=>{this.focus.transitioning=!1,this.focus.active.push(t)})),this.focus.enabled=this.focus.items.length>0)}async onSnap(){const t=this.strip.findClosestFromCenter();t&&(this.stopSnap(),this.cleanup(),this.snap.snapping=!0,await Oi(this.strip,{offset:-t.posX}),this.snap.snapping=!1)}stopSnap(){wt["a"].killTweensOf(this.strip)}cleanup(){for(const t of this.focus.items)this.onFocus(t,!1);this.focus.items=[],Nt["vec2"].set(this.pointer.value,-1,-1),this.pointer.canClick=!1,this.pointer.active=!1,this.drag.enabled=!1,this.drag.isPointerDown=!1,this.drag.startTime=0,this.drag.startX=0,this.drag.x=0,this.drag.clientX=0,this.drag.inertia=0}}class qi{constructor(){this.root=new vi["a"],this.edge=.2,this._radius=0}get radius(){return this._radius}set radius(t){this._radius=t,this.updateScale()}get worldRadius(){return this.root._wmatrix[0]}updateScale(){this.root.setScale(this._radius)}}const Yi=Nt["quat"].create();class Ki{constructor(t){this.root=new vi["a"],this.entries=[],this.gap=15,this.offset=0,this.length=0,this.oldLength=0,this.minLength=4e3,this.curve={width:0,depth:500,minWidth:2560},this.loop={length:Number.EPSILON,count:3,repeat:1},this.autoScroll={enabled:!0,speed:0,_speed:0,speedTarget:.5,delay:{value:0,target:250}},this.introTween={running:!1,gap:0,user:!1,tweakX:0,width:1e3},this.time={current:0,delta:0},this.next={timeoutID:-1,delay:250,pixelPerSecond:1e3},this.fog=new qi,this.appendBehavior="default",this.visibleStates=[],this.states={index:-1},this._mode="desktop",this.prepend=this.prepend.bind(this),this.append=this.append.bind(this),this.textures=new fi(t.gl),this.interactions=new Wi(this),this.mesh=new oi(t.gl,t.glstate),this.root.add(this.fog.root)}get mode(){return this._mode}set mode(t){t!==this._mode&&(this._mode=t,this.interactions.inputs.mode="xr"===t?"xr":"browser")}enable(){this.interactions.enable(),this.time.current=performance.now()}disable(){this.interactions.disable()}load(){return Promise.all([this.textures.alloc()])}prepend(t){const e=new Hi(this);e.setData(t),e.posX=0,this.entries.unshift(e),this.computePositions()}append(t){const e=new Hi(this);e.queued="reveal"===this.appendBehavior,e.setData(t);let s=this.length;e.posX=s+.5*e.width,s=s+e.width+this.gap,this.length=s,this.oldLength=this.length,this.root.add(e.root),this.entries.push(e),this.addQueue(e);const i=Math.ceil(Math.max(this.minLength,this.length)/this.length);this.loop.repeat=i,this.loop.count=2,this.loop.length=this.length*i}computePositions(){this.length=0;for(const t of this.entries){let e=this.length;t.posX=e+.5*t.width,e=e+t.width+this.gap,this.length=e}}rebuild(){for(let s=0;s<this.entries.length;s++){const t=this.entries[s];this.root.remove(t.root)}const t=this.entries.slice(0).map(t=>t.data);this.length=0,this.entries=[];const e=this.appendBehavior;this.appendBehavior="default",t.forEach(this.append,this),this.appendBehavior=e}preRender(t){const e=performance.now();this.time.delta=e-this.time.current,this.time.current=e,this.textures.prepare(this.time.delta/1e3);let s=0;const i=!this.interactions.drag.isPointerDown&&this.autoScroll.enabled;this.autoScroll._speed=i?this.autoScroll.speedTarget:0,this.autoScroll.speed+=.05*(this.autoScroll._speed-this.autoScroll.speed)*(.1*this.time.delta),this.offset-=this.autoScroll.speed*(.1*this.time.delta),this.interactions.drag.isPointerDown?(this.offset=this.loopOffset(this.offset),s=this.offset,s+=this.interactions.drag.x,s=this.loopOffset(s)):(this.interactions.drag.inertia*=this.interactions.drag.friction,this.offset+=this.interactions.drag.inertia,this.offset=this.loopOffset(this.offset),s=this.offset);for(let n=0;n<this.entries.length;n++){const e=this.entries[n];this.placeItem(e,0,t,s)}this.root.updateWorldMatrix();for(let n=0;n<this.entries.length;n++){const e=this.entries[n],s=e.currentState();s.update(t),"xr"!==this._mode&&this.interactions.onFocus(s,!this.interactions.drag.enabled&&s.staticBounds.intersectScreen(this.interactions.pointer.value)),s.visible&&this.visibleStates.push(s)}this.interactions.nextLoading.stripOffset=s,this.interactions.nextLoading.stripLength=this.length,this.interactions.update(this.time.delta)}loopOffset(t){return Pi(t,-this.length,0)}render(t){for(let e=0;e<this.entries.length;e++){const s=this.entries[e];s.render(t,this.mesh)}}postRender(){for(let t=0;t<this.entries.length;t++){const e=this.entries[t];e.resetState()}this.visibleStates=[],this.states.index=-1}addQueue(t){t.queued&&(clearTimeout(this.next.timeoutID),this.next.timeoutID=setTimeout(this.revealQueued.bind(this),this.next.delay))}async revealQueued(){const t=(this.length-this.oldLength)/this.next.pixelPerSecond,e=(t=!1)=>{for(const e of this.entries)if(e.queued){const s=e.posX+.5*e.width;(t||this.oldLength>=s&&e.queued)&&(e.queued=!1,e.eachState(t=>t.reveal()))}};await Oi(this,{oldLength:this.length,duration:t,onUpdate:()=>e(!1),onComplete:()=>{this.oldLength=this.length,e(!0)}})}generate(t,e,s=1){const i=this.loop.count*this.loop.repeat;let n=0;for(let o=1;o<=i;o++){n=this.oldLength*o;for(let i=0;i<this.entries.length;i++){const o=this.entries[i];this.placeItem(o,n*s,t,e)}}}placeItem(t,e,s,i){const n=t.createState(this);n.index=++this.states.index,n.posX=t.posX+e,n.root.x=n.posX*(this.introTween.gap+1),n.root.x+=i;for(const m of this.interactions.focus.items)n.posX>m.posX?n.root.x+=m.gap:n.posX<m.posX&&(n.root.x-=m.gap);const o=.5*this.curve.width,a=n.root.x-.5*n.width,r=n.root.x+.5*n.width,l=(o+Pi(a,-o,o))/(2*o),c=(o+Pi(r,-o,o))/(2*o),h=Math.sin(l*Math.PI)*this.curve.depth,d=Math.sin(c*Math.PI)*this.curve.depth,u=a+.5*(r-a),p=h+.5*(d-h),g=Math.atan2(d-h,r-a);n.root.x=u,n.root.z=-p,Nt["quat"].identity(Yi),Nt["quat"].rotateY(Yi,Yi,g),Nt["quat"].copy(n.root.rotation,Yi)}async play(){this.introTween.running=!0;const t=this.autoScroll.enabled,e=this.interactions.snap.enabled;this.autoScroll.enabled=!1,this.interactions.snap.enabled=!1,this.offset=0,this.centerArtworkForIntro();const s=0,i=-1*this.introTween.width-this.introTween.tweakX;await Promise.all([Ai(this,{offset:[s,i],delay:1,duration:2}),Ai(this.introTween,{gap:[4,0],delay:1,duration:2})]),this.autoScroll.enabled=t,this.autoScroll._speed=t?this.autoScroll.speedTarget:0,this.autoScroll.speed=t?this.autoScroll.speedTarget:0,this.autoScroll.delay.value=this.autoScroll.delay.target,this.interactions.snap.enabled=e,this.interactions.snap.active=!0,this.interactions.snap.time=this.interactions.snap.delay+1,this.introTween.running=!1,this.interactions.nextLoading.enabled=!0}centerArtworkForIntro(){const t=2*this.fog.radius;if(this.introTween.user){const e=this.entries[0];let s=0,i=0;for(let n=0;n<this.entries.length;n++){const e=this.entries[n];if(s+=e.width+this.gap,i=n,s>t)break}this.entries.splice(i+1,0,e),this.entries.shift(),this.computePositions(),this.introTween.tweakX=this.entries[i].posX-t}else{const e={index:-1,entry:null,diff:Number.MAX_VALUE,adiff:Number.MAX_VALUE};for(let s=0;s<this.entries.length;s++){const i=this.entries[s],n=i.posX-t,o=Math.abs(n);o<e.adiff&&(e.diff=n,e.adiff=o,e.entry=i,e.index=s)}this.introTween.tweakX=e.diff}}findClosestFromCenter(){const t=.5;let e=Number.MAX_VALUE,s=null;for(const i of this.visibleStates){const{screen:n}=i.staticBounds,o=Math.min(Math.abs(n.left-t),Math.abs(n.right-t));o<e&&(e=o,s=i)}return s}}var Zi,$i,Qi=s("e71e"),Ji=s.n(Qi),tn=s("5fff"),en=s.n(tn);class sn{constructor(t,e=1,s=1,i=1,n=1){this.gl=t;const o=e/2,a=s/2,r=Math.floor(i),l=Math.floor(n),c=r+1,h=l+1,d=e/r,u=s/l,p=[],g=[];for(let m=0;m<h;m++){const t=m*u-a;for(let e=0;e<c;e++){const s=e*d-o;g.push(s,-t,0,e/r,1-m/l)}}for(let m=0;m<l;m++)for(let t=0;t<r;t++){const e=t+c*m,s=t+c*(m+1),i=t+1+c*(m+1),n=t+1+c*m;p.push(e,s,n),p.push(s,i,n)}this.ibuffer=new Qs["a"](t,t.UNSIGNED_SHORT,new Uint16Array(p)),this.vbuffer=new $s["a"](t),this.vbuffer.attrib("aPosition",3,t.FLOAT).attrib("aTexcoord",2,t.FLOAT),this.vbuffer.data(new Float32Array(g))}bind(t){this.vbuffer.bind(),this.vbuffer.attribPointer(t),this.ibuffer.bind()}draw(){this.ibuffer.drawTriangles()}}(function(t){t[t["CLAMP"]=0]="CLAMP",t[t["REPEAT"]=1]="REPEAT",t[t["MIRROR"]=2]="MIRROR"})(Zi||(Zi={})),function(t){t[t["NEAREST"]=9728]="NEAREST",t[t["LINEAR"]=9729]="LINEAR",t[t["NEAREST_MIPMAP_NEAREST"]=9984]="NEAREST_MIPMAP_NEAREST",t[t["LINEAR_MIPMAP_NEAREST"]=9985]="LINEAR_MIPMAP_NEAREST",t[t["NEAREST_MIPMAP_LINEAR"]=9986]="NEAREST_MIPMAP_LINEAR",t[t["LINEAR_MIPMAP_LINEAR"]=9987]="LINEAR_MIPMAP_LINEAR"}($i||($i={}));class nn{constructor(t){"string"===typeof t&&(t=[["std",t]]),this.sources=[];for(const e of t){const t=e[1];this.sources.push({codec:e[0],lods:[{files:[t],buffers:null}],datas:null})}}clearData(){for(let t=0;t<this.sources.length;t++){this.sources[t].datas=null;for(let e=0;e<this.sources[t].lods.length;e++)this.sources[t].lods[e].buffers=null}}}let on;const an={abort(){},signal:void 0};function rn(){return on()}var ln;on=void 0!==window.AbortController?()=>new AbortController:()=>an,function(t){t[t["PENDING"]=0]="PENDING",t[t["LOADING"]=1]="LOADING",t[t["LOADED"]=2]="LOADED",t[t["ERRORED"]=3]="ERRORED"}(ln||(ln={}));class cn{constructor(){this._value=null,this._state=ln.PENDING,this._isControlled=!1,this._reset()}get isControlled(){return this._isControlled}get isGroup(){return!1}_reset(){this._state=ln.PENDING,this._value=null,this._deferred=new Bt,this._abortCtrl=rn()}get value(){return this._value}get state(){return this._state}get isLoaded(){return this._state===ln.LOADED}get isErrored(){return this._state===ln.ERRORED}get isPending(){return this._state===ln.PENDING}get isLoading(){return this._state===ln.LOADING}get isComplete(){return this.isErrored||this.isLoaded}response(){return this._deferred.promise}load(){if(this.isControlled)throw new Error("Can't call load() on a controlled Resource");return this._load()}unload(){if(this.isControlled)throw new Error("Can't call unload() on a controlled Resource");this._unload()}_load(){if(this.isPending){this._state=ln.LOADING;const t=this._deferred;this.doLoad().then(e=>{t===this._deferred&&(this._value=e,this._state=ln.LOADED,t.resolve(e))},e=>{t===this._deferred&&(this._state=ln.ERRORED,t.reject(e))})}return this.response()}_unload(){this.isPending||(this._state!=ln.LOADED&&this._abortCtrl.abort(),this.doUnload(),this._state!=ln.LOADED&&this._deferred.reject("cancelled"),this._reset())}setProgress(t){}static all(t){return Promise.all(t.map(t=>t.response()))}}class hn{static loadResource(t){return t._load()}static unloadResource(t){t._unload()}static markControlled(t,e){t._isControlled=e}static resetResource(t){t._reset()}}s("1176");function dn(t){return new Promise(e=>{setTimeout(e,t)})}new DOMParser;async function un(t,e){return new bn(t,e).load()}async function pn(t,e){return new fn(t,e).load()}function gn(t){if(!t.ok)throw new Error(`NetworkError: status : ${t.status} ${t.statusText}, url : ${t.url}`)}async function mn(t,e){const s=await fetch(t,e);return gn(s),s}class _n extends cn{constructor(t,e={}){super(),this.url=t,this.init=e}async doLoad(){const t=Object.assign({},this.init,{signal:this._abortCtrl.signal}),e=await mn(this.url,t);return this.parseResponse(e)}doUnload(){}}class bn extends _n{parseResponse(t){return t.arrayBuffer()}}class fn extends _n{doUnload(){super.doUnload();const t=this.value;t&&(t.src="")}async parseResponse(t){const e=await t.blob(),s=URL.createObjectURL(e),i=new Image,n=new Bt;i.onload=n.resolve,i.onerror=n.reject,i.src=s;try{await n.promise}finally{URL.revokeObjectURL(s)}return await Promise.race([i.decode(),dn(100)]),i}}class vn{static registerCodec(t){void 0===this._codecs[t.name]?this._codecs[t.name]=t:console.warn(`TextureCodec.registerCodec() Codec ${t.name} already exist`)}static async getCodecForRequest(t,e){const s=t.sources;for(const i of s){const t=this._codecs[i.codec];if(void 0!==t){const s=await t.isSupported(e);if(s)return[t,i]}}return null}}vn._codecs={};const xn=["WEBGL_compressed_texture_s3tc","MOZ_WEBGL_compressed_texture_s3tc","WEBKIT_WEBGL_compressed_texture_s3tc"],Tn=["WEBGL_compressed_texture_pvrtc","WEBKIT_WEBGL_compressed_texture_pvrtc"],En=["WEBGL_compressed_texture_etc1","WEBKIT_WEBGL_compressed_texture_etc1"],wn=["WEBGL_compressed_texture_astc"];class On{constructor(t){this.gl=t,this.dxt=this.pickExtension(xn),this.pvr=this.pickExtension(Tn),this.etc=this.pickExtension(En),this.astc=this.pickExtension(wn)}pickExtension(t){let e=null;for(const s of t)if(e=this.gl.getExtension(s),e)break;return e}}var An,yn,Dn,jn=s("777c");function Rn(t){switch(t){case 0:return An.TEXTURE_CUBE_MAP_POSITIVE_X;case 1:return An.TEXTURE_CUBE_MAP_POSITIVE_Y;case 2:return An.TEXTURE_CUBE_MAP_POSITIVE_Z;case 3:return An.TEXTURE_CUBE_MAP_NEGATIVE_X;case 4:return An.TEXTURE_CUBE_MAP_NEGATIVE_Y;case 5:return An.TEXTURE_CUBE_MAP_NEGATIVE_Z}}(function(t){t[t["TEXTURE_CUBE_MAP_POSITIVE_X"]=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t["TEXTURE_CUBE_MAP_NEGATIVE_X"]=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t["TEXTURE_CUBE_MAP_POSITIVE_Y"]=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t["TEXTURE_CUBE_MAP_NEGATIVE_Y"]=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t["TEXTURE_CUBE_MAP_POSITIVE_Z"]=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t["TEXTURE_CUBE_MAP_NEGATIVE_Z"]=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(An||(An={})),function(t){t[t["RAW"]=0]="RAW",t[t["RAW_COMPRESSED"]=1]="RAW_COMPRESSED",t[t["IMAGE"]=2]="IMAGE"}(yn||(yn={}));class Sn{constructor(t){this.gl=t,this.extTextures=new On(t),this.extAniso=t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||t.getExtension("EXT_texture_filter_anisotropic")}upload(t,e){this.gl;const s=t.texture;if(s.textureType!==e.textureType)throw new Error("TexturesLoader::upload() texture type mismatch");const i=0;switch(s.bind(),s.textureType){case jn["a"].TEXTURE_2D:this.uploadTexture2D(s,e,i);break;case jn["a"].TEXTURE_CUBE:this.uploadTextureCube(s,e,i);break}}uploadTexture2D(t,e,s=0){this.uploadAllSurfaceLevels(t,e,s,0,t.textureType)}uploadTextureCube(t,e,s=0){for(let i=0;i<6;i++){const n=Rn(i);this.uploadAllSurfaceLevels(t,e,s,i,n)}}uploadAllSurfaceLevels(t,e,s,i,n){switch(e.datatype){case yn.RAW_COMPRESSED:this.uploadLevelsCompressed(t,e,s,i,n);break;case yn.IMAGE:this.uploadLevels(t,e,s,i,n);break;case yn.RAW:this.uploadLevelsRaw(t,e,s,i,n);break;default:break}}uploadLevels(t,e,s,i,n){const o=e.sources[s],a=o.surfaces[i];t.width=a[0].data.width,t.height=a[0].data.height;for(let r=0;r<a.length;r++)this.gl.texImage2D(n,r,e.internalformat,e.format,e.type,a[r].data)}uploadLevelsRaw(t,e,s,i,n){const o=e.sources[s],a=o.surfaces[i];t.width=a[0].width,t.height=a[0].height;for(let r=0;r<a.length;r++){const t=a[r];this.gl.texImage2D(n,r,e.internalformat,t.width,t.height,0,e.format,e.type,t.data)}}uploadLevelsCompressed(t,e,s,i,n){const o=e.sources[s],a=o.surfaces[i];let r=a[0].width,l=a[0].height;t.width=r,t.height=l,t.internal=e.internalformat;for(let c=0;c<a.length;c++){const t=a[c];this.gl.compressedTexImage2D(n,c,e.internalformat,r,l,0,t.data),r=Math.max(1,r>>1),l=Math.max(1,l>>1)}}}class Cn extends cn{constructor(){super(),this._resourcesMap=new Map,this._resources=[]}get isGroup(){return!0}async doLoad(){var t=this._resources.map(hn.loadResource);try{const e=await Promise.all(t);return!this.isPending&&this._resources.some(t=>!t.isComplete)?this.doLoad():e.flat()}catch(e){if(!this.isPending&&"cancelled"===e)return this.doLoad();throw e}}doUnload(){this._resources.forEach(hn.unloadResource)}add(t,e){if(e&&this._resourcesMap.has(e))throw new Error(`ResourceGroup::addResource() resource '${e}' already exist`);if(t.isControlled)throw new Error("ResourceGroup::addResource() resource is already in a group");hn.markControlled(t,!0),this._resources.push(t),e&&this._resourcesMap.set(e,t),this.isPending?hn.unloadResource(t):hn.loadResource(t),this.isLoaded&&(hn.resetResource(this),this.load())}remove(t){const e=this._resources.indexOf(t);if(e>-1){this._resources.splice(e,1);for(const e of this._resourcesMap.keys())this._resourcesMap.get(e)===t&&this._resourcesMap.delete(e);hn.unloadResource(t),hn.markControlled(t,!1),this.isLoaded&&(hn.resetResource(this),this.load())}}removeByName(t){this.remove(this.getResource(t))}getResource(t){const e=this._resourcesMap.get(t);if(void 0===e)throw new Error(`ResourceGroup::getResource() resource with name ${t} doesn't exist`);return e}get(t){return this.getResource(t).value}collectResources(){const t=[];for(let e=0;e<this._resources.length;e++)this._resources[e].isGroup?t.push(...this._resources[e].collectResources()):t.push(this._resources[e]);return t}hasResource(t){return void 0!==this._resourcesMap.get(t)}}Cn.default=new Cn,function(t){t[t["CLAMP"]=0]="CLAMP",t[t["REPEAT"]=1]="REPEAT",t[t["MIRROR"]=2]="MIRROR"}(Dn||(Dn={}));class In extends cn{constructor(t,e){super(),this.texture=null,this.glp=e,this._request=t}static getTextureLoader(t){let e=this._tlmap.get(t);return e||(e=new Sn(t),this._tlmap.set(t,e)),e}set request(t){this._request=t}get request(){return this._request}get value(){return this.texture}doLoad(){return this.texture=this.createTexture(),this.loadLevelAsync(0)}doUnload(){var t;this.texture.dispose(),this.texture=null,null===(t=this._sourceGroup)||void 0===t||t.unload()}async loadLevelAsync(t){const e=In.getTextureLoader(this.glp.gl),s=e.extTextures,[i,n]=await vn.getCodecForRequest(this._request,s);return await this.loadSourceLod(n.lods[t]),await i.decodeLod(n,t,s),e.upload(this,n.datas),this.texture}async loadSourceLod(t){var e;null===(e=this._sourceGroup)||void 0===e||e.unload(),this._sourceGroup=new Cn;for(let i=0;i<t.files.length;i++){const e=new bn(t.files[i]);this._sourceGroup.add(e)}const s=await this._sourceGroup.load();return t.buffers=s,s}}In._tlmap=new WeakMap;class Pn extends In{createTexture(){return new li["a"](this.glp.gl)}}class Ln{constructor(t,e,s,i){this.scene=t,this.path=e,this.antialiasing=s,this.alpha=0,this.node=new vi["a"],this.imgNode=new vi["a"],this.node.add(this.imgNode),this.geom=new sn(this.scene.gl,1,1,1,1),this.program=this.antialiasing?this.scene.programs.get("image-antialiasing"):new js["a"](this.scene.gl,Ji()(),en()(),this.scene.programs.getGlobalDefinitions()),this.texture=new li["a"](this.scene.gl,this.scene.gl.RGB),this.color=i||Nt["vec4"].fromValues(1,1,1,1)}async load(){return new Pn(new nn(ri.resolve(this.path)),this.scene).load().then(t=>{this.texture=t,Nt["vec3"].set(this.imgNode.scale,this.texture.width/this.texture.height,1,1),this.imgNode.invalidate(),this.imgNode.updateWorldMatrix()})}show(){wt["a"].killTweensOf(this,"alpha"),wt["a"].to(this,{alpha:1,duration:.5})}hide(){wt["a"].killTweensOf(this,"alpha"),wt["a"].to(this,{alpha:0,duration:.5})}render(t){this.program.use();const e=t.getMVP(this.imgNode._wmatrix);this.program.uMVP(e),this.program.uTex(this.texture),this.program.uAlpha(this.alpha),this.antialiasing&&this.program.uColor(this.color),this.geom.bind(this.program),this.geom.draw()}}const Mn=[1,.99215686274,.75294117647],kn=[.67843137254,.466,.34901960784],Nn=[.1294117647,.1294117647,.1294117647],Fn=[1,1,1],Bn=[1,0,0],Un=Nt["vec4"].fromValues(kn[0],kn[1],kn[2],1);class Hn{constructor(t){this.activity=t,this.alpha=0,this.node=new vi["a"],this.node.z=-3.5,this.node.y=2.5,this.title1=new vi["a"],this.title2=new vi["a"];const e=this.uikit.textRenderer.texts.get("gallery.title1").width,s=this.uikit.textRenderer.texts.get("gallery.title2").width,i=e+s;this.title1.x-=(i-e)/2+.025,this.title2.x+=(i-s)/2+.025,this.subtitle=new vi["a"],this.subtitle.y-=.5*this.uikit.textRenderer.texts.get("gallery.title1").height,this.logo=new Ln(this.scene,"assets/webgl/kunsthal_charlottenborg_sdf.png",!0,Un),this.logo.node.setScale(.2),this.logo.node.y+=1.5*this.uikit.textRenderer.texts.get("gallery.title1").height,this.node.add(this.title1),this.node.add(this.title2),this.node.add(this.subtitle),this.node.add(this.logo.node),this.glconfig=new Rs["c"],this.glconfig.depthMask(!1).enableDepthTest(!1).enableBlend(!0).blendFunc(this.scene.gl.SRC_ALPHA,this.scene.gl.ONE_MINUS_SRC_ALPHA)}get scene(){return this.activity.scene}get xrmodule(){return this.activity.xrmodule}get uikit(){return this.activity.scene.xrmodule.ui}show(){this.logo.show(),this.scene.root.add(this.node),wt["a"].killTweensOf(this,"alpha"),wt["a"].to(this,{alpha:1,duration:.5})}hide(){this.logo.hide(),wt["a"].killTweensOf(this,"alpha"),wt["a"].to(this,{alpha:0,duration:.5,onComplete:()=>{this.scene.root.remove(this.node)}})}preRender(){}render(t){this.uikit.textRenderer.render("gallery.title1",this.title1._wmatrix,[...kn,this.alpha]),this.uikit.textRenderer.render("gallery.title2",this.title2._wmatrix,[...kn,this.alpha]),this.uikit.textRenderer.render("gallery.subtitle",this.subtitle._wmatrix,[...kn,this.alpha]),this.scene.glstate.push(this.glconfig),this.scene.glstate.apply(),this.logo.render(t),this.scene.glstate.pop()}}const Gn=Ft.a.vec3,Vn=Ft.a.mat4,zn=Ft.a.mat3,Xn=Gn.create(),Wn=Gn.create(),qn=Gn.create(),Yn=Gn.create(),Kn=Gn.create(),Zn=Vn.create(),$n=zn.create(),Qn=Gn.create(),Jn=Gn.create();class to{constructor(t,e,s,i=!1){this.id="",this.node=t,this.indices=e,this.vertices=s,this.doubleSided=i,this.pos=new Float32Array(3),this.normal=new Float32Array(3)}raycast(t,e,s=this.normal){Vn.invert(Zn,this.node._wmatrix),zn.fromMat4($n,Zn),Gn.transformMat4(Qn,t.pos,Zn),Gn.transformMat3(Jn,t.dir,$n);let i,n,o,a,r=Qn,l=Jn,c=this.indices,h=this.vertices;for(var d=0;d<c.length;d+=3){i=3*c[d+0],n=3*c[d+1],o=3*c[d+2],Xn[0]=h[n+0]-h[i+0],Xn[1]=h[n+1]-h[i+1],Xn[2]=h[n+2]-h[i+2],Wn[0]=h[o+0]-h[i+0],Wn[1]=h[o+1]-h[i+1],Wn[2]=h[o+2]-h[i+2],Gn.cross(qn,Xn,Wn);var u=Gn.dot(l,qn);if(u>0){if(!this.doubleSided)continue;a=1}else{if(!(u<0))continue;a=-1,u=-u}Yn[0]=r[0]-h[i+0],Yn[1]=r[1]-h[i+1],Yn[2]=r[2]-h[i+2],Gn.cross(Kn,Yn,Wn);var p=a*Gn.dot(l,Kn);if(!(p<0)){Gn.cross(Kn,Xn,Yn);var g=a*Gn.dot(l,Kn);if(!(g<0)&&!(p+g>u)){var m=-a*Gn.dot(Yn,qn);if(!(m<0))return Gn.scaleAndAdd(Kn,r,l,m/u),Gn.transformMat4(Kn,Kn,this.node._wmatrix),e[0]=Kn[0],e[1]=Kn[1],e[2]=Kn[2],e[3]=m/u,this.pos[0]=Kn[0],this.pos[1]=Kn[1],this.pos[2]=Kn[2],Gn.normalize(qn,qn),s[0]=qn[0],s[1]=qn[1],s[2]=qn[2],this.normal[0]=qn[0],this.normal[1]=qn[1],this.normal[2]=qn[2],a}}}return 0}getPos(){return this.pos}}var eo=to;const so=20;class io{constructor(t,e){this.interactions=t,this.xrmodule=e,this._pdown=!1,this._hasDragged=!1,this._handedness="none",this._downPos=Nt["vec3"].create(),this._currentPos=Nt["vec3"].create(),this._stripScale=1,this._dragDirection=0,this._stickHand="none",this.onBtnDown=t=>{"Right/Squeeze"!==t.name&&"Left/Squeeze"!==t.name||this.isStickDragging||this._pdown||(this._hasDragged||(this.xrmodule.tooltips.pop("Right/Squeeze","xr.slide_picture"),this.xrmodule.tooltips.pop("Left/Squeeze","xr.slide_picture"),this.xrmodule.tooltips.push("Right/Squeeze",""),this.xrmodule.tooltips.push("Left/Squeeze","")),this.downStart("Right/Squeeze"===t.name?"right":"left"))},this.onBtnUp=t=>{this._pdown&&!this.isStickDragging&&(this.isStickDragging||!("Right/Squeeze"===t.name&&"right"==this._handedness||"Left/Squeeze"===t.name&&"left"==this._handedness)||this.downEnd())},this._drag=t.drag,this._drag.speedMultiplier=20,this._stripScale=1/this.interactions.strip.root.scale[0]}get isStickDragging(){return 0!==this._dragDirection}start(){this._hasDragged=!1,this.xrmodule.Inputs.onBtnDown.on(this.onBtnDown),this.xrmodule.Inputs.onBtnUp.on(this.onBtnUp),this.xrmodule.tooltips.push("Right/Squeeze","xr.slide_picture"),this.xrmodule.tooltips.push("Left/Squeeze","xr.slide_picture"),this.xrmodule.tooltips.push("Right/Trigger","xr.aim_to_dive")}stop(){this.xrmodule.Inputs.onBtnDown.off(this.onBtnDown),this.xrmodule.Inputs.onBtnUp.off(this.onBtnUp),this._pdown=!1,this._handedness="none",this.xrmodule.tooltips.pop("Right/Squeeze","xr.slide_picture"),this.xrmodule.tooltips.pop("Left/Squeeze","xr.slide_picture"),this.xrmodule.tooltips.pop("Right/Squeeze",""),this.xrmodule.tooltips.pop("Left/Squeeze",""),this.xrmodule.tooltips.pop("Right/Trigger",""),this.xrmodule.tooltips.pop("Right/Trigger","xr.aim_to_dive")}fetchTargetPosition(t,e){const s=this.xrmodule.raycaster.Targets.get(e);if(!s||!s.hit)return;t.set(s.wposition);const i=this.interactions.strip.fog.radius;t[0]=Pi(t[0],-i,i),Nt["vec3"].scale(t,t,this._stripScale)}stickStart(){this._drag.enabled=!0,this._drag.isPointerDown=!0,this._drag.startTime=Date.now(),this._drag.startX=0,this._drag.x=0}stickEnd(){this._drag.isPointerDown=!1,this._drag.enabled=!1,this._drag.startTime=0,this.interactions.strip.offset+=this._drag.x,this._drag.startX=0,this._drag.x=0,this._drag.clientX=0}downStart(t){this._pdown=!0,this._handedness=t,this.fetchTargetPosition(this._downPos,t),this._drag.enabled=!0,this._drag.isPointerDown=!0,this._drag.startTime=Date.now(),this._drag.startX=this._downPos[0],this._drag.x=0,this.interactions.events.dispatchEvent(new CustomEvent("i:dragstart"))}downEnd(){this._handedness="none",this._pdown=!1,this._drag.isPointerDown=!1,this._drag.enabled=!1;const t=this._drag.clientX-this._drag.startX,e=Date.now()-this._drag.startTime,s=t/e;this.interactions.strip.offset+=t,this.interactions.events.dispatchEvent(new CustomEvent("i:dragend")),this._drag.startTime=0,this._drag.startX=0,this._drag.x=0,this._drag.clientX=0,this._drag.inertia=s*this._drag.speedMultiplier}updateStick(t){const e=this.xrmodule.Inputs.getAxes("left"),s=this.xrmodule.Inputs.getAxes("right"),i=Math.abs(e[0]),n=Math.abs(s[0]);if(!this._pdown&&!this.isStickDragging&&(i>.5||n>.5)){let t=0;0!==e[0]&&(t=-Math.sign(e[0]),this._stickHand="left"),0!==s[0]&&(t=-Math.sign(s[0]),this._stickHand="right"),this.stickStart(),this._dragDirection=t}if(this.isStickDragging){const e=this.xrmodule.Inputs.getAxes(this._stickHand),s=Math.abs(e[0]);this._drag.x+=t*this._dragDirection*1e3*s,s<.5&&(this.stickEnd(),this._dragDirection=0)}}updateDrag(t){this.isStickDragging||(this.fetchTargetPosition(this._currentPos,this._handedness),this._drag.x=this._currentPos[0]-this._drag.startX,this._drag.clientX=this._currentPos[0])}update(t){this.updateStick(t),this.updateDrag(t)}}const no=[0,3,2,0,1,3],oo=[-1,-1,0,1,-1,0,-1,1,0,1,1,0],ao=new eo(new vi["a"],no,oo);class ro{constructor(t){this.awInteractions=t,this._state=null,this._castPos=Nt["vec3"].create()}get Assigned(){return null!==this._state}get State(){return this._state}releaseState(){this._state=null}assignState(t){this._state=t}isHover(){return this._state.focused}raycast(t){return this.raycastList([t])}raycastList(t){let e=0,s=0;ao.node=this._state.staticBounds.node;for(let i=0;i<t.length;i++){const n=ao.raycast(t[i],this._castPos);0!=n&&(e=n,s=i)}return this.awInteractions.onFocus(this._state,0!=e),s}click(t){"Left/Squeeze"!=t&&"Right/Squeeze"!=t&&"A"!=t&&"B"!=t&&this.awInteractions.events.dispatchEvent(new CustomEvent("i:click",{detail:this._state}))}}class lo{constructor(t,e){this.activity=t,this.strip=e,this._pickablePool=[],this._enabled=!1,this._currentHoverState=null,this.xrmodule=t.xrmodule,this.pointer=this.strip.interactions.inputs,this.strip.interactions.pointer.active=!0;for(let s=0;s<so;s++)this._pickablePool.push(new ro(this.strip.interactions));this._drag=new io(this.strip.interactions,t.xrmodule)}get CurrentHoverState(){return this._currentHoverState}enable(){this._enabled=!0,this.xrmodule.raycaster.enable(),this.xrmodule.raycaster.udpdatePlane(Nt["vec3"].fromValues(0,0,-4),Nt["vec3"].fromValues(0,0,1)),this._drag.start()}disable(){this._enabled=!1,this._pickablePool.map(t=>t.releaseState()),this.xrmodule.raycaster.disable(),this.xrmodule.raycaster.clear(),this._drag.stop()}update(){if(this._enabled){this._currentHoverState=null,this.xrmodule.raycaster.clear(),this._pickablePool.map(t=>{t.releaseState(),this.xrmodule.raycaster.remove(t)});for(let t=0;t<this.strip.visibleStates.length;t++)this._pickablePool[t].assignState(this.strip.visibleStates[t]),this.xrmodule.raycaster.add(this._pickablePool[t]);for(let t=0;t<this._pickablePool.length;t++)this._pickablePool[t].Assigned&&this._pickablePool[t].isHover()&&(this._currentHoverState=this._pickablePool[t].State);this._drag.update(this.activity.scene.dt)}}}const co=new Float32Array([-1,-1,0,0,0,1,0,1,-1,1,0,0,0,1,0,0,1,-1,0,0,0,1,1,1,1,1,0,0,0,1,1,0]);new Int8Array([0,3,1,0,2,3]);class ho extends $s["a"]{constructor(t,e=-1,s=-1,i=2,n=2){super(t);const o=co;o[0]=o[8]=e,o[1]=o[17]=s,o[16]=o[24]=e+i,o[9]=o[25]=s+n,this.data(o),this.attrib("aPosition",3,t.FLOAT),this.attrib("aNormal",3,t.FLOAT),this.attrib("aTexCoord",2,t.FLOAT)}render(){this.drawTriangleStrip()}}var uo=s("0062"),po=s.n(uo),go=s("dde9"),mo=s.n(go);class _o{constructor(t){this.scene=t,this.alpha=0,this.rect=new ho(t.gl),this.node=new vi["a"],this.node.rotateX(Math.PI/2),this.node.setScale(2.5),this.prg=new js["a"](t.gl,po()(),mo()(),t.programs.getGlobalDefinitions());const e=t.gl;this.cfg=t.glstate.config(),this.cfg.enableDepthTest(!0).depthMask(!1).enableBlend(!0).blendFunc(e.ONE,e.ONE),this.texture=new li["a"](e,e.RGB)}async load(){return new Pn(new nn(ri.resolve("assets/webgl/floor_dots.jpg")),this.scene).load().then(t=>{this.texture=t})}show(){return new Promise(t=>{wt["a"].to(this,{alpha:1,duration:.9,onComplete:t})})}hide(){return new Promise(t=>{wt["a"].to(this,{alpha:0,duration:.9,onComplete:t})})}render(t){0!=this.alpha&&(this.prg.use(),this.prg.uMVP(t.getMVP(this.node._wmatrix)),this.prg.uDotTex(this.texture),this.prg.uAlpha(this.alpha),this.rect.bind(),this.rect.attribPointer(this.prg),this.scene.glstate.push(this.cfg),this.scene.glstate.apply(),this.rect.render(),this.scene.glstate.pop())}}class bo{constructor(t){this.activity=t,this.alpha=0,this.poseKey="pose1",this.povAlpha=0,this.backgroundKey="bg1",this.node=new vi["a"],this.node.z=-3.5,this.node.y=.5,this.backgroundTitle=new vi["a"],this.poseTitle=new vi["a"],this.backgroundValue=new vi["a"],this.poseValue=new vi["a"],this.backgroundTitle.x-=this.uikit.textRenderer.texts.get("gallery.background").width+.05,this.poseTitle.x+=.05,this.backgroundValue.x=this.backgroundTitle.x,this.poseValue.x=this.poseTitle.x,this.backgroundValue.y-=this.uikit.textRenderer.texts.get("gallery.background").height,this.poseValue.y=this.backgroundValue.y,this.node.add(this.backgroundTitle),this.node.add(this.poseTitle),this.node.add(this.backgroundValue),this.node.add(this.poseValue)}get xrmodule(){return this.activity.xrmodule}get uikit(){return this.activity.scene.xrmodule.ui}show(){this.activity.scene.root.add(this.node),wt["a"].killTweensOf(this,"alpha"),wt["a"].to(this,{alpha:1,duration:.5})}hide(){wt["a"].killTweensOf(this,"alpha"),wt["a"].to(this,{alpha:0,duration:.5,onComplete:()=>{this.activity.scene.root.remove(this.node)}})}preRender(t){null===t?this.povAlpha-=.05:(this.povAlpha+=.05,this.backgroundKey=t.data.pov.background||"bg1",this.poseKey=t.data.pov.pose||"pose1"),this.povAlpha=Ii(this.povAlpha)}render(t){this.uikit.textRenderer.render("gallery.background",this.backgroundTitle._wmatrix,[...kn,this.alpha]),this.uikit.textRenderer.render("gallery.pose",this.poseTitle._wmatrix,[...kn,this.alpha]),this.uikit.textRenderer.render("gallery."+this.backgroundKey,this.backgroundValue._wmatrix,[...kn,this.povAlpha*this.alpha]),this.uikit.textRenderer.render("gallery."+this.poseKey,this.poseValue._wmatrix,[...kn,this.povAlpha*this.alpha])}}const fo=Os.getBool("debug-xr");class vo{constructor(t){this.scene=t,this.priority=0,this.useSample=!1,this.onInteraction=this.onInteraction.bind(this),this.background=new Ms(this.scene,Mn),this.data=new Zs}get xrmodule(){return this.scene.xrmodule}async load(){await Promise.all([this.scene.loadXRModule()]),this.strip=new Ki(this.scene),this.strip.mode="xr",this.strip.root.y=1.5,this.strip.root.z=-.1,this.strip.root.setScale(.005),this.strip.curve.depth=1100,this.strip.curve.width=2800,this.strip.gap=10,this.strip.fog.radius=600,this.strip.fog.edge=.2,this.strip.autoScroll.enabled=!0,this.strip.introTween.width=1100,this.strip.introTween.user=this.data.loadUserMedia(),this.inputHelper=new Bs(this);const{interactions:t}=this.strip;t.drag.speedMultiplier=10,t.events.addEventListener("i:click",this.onInteraction),t.events.addEventListener("i:load",this.onInteraction),this.data.listeners.add(this.strip.append),this.data.datas.forEach(this.strip.append),this.title=new Hn(this),this.interactions=new lo(this,this.strip),this.floor=new _o(this.scene),this.povData=new bo(this),await Promise.all([this.title.logo.load(),this.strip.load(),this.floor.load(),this.data.load(this.useSample)]),await this.data.loading.Promise}unload(){const{interactions:t}=this.strip;t.events.removeEventListener("i:click",this.onInteraction),t.events.removeEventListener("i:load",this.onInteraction),this.data.listeners.add(this.strip.append),this.strip=null}resetPOV(){const t=Nt["quat"].create();Nt["quat"].invert(t,this.xrmodule.xrcamera.head.rotation);const e=Math.sqrt(t[3]*t[3]+t[1]*t[1]);t[0]=0,t[1]=t[1],t[2]=0,t[3]=t[3]/e;const s=Nt["vec3"].create(),i=this.xrmodule.xrview.pose.transform.position,n=Nt["mat4"].create();s[0]=-i.x,s[2]=-i.z,Nt["mat4"].fromRotationTranslation(n,t,s),this.xrmodule.xrroot.setMatrix(n),this.xrmodule.xrroot.updateWorldMatrix()}start(){this.resetPOV(),this.xrmodule.xrroot.updateWorldMatrix(),this.xrmodule.tooltips.sync(),this.scene.root.add(this.strip.root),this.scene.root.add(this.floor.node),this.strip.enable(),this.strip.play(),this.data.enable(this.strip),this.interactions.enable(),this.background.show(),this.floor.show(),this.inputHelper.start(),this.title.show(),this.povData.show()}stop(){this.scene.root.remove(this.strip.root),this.scene.root.remove(this.floor.node),this.strip.disable(),this.data.disable(),this.interactions.disable(),this.inputHelper.stop(),this.title.hide(),this.povData.hide()}onStateUpdate(t){}preFrame(){}preRender(){this.strip.preRender(this.xrmodule.xrcamera.head),this.interactions.update(),this.povData.preRender(this.interactions.CurrentHoverState),this.xrmodule.preRender(),this.title.preRender()}render(){const t=this.scene.gl,e=this.scene.xrview.gllayer;e.framebufferWidth,e.framebufferHeight;t.bindFramebuffer(t.FRAMEBUFFER,fo?null:e.framebuffer),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.scene.glstate.apply();for(const s of this.xrmodule.xrcamera.cameras){const e=s.lens.viewport;t.viewport(e.x,e.y,e.width,e.height),this.background.render(s),this.strip.render(s),this.title.render(s),this.povData.render(s),this.floor.render(s),this.renderUI(s)}this.scene.glstate.apply(),this.strip.postRender()}renderUI(t){this.xrmodule.render(t)}rttPass(){}onInteraction(t){switch(t.type){case"i:click":{const e=t.detail;Wx.send("OPEN_PHOTO",{pov:e.data.pov}),this.scene.glview.canvas.style.cursor="";break}case"i:load":this.data.load(this.useSample).then(()=>{this.strip.interactions.nextLoading.pending=!1});break}}}const xo={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};async function To(t){return new Promise((e,s)=>{var i=new Image;i.onload=()=>e(i.width>0&&i.height>0),i.onerror=()=>e(!1),i.src="data:image/webp;base64,"+xo[t]})}const Eo=Promise.all([To("lossy"),To("lossless"),To("alpha"),To("animation")]).then(t=>t.every(t=>t));function wo(){return Eo}const Oo=/iP(ad|od|hone)/i.test(window.navigator.userAgent),Ao=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/),yo=Oo&&Ao,Do=void 0!==window.createImageBitmap&&!yo;function jo(t){const e=new Uint32Array(t,0,2);return 1196314761===e[0]?"image/png":"image/jpeg"}class Ro{constructor(){this.name="std"}decodeImage(t){const e=jo(t);this.isPNG="image/png"==e;const s=new Blob([t],{type:e});if(Do)return createImageBitmap(s);{const t=new Bt,e=URL.createObjectURL(s),i=new Image;return i.onload=t.resolve,i.onerror=t.reject,i.src=e,t.promise.finally(()=>URL.revokeObjectURL(e)),t.promise.then(()=>i)}}async decodeLod(t,e){const s=t.lods[e],i=null!=s.files[0].match(".png|.webp"),n=await this.decodeImage(s.buffers[0]),o={width:n.width,height:n.height,data:n},a=i?6408:6407;t.datas={datatype:yn.IMAGE,format:a,internalformat:a,type:5121,textureType:jn["a"].TEXTURE_2D,width:n.width,height:n.height,sources:[{surfaces:[[o]]}]}}async decodeCube(t){t.datas={datatype:yn.IMAGE,format:6407,internalformat:6407,type:5121,textureType:jn["a"].TEXTURE_CUBE,width:1024,height:1024,sources:[{surfaces:[]}]};for(let e=0;e<6;e++){const s=t.lods[e],i=await this.decodeImage(s.buffers[0]),n={width:i.width,height:i.height,data:i};t.datas.sources[0].surfaces.push([n])}}isSupported(){return Promise.resolve(!0)}}class So extends Ro{constructor(){super(...arguments),this.name="webp"}isSupported(){return wo()}}const Co=new Uint8Array([171,75,84,88,32,49,49,187,13,10,26,10]);function Io(t){for(var e=0;e<12;e++)if(t[e]!==Co[e])return!1;return!0}class Po{constructor(){this.parse=t=>{const e=new Uint8Array(t,0,12);if(!Io(e))throw new Error("[KTXParser] Bad Magic");const s=new DataView(t),i=67305985===s.getUint32(12,!0);let n=16;const o=s.getUint32(n,i);n+=4;s.getUint32(n,i);n+=4;s.getUint32(n,i);n+=4;const a=s.getUint32(n,i);n+=4;s.getUint32(n,i);n+=4;const r=s.getUint32(n,i);n+=4;const l=s.getUint32(n,i);n+=4;s.getUint32(n,i);n+=4;const c=s.getUint32(n,i);n+=4;const h=s.getUint32(n,i);n+=4;const d=s.getUint32(n,i);n+=4;const u=s.getUint32(n,i);n+=4,n+=u;const p=d>0?d:1,g=c>0?c:1,m=h>0?h:1,_=[];for(var b=0;b<m;b++)_.push([]);for(var f=0;f<p;f++){const t=s.getUint32(n,i);n+=4;const e=-4&t;for(var v=0;v<g;v++)for(b=0;b<m;b++){let t=new Uint8Array(s.buffer,n,e);n+=e,_[b].push(t)}}return{width:r,height:l,surfaces:_,format:a,internalFormat:a,type:o,cubemap:!1}}}}class Lo{constructor(){this.parser=new Po}decodeLod(t,e,s){const i=t.lods[e],n=this.parser.parse(i.buffers[0]),o=n.surfaces[0].map(t=>({width:n.width,height:n.height,data:t})),a={datatype:yn.RAW_COMPRESSED,textureType:jn["a"].TEXTURE_2D,width:n.width,height:n.height,internalformat:n.internalFormat,format:n.format,type:n.type,sources:[{surfaces:[o]}]};return t.datas=a,null}decodeCube(t,e){throw new Error("Method not implemented.")}}class Mo extends Lo{constructor(){super(...arguments),this.name="dxt"}isSupported(t){return Promise.resolve(null!=t.dxt)}}class ko extends Lo{constructor(){super(...arguments),this.name="etc"}isSupported(t){return Promise.resolve(null!=t.etc)}}class No extends Lo{constructor(){super(...arguments),this.name="pvr"}isSupported(t){return Promise.resolve(null!=t.pvr)}}function Fo(t){throw new Error(t)}const Bo={isDefined(t,e=""){void 0===t&&Fo(e)},isUndefined(t,e=""){void 0!==t&&Fo(e)},isTrue(t,e=""){!0!==t&&Fo(e)},isFalse(t,e=""){!1!==t&&Fo(e)}};var Uo=Bo;class Ho{constructor(){this._map={},this._list=[]}addExtension(t){if(void 0!==this._map[t.name])throw new Error(`Extension ${t.name} already exits`);this._map[t.name]=t,this._list.push(t)}sort(){this._list.sort((t,e)=>e.priority-t.priority)}validate(t=[],e=[]){for(const s of t)void 0===this._map[s]&&console.warn("Missing used extension "+s);for(const s of e)if(void 0===this._map[s])throw new Error("Missing required extension "+s)}}class Go{constructor(){this._extensionFactories={}}addExtension(t){const e=t.name;Uo.isUndefined(this._extensionFactories[e],`extension '${e}' already exist`),this._extensionFactories[e]=t}setupExtensions(t,e=[]){const s=t._extensions;this._additionalExtensions=e;for(const i in this._extensionFactories){const e=this._extensionFactories[i].createInstance(t);Uo.isTrue(e.name===i),s.addExtension(e)}for(const i of e){const e=i.createInstance(t);s.addExtension(e)}this._additionalExtensions=null,s.sort()}}var Vo=Go,zo=s("84de");const Xo={POSITION:{indexed:!1,attrib:"aPosition"},NORMAL:{indexed:!1,attrib:"aNormal"},TANGENT:{indexed:!1,attrib:"aTangent"},TEXCOORD:{indexed:!0,attrib:"aTexCoord"},COLOR:{indexed:!0,attrib:"aColor"},JOINTS:{indexed:!0,attrib:"aSkinJoints"},WEIGHTS:{indexed:!0,attrib:"aSkinWeights"}};class Wo{getMorphedAttributeName(t,e){return this.getAttributeName(t)+"_mt"+e}getAttributeName(t){const[e,s=0]=t.split("_"),i=Xo[e];if(void 0!==i)return s>0||i.indexed?i.attrib+s:i.attrib;throw new Error("Invalid Semantic "+t)}}var qo;(function(t){t["ACCESSOR"]="accessors",t["ACCESSOR_SPARSE"]="sparse",t["ACCESSOR_SPARSE_INDICES"]="sparseIndices",t["ACCESSOR_SPARSE_VALUES"]="sparseValues",t["ANIMATION"]="animations",t["ANIMATION_SAMPLER"]="animationSamplers",t["ANIMATION_CHANNEL"]="animationChannels",t["ASSET"]="asset",t["BUFFER"]="buffers",t["BUFFERVIEW"]="bufferViews",t["CAMERA"]="cameras",t["IMAGE"]="images",t["MATERIAL"]="materials",t["MESH"]="meshes",t["NODE"]="nodes",t["NORMAL_TEXTURE_INFO"]="normalTextureInfo",t["OCCLUSION_TEXTURE_INFO"]="occlusionTextureInfo",t["PRIMITIVE"]="primitives",t["SAMPLER"]="samplers",t["SCENE"]="scenes",t["SKIN"]="skins",t["TEXTURE"]="textures",t["TEXTURE_INFO"]="textureInfo"})(qo||(qo={}));var Yo=qo;function Ko(){return{opaqueMask:1,blendedMask:2}}class Zo{constructor(){this.indexed=[],this.list=[]}addElement(t,e=-1){e>-1&&(this.indexed[e]=t),this.list.push(t)}}class $o{constructor(){this.root=new vi["a"],this.extras={},this._collections=new Map([[Yo.ACCESSOR,new Zo],[Yo.ACCESSOR_SPARSE,new Zo],[Yo.ACCESSOR_SPARSE_INDICES,new Zo],[Yo.ACCESSOR_SPARSE_VALUES,new Zo],[Yo.ANIMATION,new Zo],[Yo.ANIMATION_SAMPLER,new Zo],[Yo.ANIMATION_CHANNEL,new Zo],[Yo.ASSET,new Zo],[Yo.BUFFER,new Zo],[Yo.BUFFERVIEW,new Zo],[Yo.CAMERA,new Zo],[Yo.IMAGE,new Zo],[Yo.MATERIAL,new Zo],[Yo.MESH,new Zo],[Yo.NODE,new Zo],[Yo.NORMAL_TEXTURE_INFO,new Zo],[Yo.OCCLUSION_TEXTURE_INFO,new Zo],[Yo.PRIMITIVE,new Zo],[Yo.SAMPLER,new Zo],[Yo.SCENE,new Zo],[Yo.SKIN,new Zo],[Yo.TEXTURE,new Zo],[Yo.TEXTURE_INFO,new Zo]]),this._elements=[]}static addExtension(t){$o._extensionsRegistry.addExtension(t)}static getSemantics(){return this._semantics}static setSemantics(t){null!==t&&void 0!==t||(this._semantics=t)}static getRenderConfig(){return this._renderConfig}static getExtensionsRegistry(){return this._extensionsRegistry}async allocateGl(t){var e;const s=[];for(const i of this._elements){const n=null===(e=i.allocateGl)||void 0===e?void 0:e.call(i,t);null!==n&&void 0!==n||s.push(n)}await Promise.all(s),this.renderables=this.nodes.map(t=>t.renderable).filter(t=>void 0!==t);for(const i of this.nodes)i._parent||this.root.add(i);this.createCameras()}createCameras(){this.cameraInstances=this.nodes.filter(t=>void 0!==t.camera).map(t=>{const e=new zo["a"](t.camera.lens);return t.add(e),e})}get buffers(){return this._getCollection(Yo.BUFFER).list}get bufferViews(){return this._getCollection(Yo.BUFFERVIEW).list}get accessors(){return this._getCollection(Yo.ACCESSOR).list}get animations(){return this._getCollection(Yo.ANIMATION).list}get meshes(){return this._getCollection(Yo.MESH).list}get nodes(){return this._getCollection(Yo.NODE).list}get materials(){return this._getCollection(Yo.MATERIAL).list}get cameras(){return this._getCollection(Yo.CAMERA).list}get skins(){return this._getCollection(Yo.SKIN).list}getAllElements(){return this._elements}getElement(t,e){return this._getCollection(t).indexed[e]}getElementByName(t,e){const s=this._getCollection(t).list;for(var i of s)if(i.name===e)return i;return null}getElementsByName(t,e){const s=this._getCollection(t).list,i=[];for(var n of s)n.name===e&&i.push(n);return i}_getCollection(t){return this._collections.get(t)}addElement(t,e=-1){const s=this._getCollection(t.gltftype);s.addElement(t,e),this._elements.push(t)}}$o._extensionsRegistry=new Vo,$o._semantics=new Wo,$o._renderConfig=Ko();var Qo=s("87ff"),Jo=s("f11f");const ta=Nt["mat3"].create(),ea="KHR_texture_transform";function sa(t){if(void 0===t.createSampler)throw new Error("KHR_texture_transform used on element which doesn't implement ITextureInfo")}class ia{constructor(t){var e,s,i;this.offset=null!==(e=t.offset)&&void 0!==e?e:[0,0],this.scale=null!==(s=t.scale)&&void 0!==s?s:[1,1],this.rotation=null!==(i=t.rotation)&&void 0!==i?i:0,this.texCoord=t.texCoord}getMatrix(t){const e=Math.cos(this.rotation),s=Math.sin(this.rotation);t[0]=this.scale[0]*e,t[1]=this.scale[0]*s,t[3]=this.scale[1]*-s,t[4]=this.scale[1]*e,t[6]=this.offset[0],t[7]=this.offset[1]}}let na=0;class oa{constructor(t){this.name=ea,this.priority=-1,this.loader=t}wrapElement(t,e){t.createSampler=()=>{var s,i;const n=t;if(null===n._sampler){e.getMatrix(ta);const o=null!==(s=e.texCoord)&&void 0!==s?s:t.texCoord,a=$o.getSemantics().getAttributeName("TEXCOORD_"+o),r=Qo["a"].createTransformed(a,ta),l=new Jo["a"](`tex${null!==(i=this.name)&&void 0!==i?i:""}tt_${na++}`,r);n._sampler=l,t.texture.glTexturePromise.then(t=>l.set(t))}return n._sampler}}acceptElement(t,e){if(t.extensions&&t.extensions[ea]){sa(e);const s=new ia(t.extensions[ea]);this.wrapElement(e,s)}return Promise.resolve(e)}loadElement(t){return null}}class aa{constructor(){this.name=ea}createInstance(t){return new oa(t)}}function ra(t){for(let e=0;e<t.length;e++)if(1!==t[e])return!1;return!0}function la(t){for(let e=0;e<t.length;e++)if(0!==t[e])return!1;return!0}var ca=s("4b6f");class ha{async parse(t,e){var s,i;this.baseColorFactor=new Float32Array(e.baseColorFactor||[1,1,1,1]),this.metallicFactor=null!==(s=e.metallicFactor)&&void 0!==s?s:1,this.roughnessFactor=null!==(i=e.roughnessFactor)&&void 0!==i?i:1,void 0!==e.baseColorTexture&&(this.baseColorTexture=await t._loadElement(e.baseColorTexture)),void 0!==e.metallicRoughnessTexture&&(this.metallicRoughnessTexture=await t._loadElement(e.metallicRoughnessTexture))}setupPass(t){const e=new ca["a"];if(t.setSurface(e),this.baseColorTexture){const s=this.baseColorTexture.createSampler("basecolor");e.baseColor.attach(s,"rgb"),t.alpha.attach(s,"a")}if(!ra(this.baseColorFactor)){const s=new Jo["c"]("uBasecolorFactor",4);s.set(...this.baseColorFactor),e.baseColorFactor.attach(s,"rgb"),t.alphaFactor.attach(s,"a")}if(this.metallicRoughnessTexture){const t=this.metallicRoughnessTexture.createSampler("metalRough");e.metalness.attach(t,"b"),e.roughness.attach(t,"g")}1!==this.metallicFactor&&e.metalnessFactor.attachUniform("uMetalnessFactor").set(this.metallicFactor),1!==this.roughnessFactor&&e.roughnessFactor.attachUniform("uRoughnessFactor").set(this.roughnessFactor)}}var da,ua=s("d7d5");(function(t){let e,s,i,n,o,a,r,l,c,h,d;(function(t){t[t["BYTE"]=5120]="BYTE",t[t["UNSIGNED_BYTE"]=5121]="UNSIGNED_BYTE",t[t["SHORT"]=5122]="SHORT",t[t["UNSIGNED_SHORT"]=5123]="UNSIGNED_SHORT",t[t["UNSIGNED_INT"]=5125]="UNSIGNED_INT",t[t["FLOAT"]=5126]="FLOAT"})(e=t.AccessorComponentType||(t.AccessorComponentType={})),function(t){t["SCALAR"]="SCALAR",t["VEC2"]="VEC2",t["VEC3"]="VEC3",t["VEC4"]="VEC4",t["MAT2"]="MAT2",t["MAT3"]="MAT3",t["MAT4"]="MAT4"}(s=t.AccessorType||(t.AccessorType={})),function(t){t["TRANSLATION"]="translation",t["ROTATION"]="rotation",t["SCALE"]="scale",t["WEIGHTS"]="weights"}(i=t.AnimationChannelTargetPath||(t.AnimationChannelTargetPath={})),function(t){t["LINEAR"]="LINEAR",t["STEP"]="STEP",t["CUBICSPLINE"]="CUBICSPLINE"}(n=t.AnimationSamplerInterpolation||(t.AnimationSamplerInterpolation={})),function(t){t["PERSPECTIVE"]="perspective",t["ORTHOGRAPHIC"]="orthographic"}(o=t.CameraType||(t.CameraType={})),function(t){t["JPEG"]="image/jpeg",t["PNG"]="image/png"}(a=t.ImageMimeType||(t.ImageMimeType={})),function(t){t["OPAQUE"]="OPAQUE",t["MASK"]="MASK",t["BLEND"]="BLEND"}(r=t.MaterialAlphaMode||(t.MaterialAlphaMode={})),function(t){t[t["POINTS"]=0]="POINTS",t[t["LINES"]=1]="LINES",t[t["LINE_LOOP"]=2]="LINE_LOOP",t[t["LINE_STRIP"]=3]="LINE_STRIP",t[t["TRIANGLES"]=4]="TRIANGLES",t[t["TRIANGLE_STRIP"]=5]="TRIANGLE_STRIP",t[t["TRIANGLE_FAN"]=6]="TRIANGLE_FAN",t[t["DEFAULT"]=4]="DEFAULT"}(l=t.MeshPrimitiveMode||(t.MeshPrimitiveMode={})),function(t){t[t["NEAREST"]=9728]="NEAREST",t[t["LINEAR"]=9729]="LINEAR"}(c=t.TextureMagFilter||(t.TextureMagFilter={})),function(t){t[t["NEAREST"]=9728]="NEAREST",t[t["LINEAR"]=9729]="LINEAR",t[t["NEAREST_MIPMAP_NEAREST"]=9984]="NEAREST_MIPMAP_NEAREST",t[t["LINEAR_MIPMAP_NEAREST"]=9985]="LINEAR_MIPMAP_NEAREST",t[t["NEAREST_MIPMAP_LINEAR"]=9986]="NEAREST_MIPMAP_LINEAR",t[t["LINEAR_MIPMAP_LINEAR"]=9987]="LINEAR_MIPMAP_LINEAR"}(h=t.TextureMinFilter||(t.TextureMinFilter={})),function(t){t[t["CLAMP_TO_EDGE"]=33071]="CLAMP_TO_EDGE",t[t["MIRRORED_REPEAT"]=33648]="MIRRORED_REPEAT",t[t["REPEAT"]=10497]="REPEAT"}(d=t.TextureWrapMode||(t.TextureWrapMode={}))})(da||(da={}));var pa=da,ga=s("8ed9"),ma=s("e8dd"),_a=s("42e6");const ba=770,fa=771;class va{constructor(){this.gltftype=Yo.MATERIAL}get materialPass(){return this._materialPass}get extraPasses(){return this._materialPass}createMaterialForPrimitive(t,e,s){this._materialPass.version.set(Object(ua["a"])(t)?"300 es":"100");const i=new ga["a"](t,this.name);if(i.addPass(this._materialPass,"color"),this._extraPasses)for(const r of this._extraPasses)i.addPass(r.pass,r.name);const n=s.attributes.getSemantic("NORMAL"),o=s.attributes.getSemantic("TANGENT");i.inputs.add(new ma["a"]("hasNormals",null!==n)),i.inputs.add(new ma["a"]("hasTangents",null!==o));const a=s.attributes.getSemantic("COLOR_0");if(null!==a){const t=new Jo["d"]("vertexColor",3);t.attachAttribute(a.glslname),i.inputs.add(t)}return i}async parse(t,e){var s,i;this.emissiveFactor=new Float32Array(e.emissiveFactor||[0,0,0]),this.alphaMode=e.alphaMode||pa.MaterialAlphaMode.OPAQUE,this.alphaCutoff=null!==(s=e.alphaCutoff)&&void 0!==s?s:.5,this.doubleSided=null!==(i=e.doubleSided)&&void 0!==i&&i,await this.parsePbrInputsData(t,e),void 0!==e.normalTexture&&(this.normalTexture=await t._loadElement(e.normalTexture)),void 0!==e.occlusionTexture&&(this.occlusionTexture=await t._loadElement(e.occlusionTexture)),void 0!==e.emissiveTexture&&(this.emissiveTexture=await t._loadElement(e.emissiveTexture)),this.name=e.name,this.setupMaterials()}async parsePbrInputsData(t,e){void 0!==e.pbrMetallicRoughness&&(this.pbrInputsData=this.pbrMetallicRoughness=new ha,await this.pbrMetallicRoughness.parse(t,e.pbrMetallicRoughness))}configurePbrSurface(t){void 0!==this.pbrInputsData?this.pbrInputsData.setupPass(t):t.setSurface(new ca["a"])}configureAlpha(t){this.alphaMode===pa.MaterialAlphaMode.BLEND?(t.glconfig.enableBlend(),t.glconfig.blendFunc(ba,fa),t.mask=$o.getRenderConfig().blendedMask):t.mask=$o.getRenderConfig().opaqueMask,t.alphaMode.set(this.alphaMode),this.alphaMode===pa.MaterialAlphaMode.MASK&&t.alphaCutoff.attachUniform("uAlphaCutoff").set(this.alphaCutoff)}setupMaterials(){const t=new _a["a"](this.name);if(t.name=this.name,t.glconfig.enableDepthTest(),t.glconfig.enableCullface(!this.doubleSided),t.doubleSided.set(this.doubleSided),this.configureAlpha(t),this.configurePbrSurface(t),this.emissiveTexture){const e=this.emissiveTexture.createSampler("emissive");t.emissive.attach(e)}la(this.emissiveFactor)||t.emissiveFactor.attachUniform("uEmissFactor").set(...this.emissiveFactor);const e=this.normalTexture;if(e){const s=e.createSampler("nrmmap");t.normal.attach(s),1!==e.scale&&t.normalScale.attachUniform("uNormalScale").set(e.scale)}const s=this.occlusionTexture;if(s){const e=s.createSampler("occlu");t.occlusion.attach(e),1!==s.strength&&t.occlusionStrength.attachUniform("uOccluStrength").set(s.strength)}this._materialPass=t}}class xa{async parse(t,e){var s;this.diffuseFactor=new Float32Array(e.diffuseFactor||[1,1,1,1]),this.specularFactor=new Float32Array(e.specularFactor||[1,1,1]),this.glossinessFactor=null!==(s=e.glossinessFactor)&&void 0!==s?s:1,void 0!==e.diffuseTexture&&(t.prepareGltfProperty(e.diffuseTexture,Yo.TEXTURE_INFO,-1,null),this.diffuseTexture=await t._loadElement(e.diffuseTexture)),void 0!==e.specularGlossinessTexture&&(t.prepareGltfProperty(e.specularGlossinessTexture,Yo.TEXTURE_INFO,-1,null),this.specularGlossinessTexture=await t._loadElement(e.specularGlossinessTexture))}setupPass(t){const e=new ca["b"];if(t.setSurface(e),this.diffuseTexture){const s=this.diffuseTexture.createSampler("diffuse");e.baseColor.attach(s,"rgb"),t.alpha.attach(s,"a")}if(!ra(this.diffuseFactor)){const s=new Jo["c"]("uBasecolorFactor",4);s.set(...this.diffuseFactor),e.baseColorFactor.attach(s,"rgb"),t.alphaFactor.attach(s,"a")}if(this.specularGlossinessTexture){const t=this.specularGlossinessTexture.createSampler("specgloss");e.specular.attach(t,"rgb"),e.glossiness.attach(t,"a")}ra(this.specularFactor)||e.specularFactor.attachUniform("uMetalnessFactor").set(...this.specularFactor),1!==this.glossinessFactor&&e.glossinessFactor.attachUniform("uRoughnessFactor").set(this.glossinessFactor)}}class Ta extends va{async parsePbrInputsData(t,e){const s=e.extensions["KHR_materials_pbrSpecularGlossiness"];this.pbrInputsData=this.pbrSpecularGlossiness=new xa,await this.pbrSpecularGlossiness.parse(t,s)}}const Ea="KHR_materials_pbrSpecularGlossiness";class wa{constructor(t){this.name=Ea,this.priority=1,this.loader=t}loadElement(t){if(t.gltftype===Yo.MATERIAL&&t.extensions&&t.extensions[Ea]){const e=new Ta;return e.parse(this.loader,t).then(()=>e)}return null}acceptElement(t,e){return null}}class Oa{constructor(){this.name=Ea}createInstance(t){return new wa(t)}}var Aa=s("9f56"),ya=s("7fc5"),Da=s("b6e5");Nt["mat3"].create();const ja="KHR_lights_punctual";var Ra;(function(t){t["Directional"]="directional",t["Point"]="point",t["Spot"]="spot"})(Ra||(Ra={}));class Sa{constructor(){this.list=[],this._items=[]}addLight(t,e){this.list.push(t),this._items.push({name:e,index:this.list.length-1})}getLightByName(t){let e;for(let s=0;s<this._items.length;s++)if(this._items[s].name==t){e=this.list[this._items[s].index];break}return e}getLightsByName(t){let e=[];for(let s=0;s<this._items.length;s++)this._items[s].name==t&&e.push(this.list[this._items[s].index]);return e}}class Ca{constructor(t){this.name=ja,this.priority=1,this.loader=t,this.lights=new Sa,t.gltf.extras.lights=this.lights}_getLightData(t){var e;const s=null===(e=this.loader._data.extensions)||void 0===e?void 0:e[ja];if(void 0===s)throw new Error(ja+" no extension data");return s.lights[t]}_createDirectional(t){return new Aa["a"]}_createPoint(t){var e;const s=new ya["a"];return s.radius=null!==(e=t.range)&&void 0!==e?e:-1,s}_createSpot(t){var e,s,i,n,o;const a=new Da["a"];return a.radius=null!==(e=t.range)&&void 0!==e?e:-1,a.innerAngle=null!==(i=null===(s=t.spot)||void 0===s?void 0:s.innerConeAngle)&&void 0!==i?i:0,a.outerAngle=null!==(o=null===(n=t.spot)||void 0===n?void 0:n.outerConeAngle)&&void 0!==o?o:0,a}_createLightInstance(t){switch(t.type){case Ra.Directional:return this._createDirectional(t);case Ra.Point:return this._createPoint(t);case Ra.Spot:return this._createSpot(t)}}_createLight(t,e){var s,i;const n=this._getLightData(e.light);let o=this._createLightInstance(n);const a=null!==(s=n.color)&&void 0!==s?s:[1,1,1],r=null!==(i=n.intensity)&&void 0!==i?i:1;a[0]*=r,a[1]*=r,a[2]*=r,o._color.set(a),t.add(o);let l=n.name;return this.lights.addLight(o,l),o}acceptElement(t,e){if(e.gltftype===Yo.NODE&&t.extensions&&t.extensions[ja]){const s=e;this._createLight(s,t.extensions[ja])}return null}loadElement(t){return null}}class Ia{constructor(){this.name=ja}createInstance(t){return new Ca(t)}}var Pa=s("41c4");class La extends va{setupMaterials(){const t=new Pa["a"](this.name);if(t.glconfig.enableDepthTest(),t.glconfig.enableCullface(!this.doubleSided),t.doubleSided.set(this.doubleSided),this.configureAlpha(t),void 0!==this.pbrInputsData){const e=this.pbrInputsData;if(e.baseColorTexture&&e.baseColorTexture){const s=e.baseColorTexture.createSampler("basecolor");t.baseColor.attach(s,"rgb"),t.alpha.attach(s,"a")}if(!ra(e.baseColorFactor)){const s=new Jo["c"]("uBasecolorFactor",4);s.set(...e.baseColorFactor),t.baseColorFactor.attach(s,"rgb"),t.alphaFactor.attach(s,"a")}}this._materialPass=t}}const Ma="KHR_materials_unlit";class ka{constructor(t){this.name=Ma,this.priority=1,this.loader=t}acceptElement(t,e){return null}loadElement(t){if(t.gltftype===Yo.MATERIAL&&t.extensions&&t.extensions[Ma]){const e=new La;return e.parse(this.loader,t).then(()=>e)}return null}}class Na{constructor(){this.name=Ma}createInstance(t){return new ka(t)}}const Fa="EXT_texture_webp";class Ba{constructor(t){this.name=Fa,this.priority=-10,this.loader=t}async acceptElement(t,e){if(e.gltftype===Yo.TEXTURE&&t.extensions&&t.extensions[Fa]){const s=await wo();s&&(e.source=await this.loader.getElement(Yo.IMAGE,t.extensions[Fa].source))}return e}loadElement(t){return null}}class Ua{constructor(){this.name=Fa}createInstance(t){return new Ba(t)}}function Ha(t,e){return new Promise((s,i)=>{e.addEventListener("abort",t=>i(t)),t.then(s,i)})}let Ga;Ga=void 0!==window.AbortController?t=>{const e=new AbortController;return t.addEventListener("abort",t=>e.abort()),e.signal}:t=>{};const Va=Ga;window.createImageBitmap;function za(t){return 0!=t&&0===(t&t-1)}function Xa(t){return za(t)?t:(t%2===1&&t++,Math.pow(2,Math.round(Math.log(t)/Math.log(2))))}class Wa{constructor(){this.gltftype=Yo.IMAGE}async parse(t,e){e.uri&&(this.uri=e.uri,0==this.uri.indexOf("data:")?this.resolvedUri=this.uri:this.resolvedUri=t.resolveUri(this.uri)),this.mimeType=e.mimeType,void 0!==e.bufferView&&(this.bufferView=await t.getElement(Yo.BUFFERVIEW,e.bufferView));const s=await this.loadImageBlob(t.abortSignal);this.texImageSource=await t.gltfIO.loadImageBlob(s,t.abortSignal)}async loadImageBlob(t){if(this.bufferView){const t=new Uint8Array(this.bufferView.buffer._bytes,this.bufferView.getByteOffset(),this.bufferView.byteLength);return new Blob([t],{type:this.mimeType})}{const e=Va(t),s=await fetch(this.resolvedUri,{signal:e}),i=await s.blob();return i}}async setupTexture(t,e=!1,s=!1){const i=t.gl;let n=this.texImageSource;!e||za(n.width)&&za(n.height)||(n=await this.resizeToPOT(n,t.gl)),t.fromImage(n),s&&i.generateMipmap(i.TEXTURE_2D)}async resizeToPOT(t,e){const s=document.createElement("canvas"),i=s.getContext("2d");if(s.width=Xa(t.width),s.height=Xa(t.height),t instanceof ImageData){const e=await createImageBitmap(t,0,0,s.width,s.height);i.drawImage(e,0,0,s.width,s.height)}else i.drawImage(t,0,0,s.width,s.height);return s}}class qa extends Wa{async parseCompressed(t,e,s){const i=s.getCodec();e.uri&&(this.uri=e.uri,this.resolvedUri=t.resolveUri(this.uri),this.resolvedUri=i.transformPath(this.resolvedUri));let n=await t.gltfIO.loadBinaryResource(this.resolvedUri,t.abortSignal);this.texDataSource=i.parser.parse(n)}async setupTexture(t,e=!1,s=!1){const i=t.gl;t.bind();for(var n=this.texDataSource.surfaces[0],o=this.texDataSource.format,a=this.texDataSource.width,r=this.texDataSource.height,l=0;l<n.length;l++){var c=n[l];i.compressedTexImage2D(i.TEXTURE_2D,l,o,a,r,0,c),a>>=1,r>>=1}this.texDataSource.surfaces=null}}const Ya=new Uint8Array([171,75,84,88,32,49,49,187,13,10,26,10]);function Ka(t){for(var e=0;e<12;e++)if(t[e]!==Ya[e])return!1;return!0}class Za{constructor(){this.parse=t=>{const e=new Uint8Array(t,0,12);if(!Ka(e))throw new Error("[KTXParser] Bad Magic");const s=new DataView(t),i=67305985===s.getUint32(12,!0);let n=16;s.getUint32(n,i);n+=4;s.getUint32(n,i);n+=4;s.getUint32(n,i);n+=4;const o=s.getUint32(n,i);n+=4;s.getUint32(n,i);n+=4;const a=s.getUint32(n,i);n+=4;const r=s.getUint32(n,i);n+=4;s.getUint32(n,i);n+=4;const l=s.getUint32(n,i);n+=4;const c=s.getUint32(n,i);n+=4;const h=s.getUint32(n,i);n+=4;const d=s.getUint32(n,i);n+=4,n+=d;const u=h>0?h:1,p=l>0?l:1,g=c>0?c:1,m=[];for(var _=0;_<g;_++)m.push([]);for(var b=0;b<u;b++){const t=s.getUint32(n,i);n+=4;const e=-4&t;for(var f=0;f<p;f++)for(_=0;_<g;_++){let t=new Uint8Array(s.buffer,n,e);n+=e,m[_].push(t)}}return{width:a,height:r,surfaces:m,format:o,cubemap:!1}}}}const $a=["WEBGL_compressed_texture_s3tc","MOZ_WEBGL_compressed_texture_s3tc","WEBKIT_WEBGL_compressed_texture_s3tc"],Qa=["WEBGL_compressed_texture_pvrtc","WEBKIT_WEBGL_compressed_texture_pvrtc"],Ja=["WEBGL_compressed_texture_etc1","WEBKIT_WEBGL_compressed_texture_etc1"];var tr;(function(t){t[t["DXT"]=0]="DXT",t[t["PVR"]=1]="PVR",t[t["ETC"]=2]="ETC"})(tr||(tr={}));let er=null;function sr(t,e){var s=null;for(const i of e)if(s=t.getExtension(i),s)break;return s}function ir(t){if(null===er){er={};let t=document.createElement("canvas"),e=t.getContext("webgl2",{})||t.getContext("webgl",{})||t.getContext("experimental-webgl",{})||t.getContext("webgl");er[tr.DXT]=sr(e,$a),er[tr.PVR]=sr(e,Qa),er[tr.ETC]=sr(e,Ja);let s=e.getExtension("WEBGL_lose_context");s&&s.loseContext()}return er[t]}class nr{constructor(t,e,s,i){this.transformPath=t=>t+this.suffix,this.parser=t,this.suffix=s,this.compressed=e,this.ext=i}isSupported(){return!!this.ext||!this.compressed}}class or{constructor(){this.DXTCodec=new nr(new Za,!0,".dxt.ktx",ir(tr.DXT)),this.PVRCodec=new nr(new Za,!0,".pvr.ktx",ir(tr.PVR)),this.ETCCodec=new nr(new Za,!0,".etc.ktx",ir(tr.ETC))}hasCodec(){return this.DXTCodec.isSupported()||this.DXTCodec.isSupported()||this.ETCCodec.isSupported()}getCodec(){return this.DXTCodec.isSupported()?this.DXTCodec:this.PVRCodec.isSupported()?this.PVRCodec:this.ETCCodec.isSupported()?this.ETCCodec:void 0}}const ar="MMP_compressed_texture";class rr{constructor(t){this.name=ar,this.priority=1,this.loader=t,this.textureLoader=new or}async acceptElement(t,e){return e}loadElement(t){let e=t.gltftype===Yo.IMAGE&&t.extras&&t.extras.MMP_compressed_texture;if(e=e&&this.textureLoader.hasCodec(),!e)return null;const s=new qa;return s.parseCompressed(this.loader,t,this.textureLoader).then(()=>s)}}class lr{constructor(){this.name=ar}createInstance(t){return new rr(t)}}function cr(t){return(t>.2||t<1/180)&&(t=1/60),t}function hr(){return performance.now()}js["a"].debug=!1,vn.registerCodec(new Ro),vn.registerCodec(new So),vn.registerCodec(new Mo),vn.registerCodec(new ko),vn.registerCodec(new No),$o.addExtension(new aa),$o.addExtension(new Oa),$o.addExtension(new Ia),$o.addExtension(new Na),$o.addExtension(new Ua),$o.addExtension(new lr);class dr{constructor(t,{depth:e=!0,pixelRatio:s=-1}={}){this.canvas=t,this.useWindowSize=!0,this.onRender=new jt,this.onResize=new jt,this.onWindowResize=()=>{this._checkSize()},this.frame=t=>{if(!this._playing)return;let e=(t-this.previousTime)/1e3;this.previousTime=t,e=cr(e),this.onRender.emit(e),this._playing&&this._requestFrame()},this.pixelRatio=s<0?Math.min(3,window.devicePixelRatio):s;const i={depth:e,antialias:!1,stencil:!0,alpha:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance"},n=/Version\/12.+Safari/.test(window.navigator.userAgent);n&&delete i.powerPreference,this.gl=t.getContext("webgl2",i)||t.getContext("webgl",i)||t.getContext("experimental-webgl",i)||t.getContext("webgl"),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.width=0,this.height=0,this.canvasWidth=0,this.canvasHeight=0,this.previousTime=hr(),this._rafId=0,this._playing=!1}updateSize(){const t=this.pixelRatio;this.canvas.width=4*Math.ceil(t*this.canvasWidth/4),this.canvas.height=4*Math.ceil(t*this.canvasHeight/4),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this.onResize.emit()}_checkSize(){let t,e;return this.useWindowSize?(t=window.innerWidth,e=window.innerHeight):(t=this.canvas.clientWidth,e=this.canvas.clientHeight),!isNaN(t)&&!isNaN(e)&&0!==t&&0!==e&&(t===this.canvasWidth&&e===this.canvasHeight||(this.canvasWidth=t,this.canvasHeight=e,this.updateSize()),!0)}start(){window.addEventListener("resize",this.onWindowResize),this.onWindowResize(),this._playing=!0,this.frame(hr()),this.previousTime=hr()}stop(){window.removeEventListener("resize",this.onWindowResize),this._playing=!1,this._rafId=0}_requestFrame(){window.cancelAnimationFrame(this._rafId),this._rafId=window.requestAnimationFrame(this.frame)}}var ur=dr,pr=s("a5ad"),gr=s("e5e4"),mr=s.n(gr),_r=s("7f38"),br=s.n(_r),fr=s("0b6d"),vr=s.n(fr),xr=s("d1c8"),Tr=s.n(xr),Er=s("770d"),wr=s.n(Er),Or=s("0a2d"),Ar=s.n(Or),yr=s("d542"),Dr=s.n(yr),jr=s("7ceb"),Rr=s.n(jr),Sr=s("6093"),Cr=s.n(Sr),Ir=s("b116"),Pr=s.n(Ir),Lr=s("d859"),Mr=s.n(Lr),kr=s("4054"),Nr=s.n(kr),Fr=s("6b15"),Br=s.n(Fr),Ur=s("090e"),Hr=s.n(Ur),Gr=s("4f2f"),Vr=s.n(Gr),zr=s("d4f0"),Xr=s.n(zr),Wr=s("c327"),qr=s.n(Wr),Yr=s("6197"),Kr=s.n(Yr),Zr=s("50f7"),$r=s.n(Zr),Qr=s("e9b6"),Jr=s.n(Qr);function tl(t){const e=t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT),s=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);return s.precision>0&&e.precision>0}class el{constructor(t){this.scene=t,this.programsMap=new Map,this.programs=[];const e=t.gl;this.hasHighp=tl(e),this.create("debugFbo",mr()(),br()()),this.create("blit",vr()(),Tr()()),this.create("unlit-texture",wr()(),Ar()()),this.create("unlit-color",Dr()(),Rr()()),this.create("unlit-texture-line",Cr()(),Pr()()),this.create("skybox",Br()(),Hr()()),this.create("fader",Vr()(),Xr()());const s=Object(ua["a"])(e);let i="";if(s)i+="#version 300 es\n";else{e.getExtension("OES_standard_derivatives");i+="#extension GL_OES_standard_derivatives : enable\n"}this.create("gradient-text",Mr()(),Nr()(),i),this.create("text-world",qr()(),Kr()(),i),this.create("image-antialiasing",$r()(),Jr()(),i),this.compile()}create(t,e,s,i=null,n=!1){if(this.programsMap.has(t))return this.programsMap.get(t).prg;const o=new js["a"](this.scene.gl),a={prg:o,vert:e,frag:s,id:t,ext:i};return this.programsMap.set(t,a),this.programs.push(a),n&&a.prg.compile(a.vert,a.frag,this.getGlobalDefinitions()),o}update(t,e,s){const i=this.programsMap.get(t),n=i.vert,o=i.frag;e=e||n,s=s||o;let a=this.getGlobalDefinitions();i.ext&&(a=i.ext+a),i.prg.compile(e,s,a)?(i.vert=e,i.frag=s):i.prg.compile(n,o,a)}get(t){return this.programsMap.get(t).prg}precision(){return this.hasHighp?"highp":"mediump"}getGlobalDefinitions(){var t="\n";return t+="precision "+this.precision()+" float;\n",t}compile(){for(const t of this.programs){let e=this.getGlobalDefinitions();t.ext&&(e=t.ext+e),t.prg.compile(t.vert,t.frag,e)}this.process()}process(){for(var t of this.programs)t.prg.use()}dispose(){for(var t of this.programs)t.prg.dispose();this.programs=null,this.programsMap=null}}const sl=Nt["vec2"].create();function il(t){return void 0===t.buttons?1<<t.which:t.buttons}class nl{constructor(t){this.nativeTouch=t,this.id=t.identifier,this.startTime=Date.now(),this.onEnd=new At,this.startCoords=Nt["vec2"].create(),this.coords=Nt["vec2"].create(),this.ncoords=Nt["vec2"].create(),this.pcoords=Nt["vec2"].create(),this.update(t),this.startCoords.set(this.coords)}get duration(){return Date.now()-this.startTime}getDelta(t){t[0]=this.coords[0]-this.startCoords[0],t[1]=this.coords[1]-this.startCoords[1]}getDeltaLength(){return this.getDelta(sl),Nt["vec2"].length(sl)}update(t){const e=t.clientX,s=t.clientY;this.pcoords[0]=e,this.pcoords[1]=s,this.coords[0]=2*e/window.innerWidth-1,this.coords[1]=-(2*s/window.innerHeight-1),this.ncoords[0]=2*e/window.innerWidth-1,this.ncoords[1]=-(2*s/window.innerHeight-1)}end(){this.onEnd.emit(),this.onEnd.release()}}class ol{constructor(t){if(this.mouseCoords=Nt["vec2"].fromValues(0,0),this.nmouseCoords=Nt["vec2"].fromValues(0,0),this.touchstart=t=>{for(var e=0;e<t.changedTouches.length;e++)this.addTouch(t.changedTouches[e])},this.touchmove=t=>{if(t.preventDefault(),t.touches.length<this.touches.length)for(var e=Array.from(t.touches).map(t=>t.identifier),s=this.touches.length-1;s>-1;s--){var i=this.touches[s];-1===e.indexOf(i.id)&&this.removeTouchId(i.id)}var n=t.changedTouches;for(s=0;s<n.length;s++)this.touchesById[n[s].identifier].update(n[s]);this.nmouseCoords[0]=2*t.touches[0].clientX/window.innerWidth-1,this.nmouseCoords[1]=-(2*t.touches[0].clientY/window.innerHeight-1),this.onTouchMove.emit()},this.touchend=t=>{for(var e=0;e<t.changedTouches.length;e++)this.removeTouch(t.changedTouches[e])},this.mousehandler=t=>{if(this.mouseCoords[0]=2*t.clientX/window.innerWidth-1,this.mouseCoords[1]=-(2*t.clientY/window.innerHeight-1),this.nmouseCoords[0]=2*t.clientX/window.innerWidth-1,this.nmouseCoords[1]=-(2*t.clientY/window.innerHeight-1),!this._handleMouse)return;const e=il(t);0!==(1&e)&&(al.clientX=t.clientX,al.clientY=t.clientY,void 0===this.touchesById["mouse0"]?this.touchstart(rl):this.touchmove(rl))},this.mouseend=t=>{this._handleMouse&&this.touchend(rl)},this.el=t,this.touches=[],this.touchesById={},this.onTouchAdded=new At,this.onTouchRemoved=new At,this.onTouchMove=new At,this._handleMouse=!0,void 0!==t){const e=s=>{this._handleMouse=!1,t.removeEventListener("touchstart",e)};t.addEventListener("touchstart",e)}}get hasMouse(){return this._handleMouse}start(t){if(void 0!==t){this.el=t;const e=s=>{this._handleMouse=!1,t.removeEventListener("touchstart",e)};t.addEventListener("touchstart",e)}const e=document.body;t=this.el,t.addEventListener("mousemove",this.mousehandler),t.addEventListener("mousedown",this.mousehandler),e.addEventListener("mouseleave",this.mouseend),e.addEventListener("mouseup",this.mouseend),t.addEventListener("touchmove",this.touchmove),t.addEventListener("touchstart",this.touchstart),e.addEventListener("touchend",this.touchend)}release(){var t=this.el;const e=document.body;this.removeAllTouch(),t.removeEventListener("mousemove",this.mousehandler),t.removeEventListener("mousedown",this.mousehandler),e.removeEventListener("mouseleave",this.mouseend),e.removeEventListener("mouseup",this.mouseend),t.removeEventListener("touchmove",this.touchmove),t.removeEventListener("touchstart",this.touchstart),e.removeEventListener("touchend",this.touchend)}addTouch(t){var e=new nl(t);this.touches.push(e),this.touchesById[e.id]=e,this.onTouchAdded.emit(e)}removeTouch(t){this.removeTouchId(t.identifier)}removeTouchId(t){var e=this.touchesById[t];void 0!==e&&(this.touches.splice(this.touches.indexOf(e),1),delete this.touchesById[e.id],e.end(),this.onTouchRemoved.emit(e))}removeAllTouch(){for(var t=0;t<this.touches.length;t++)this.touches[t].end(),this.onTouchRemoved.emit(this.touches[t]);this.touches=[],this.touchesById={}}}var al={identifier:"mouse0",clientX:0,clientY:0},rl={changedTouches:[al],touches:[al],preventDefault(){}},ll=s("328d"),cl=s("14a7");class hl{constructor(t,e){this.scene=t,this.camera=e,this._current=null}setControler(t){var e;null===(e=this._current)||void 0===e||e.stop(),this._current=t,null===t||void 0===t||t.start(this.camera)}preRender(){this._current&&this._current.update(this.scene.dt)}}const dl=Nt["quat"].create(),ul=Nt["quat"].create(),pl=Nt["quat"].create(),gl=Nt["vec3"].create(),ml=Nt["vec3"].create(),_l=(Nt["mat4"].create(),Nt["mat4"].create());var bl;(function(t){t[t["NONE"]=-1]="NONE",t[t["IDLE"]=0]="IDLE",t[t["ORBIT"]=1]="ORBIT",t[t["PAN"]=2]="PAN",t[t["DOLLY"]=3]="DOLLY"})(bl||(bl={}));const fl=10;function vl(t,e,s){s[0]=2*t.clientX/window.innerWidth-1,s[1]=-(2*t.clientY/window.innerHeight-1)}class xl{constructor(t){this.onMouseMove=t=>{var e=this._getModeForEvt(t);this.setMode(e),vl(t,this.el,this.mouse),this.action.update(this.mouse)},this.el=t,this.mouse=Nt["vec3"].fromValues(0,0,1),this.cam=null,this.orbitRadius=-2,this.mode=bl.NONE}start(t){this.cam=t,this.el.addEventListener("mousemove",this.onMouseMove),this.mode=-1,this.setMode(bl.IDLE)}stop(){this.cam=null,this.el.removeEventListener("mousemove",this.onMouseMove)}update(t){}setMode(t){if(this.mode!==t){switch(this.mode=t,t){case bl.IDLE:this.action=new Tl;break;case bl.ORBIT:this.action=new El;break;case bl.PAN:this.action=new wl;break;case bl.DOLLY:this.action=new Ol;break}this.unproject(gl),this.action.start(this.cam,gl,this.mouse)}}unproject(t){this.cam.updateMatrix(),Nt["mat4"].invert(_l,this.cam.lens._proj),Nt["vec3"].transformMat4(gl,this.mouse,_l),Nt["vec3"].scale(gl,gl,this.orbitRadius/gl[2]),Nt["vec3"].transformMat4(t,gl,this.cam._matrix)}_getModeForEvt(t){return 2!==t.which?bl.IDLE:t.altKey?t.ctrlKey?bl.DOLLY:bl.ORBIT:bl.PAN}}class Tl{start(t,e,s){}update(t){}}class El{constructor(){this.initialX=Nt["vec3"].create(),this.initialR=Nt["quat"].create(),this.initialP=Nt["vec3"].create(),this.startMouse=Nt["vec3"].create(),this.focus=Nt["vec3"].create()}start(t,e,s){this.cam=t,Nt["vec3"].copy(this.initialX,this.cam._matrix),Nt["vec3"].copy(this.startMouse,s),Nt["quat"].copy(this.initialR,t.rotation),Nt["vec3"].subtract(this.initialP,t.position,e),Nt["vec3"].copy(this.focus,e)}update(t){Nt["vec3"].subtract(gl,t,this.startMouse),Nt["quat"].setAxisAngle(pl,this.initialX,5*gl[1]),Nt["quat"].rotateY(ul,dl,5*-gl[0]),Nt["quat"].multiply(ul,ul,pl),Nt["quat"].multiply(this.cam.rotation,ul,this.initialR),Nt["vec3"].transformQuat(gl,this.initialP,ul),Nt["vec3"].add(this.cam.position,this.focus,gl),this.cam.invalidate()}}class wl{constructor(){this.initialX=Nt["vec3"].create(),this.initialY=Nt["vec3"].create(),this.initialP=Nt["vec3"].create(),this.startMouse=Nt["vec3"].create(),this.focus=Nt["vec3"].create()}start(t,e,s){this.cam=t,Nt["vec3"].copy(this.initialX,this.cam._matrix),Nt["vec3"].copy(this.initialP,this.cam.position),this.initialY[0]=this.cam._matrix[4],this.initialY[1]=this.cam._matrix[5],this.initialY[2]=this.cam._matrix[6],Nt["vec3"].copy(this.startMouse,s),Nt["vec3"].copy(this.focus,e)}update(t){Nt["vec3"].subtract(gl,t,this.startMouse),Nt["vec3"].scale(ml,this.initialX,-gl[0]*fl),Nt["vec3"].scaleAndAdd(ml,ml,this.initialY,-gl[1]*fl),Nt["vec3"].add(this.cam.position,this.initialP,ml),this.cam.invalidate()}}class Ol{constructor(){this.initialZ=Nt["vec3"].create(),this.initialP=Nt["vec3"].create(),this.startMouse=Nt["vec3"].create(),this.focus=Nt["vec3"].create()}start(t,e,s){this.cam=t,Nt["vec3"].copy(this.initialP,this.cam.position),Nt["vec3"].subtract(this.initialZ,this.cam.position,e),Nt["vec3"].copy(this.startMouse,s),Nt["vec3"].copy(this.focus,e)}update(t){Nt["vec3"].subtract(gl,t,this.startMouse),Nt["vec3"].scale(gl,this.initialZ,5*gl[1]),Nt["vec3"].add(this.cam.position,this.initialP,gl),this.cam.invalidate()}}Nt["mat4"].create(),Nt["quat"].create(),Nt["vec3"].create();var Al=Nt["vec3"].create();Nt["vec3"].create();function yl(t,e,s){var i,n;t.touches&&t.touches[0]?(i=t.touches[0].clientX,n=t.touches[0].clientY):(i=t.clientX,n=t.clientY),s[0]=2*i/e.width-1,s[1]=-(2*n/e.height-1)}class Dl{constructor(t,e={}){this.onMouseWheel=t=>{var e=t.deltaY>0?1:-1;e*=this.wheelSpeed,this.dist+=e,this.dist=Math.max(this.minDist,Math.min(this.dist,this.maxDist))},this.onMouseDown=t=>{this.mouseButton1=!0,yl(t,this.el,this.mouse),Nt["vec3"].copy(this.mStartDrag,this.mouse)},this.onRightClick=t=>(this.mouseButton2=!0,yl(t,this.el,this.mouse),Nt["vec3"].copy(this.panInitialX,[this.cam._matrix[0],this.cam._matrix[1],this.cam._matrix[2]]),Nt["vec3"].copy(this.panInitialP,this.cam.position),this.panInitialY[0]=this.cam._matrix[4],this.panInitialY[1]=this.cam._matrix[5],this.panInitialY[2]=this.cam._matrix[6],Nt["vec3"].copy(this.mStartDrag,this.mouse),!1),this.onMouseMove=t=>{this.mouseButton1&&(this.mouseButton2?this._pan(t):(this.hasMoved=!0,yl(t,this.el,this.mouse),this.mDrag[0]=this.mouse[0]-this.mStartDrag[0],this.mDrag[1]=this.mouse[1]-this.mStartDrag[1],Nt["vec3"].copy(this.mStartDrag,this.mouse),this._drag[0]-=this.mDrag[0]*this.dragSpeed/4,this._drag[1]+=this.mDrag[1]*this.dragSpeed/4,this._drag[1]<=.001&&(this._drag[1]=.001),this._drag[1]>=Math.PI-.001&&(this._drag[1]=Math.PI-.001)))},this.onMouseUp=t=>{this.hasMoved=!1,this.mouseButton1=!1,this.mouseButton2=!1},this._pan=t=>{yl(t,this.el,this.mouse),this.mDrag[0]=this.mouse[0]-this.mStartDrag[0],this.mDrag[1]=this.mouse[1]-this.mStartDrag[1],Nt["vec3"].copy(this.mStartDrag,this.mouse);var e=Nt["vec3"].create();Nt["vec3"].scale(e,this.panInitialX,-this.mDrag[0]*this.dragSpeed),Nt["vec3"].scaleAndAdd(e,e,this.panInitialY,-this.mDrag[1]*this.dragSpeed),this.pan=e},this.el=t,this.rotateSpeed=e.rotateSpeed?e.rotateSpeed:30,this.wheelSpeed=e.wheelSpeed?e.wheelSpeed:.2,this.dragSpeed=e.dragSpeed?e.dragSpeed:30,this.dist=e.dist?e.dist:2,this.minDist=e.minDist?e.minDist:1,this.maxDist=e.maxDist?e.maxDist:100,this.center=e.center?e.center:Nt["vec3"].fromValues(0,0,0),this._theta=e._theta?e._theta:0,this._phi=e._phi?e._phi:.5*Math.PI,this.mouseButton1=!1,this.mouseButton2=!1,this.mouse=Nt["vec3"].fromValues(0,0,1),this.mStartDrag=Nt["vec3"].fromValues(0,0,1),this.mDrag=Nt["vec3"].fromValues(0,0,1),this.pan=Nt["vec3"].fromValues(0,0,0),this.panInitialX=Nt["vec3"].create(),this.panInitialY=Nt["vec3"].create(),this.panInitialP=Nt["vec3"].create(),this._drag=Nt["vec3"].fromValues(this._theta,this._phi,1),this.cam=null}start(t){this.cam=t,this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("touchmove",this.onMouseMove),this.el.addEventListener("touchstart",this.onMouseDown),this.el.addEventListener("mousedown",this.onMouseDown),this.el.addEventListener("mouseup",this.onMouseUp),this.el.addEventListener("touchend",this.onMouseUp),this.el.addEventListener("wheel",this.onMouseWheel),this.el.addEventListener("contextmenu",this.onRightClick),this.onMouseDown({clientX:0,clientY:0}),this.onMouseMove({clientX:0,clientY:0}),this.onMouseUp({clientX:0,clientY:0})}stop(){this.cam=null,this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("touchmove",this.onMouseMove),this.el.removeEventListener("touchstart",this.onMouseDown),this.el.removeEventListener("mousedown",this.onMouseDown),this.el.removeEventListener("mouseup",this.onMouseUp),this.el.removeEventListener("touchend",this.onMouseUp),this.el.removeEventListener("wheel",this.onMouseWheel),this.el.removeEventListener("contextmenu",this.onRightClick)}update(t){if(this.cam){var e=this.dist,s=t*this.rotateSpeed;this._theta+=(this._drag[0]-this._theta)*s,this._phi+=(this._drag[1]-this._phi)*s,Al[0]=this.center[0]+e*Math.sin(this._phi)*Math.sin(this._theta),Al[1]=this.center[1]+e*Math.cos(this._phi),Al[2]=this.center[2]+e*Math.sin(this._phi)*Math.cos(this._theta),Nt["vec3"].copy(this.cam.position,Al),Nt["vec3"].add(this.cam.position,this.cam.position,this.pan),Nt["vec3"].add(this.center,this.center,this.pan),this.pan=Nt["vec3"].create(),this.cam.lookAt(this.center),this.cam.invalidate()}}}const jl=Nt["vec3"].create(),Rl=Nt["mat4"].create(),Sl=(Nt["mat3"].create(),Nt["mat4"].create());class Cl{constructor(){this._invalid=!0,this.pos=Nt["vec3"].create(),this.dir=Nt["vec3"].create()}unproject(t,e,s=!1){Nt["mat4"].invert(Rl,e._viewProj),e._parent&&s&&(Nt["mat4"].invert(Sl,e._parent._wmatrix),Nt["mat4"].multiply(Rl,Sl,Rl)),jl[0]=t[0],jl[1]=t[1],jl[2]=-1,Nt["vec3"].transformMat4(this.pos,jl,Rl),jl[2]=1,Nt["vec3"].transformMat4(this.dir,jl,Rl),Nt["vec3"].subtract(this.dir,this.dir,this.pos),Nt["vec3"].normalize(this.dir,this.dir),this.pos.set(e._wposition)}unprojectProjOnly(t,e){Nt["mat4"].invert(Rl,e.lens.getProjection()),jl[0]=t[0],jl[1]=t[1],jl[2]=-1,Nt["vec3"].transformMat4(this.pos,jl,Rl),jl[2]=1,Nt["vec3"].transformMat4(this.dir,jl,Rl),Nt["vec3"].subtract(this.dir,this.dir,this.pos),Nt["vec3"].normalize(this.dir,this.dir)}invalidate(){this._invalid=!0}}class Il{constructor(){this.origin=new Float32Array(3),this.normal=new Float32Array(3),this.normal[1]=1}}const Pl=Nt["vec3"].create();var Ll=(t,e,s)=>{const i=Nt["vec3"].dot(s.normal,e.dir);if(Math.abs(i)>1e-6){Nt["vec3"].sub(Pl,s.origin,e.pos);const n=Nt["vec3"].dot(Pl,s.normal)/i;return!(n<0)&&(Nt["vec3"].scaleAndAdd(t,e.pos,e.dir,n),!0)}return!1};const Ml=new Cl,kl=Nt["vec3"].create(),Nl=Nt["vec3"].create(),Fl=Nt["vec3"].create(),Bl=Nt["vec3"].create(),Ul=new Cl,Hl=new Cl,Gl=new Il;Nt["mat4"].create(),Nt["mat4"].create();class Vl{constructor(t){this.scene=t,this.touchray=new Cl}unproject(t,e=null){null==e?this.touchray.unproject(t,this.scene.camera):e.unproject(t,this.scene.camera)}worldToScreen(t,e){Nt["vec3"].transformMat4(t,e,this.scene.camera._viewProj),t[0]+=1,t[1]+=1,t[0]/=2,t[1]/=2,t[0]*=window.innerWidth,t[1]*=window.innerHeight}worldToClip(t,e){Nt["vec3"].transformMat4(t,e,this.scene.camera._viewProj)}screenToWorldPoint(t,e,s=!1){s?Ml.unprojectProjOnly(e,this.scene.camera):Ml.unproject(e,this.scene.camera,!0),t.set(Ml.pos),Nt["vec3"].scale(Ml.dir,Ml.dir,e[2]),Nt["vec3"].add(t,t,Ml.dir)}cameraScreenToWorldPoint(t,e,s,i=!1){i?Ml.unprojectProjOnly(s,e):Ml.unproject(s,e,!0),t.set(Ml.pos),Nt["vec3"].scale(Ml.dir,Ml.dir,s[2]),Nt["vec3"].add(t,t,Ml.dir)}updateBounds(){const t=this.scene.camera;kl[0]=-1,kl[1]=-1,kl[2]=1,Nl[0]=1,Nl[1]=1,Nl[2]=1,this.cameraScreenToWorldPoint(Fl,t,kl),this.cameraScreenToWorldPoint(Bl,t,Nl),Ul.unproject(kl,t,!1),Hl.unproject(Nl,t,!1),Gl.normal.set([0,0,-1]),Nt["vec3"].transformMat4(Gl.normal,Gl.normal,t._parent._wmatrix),Ll(Fl,Ul,Gl),Ll(Bl,Hl,Gl),Nt["vec3"].scale(Gl.normal,Gl.normal,.01),Nt["vec3"].sub(Fl,Fl,Gl.normal),Nt["vec3"].add(Bl,Bl,Gl.normal)}}class zl{constructor(t){this.scene=t,this.focalDist=15,this.utils=new Vl(t),this.mainCamera=this.makeCamera(),this.devCamera=this.makeCamera(),this.devCamCtrl=new hl(t,this.devCamera),this.mainCamCtrl=new hl(t,this.mainCamera),this.maxcam=new xl(t.ilayer),this.orbitcam=new Dl(t.ilayer,{center:Nt["vec3"].fromValues(0,1,0)}),t.root.add(this.mainCamera),t.root.add(this.devCamera),this.mainCamCtrl.setControler(this.orbitcam),this.devCamCtrl.setControler(this.maxcam)}get camera(){return this.useDebugCam?this.devCamera:this.mainCamera}get controler(){return this.useDebugCam?this.devCamCtrl:this.mainCamCtrl}preRender(){this.controler.preRender()}makeOrtho(){const t=new zo["a"](new ll["a"]);return t.lens.near=.1,t.lens.far=10,t.x=0,t.z=-5,t.y=0,t.lookAt(Nt["vec3"].fromValues(0,0,0)),t}makeCamera(){const t=new zo["a"](new cl["a"]);return t.lens.setVerticalFov(55*Ci),t.lens.near=.05,t.lens.far=50,t.setMatrix(new Float32Array([.9435726404190063,-6.136758656793972e-8,.331165611743927,0,.07379444688558578,.9748567938804626,-.21025842428207397,0,-.32283902168273926,.22283227741718292,.9198482036590576,0,-1.069517731666565,1.4425891637802124,2.517240285873413,1])),t}}var Xl,Wl=s("fe2a"),ql=s("034b"),Yl=s("c206"),Kl=s("3d69");class Zl{constructor(t){this.scene=t,this.EXPO=1,this.GAMMA=2,this.list=[],this.setup=new Kl["a"],this.initialize()}add(t){this.list.push(t),this.setup.add(t)}remove(t){this.setup.remove(t)}registerPass(t){var e,s,i;t.setLightSetup(this.setup),null===(e=t.iGamma)||void 0===e||e.proxy(this.gamma),null===(s=t.iExposure)||void 0===s||s.proxy(this.exposure),null===(i=t.gammaMode)||void 0===i||i.proxy(this.gammaMode)}initialize(){const t=this.setup;t.bounds.fromMinMax([-5,-5,-5],[5,5,5]),t.stdModel.shadowFilter.set("PCF4x4"),t.stdModel.iblShadowing.enable(),t.depthFormat.set("D_RGB");const e=new Wl["a"](this.scene.gl);e.setLightSetup(t);const s=this.gammaMode=new ql["a"]("gammaMode",Yl["a"]),i=this.gamma=new Jo["d"]("gamma",1,Jo["d"].ALL),n=this.exposure=new Jo["d"]("exposure",1,Jo["d"].ALL);s.set("GAMMA_STD");const o=this.expoUniform=n.attachUniform("utmExpo"),a=this.gammaUniform=i.attachUniform("uTMGamma");o.set(this.EXPO),a.set(1/this.GAMMA);const r=new Aa["a"];r._color[0]=.8,r._color[1]=1,r._color[2]=1.6,r.y=5,r.z=10,r.x=0,r.lookAt(Nt["vec3"].create()),this.scene.root.add(r),r.invalidate(),this.add(r)}}(function(t){t[t["SPRITE"]=-1]="SPRITE",t[t["OPAQUE"]=1]="OPAQUE",t[t["BLENDED"]=2]="BLENDED",t[t["RING_BACK"]=4]="RING_BACK",t[t["SHADOW_CASTER"]=1024]="SHADOW_CASTER",t[t["LIGHTMAPPED"]=2048]="LIGHTMAPPED"})(Xl||(Xl={}));var $l,Ql=Xl;(function(t){t["COLOR"]="color",t["DEPTH"]="depth",t["MIRROR"]="mirror",t["STENCIL"]="stencil",t["LIGHTMAP"]="lightmap",t["OUTLINE"]="outline",t["REFLECT_DEPTH"]="reflect-depth",t["GLOW"]="GLOW",t["DEFAULT"]="color"})($l||($l={}));new Il,Nt["vec3"].create(),Nt["mat4"].create();function Jl(){return{inBounds:!1,distance:0,localPos:Nt["vec3"].create(),worldPos:Nt["vec3"].create(),worldNrm:Nt["vec3"].create()}}const tc=Jl();class ec{constructor(t){this.scene=t,this.root=new vi["a"],this.scene.root.add(this.root)}async load(){return this._loadPromise||(this._loadPromise=this._doLoad()),this._loadPromise}async _doLoad(){console.log("Load museum scene"),await this._loadMuseumGltf(),this._loaded=!0}unload(){this._loaded&&(console.log("unload museum scene"),this._loaded=!1,this.root.remove(this.gltf.root),this.gltf=null,this._loadPromise=null,this._loadPromise=null,this.skydome=null)}preRender(t){this.skydome.position.set(t[0]._wposition),this.skydome.invalidate()}reflectPass(t){}render(t){this.renderPass(t,Ql.OPAQUE),this.renderPass(t,Ql.BLENDED)}renderPass(t,e,s=$l.DEFAULT){for(const i of this.gltf.renderables)i.render(this.scene,t,e,s)}raycastArtworks(t,e=tc,s=1e3){return null}async _loadMuseumGltf(){}}function sc(t,e){return t instanceof Function?t(e):t}function ic(t,e,s){return t instanceof Function?t(e,s):t}class nc{constructor(t,e){this.materialFactory=t,this.data=e,this.gltftype=Yo.MATERIAL}createMaterialForPrimitive(t,e,s){return sc(this.materialFactory,{data:this.data,node:e,primitive:s})}parse(t,e){return null}}class oc{constructor(t,e){this.ext=e,this.name="material_override",this.priority=10,this.loader=t}acceptElement(t,e){return t.gltftype===Yo.MATERIAL?this.createOverridePassMaterial(t,e):null}loadElement(t){return t.gltftype===Yo.MATERIAL?this.createOverrideMaterial(t):null}createOverrideMaterial(t){const e=this.ext.materials.get(t.name)||this.ext.materials.get("");if(void 0!==e){const s=new nc(e,t);return Promise.resolve(s)}return null}createOverridePassMaterial(t,e){const s=this.ext.passes.get(t.name)||this.ext.passes.get("");if(void 0!==s){const i=e.createMaterialForPrimitive;e.createMaterialForPrimitive=(n,o,a)=>{const r=i.apply(e,[n,o,a]),l=ic(s,{data:t,node:o,primitive:a},r);return l&&r.addPass(l),r}}return null}}class ac{constructor(){this.name="material_override",this.materials=new Map,this.passes=new Map}overrideMaterial(t,e){this.assertNotExist(t),this.materials.set(t,e)}overridePass(t,e){this.assertNotExist(t),this.passes.set(t,e)}assertNotExist(t){if(this.materials.has(t))throw`material override for "${t}" already exist`;if(this.passes.has(t))throw`pass override for "${t}" already exist`}createInstance(t){return new oc(t,this)}}var rc=s("29f2"),lc=s("a214"),cc=s("af3c"),hc=s("6d12"),dc=s("e817"),uc=s("5a77"),pc=s("9968"),gc=s.n(pc),mc=s("d1ad"),_c=s.n(mc),bc=s("7050"),fc=s.n(bc),vc=s("611a"),xc=s.n(vc),Tc=s("827c"),Ec=s.n(Tc),wc=s("a5ac"),Oc=s.n(wc),Ac=s("a850"),yc=s.n(Ac),Dc=s("a9e8"),jc=s.n(Dc),Rc=s("469a"),Sc=s.n(Rc),Cc=s("691a"),Ic=s.n(Cc),Pc=s("193e"),Lc=s.n(Pc);const Mc={spotPreCode:_c.a,dirPreCode:gc.a,pointPreCode:fc.a,dirLightCode:xc.a,spotLightCode:Ic.a,pointLightCode:Ec.a,shadPreCode:Oc.a,preLightCode:yc.a,postLightCode:jc.a,iblPreCode:Sc.a,iblCode:Lc.a};class kc extends lc["a"]{constructor(t){super(!0,!1),this.code=t}_genCode(t){t.add("lightsf",this.code(this))}}class Nc extends hc["a"]{prepare(t,e){const s=this.lights;this.allocate(s.length);for(var i=0;i<s.length;i++){var n=s[i];this._positions.set(n._wposition,3*i),this._colors.set(n._color,4*i),this._colors[4*i+3]=n.iblShadowing}this._invalid=!0}setup(t){this.lights.length>0&&(t.uLSpotPositions(this._positions),t.uLSpotColors(this._colors),this._invalid=!1)}}class Fc{constructor(){this.modelCode=Mc,this._datas={},this._dataList=[],this._setup=null,this.preLightsChunk=new kc(Mc.preLightCode),this.postLightsChunk=new kc(Mc.postLightCode),this.iblShadowing=new ma["a"]("iblShadowing",!1),this.registerLightModel(new uc["a"](Mc.iblCode,Mc.iblPreCode)),this.registerLightModel(new dc["a"](Mc.pointLightCode,Mc.pointPreCode)),this.registerLightModel(new Nc(Mc.spotLightCode,Mc.spotPreCode)),this.registerLightModel(new cc["a"](Mc.dirLightCode,Mc.dirPreCode))}registerLightModel(t){this._datas[t.type]=t,this._dataList.push(t)}getLightSetup(){if(null===this._setup)throw new Error("LightSetup is null");return this._setup}setLightSetup(t){this._setup=t}add(t){var e=this._datas[t._type];e.addLight(t)}remove(t){var e=this._datas[t._type];e.removeLight(t)}prepare(t){for(var e=0;e<this._dataList.length;e++)this._dataList[e].prepare(t,this)}getChunks(){const t=[this.iblShadowing,this.preLightsChunk];for(var e=0;e<this._dataList.length;e++)t.push(this._dataList[e]);return t.push(this.postLightsChunk),t}}function Bc(){return new Fc}const Uc=0,Hc=["Helipad"],Gc=1,Vc=2.2;class zc{constructor(t){this.gl=t,this.reflectExpo=1,this.reflectGamma=1,this.convertSH=t=>{this.shBase=new Float32Array(t,0,27),this.ibl.sh=rc["a"].convert(this.shBase,this.shMul)},this.gl=t,this.lightSetup=new Kl["a"],this.envTex=new li["a"](this.gl,this.gl.RGBA),this.ibl=new rc["a"](this.envTex,null),this.envTex.setFilter(!1),this.lightSetup.stdModel.shadowFilter.set("PCFNONE"),this.lightSetup._registerModel("lmmodel",Bc()),this.shMul=.6,this.gammaMode=new ql["a"]("gammaMode",Yl["a"]),this.gamma=new Jo["d"]("gamma",1,Jo["d"].ALL),this.exposure=new Jo["d"]("exposure",1,Jo["d"].ALL),this.expoUniform=this.exposure.attachUniform("utmExpo"),this.gammaUniform=this.gamma.attachUniform("uTMGamma"),this.expoUniform.set(Gc),this.gammaUniform.set(1/Vc),this.gammaMode.set("GAMMA_NONE")}setupForReflect(){this.expoUniform.set(this.reflectExpo),this.gammaUniform.set(this.reflectGamma)}restoreFromReflect(){this.expoUniform.set(Gc),this.gammaUniform.set(1/Vc)}setupMat(t){t.setLightSetup(this.lightSetup),t.iExposure.proxy(this.exposure),t.gammaMode.proxy(this.gammaMode)}setupExpoGmma(t){t.iExposure.proxy(this.exposure),t.gammaMode.proxy(this.gammaMode)}dispose(){var t;null===(t=this.envTex)||void 0===t||t.dispose(),this.envTex=null,this.envHi=null,this.envBg=null,this.ibl=null,this.shBase=null,this.shMul=1}loadDefault(){return this.load("envs/"+Hc[Uc])}load(t){return Promise.all([pn(ri.resolve("assets/webgl/"+t+"/env.png")).then(t=>this.envTex.fromImage(t)),un(ri.resolve("assets/webgl/"+t+"/sh.bin")).then(this.convertSH)])}unload(){this.envTex.fromData(1,1,new Uint8Array(4))}preRender(){}}var Xc=zc,Wc=s("5092"),qc=s.n(Wc),Yc=s("bd43b"),Kc=s.n(Yc);class Zc{constructor(t){this.gl=t,this.dilatePrg=new js["a"](t,qc()(),Kc()()),this.blitPrg=new js["a"](t,vr()(),Tr()(),"precision mediump float;"),this.quad=new Ds["a"](t),this.blitConfig=pr["a"].get(t).config().enableBlend(!1).enableCullface(!1).enableStencil(!0).stencilFunc(t.EQUAL,1,255),this.dilateConfig=pr["a"].get(t).config().enableBlend(!1).enableCullface(!1).enableStencil(!0).stencilFunc(t.NOTEQUAL,1,255)}process(t){this.blitConfig.apply(),this.blitPrg.bind(),this.blitPrg.tTex(t),this.quad.attribPointer(this.blitPrg),this.quad.render(),this.dilateConfig.apply(),this.dilatePrg.bind(),this.dilatePrg.tTex(t),this.dilatePrg.uTexelSize(1/t.width,1/t.height),this.quad.attribPointer(this.dilatePrg),this.quad.render()}}var $c=Nt["vec3"].create();function Qc(t){return $c[0]=(t>>16&255)/255,$c[1]=(t>>8&255)/255,$c[2]=(255&t)/255,$c}function Jc(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+6*(e-t)*s:s<.5?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function th(t,e,s,i){var n=i<.5?i*(1+s):i+s-i*s,o=2*i-n;return t[0]=Jc(o,n,e+1/3),t[1]=Jc(o,n,e),t[2]=Jc(o,n,e-1/3),t}function eh(t,e,s,i){const n=360*e;let o=(t,e=(t+n/60)%6)=>i-i*s*Math.max(Math.min(e,4-e,1),0);return t[0]=o(5),t[1]=o(3),t[2]=o(1),t}var sh=s("6ccb"),ih=s("9195"),nh=s("4455");class oh extends lc["a"]{constructor(t){super(!0,!0),this.lights=t,this.addChild(this.tc=Qo["a"].create("aTexCoord1")),this.colors=new Float32Array(9)}_genCode(t){const e=this.tc.varying();let s;s="",s+="uniform sampler2D tLightmap;",s+="uniform vec3 colors[3];",t.add("pf",s),s=`vec3 Lightmap = texture2D( tLightmap, ${e} ).rgb;`,t.add("prelightsf",s),s="vec3 lc = vec3(0.0);",s+="lc += colors[0] * Lightmap[0];",s+="lc += colors[1] * Lightmap[1];",s+="lc += colors[2] * Lightmap[2];",s+="lightingData.lightingColor += lc * brdfData.diffuse;",t.add("postlightsf",s)}setup(t){t.tLightmap(this.lights.lightmap.getColorTexture());for(let e=0;e<3;e++)this.colors.set(this.lights._lights[e].spotLight._color,3*e);t.colors(this.colors)}}const ah=2048;Nt["vec3"].create();class rh{constructor(t,e){this.gl=t,this.index=e,this.node=new vi["a"],this.position=Nt["vec3"].create(),this.target=Nt["vec3"].fromValues(0,1,0),this.jitterDist=.6,this.sampleIndex=0,this.hue=.16,this.saturation=.2,this.intensity=.6,this.isOn=!0,this.spotLight=new Da["a"],this.spotLight.castShadows=!0,this.spotLight.shadowmapSize=512,this.spotLight.projectionFromBounds=function(t){const e=this.boundsInLocalSpace(t);let s=-e[5],i=-e[2];const n=this.radius<=0?Number.MAX_VALUE:this.radius;s=Math.max(.1,Math.min(s,n)),i=Math.max(.1+s,Math.min(i,n));const o=this._camera.lens;o.near=s,o.far=i},this.node.add(this.spotLight),this.updateColor()}get showLookAt(){return Wx.state.matches("painting.edit_light")&&Wx.state.context.selectedLightIndex===this.index}invalidate(){this.sampleIndex=0}setInitialPosition(){this.node.position.set(this.position),this.node.lookAt(this.target),this.node.updateWorldMatrix()}setJitteredPosition(){0!==this.sampleIndex?(this.node.position[0]=this.position[0]+(Math.random()-.5)*this.jitterDist,this.node.position[1]=this.position[1]+(Math.random()-.5)*this.jitterDist,this.node.position[2]=this.position[2]+(Math.random()-.5)*this.jitterDist,this.node.lookAt(this.target),this.node.updateWorldMatrix()):this.setInitialPosition()}updateColor(){const t=this.spotLight._color,e=this.isOn?1:0;th(t,this.hue,this.saturation,.5),Nt["vec3"].scale(t,t,15*this.intensity*e)}}const lh=250;class ch{constructor(t){this.painting=t,this._lights=[],this.dilateValid=!1,this.node=new vi["a"],t.root.add(this.node);const e=t.scene.gl;for(let s=0;s<3;s++){const t=new rh(e,s);this.node.add(t.node),this._lights.push(t),t.position.set([2.2*Math.sin(s/3*Math.PI*2+Math.PI/6),1.5+.4*s,2.2*Math.cos(s/3*Math.PI*2+Math.PI/6)+1.1])}this.lightmapChunk=new oh(this),this.lightmapRaw=this.createLightMapRawFbo(),this.lightmap=this.createLightMapFbo(),this.dilate=new Zc(e),this.glconfig=pr["a"].get(e).config().enableCullface(!1).enableDepthTest(!1).enableBlend().blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),this.glconfigWithStencil=pr["a"].get(e).config(),this.glconfigWithStencil._dat.set(this.glconfig._dat),this.glconfigWithStencil._set=this.glconfig._set,this.glconfigWithStencil.enableStencil(!0).stencilFunc(e.ALWAYS,1,255).stencilOp(e.KEEP,e.KEEP,e.REPLACE).stencilMask(255)}addToLightSetup(t){for(const e of this._lights)t.add(e.spotLight)}applyLightDatas(t){for(let e=0;e<3;e++){const s=this._lights[e],i=t[e];s.intensity=i.intensity,s.hue=i.hue,s.saturation=i.saturation,s.isOn=i.isOn,s.updateColor(),(Nt["vec3"].squaredDistance(s.position,i.position)>.01||Nt["vec3"].squaredDistance(s.target,i.lookat)>.01)&&(s.position.set(i.position),s.target.set(i.lookat),s.invalidate())}}invalidateScene(){this.dilateValid=!1;for(const t of this._lights)t.invalidate()}createLightMapRawFbo(){const t=this.painting.scene.gl,e=ih["a"].getInstance(t),s=[e.RGB16F,e.RGBA16F,e.RGB32F,e.RGBA32F],i=e.getRenderableFormat(s),n=new nh["a"](t);return n.attachColor(i.format,i.type,i.internal),n.attachDepth(!1,!0,!1),n.resize(ah,ah),n.getColorTexture().setFilter(!1),n}createLightMapFbo(){const t=this.painting.scene.gl,e=ih["a"].getInstance(t),s=[e.RGB16F,e.RGBA16F,e.RGB32F,e.RGBA32F],i=e.getRenderableFormat(s),n=new nh["a"](t);return n.attachColor(i.format,i.type,i.internal),n.resize(ah,ah),n.getColorTexture().setFilter(!0),n.attach(t.STENCIL_ATTACHMENT,this.lightmapRaw.getDepth()),n}jitterLights(){for(const t of this._lights)t.setJitteredPosition()}resetLights(){for(const t of this._lights)t.setInitialPosition()}needRender(){return this._lights.some(t=>t.sampleIndex<=lh)}renderDebug(){}renderShadowMaps(t){const e=this.painting.scene.gl,s=this.painting.lighting.lightSetup,i=pr["a"].get(e),n="D_RGB"===s.depthFormat.value(),o=(new Rs["c"]).enableCullface(!0).enableDepthTest(!0).depthMask(!0).colorMask(n,n,n,n);i.push(o),i.apply();for(let a=0;a<this._lights.length;a++){const s=this._lights[a],i=s.spotLight;s.sampleIndex>lh||Object(sh["b"])(i)&&i.castShadows&&(i.bindShadowmap(),e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),t({gl:e,viewport:[0,0,i.shadowmapSize,i.shadowmapSize],glConfig:o,camera:i.getCamera(),mask:Ql.OPAQUE,pass:$l.DEPTH}))}i.pop(),i.apply()}renderLightmaps(t){if(!this.needRender())return;this.renderShadowMaps(t);const e=this.painting.scene.gl,s=pr["a"].get(e),i=this.painting.lightmapPass;this.lightmapRaw.bind(),this.lightmapRaw.defaultViewport();const n=0===this._lights[0].sampleIndex,o=0===this._lights[1].sampleIndex,a=0===this._lights[2].sampleIndex;(n||o||a)&&(e.colorMask(0===this._lights[0].sampleIndex,0===this._lights[1].sampleIndex,0===this._lights[1].sampleIndex,!1),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),this.dilateValid?s.push(this.glconfig):(this.dilateValid=!0,s.push(this.glconfigWithStencil),e.clearStencil(0),e.clear(e.STENCIL_BUFFER_BIT)),s.apply();for(let r=0;r<this._lights.length;r++){const s=this._lights[r];s.sampleIndex>lh||(i.setLight(s.spotLight),i.sampleIndex=s.sampleIndex,s.sampleIndex++,e.colorMask(0==r,1==r,2==r,!1),t({gl:e,mask:Ql.LIGHTMAPPED,pass:$l.LIGHTMAP,glConfig:null,viewport:[0,0,ah,ah],camera:this.painting.scene.camera}))}e.colorMask(!0,!0,!0,!0),s.pop(),this.lightmap.bind(),this.dilate.process(this.lightmapRaw.getColorTexture())}}var hh=s("f6e0"),dh=s("9026"),uh=s("3023"),ph=s.n(uh),gh=s("e59f"),mh=s.n(gh),_h=s("bf6a"),bh=s("0942");const fh="lmpass",vh=Nt["mat4"].create();class xh extends _h["a"]{constructor(t){super({uid:fh,vert:ph()(),frag:mh()()}),this.lightSetup=t,this.sampleIndex=0;const e=this.inputs;this.shadowFilter=new ql["a"]("shadowFilter",bh["a"]),e.add(this.version=new dh["a"]("100")),e.add(this.precision=new hh["a"]("highp")),e.add(this.shadowFilter),e.add(this.normal=new Jo["d"]("normal",3)),e.add(this.lightSetup.depthFormat)}setLight(t){this.spotlight=t}prepare(t,e,s){t.uMVP&&(s.modelViewProjectionMatrix(vh,e._wmatrix),t.uMVP(vh)),t.uWorldMatrix&&t.uWorldMatrix(e._wmatrix),t.uVP&&t.uVP(s._viewProj),t.uCameraPosition&&t.uCameraPosition(s._wposition);const i=this.spotlight;t.uLSpotPositions(i._wposition),t.uLSpotDirections(i._wdir),t.uLSpotAttenuation(i._attenuationData),t.uSampleIndex(this.sampleIndex),t.uShadowKernelRotation&&t.uShadowKernelRotation(0,0),t.uShadowMatrix(i.getShadowProjection(this.lightSetup.bounds)),t.uShadowTexelBiasVector(i.getTexelBiasVector());const n=i.shadowmapSize;t.uShadowMapSize(n,1/n);const o=i.getShadowmap();t.tShadowMap(o)}}class Th extends lc["a"]{constructor(){super(!0,!1),this.addChild(this.amountInput=new Jo["d"]("hle_amount",1)),this._uamount=this.amountInput.attachUniform("uamount")}set amount(t){this._uamount.set(t)}get amount(){return this._uamount.value[0]}_genCode(t){t.add("postf","FragColor.rgb += vec3(1.,0.992,0.753) * vec3(hle_amount()*.05);")}}const Eh=Nt["vec3"].create();var wh=(t,e)=>(Nt["vec3"].sub(Eh,e,t.pos),Nt["vec3"].cross(Eh,t.dir,Eh),Nt["vec3"].length(Eh));const Oh=5,Ah=1.57,yh=0,Dh=5,jh=2;function Rh(t){const e=t[0],s=t[2];return Math.sqrt(e*e+s*s)}const Sh={isValidPosition(t){if(t[1]<yh||t[1]>Dh)return!1;const e=Rh(t);return!(e>Oh)&&!(e<Ah&&t[1]<jh)},nearestValidPosition(t){const e=t[0],s=t[2];t[1]<yh&&(t[1]=yh),t[1]>Dh&&(t[1]=Dh);const i=t[1],n=Rh(t);if(n>Oh){const t=Oh/n;return Nt["vec3"].fromValues(e*t,i,s*t)}if(n<Ah&&i<jh){const t=Ah/n;return Nt["vec3"].fromValues(e*t,i,s*t)}return t},isValidTarget(t){if(t[1]<yh||t[1]>jh)return!1;const e=Rh(t);return!(e>Ah)},nearestValidTarget(t){const e=t[0],s=t[2];t[1]<yh&&(t[1]=yh),t[1]>jh&&(t[1]=jh);const i=t[1],n=Rh(t);if(n>Ah){const t=Ah/n;return Nt["vec3"].fromValues(e*t,i,s*t)}return t}};var Ch=Sh,Ih=s("faaf"),Ph=s.n(Ih),Lh=s("dc92"),Mh=s.n(Lh);function kh(t,e){t[0]=e[4],t[1]=e[5],t[2]=e[6]}function Nh(t,e){t[0]=e[8],t[1]=e[9],t[2]=e[10]}const Fh=Nt["mat4"].create(),Bh=new Float32Array(Fh.buffer,0,3),Uh=new Float32Array(Fh.buffer,16,3),Hh=new Float32Array(Fh.buffer,32,3),Gh=new Float32Array(Fh.buffer,48,3),Vh=new Float32Array([0,1,0]);function zh(t,e,s,i=Vh){Nt["vec3"].subtract(Hh,e,s),Nt["vec3"].cross(Bh,i,Hh),Nt["vec3"].cross(Uh,Hh,Bh),Nt["vec3"].normalize(Bh,Bh),Nt["vec3"].normalize(Uh,Uh),Nt["vec3"].normalize(Hh,Hh),Gh.set(e),t.set(Fh)}const Xh=Nt["mat4"].create(),Wh=Nt["vec3"].create();Nt["vec3"].create(),Nt["vec3"].create(),Nt["quat"].create();class qh{constructor(t){this.gl=t,this.quad=new Ds["a"](t,0,-.5,1,1),this.prg=new js["a"](t,Ph()(),Mh()()),this.glconfig=pr["a"].get(t).config().enableCullface(!1).enableDepthTest(!0).enableBlend().blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)}render(t,e,s,i=!1){const n=Nt["vec3"].distance(t,e),o=.005;this.prg.use(),this.quad.attribPointer(this.prg),this.glconfig.apply(),Nh(Wh,s._wmatrix),Nt["vec3"].lerp(Wh,t,e,.5),Nt["vec3"].sub(Wh,s._wposition,Wh),zh(Xh,t,e,Wh),this.prg.uMVP(s.getMVP(Xh)),this.prg.uParams(n,o,i?0:1),this.quad.render()}}var Yh=s("a1d6"),Kh=s.n(Yh),Zh=s("4471"),$h=s.n(Zh);const Qh=Nt["mat4"].create(),Jh=(Nt["vec3"].create(),Nt["vec3"].create()),td=Nt["vec3"].create(),ed=Nt["quat"].create();class sd{constructor(t){this.gl=t,this.quad=new Ds["a"](t),this.prg=new js["a"](t,Kh()(),$h()()),this.glconfig=pr["a"].get(t).config().enableCullface(!1).enableDepthTest(!1).enableBlend().blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)}async load(){const t=new Pn(new nn(ri.resolve("assets/webgl/light-ground-mark.png")),this),e=await t.load();this.texture=e}render(t,e){this.prg.use(),this.prg.tTex(this.texture),this.quad.attribPointer(this.prg),this.glconfig.apply(),td.set(t),td[1]=0;const s=.15;Jh[0]=s,Jh[1]=s,Jh[2]=s,Nt["mat4"].fromRotationTranslationScale(Qh,ed,td,Jh),this.prg.uMVP(e.getMVP(Qh)),this.quad.render()}}var id=s("d805"),nd=s.n(id),od=s("7d5b"),ad=s.n(od);const rd=Nt["mat4"].create(),ld=Nt["vec3"].create(),cd=Nt["vec3"].create(),hd=(Nt["quat"].create(),[1,.992,.753]),dd=[.988,.039,.039];class ud{constructor(t){this.gl=t,this.quad=new Ds["a"](t),this.prg=new js["a"](t,nd()(),ad()()),this.glconfig=pr["a"].get(t).config().enableCullface(!1).enableDepthTest(!1).enableBlend().blendFunc(t.ONE,t.ONE)}async load(){const t=new Pn(new nn(ri.resolve("assets/webgl/orb.png")),this),e=await t.load();this.orbTex=e}prepare(){this.prg.use(),this.prg.tTex(this.orbTex),this.quad.attribPointer(this.prg),this.glconfig.apply()}render(t,e,s,i,n,o,a){const r=4,l=1/r,c=r*r;let h=performance.now()/1e3/3;h%=1;const d=Math.floor(h*c),u=d+1,p=h*c-d,g=[l*(d%r),l*Math.floor(d/r),l*(u%r),l*Math.floor(u/r)];this.prg.uHazeOffsets(g),this.prg.uHazeMix(p),this.prg.uTint(e),this.prg.uIntensity(.7*s),this.prg.uLineIntensity(.6*i),this.prg.uLineColor(a?dd:hd),Nh(ld,o._wmatrix),Nt["vec3"].add(ld,ld,t),zh(rd,t,ld),cd[0]=n,cd[1]=n,cd[2]=n,Nt["mat4"].scale(rd,rd,cd),this.prg.uMVP(o.getMVP(rd)),this.quad.render()}}var pd=s("0e3c"),gd=s.n(pd),md=s("7ef8"),_d=s.n(md);const bd=Nt["mat4"].create(),fd=Nt["vec3"].create(),vd=(Nt["vec3"].create(),Nt["vec3"].create(),Nt["quat"].create(),3),xd=4;class Td{constructor(t){this.gl=t,this.quad=new Ds["a"](t,-.1,-.5/xd*vd,vd,vd/xd),this.prg=new js["a"](t,gd()(),_d()()),this.glconfig=pr["a"].get(t).config().enableCullface(!1).enableDepthTest(!1).enableBlend().blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)}async load(){const t=new Pn(new nn(ri.resolve("assets/webgl/volumetric-cone.png")),this),e=await t.load();this.texture=e}prepare(){this.prg.use(),this.quad.attribPointer(this.prg),this.glconfig.apply()}render(t,e,s,i){Nt["vec3"].distance(t,e);Nh(fd,i._wmatrix),Nt["vec3"].lerp(fd,t,e,.5),Nt["vec3"].sub(fd,i._wposition,fd),zh(bd,t,e,fd),this.prg.uMVP(i.getMVP(bd)),this.prg.uColor(s),this.prg.tTex(this.texture),this.quad.render()}}const Ed=Nt["vec3"].create();class wd{constructor(t){this.paintingScene=t;const e=t.scene.gl;this.orb=new ud(e),this.groundMark=new sd(e),this.dash=new qh(e),this.volumetric=new Td(e)}load(){return Promise.all([this.orb.load(),this.groundMark.load(),this.volumetric.load()])}render(t){const e=Wx.getSnapshot(),s=e.context.povDatas.lightDatas,i=e.context.selectedLightIndex;let n=e.context.hoveredLightIndex;const o=e.matches("painting.edit_light"),a=e.matches("painting.edit_light.move"),r=e.matches("painting.edit_light.lookat");o&&(n=-1),this.orb.prepare();for(let l=0;l<s.length;l++){const e=s[l],a=o&&l===i,c=a||n===l,h=a&&r,d=Ch.isValidPosition(e.position),u=Ch.isValidTarget(e.lookat);let p=e.isOn?Pi(1*e.intensity,.2,1):.2;eh(Ed,e.hue,e.saturation,1),this.orb.render(e.position,Ed,p,c?1:0,.3,t,!d),a&&this.orb.render(e.lookat,Ed,p,h?1:0,.1,t,!u)}this.volumetric.prepare();for(let l=0;l<s.length;l++){const e=s[l];eh(Ed,e.hue,e.saturation,1),e.isOn&&this.volumetric.render(e.position,e.lookat,Ed,t)}if(o){const e=s[i];this.dash.render(e.position,e.lookat,t),Ed.set(e.position),Ed[1]=0,this.dash.render(e.position,Ed,t,!0),r?this.groundMark.render(e.lookat,t):a&&this.groundMark.render(e.position,t)}}}class Od{constructor(t){this.gl=t,this.isSupported=!0}drawArraysInstanced(t,e,s,i){this.gl.drawArraysInstanced(t,e,s,i)}drawElementsInstanced(t,e,s,i,n){this.gl.drawElementsInstanced(t,e,s,i,n)}vertexAttribDivisor(t,e){this.gl.vertexAttribDivisor(t,e)}}class Ad{constructor(t){this.ext=t,this.isSupported=!0}drawArraysInstanced(t,e,s,i){this.ext.drawArraysInstancedANGLE(t,e,s,i)}drawElementsInstanced(t,e,s,i,n){this.ext.drawElementsInstancedANGLE(t,e,s,i,n)}vertexAttribDivisor(t,e){this.ext.vertexAttribDivisorANGLE(t,e)}}class yd{constructor(){this.isSupported=!1}drawArraysInstanced(){}drawElementsInstanced(){}vertexAttribDivisor(){}}function Dd(t){if(Object(ua["a"])(t))return new Od(t);const e=t.getExtension("ANGLE_instanced_arrays");return e?new Ad(e):new yd}const jd=["WEBGL_compressed_texture_s3tc","MOZ_WEBGL_compressed_texture_s3tc","WEBKIT_WEBGL_compressed_texture_s3tc"],Rd=["WEBGL_compressed_texture_pvrtc","WEBKIT_WEBGL_compressed_texture_pvrtc"],Sd=["WEBGL_compressed_texture_etc1","WEBKIT_WEBGL_compressed_texture_etc1"],Cd=["WEBGL_compressed_texture_astc"];class Id{constructor(t){this.gl=t,this.dxt=this.pickExtension(jd),this.pvr=this.pickExtension(Rd),this.etc=this.pickExtension(Sd),this.astc=this.pickExtension(Cd)}pickExtension(t){let e=null;for(const s of t)if(e=this.gl.getExtension(s),e)break;return e}}function Pd(t,e){const s=t.getShaderPrecisionFormat(t.VERTEX_SHADER,e),i=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,e);return i.precision>0&&s.precision>0}class Ld{constructor(t){this.isWebgl2=Object(ua["a"])(t),this.hasHighpPrecision=Pd(t,t.HIGH_FLOAT),this.hasMediumpPrecision=Pd(t,t.MEDIUM_FLOAT),this.textureExtensions=new Id(t),this.extAniso=t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||t.getExtension("EXT_texture_filter_anisotropic"),this.extIndexUint=t.getExtension("OES_element_index_uint"),this.maxAnisotropy=this.extAniso?t.getParameter(this.extAniso.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,this.instancing=Dd(t),this.isWebgl2?(this.hasStandardDerivatives=!0,this.support32BitIndices=!0):(this.standardDerivatives=t.getExtension("OES_standard_derivatives"),this.hasStandardDerivatives=null!==this.standardDerivatives,this.support32BitIndices=null!==this.extIndexUint),this.bestPrecision=this.hasHighpPrecision?"highp":this.hasMediumpPrecision?"mediump":"lowp",this.glslVersion=this.isWebgl2?"300 es":"100"}}const Md=new WeakMap;function kd(t){let e=Md.get(t);return e||(e=new Ld(t),Md.set(t,e)),e}class Nd extends lc["a"]{constructor(){super(!0,!0),this.texture=null,this.addChild(this.tc=Qo["a"].create("aTexCoord1")),this.colors=new Float32Array(9)}_genCode(t){const e=this.tc.varying();let s;s="uniform sampler2D tBaking;",t.add("pf",s),s=`vec3 Baking = texture2D( tBaking, ${e} ).rgb;`,t.add("prelightsf",s),s="lightingData.lightingColor += (Baking * Baking * brdfData.diffuse) * 0.1;",t.add("postlightsf",s)}setup(t){t.tBaking(this.texture)}}var Fd=s("1fb5"),Bd=s.n(Fd);const Ud="undefined"!==typeof TextDecoder?new TextDecoder("utf-8"):null;function Hd(t){return Ud.decode(t)}function Gd(t){let e="";const s=zd(t);for(let i of s)i<=65535?e+=String.fromCharCode(i):(i-=65536,e+=String.fromCharCode(55296+(i>>10),56320+(1023&i)));return e}function Vd(t,e,s){return e<=t&&t<=s}function zd(t){let e=0,s=0,i=0,n=128,o=191,a=[],r=t.length;for(var l=0;l<r;++l){var c=t[l];if(0===i){if(Vd(c,0,127)){a.push(c);continue}if(Vd(c,194,223)){i=1,e=31&c;continue}if(Vd(c,224,239)){224===c&&(n=160),237===c&&(o=159),i=2,e=15&c;continue}if(Vd(c,240,244)){240===c&&(n=144),244===c&&(o=143),i=3,e=7&c;continue}throw new Error("String decoding failed.")}Vd(c,n,o)?(n=128,o=191,e=e<<6|63&c,++s,s===i&&(a.push(e),e=i=s=0)):(e=i=s=0,n=128,o=191,--l)}return a}const Xd="undefined"!==typeof TextDecoder?Hd:Gd;var Wd,qd=Xd;class Yd{constructor(){this.gltftype=Yo.ANIMATION,this.duration=0}async parse(t,e){const s=e.samplers.map(e=>t._loadElement(e));this.samplers=await Promise.all(s);for(const n of this.samplers)this.duration=Math.max(n.maxTime);const i=e.channels.map(e=>t._loadElement(e));this.channels=await Promise.all(i)}evaluate(t){for(var e of this.channels)e.evaluate(t)}getChannel(t){return this.channels[t]}getSampler(t){return this.samplers[t]}}function Kd(t,e){t.position.set(e),t.invalidate()}function Zd(t,e){t.rotation.set(e),t.invalidate()}function $d(t,e){t.scale.set(e),t.invalidate()}function Qd(t,e){t.weights.set(e)}function Jd(t){switch(t){case pa.AnimationChannelTargetPath.TRANSLATION:return Kd;case pa.AnimationChannelTargetPath.ROTATION:return Zd;case pa.AnimationChannelTargetPath.SCALE:return $d;case pa.AnimationChannelTargetPath.WEIGHTS:return Qd;default:throw new Error("unsupported path "+t)}}class tu{constructor(){this.gltftype=Yo.ANIMATION_CHANNEL}async parse(t,e){if(this._active=!1,this.path=e.target.path,this.applyFunction=Jd(this.path),void 0!==e.target.node){this._active=!0,this.node=await t.getElement(Yo.NODE,e.target.node);let s=1;this.path===pa.AnimationChannelTargetPath.WEIGHTS&&(s=this.node.mesh.primitives[0].targets.length),t._loadElement(e.elementParent).then(t=>{this.sampler=t.getSampler(e.sampler),this.evaluator=this.sampler.createEvaluator(this.path,s),this.valueHolder=this.evaluator.createElementHolder()})}}evaluate(t){this._active&&(this.evaluator.evaluate(this.valueHolder,t),this.applyFunction(this.node,this.valueHolder))}}function eu(t,e,s,i,n,o,a){const r=e*e,l=e*r,c=2*l-3*r+1,h=s*(l-2*r+e),d=3*r-2*l,u=s*(l-r),p=i.length;for(var g=0;g<p;g++)t[g]=c*i[g]+h*n[g]+d*a[g]+u*o[g]}class su{constructor(t){this.frame=0,this.t0=t.getRawScalar(0),this.t1=t.getRawScalar(1),this.inBound=!0,this._fMax=t.count-1}contain(t){return t<this.t0?-1:t>=this.t1?1:0}normalizedFrame(){return Math.min(Math.max(this.frame,0),this._fMax)}}class iu{constructor(t,e){this.sampler=t,this.interval=new su(t.input),this.numElements=e}resolveInterval(t){const e=this.interval,s=this.sampler.input,i=s.count,n=e.contain(t);if(0===n)return;let o,a,r,l=!0;if(n>0){o=e.frame+1,a=e.t1;do{o++,l=o<i,r=a,a=l?s.getRawScalar(o):Number.MAX_VALUE}while(a<=t);o--}else{o=e.frame,r=e.t0;do{o--,l=o>=0,a=r,r=l?s.getRawScalar(o):-Number.MAX_VALUE}while(r>t)}e.frame=o,e.t0=r,e.t1=a,e.inBound=l}evaluate(t,e){}}class nu extends iu{evaluate(t,e){this.resolveInterval(e),this.sampler.output.getValues(t,this.interval.normalizedFrame()*this.numElements,this.numElements)}}function ou(t,e,s,i){const n=e.length,o=1-i;for(var a=0;a<n;a++)t[a]=e[a]*o+s[a]*i}function au(t,e,s,i){t[0]=e[0]*(1-i)+s[0]*i}function ru(t,e){switch(t){case pa.AnimationChannelTargetPath.WEIGHTS:return 1===e?au:ou;case pa.AnimationChannelTargetPath.ROTATION:return Nt["quat"].slerp;case pa.AnimationChannelTargetPath.SCALE:case pa.AnimationChannelTargetPath.TRANSLATION:default:return ou}}class lu extends iu{constructor(t,e,s){super(t,s),this.val0=t.output.createElementHolderArray(s),this.val1=t.output.createElementHolderArray(s),this.lerpFunc=ru(e,this.val0.length)}evaluate(t,e){this.resolveInterval(e);const s=this.sampler.output,i=this.numElements;if(this.interval.inBound){const{t0:n,t1:o,frame:a}=this.interval,r=(e-n)/(o-n);s.getValues(this.val0,i*a+0,i),s.getValues(this.val1,i*a+i,i),this.lerpFunc(t,this.val0,this.val1,r)}else s.getValues(t,this.interval.normalizedFrame()*i,i)}}class cu extends iu{constructor(t,e,s){super(t,s),this.val0=t.output.createElementHolderArray(s),this.val1=t.output.createElementHolderArray(s),this.val2=t.output.createElementHolderArray(s),this.val3=t.output.createElementHolderArray(s),this.assumeQuat=e===pa.AnimationChannelTargetPath.ROTATION}evaluate(t,e){this.resolveInterval(e);const s=this.sampler.output,i=this.numElements;if(this.interval.inBound){const{t0:n,t1:o,frame:a}=this.interval,r=o-n,l=(e-n)/r;s.getValues(this.val0,i*(3*a+1),i),s.getValues(this.val1,i*(3*a+2),i),s.getValues(this.val2,i*(3*a+3),i),s.getValues(this.val3,i*(3*a+4),i),eu(t,l,r,this.val0,this.val1,this.val2,this.val3),this.assumeQuat&&Nt["quat"].normalize(t,t)}else s.getValues(t,i*(3*this.interval.normalizedFrame()+1),i)}}function hu(t,e,s){switch(t.interpolation){case pa.AnimationSamplerInterpolation.STEP:return new nu(t,s);case pa.AnimationSamplerInterpolation.LINEAR:return new lu(t,e,s);case pa.AnimationSamplerInterpolation.CUBICSPLINE:return new cu(t,e,s);default:throw new Error("GLTF : Unsupported sampler interpolation "+t.interpolation)}}class du{constructor(t,e,s){this.sampler=t,this.numElements=s,this.interpolator=hu(t,e,s)}evaluate(t,e){this.interpolator.evaluate(t,e)}createElementHolder(){return this.sampler.output.createElementHolderArray(this.numElements)}}class uu{constructor(){this.gltftype=Yo.ANIMATION_SAMPLER,this.minTime=0,this.maxTime=0}async parse(t,e){this.input=await t.getElement(Yo.ACCESSOR,e.input),this.output=await t.getElement(Yo.ACCESSOR,e.output),this.interpolation=e.interpolation||pa.AnimationSamplerInterpolation.LINEAR,this.minTime=this.input.getRawScalar(0),this.maxTime=this.input.getRawScalar(this.input.count-1)}createEvaluator(t,e){return new du(this,t,e)}}(function(t){t["float"]="float",t["vec2"]="vec2",t["vec3"]="vec3",t["vec4"]="vec4",t["mat2"]="mat2",t["mat3"]="mat3",t["mat4"]="mat4"})(Wd||(Wd={}));const pu=t=>Math.max(t/127,-1),gu=t=>t/255,mu=t=>Math.max(t/32767,-1),_u=t=>t/65535,bu=t=>t,fu=t=>t;function vu(t){switch(t){case pa.AccessorComponentType.BYTE:return pu;case pa.AccessorComponentType.UNSIGNED_BYTE:return gu;case pa.AccessorComponentType.SHORT:return mu;case pa.AccessorComponentType.UNSIGNED_SHORT:return _u;case pa.AccessorComponentType.UNSIGNED_INT:return bu;case pa.AccessorComponentType.FLOAT:return fu}}function xu(t){switch(t){case pa.AccessorComponentType.BYTE:return Int8Array;case pa.AccessorComponentType.UNSIGNED_BYTE:return Uint8Array;case pa.AccessorComponentType.SHORT:return Int16Array;case pa.AccessorComponentType.UNSIGNED_SHORT:return Uint16Array;case pa.AccessorComponentType.UNSIGNED_INT:return Uint32Array;case pa.AccessorComponentType.FLOAT:return Float32Array}}function Tu(t){return xu(t).BYTES_PER_ELEMENT}function Eu(t){switch(t){case pa.AccessorType.SCALAR:return 1;case pa.AccessorType.VEC2:return 2;case pa.AccessorType.VEC3:return 3;case pa.AccessorType.VEC4:return 4;case pa.AccessorType.MAT2:return 4;case pa.AccessorType.MAT3:return 9;case pa.AccessorType.MAT4:return 16}}function wu(t){switch(t){case pa.AccessorType.SCALAR:return Wd.float;case pa.AccessorType.VEC2:return Wd.vec2;case pa.AccessorType.VEC3:return Wd.vec3;case pa.AccessorType.VEC4:return Wd.vec4;case pa.AccessorType.MAT2:return Wd.mat2;case pa.AccessorType.MAT3:return Wd.mat3;case pa.AccessorType.MAT4:return Wd.mat4}}class Ou{constructor(){this.normalized=!1,this.byteOffset=0,this.count=0,this._stride=0,this._strideElem=0}get numComps(){return Eu(this.type)}get bytesPerElem(){return Tu(this.componentType)}get glslType(){return wu(this.type)}*[Symbol.iterator](){const t=this.createElementHolder();for(let e=0;e<this.count;e++)this.getValue(t,e),yield t}createElementHolder(t=this.normalized){return t?new Float32Array(this.numComps):new(xu(this.componentType))(this.numComps)}createElementHolderArray(t,e=this.normalized){return e?new Float32Array(this.numComps*t):new(xu(this.componentType))(this.numComps*t)}getScalar(t,e=this.normalized){let s;return s=null!==this.sparse?this.sparse.getRawScalar(t):this.getRawScalar(t),e&&(s=this._normalizeFunc(s)),s}getRawScalar(t){const e=this._strideElem*t;return this._array[e]}getValue(t,e,s=this.normalized){const i=s?this._valueHolder:t;null!==this.sparse?this.sparse.getRawValue(i,e):this.getRawValue(i,e),s&&this._normalize(t,i)}getValues(t,e,s){if(null!==this.sparse)throw new Error("Cant call getValues in sparsed accessor");this.getRawValues(t,e,s),this.normalized&&this._normalize(t,t)}getRawValue(t,e){const s=this._strideElem*e,i=this.numComps;for(var n=0;n<i;n++)t[n]=this._array[n+s]}getRawValues(t,e,s){const i=this.numComps;for(let o=0;o<s;o++){const s=o*i,a=this._strideElem*(e+o);for(var n=0;n<i;n++)t[s+n]=this._array[n+a]}}_normalize(t,e){const s=this._normalizeFunc,i=this.numComps;for(var n=0;n<i;n++)t[n]=s(e[n])}}class Au extends Ou{constructor(){super(...arguments),this.gltftype=Yo.ACCESSOR}async parse(t,e){const{byteOffset:s=0,normalized:i=!1}=e;if(this.normalized=i,this.byteOffset=s,this.componentType=e.componentType,this.count=e.count,this.type=e.type,this.max=e.max,this.min=e.min,void 0!==e.bufferView){this.bufferView=await t.getElement(Yo.BUFFERVIEW,e.bufferView);const s=xu(this.componentType);0===this.bufferView.byteStride?(this._stride=this.numComps*this.bytesPerElem,this._strideElem=this.numComps):(this._stride=this.bufferView.byteStride,this._strideElem=this._stride/s.BYTES_PER_ELEMENT,Uo.isTrue(this._strideElem===Math.round(this._strideElem))),this._array=new s(this.bufferView.buffer._bytes,this.byteOffset+this.bufferView.getByteOffset(),this.count*this._strideElem)}else this.bufferView=null,this._stride=0,this._strideElem=0,this._array=this.createElementHolder();return this.sparse=null,void 0!==e.sparse&&t._loadElement(e.sparse).then(t=>this.sparse=t),this._valueHolder=this.createElementHolder(),this._normalizeFunc=vu(this.componentType),Promise.resolve()}}class yu{constructor(){this.gltftype=Yo.CAMERA}parse(t,e){switch(this.type=e.type,this.type){case pa.CameraType.PERSPECTIVE:this.projectionData=e.perspective,this.lens=this.createPerpective(this.projectionData);break;case pa.CameraType.ORTHOGRAPHIC:this.projectionData=e.orthographic,this.lens=this.createOrtho(this.projectionData);break;default:throw new Error("Camera - unsupported type "+this.type)}return Promise.resolve()}createPerpective(t){var e,s;const i=new cl["a"];return i.near=t.znear,i.far=null!==(e=t.zfar)&&void 0!==e?e:100,i.setVerticalFov(t.yfov),i.aspect=null!==(s=t.aspectRatio)&&void 0!==s?s:1,i}createOrtho(t){const e=new ll["a"];return e.near=t.znear,e.far=t.zfar,e._xMin=-t.xmag,e._xMax=t.xmag,e._yMin=-t.ymag,e._yMax=t.ymag,e}}class Du{constructor(){this.gltftype=Yo.MESH}async parse(t,e){const s=e.primitives.map(e=>t._loadElement(e));this.primitives=await Promise.all(s),e.weights&&(this.weights=new Float32Array(e.weights))}}class ju{constructor(){this._sampler=null}createSampler(t){var e;if(null===this._sampler){const s=$o.getSemantics().getAttributeName("TEXCOORD_"+this.texCoord);this._sampler=new Jo["a"](`tex_${null!==(e=this.name)&&void 0!==e?e:""}${t}`,Qo["a"].create(s)),this.texture.glTexturePromise.then(t=>this._sampler.set(t))}return this._sampler}async parse(t,e){var s;this.texture=await t.getElement(Yo.TEXTURE,e.index),this.texCoord=null!==(s=e.texCoord)&&void 0!==s?s:0}}class Ru extends ju{constructor(){super(...arguments),this.gltftype=Yo.TEXTURE_INFO}}class Su extends ju{constructor(){super(...arguments),this.gltftype=Yo.NORMAL_TEXTURE_INFO}async parse(t,e){var s;await super.parse(t,e),this.scale=null!==(s=e.scale)&&void 0!==s?s:1}}class Cu extends ju{constructor(){super(...arguments),this.gltftype=Yo.OCCLUSION_TEXTURE_INFO}async parse(t,e){var s;await super.parse(t,e),this.strength=null!==(s=e.strength)&&void 0!==s?s:1}}var Iu=s("0131"),Pu=s("8887");class Lu{constructor(t,e){this.semantic=t,this.accessor=e,this.glslname=$o.getSemantics().getAttributeName(t)}}class Mu{constructor(t){this.accessor=t,this.attributes=[]}addAttribute(t){this.attributes.push(t)}}class ku{constructor(){this._attributes=[]}get length(){return this._attributes.length}get attributes(){return this._attributes}add(t){this._attributes.push(t)}getSemantic(t){for(var e of this._attributes)if(e.semantic===t)return e;return null}getBuffersViewSets(){const t=new Map;for(var e of this._attributes){var s=e.accessor.bufferView;t.has(s)||t.set(s,new Mu(e.accessor)),t.get(s).addAttribute(e)}return Array.from(t.values())}}const Nu=34963,Fu=34962;class Bu{constructor(){this.gltftype=Yo.PRIMITIVE,this.material=null,this.indices=null,this.targets=null,this.bounds=new Pu["a"]}_calculaterBounds(){const t=this.attributes.getSemantic("POSITION");null!=t&&t.accessor.min&&t.accessor.max&&this.bounds.fromMinMax(t.accessor.min,t.accessor.max)}async parse(t,e){if(this.attributes=new ku,await this.parseAttributeSet(t,this.attributes,e.attributes),void 0!==e.indices&&(this.indices=await t.getElement(Yo.ACCESSOR,e.indices)),void 0!==e.material?this.material=await t.getElement(Yo.MATERIAL,e.material):this.material=await t.loadDefaultMaterial(),void 0!==e.mode?this.mode=e.mode:this.mode=pa.MeshPrimitiveMode.DEFAULT,void 0!==e.targets){this.targets=[];for(let s=0;s<e.targets.length;s++){const i=e.targets[s],n=new ku;await this.parseMorphAttributeSet(t,n,i,s),this.targets.push(n)}}this._calculaterBounds()}async parseAttributeSet(t,e,s){for(const i in s){const n=await t.getElement(Yo.ACCESSOR,s[i]);e.add(new Lu(i,n))}}async parseMorphAttributeSet(t,e,s,i){for(const n in s){const o=await t.getElement(Yo.ACCESSOR,s[n]),a=new Lu(n,o);a.glslname=$o.getSemantics().getMorphedAttributeName(a.semantic,i),e.add(a)}}allocateGl(t){this._vaoMap=new Map,this.buffers=[];const e=this.attributes.getBuffersViewSets();for(const s of e)this.buffers.push(this.createArrayBuffer(t,s));if(null!==this.indices){const e=this.indices.bufferView.getWebGLBuffer(t,Nu);this.indexBuffer=new Qs["a"](t,this.indices.componentType,void 0,t.STATIC_DRAW,e),this.indexBuffer.byteLength=this.indices.bufferView.byteLength}if(null!==this.targets)for(let s=0;s<this.targets.length;s++){const e=this.targets[s],i=e.getBuffersViewSets();for(const s of i)this.buffers.push(this.createArrayBuffer(t,s))}}createArrayBuffer(t,e){const s=e.accessor.bufferView,i=s.getWebGLBuffer(t,Fu),n=new $s["a"](t,void 0,t.STATIC_DRAW,i);n.byteLength=s.byteLength,n.stride=e.accessor._stride,n._computeLength();for(const o of e.attributes){const t=this.createAttributeDefinition(o);n.attribs.push(t)}return n}createAttributeDefinition(t){const e=t.accessor;return{name:t.glslname,type:e.componentType,size:e.numComps,normalize:e.normalized,offset:e.byteOffset,stride:e._stride}}getVao(t){const e=t._cuid.toString();if(!this._vaoMap.has(e)){const s=new Iu["a"](t.gl);s.setup(t,this.buffers,this.indexBuffer),this._vaoMap.set(e,s)}return this._vaoMap.get(e)}bindVao(t){this._currentVao=this.getVao(t),this._currentVao.bind()}render(){this.indexBuffer?this.indexBuffer.draw(this.mode,this.indices.count,this.indices.byteOffset):this.buffers[0].draw(this.mode)}unbindVao(){this._currentVao.unbind()}}const Uu=10497;class Hu{constructor(){this.gltftype=Yo.SAMPLER}parse(t,e){var s,i;return this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.wrapS=null!==(s=e.wrapS)&&void 0!==s?s:Uu,this.wrapT=null!==(i=e.wrapT)&&void 0!==i?i:Uu,Promise.resolve()}}class Gu{constructor(){this.gltftype=Yo.SCENE}async parse(t,e){if(void 0!==e.nodes){const s=e.nodes.map(e=>t.getElement(Yo.NODE,e));this.nodes=await Promise.all(s)}else this.nodes=[]}updateNodes(){for(let t=0;t<this.nodes.length;t++)this.nodes[t].updateWorldMatrix()}}const Vu=Nt["mat4"].create();class zu{constructor(){this.gltftype=Yo.SKIN}async parse(t,e){const s=e.joints.map(e=>t.getElement(Yo.NODE,e));if(this.joints=await Promise.all(s),this.inverseBindMatrices=this.joints.map(Nt["mat4"].create),void 0!==e.inverseBindMatrices){const s=await t.getElement(Yo.ACCESSOR,e.inverseBindMatrices);this.inverseBindMatrices.forEach((t,e)=>s.getValue(t,e))}void 0!==e.skeleton&&(this.skeletonRoot=await t.getElement(Yo.NODE,e.skeleton))}computeJoints(t,e){if(e.length!==this.joints.length)throw new Error("Skin.computeJoints(), jointMatrices size must match joints size");Nt["mat4"].invert(Vu,t._wmatrix);for(let s=0;s<this.joints.length;s++){const t=this.joints[s],i=this.inverseBindMatrices[s],n=e[s];Nt["mat4"].mul(n,t._wmatrix,i),Nt["mat4"].mul(n,Vu,n)}}}class Xu{constructor(){this.resolve=t=>{this._resolve(t)},this.reject=t=>{this._reject(t)},this.promise=new Promise((t,e)=>{this._resolve=t,this._reject=e})}}const Wu=10497,qu=33648;function Yu(t){return 256===(256&t)}function Ku(t){return t===Wu||t===qu}class Zu{constructor(){this.gltftype=Yo.TEXTURE,this._glTextureDeferred=new Xu}get glTexturePromise(){return this._glTextureDeferred.promise}async parse(t,e){void 0!==e.sampler&&(this.sampler=await t.getElement(Yo.SAMPLER,e.sampler)),void 0!==e.source&&(this.source=await t.getElement(Yo.IMAGE,e.source))}async allocateGl(t){var e,s;let i=t.RGBA;this.source.mimeType===pa.ImageMimeType.JPEG&&(i=t.RGBA);let n=t.LINEAR,o=t.LINEAR,a=t.REPEAT,r=t.REPEAT;this.sampler&&(n=null!==(e=this.sampler.minFilter)&&void 0!==e?e:t.LINEAR,o=null!==(s=this.sampler.magFilter)&&void 0!==s?s:t.LINEAR,a=this.sampler.wrapS,r=this.sampler.wrapT),this.glTexture=new li["a"](t,i,t.UNSIGNED_BYTE);const l=Ku(a)||Ku(r)||Yu(n);await this.source.setupTexture(this.glTexture,l,Yu(n)),this.glTexture.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,r),this._glTextureDeferred.resolve(this.glTexture)}}var $u=s("901a"),Qu=s("c552");function Ju(t){if(t<1||t>4)throw new Error("number is not Component size")}function tp(t){if("position"!==t&&"normal"!==t&&"tangent"!==t)throw new Error(`semantic ${t} can't be morphed`)}class ep{constructor(t,e){this.materials=[],this.bounds=new Pu["a"],this.gl=t,Uo.isDefined(e.mesh),this.node=e,this.mesh=this.node.mesh,this.setupMaterials(t),this.computeBounds()}clone(){}setupMaterials(t){for(const e of this.mesh.primitives){const s=e.material.createMaterialForPrimitive(t,this.node,e);s.addPass(new Wl["a"](t),"depth"),this.configureDeformers(s,e),this.materials.push(s)}ep._materialCache.set(this.mesh.primitives[0].material,this.materials)}setMesh(t){this.mesh=t,ep._materialCache.has(this.mesh.primitives[0].material)?this.materials=ep._materialCache.get(this.mesh.primitives[0].material):(this.materials=[],this.setupMaterials(this.gl))}configureDeformers(t,e){this.configureSkin(t,e),this.configureMorph(t,e)}configureMorph(t,e){if(null!==e.targets){const s=e.targets[0].attributes,i=[];for(const t of s){const s=e.targets.map(e=>e.getSemantic(t.semantic).glslname),n=t.semantic.toLowerCase();tp(n);const o={name:n,type:t.accessor.glslType,attributes:s};i.push(o)}const n=new $u["a"](i);t.inputs.add(n),this._morph=n,this.setupMorphWeights()}}setupMorphWeights(){this.node.weights?this._morph.weights=this.node.weights:this.mesh.weights&&(this._morph.weights=this.mesh.weights)}configureSkin(t,e){if(this.node.skin){const s=this.node.skin.joints.length,i=[];let n=0;while(1){const t="WEIGHTS_"+n,s="JOINTS_"+n,o=e.attributes.getSemantic(t),a=e.attributes.getSemantic(s);if(null===o!==(null===a))throw new Error("Skin attributes inconsistency");if(null===o)break;if(o.accessor.numComps!==a.accessor.numComps)throw new Error("weight and joints attribute dont have the same size");const r=o.accessor.numComps;Ju(r),i.push({weightsAttrib:o.glslname,jointsAttrib:a.glslname,numComponents:r}),n++}const o=new Qu["a"](s,i);t.inputs.add(o),this._skin=o}}computeBounds(){this.bounds.copyFrom(this.mesh.primitives[0].bounds);for(const t of this.mesh.primitives)Pu["a"].union(this.bounds,this.bounds,t.bounds)}render(t,e,s,i,n){const o=t.glstate,a=this.mesh.primitives;this._skin&&this.node.skin.computeJoints(this.node,this._skin.jointMatrices),this._morph&&this.setupMorphWeights();for(let r=0;r<a.length;r++){const t=a[r],l=this.materials[r];if(!l.hasPass(i)||0===(l.mask&s))continue;const c=l.getPass(i);0!==(c.pass.mask&s)&&(c.prepare(this.node,e),o.push(c.pass.glconfig),l.glconfig&&o.push(l.glconfig),this.glconfig&&o.push(this.glconfig),n&&o.push(n),o.apply(),this.drawCall(e,c.getProgram(),t),o.pop(),l.glconfig&&o.pop(),this.glconfig&&o.pop(),n&&o.pop())}}drawCall(t,e,s){s.bindVao(e),s.render(),s.unbindVao()}}ep._materialCache=new WeakMap;class sp extends vi["a"]{constructor(){super(...arguments),this.gltftype=Yo.NODE,this.weights=null}async parse(t,e){var s,i;if(this.extras=e.extras,void 0!==e.camera&&(this.camera=await t.getElement(Yo.CAMERA,e.camera)),void 0!==e.matrix&&this.setMatrix(new Float32Array(e.matrix)),void 0!==e.scale&&this.scale.set(e.scale),void 0!==e.translation&&this.position.set(e.translation),void 0!==e.rotation&&this.rotation.set(e.rotation),void 0!==e.children){const s=e.children.map(e=>t.getElement(Yo.NODE,e)),i=await Promise.all(s);for(var n of i)this.add(n)}if(void 0!==e.skin&&(this.skin=await t.getElement(Yo.SKIN,e.skin)),void 0!==e.mesh){this.mesh=await t.getElement(Yo.MESH,e.mesh);const s=this.mesh.primitives[0].targets;s&&(this.weights=new Float32Array(s.length))}if(void 0!==e.weights){if(null===this.weights||this.weights.length!==e.weights.length)throw new Error("morph weights on node doesn't match mesh targets");this.weights.set(e.weights)}this.name=null!==(s=e.name)&&void 0!==s?s:null===(i=this.mesh)||void 0===i?void 0:i.name,this.invalidate()}findChild(t){for(let e=0;e<this._children.length;e++){const s=this._children[e];if(s.name===t)return s}}findDescendant(t){var e;let s=this.findChild(t);if(void 0===s)for(let i=0;i<this._children.length;i++){const n=this._children[i];if(s=null===(e=n.findDescendant)||void 0===e?void 0:e.call(n,t),void 0!==s)return s}return s}allocateGl(t){this.mesh&&(this.renderable=new ep(t,this))}}class ip{constructor(){this.gltftype=Yo.ASSET}parse(t,e){return this.version=e.version,this.copyright=e.copyright,this.generator=e.generator,this.minVersion=e.minVersion,this.extras=e.extras,Promise.resolve()}}class np{constructor(){this.gltftype=Yo.BUFFER}async parse(t,e){this.byteLength=e.byteLength,this.uri=e.uri,this._byteOffset=0,this._bytes=await t.loadBufferUri(e.uri),Uo.isTrue(null!==this._bytes)}}class op{constructor(){this.gltftype=Yo.BUFFERVIEW,this.byteOffset=0,this.byteLength=0,this.byteStride=0,this.target=0,this.glBuffer=null,this.glBufferTarget=0}async parse(t,e){const{byteLength:s,byteOffset:i=0,byteStride:n=0,target:o=0}=e;this.byteLength=s,this.byteOffset=i,this.byteStride=n,this.target=o,this.buffer=await t.getElement(Yo.BUFFER,e.buffer)}getByteOffset(){return this.byteOffset+this.buffer._byteOffset}getWebGLBuffer(t,e){if(0!==this.target&&this.target!==e)throw new Error(`BufferView's target ${this.target} doesn't match infered one ${e}`);if(null!==this.glBuffer){if(this.glBufferTarget!==e)throw new Error("WebglBuffers with different target requested on BufferView")}else{const s=new Uint8Array(this.buffer._bytes,this.getByteOffset(),this.byteLength);this.glBufferTarget=e,this.glBuffer=t.createBuffer(),t.bindBuffer(e,this.glBuffer),t.bufferData(e,s,t.STATIC_DRAW),t.bindBuffer(e,null)}return this.glBuffer}}class ap{constructor(){this.gltftype=Yo.ACCESSOR_SPARSE}async parse(t,e,...s){this.accessor=await t.getElement(Yo.ACCESSOR,e.elementParent.elementIndex),this.indices=await t._loadElement(e.indices),this.values=await t._loadElement(e.values);const i=this.indicesSet=new Set,n=this.indicesMap=new Map,o=this.indices,a=o.count;for(var r=0;r<a;r++){var l=o.getScalar(r);i.add(l),n.set(l,r)}}getRawValue(t,e){const s=this.indicesSet.has(e);s?this.values.getRawValue(t,this.indicesMap.get(e)):this.accessor.getRawValue(t,e)}getRawScalar(t){const e=this.indicesSet.has(t);return e?this.values.getRawScalar(this.indicesMap.get(t)):this.accessor.getRawScalar(t)}}class rp extends Ou{constructor(){super(...arguments),this.gltftype=Yo.ACCESSOR_SPARSE_INDICES}async parse(t,e){var s;const i=e.elementParent;this.normalized=!1,this.byteOffset=null!==(s=e.byteOffset)&&void 0!==s?s:0,this.componentType=e.componentType,this.count=i.count,this.type=pa.AccessorType.SCALAR,this.sparse=null,this.bufferView=await t.getElement(Yo.BUFFERVIEW,e.bufferView);const n=xu(this.componentType);return 0===this.bufferView.byteStride?(this._stride=this.numComps*this.bytesPerElem,this._strideElem=this.numComps):(this._stride=this.bufferView.byteStride,this._strideElem=this._stride/n.BYTES_PER_ELEMENT,Uo.isTrue(this._strideElem===Math.round(this._strideElem))),this._array=new n(this.bufferView.buffer._bytes,this.byteOffset+this.bufferView.getByteOffset(),this.count*this._strideElem),this._valueHolder=this.createElementHolder(),Promise.resolve()}}class lp extends Ou{constructor(){super(...arguments),this.gltftype=Yo.ACCESSOR_SPARSE_VALUES}async parse(t,e){var s,i;const n=e.elementParent,o=n.elementParent;this.byteOffset=null!==(s=e.byteOffset)&&void 0!==s?s:0,this.count=n.count,this.normalized=null!==(i=o.normalized)&&void 0!==i&&i,this.componentType=o.componentType,this.type=o.type,this.sparse=null,this.bufferView=await t.getElement(Yo.BUFFERVIEW,e.bufferView);const a=xu(this.componentType);return 0===this.bufferView.byteStride?(this._stride=this.numComps*this.bytesPerElem,this._strideElem=this.numComps):(this._stride=this.bufferView.byteStride,this._strideElem=this._stride/a.BYTES_PER_ELEMENT,Uo.isTrue(this._strideElem===Math.round(this._strideElem))),this._array=new a(this.bufferView.buffer._bytes,this.byteOffset+this.bufferView.getByteOffset(),this.count*this._strideElem),this._valueHolder=this.createElementHolder(),Promise.resolve()}}class cp{constructor(t){this.name="default",this.priority=0,this.loader=t}acceptElement(t,e){return null}loadElement(t){switch(t.gltftype){case Yo.ACCESSOR:return this.createAccessor(t);case Yo.ACCESSOR_SPARSE:return this.createAccessorSparse(t);case Yo.ACCESSOR_SPARSE_INDICES:return this.createAccessorSparseIndices(t);case Yo.ACCESSOR_SPARSE_VALUES:return this.createAccessorSparseValues(t);case Yo.ANIMATION:return this.createAnimation(t);case Yo.ANIMATION_SAMPLER:return this.createAnimationSampler(t);case Yo.ANIMATION_CHANNEL:return this.createAnimationChannel(t);case Yo.ASSET:return this.createAsset(t);case Yo.BUFFER:return this.createBuffer(t);case Yo.BUFFERVIEW:return this.createBufferview(t);case Yo.CAMERA:return this.createCamera(t);case Yo.IMAGE:return this.createImage(t);case Yo.MATERIAL:return this.createMaterial(t);case Yo.MESH:return this.createMesh(t);case Yo.NODE:return this.createNode(t);case Yo.NORMAL_TEXTURE_INFO:return this.createNormalTextureInfo(t);case Yo.OCCLUSION_TEXTURE_INFO:return this.createOcclusionTextureInfo(t);case Yo.PRIMITIVE:return this.createPrimitive(t);case Yo.SAMPLER:return this.createSampler(t);case Yo.SCENE:return this.createScene(t);case Yo.SKIN:return this.createSkin(t);case Yo.TEXTURE:return this.createTexture(t);case Yo.TEXTURE_INFO:return this.createTextureInfo(t)}}async createAccessor(t){const e=new Au;return await e.parse(this.loader,t),e}async createAccessorSparse(t){const e=new ap;return await e.parse(this.loader,t),e}async createAccessorSparseIndices(t){const e=new rp;return await e.parse(this.loader,t),e}async createAccessorSparseValues(t){const e=new lp;return await e.parse(this.loader,t),e}async createAsset(t){const e=new ip;return await e.parse(this.loader,t),e}async createBuffer(t){const e=new np;return await e.parse(this.loader,t),e}async createBufferview(t){const e=new op;return await e.parse(this.loader,t),e}async createAnimationChannel(t){const e=new tu;return await e.parse(this.loader,t),e}async createAnimationSampler(t){const e=new uu;return await e.parse(this.loader,t),e}async createAnimation(t){const e=new Yd;return await e.parse(this.loader,t),e}async createCamera(t){const e=new yu;return await e.parse(this.loader,t),e}async createImage(t){const e=new Wa;return await e.parse(this.loader,t),e}async createMaterial(t){const e=new va;return await e.parse(this.loader,t),e}async createMesh(t){const e=new Du;return await e.parse(this.loader,t),e}async createNode(t){const e=new sp;return await e.parse(this.loader,t),e}async createNormalTextureInfo(t){const e=new Su;return await e.parse(this.loader,t),e}async createOcclusionTextureInfo(t){const e=new Cu;return await e.parse(this.loader,t),e}async createPbrMetallicRoughness(t){const e=new ha;return await e.parse(this.loader,t),e}async createPrimitive(t){const e=new Bu;return await e.parse(this.loader,t),e}async createSampler(t){const e=new Hu;return await e.parse(this.loader,t),e}async createScene(t){const e=new Gu;return await e.parse(this.loader,t),e}async createSkin(t){const e=new zu;return await e.parse(this.loader,t),e}async createTexture(t){const e=new Zu;return await e.parse(this.loader,t),e}async createTextureInfo(t){const e=new Ru;return await e.parse(this.loader,t),e}}class hp{constructor(){this.name="default"}createInstance(t){return new cp(t)}}const dp=new hp;$o.addExtension(dp);var up=s("ab1a");let pp=0;function gp(){return pp+++""}const mp={gltftype:Yo.MATERIAL,elementIndex:-1,elementParent:null,uuid:"_default_mat_",name:"default"};class _p{constructor(t,e){this.data=t,this.promise=e}}const bp=1179937895,fp=1313821514,vp=20;class xp{constructor(t,e,s={}){var i;this._elements=new Map,this._pendingElements=[],this._byType=new Map,this._propertyMaps=new Map,this.unpack=t=>{const e=new Uint32Array(t,0,1)[0];if(e===bp)this.unpackGlb(t);else{const e=this.gltfIO.decodeUTF8(t);this._data=JSON.parse(e),this.prepareGltfDatas(this._data)}return Promise.resolve(!0)},this.loadBufferUri=t=>{if(void 0===t)return Promise.resolve(this._glbData);const e=this.gltfIO.resolvePath(t,this._baseUrl);return this.gltfIO.loadBinaryResource(e,this.abortSignal)},this.parseAll=async()=>{this._extensions.validate(this._data.extensionsUsed,this._data.extensionsRequired);const t=await this._loadElement(this._data.asset);"2.0"!=t.version&&console.warn(`Gltf version should be "2.0" found "${t.version}"`),await this._loadElements(this._data.scenes),await this._loadElements(this._data.nodes),await this._loadElements(this._data.animations),await this._loadElements(this._data.meshes),await this.resolveElements()},this.yieldGltf=()=>Promise.resolve(this.gltf),this.gltfIO=t,this._url=e,this._baseUrl=s.baseurl,this.abortSignal=null!==(i=s.abortSignal)&&void 0!==i?i:up["a"].none,void 0===this._baseUrl&&([this._baseUrl,this._url]=t.resolveBaseDir(this._url)),this.gltf=new $o,this._data=null,this._extensions=new Ho,$o.getExtensionsRegistry().setupExtensions(this,s.extensions)}load(){return this.gltfIO.loadBinaryResource(this.gltfIO.resolvePath(this._url,this._baseUrl),this.abortSignal).then(this.unpack).then(this.parseAll).then(this.yieldGltf)}unpackGlb(t){const[,e,,s,i]=new Uint32Array(t,0,5);if(2!==e)throw new Error("Binary glTF version is not 2");if(i!==fp)throw new Error("Binary glTF scene format is not JSON");const n=this.gltfIO.decodeUTF8(t,vp,s);this._glbData=t.slice(vp+s+8),this._data=JSON.parse(n),this.prepareGltfDatas(this._data)}resolveUri(t){return this.gltfIO.resolvePath(t,this._baseUrl)}parseCommonGltfProperty(t,e){void 0===e.name&&(e.name=t.name),void 0===e.extras&&(e.extras=t.extras)}async _createElement(t){let e=await this._createElementInstance(t);return this.parseCommonGltfProperty(t,e),this._extensionsAccept(t,e)}_createElementInstance(t){const e=this._extensions._list;for(const s of e){const e=s.loadElement(t);if(void 0===e)throw new Error("extension should not return undefined");if(null!==e)return e}throw new Error("Unhandled type")}async _extensionsAccept(t,e){const s=this._extensions._list;let i;for(const n of s)i=n.acceptElement(t,e),null!==i&&(e=await i);return e}_loadElement(t){let e=this._elements.get(t.uuid);if(void 0===e){e=this._createElement(t);const s=new _p(t,e);this._pendingElements.push(s),this._elements.set(t.uuid,e)}return e}loadDefaultMaterial(){return this._loadElement(mp)}_getElementHolder(t){let e=this._byType.get(t);return void 0===e&&(e=[],this._byType.set(t,e)),e}getElement(t,e){const s=this._getElementHolder(t);if(void 0!==s[e])return s[e];const i=this._propertyMaps.get(t),n=i[e];return this._loadElement(n)}_loadElements(t){if(void 0!==t){const e=t.map(t=>this._loadElement(t));return Promise.all(e)}}async resolveElements(){while(this._pendingElements.length>0){const t=this._pendingElements.splice(0,this._pendingElements.length),e=await Promise.all(t.map(t=>t.promise));for(let s=0;s<t.length;s++){const i=e[s];Uo.isDefined(i.gltftype),this.gltf.addElement(e[s],t[s].data.elementIndex)}}}prepareGltfDatas(t){if(this.prepareGltfRootProperties(t.accessors,Yo.ACCESSOR,null),this.prepareGltfRootProperties(t.animations,Yo.ANIMATION,null),this.prepareGltfRootProperties([t.asset],Yo.ASSET,null),this.prepareGltfRootProperties(t.buffers,Yo.BUFFER,null),this.prepareGltfRootProperties(t.bufferViews,Yo.BUFFERVIEW,null),this.prepareGltfRootProperties(t.cameras,Yo.CAMERA,null),this.prepareGltfRootProperties(t.images,Yo.IMAGE,null),this.prepareGltfRootProperties(t.materials,Yo.MATERIAL,null),this.prepareGltfRootProperties(t.meshes,Yo.MESH,null),this.prepareGltfRootProperties(t.nodes,Yo.NODE,null),this.prepareGltfRootProperties(t.samplers,Yo.SAMPLER,null),this.prepareGltfRootProperties(t.scenes,Yo.SCENE,null),this.prepareGltfRootProperties(t.skins,Yo.SKIN,null),this.prepareGltfRootProperties(t.textures,Yo.TEXTURE,null),void 0!==t.animations)for(const e of t.animations)this.prepareGltfProperties(e.samplers,Yo.ANIMATION_SAMPLER,e),this.prepareGltfProperties(e.channels,Yo.ANIMATION_CHANNEL,e);if(void 0!==t.materials)for(const e of t.materials)this.prepareGltfProperty(e.normalTexture,Yo.NORMAL_TEXTURE_INFO,-1,e),this.prepareGltfProperty(e.occlusionTexture,Yo.OCCLUSION_TEXTURE_INFO,-1,e),this.prepareGltfProperty(e.emissiveTexture,Yo.TEXTURE_INFO,-1,e),void 0!==e.pbrMetallicRoughness&&(this.prepareGltfProperty(e.pbrMetallicRoughness.baseColorTexture,Yo.TEXTURE_INFO,-1,e),this.prepareGltfProperty(e.pbrMetallicRoughness.metallicRoughnessTexture,Yo.TEXTURE_INFO,-1,e));if(void 0!==t.meshes)for(const e of t.meshes)this.prepareGltfProperties(e.primitives,Yo.PRIMITIVE,e);if(void 0!==t.accessors)for(const e of t.accessors)this.prepareGltfProperty(e.sparse,Yo.ACCESSOR_SPARSE,-1,e),void 0!==e.sparse&&(this.prepareGltfProperty(e.sparse.indices,Yo.ACCESSOR_SPARSE_INDICES,-1,e.sparse),this.prepareGltfProperty(e.sparse.values,Yo.ACCESSOR_SPARSE_VALUES,-1,e.sparse))}prepareGltfProperties(t,e,s){if(void 0!==t)for(let i=0;i<t.length;i++){const n=t[i];this.prepareGltfProperty(n,e,i,s)}}prepareGltfRootProperties(t,e,s){if(void 0!==t){this._propertyMaps.set(e,t);for(let i=0;i<t.length;i++){const n=t[i];this.prepareGltfProperty(n,e,i,s)}}}prepareGltfProperty(t,e,s,i){void 0!==t&&(t.gltftype=e,t.uuid=gp(),t.elementIndex=s,t.elementParent=i)}}class Tp{constructor(t){this._ioImpl=t}loadGltf(t,e={}){const s=new xp(this._ioImpl,t,e);return s.load()}}class Ep{constructor(){this.isWebgl2=!1;let t=document.createElement("canvas"),e=t.getContext("webgl2",{})||t.getContext("webgl",{})||t.getContext("experimental-webgl",{})||t.getContext("webgl");this.isWebgl2=Object(ua["a"])(e);let s=e.getExtension("WEBGL_lose_context");s&&s.loseContext()}}async function wp(){if(void 0===window.createImageBitmap)return!1;const t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",e=await fetch(t),s=await e.blob();try{await window.createImageBitmap(s,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}catch(i){return!1}return!0}const Op=wp();function Ap(t){const e=t.lastIndexOf("/");return[t.substr(0,e),t.substr(e+1)]}class yp{constructor(){this.capabilities=new Ep}isDataURI(t){return 0===t.indexOf("data:")}decodeDataURI(t){if(0!==t.indexOf("data:"))throw new Error("invalid dataURI");var e=t.substr(t.indexOf(",")+1);return Bd.a.toByteArray(e).buffer}resolveBaseDir(t){return Ap(t)}resolvePath(t,e){return void 0===e||this.isDataURI(t)?t:e+"/"+t}decodeUTF8(t,e=0,s){return void 0===s&&(s=t.byteLength-e),qd(new Uint8Array(t,e,s))}async loadResource(t,e=up["a"].none){const s=Va(e),i=await fetch(t,{signal:s});return i.text()}async loadBinaryResource(t,e=up["a"].none){if(this.isDataURI(t))return this.decodeDataURI(t);const s=Va(e),i=await fetch(t,{signal:s});return i.arrayBuffer()}async loadImageBuffer(t,e,s=up["a"].none){const i=new Blob([t],{type:e});return this.loadImageBlob(i,s)}async loadImage(t,e=up["a"].none){const s=Va(e),i=await fetch(t,{signal:s}),n=await i.blob();return this.loadImageBlob(n,e)}async loadImageBlob(t,e){let s;await Op;const i=new window.Image,n=URL.createObjectURL(t);i.decoding="async";const o=new Promise((t,e)=>{i.onload=t,i.onerror=e,i.src=n}).finally(()=>URL.revokeObjectURL(n));return s=o.then(()=>i),Ha(s,e)}writeResource(t,e){throw new Error("Method not implemented.")}writeBinaryResource(t,e){throw new Error("Method not implemented.")}}const Dp=new yp,jp=new Tp(Dp);var Rp=jp;class Sp extends cn{constructor(t,e,s={}){super(),this.request=t,this.glp=e,this.opts=s,this.opts.abortSignal=this._abortCtrl.signal}async doLoad(){const t=await Rp.loadGltf(this.request,this.opts);return await t.allocateGl(this.glp.gl),t}doUnload(){}}class Cp{constructor(t){this.gltftype=Yo.MATERIAL,this._material=t}createMaterialForPrimitive(t,e,s){return this._material}parse(t,e){return null}}class Ip{constructor(t,e){this.ext=e,this.name="material_override",this.priority=10,this.loader=t}acceptElement(t,e){return null}loadElement(t){switch(t.gltftype){case Yo.MATERIAL:return this.createMaterial(t);default:return null}}createMaterial(t){const e=this.ext.getMaterial(t.name);if(void 0!==e){const t=new Cp(e);return Promise.resolve(t)}return null}}class Pp{constructor(){this.name="material_override"}createInstance(t){if(void 0===this.getMaterial)throw new Error("MaterialOverrideExtension getMaterial not set");return new Ip(t,this)}}var Lp=s("0a4f");const Mp=[{index:0,name:"1_1_oldwoman_honthorst",artist:"Gerard van Honthorst"},{index:1,name:"1_2_knitting_bendz",artist:"Wilhelm Bendz"},{index:2,name:"1_3_soster_hansen",artist:"Constantin Hansen"},{index:3,name:"1_4_pig_thomsen",artist:"Carl Thomsen"},{index:4,name:"1_5_saleswoman_metsu",artist:"Gabriël Metsu"},{index:5,name:"1_6_lamplight_ring",artist:"L.A. Ring"},{index:6,name:"1_7_eldest_hansen",artist:"Constantin Hansen"},{index:7,name:"1_8_child_syberg",artist:"Fritz Syberg"},{index:8,name:"1_9_wife_kobke",artist:"Christen Købke"},{index:9,name:"1_10_fruits_roed",artist:"Jørgen Roed"},{index:10,name:"1_11_freunds_wurden",artist:"P.C. Skovgaard"},{index:12,name:"2_1_schandorph_kroyer",artist:"P.S. Krøyer"},{index:13,name:"2_2_gardener_denner",artist:"Balthasar Denner"},{index:14,name:"2_3_husband_baumann",artist:"Elisabeth Jerichau Baumann"},{index:15,name:"2_4_kaulbach_bendz",artist:"Wilhelm Bendz"},{index:16,name:"2_5_petersen_kobke",artist:"Christen Købke"},{index:17,name:"2_6_marine_ditlev",artist:"Emil Ditlev Bærentzen"},{index:18,name:"2_7_lund_jensen",artist:"C.A. Jensen"},{index:19,name:"2_8_selvportraet_hunaeus",artist:"Andreas Herman Hunæus"},{index:20,name:"2_9_architect_bindesboll",artist:"Wilhelm Marstrand"},{index:21,name:"2_10_fader_svendsen",artist:"Anders Christian Lunde"},{index:22,name:"2_11_kreuger_bergh",artist:"Richard Bergh"}];class kp extends lc["a"]{constructor(){super(!0,!1)}_genCode(t){let e;e="float _hgrad = abs(vWorldPos.y - 3.0);",e+="_hgrad = smoothstep(3.0, 2.5, _hgrad);",e+="FragColor.a*= _hgrad;",t.add("postf",e),t.add("pf","IN vec3 vWorldPos;"),t.add("pv","OUT vec3 vWorldPos;"),t.add("postv","vWorldPos = vertex.worldPos;")}}class Np{constructor(t){this.scene=t,this.textures=new Map,this.materials=new Map,this.getMaterial=t=>{const e=this.materials.get(t);if(e){const t=new ga["a"](this.gl);return t.addPass(e),t}},this.gl=t.gl,this.createTextures()}static createBBCTextureSet(t){const e=[["astc",Lp["default"].getPath(t+".astc.ktx")],["dxt",Lp["default"].getPath(t+".dxt.ktx")],["etc",Lp["default"].getPath(t+".etc.ktx")],["pvr",Lp["default"].getPath(t+".pvr.ktx")],["webp",Lp["default"].getPath(t+".webp")],["std",Lp["default"].getPath(""+t)]];return new nn(e)}static artworkTextureSet(t){return this.createBBCTextureSet(`intro/art_${t}_L0.jpg`)}async load(){await Promise.all([Array.from(this.textures.values()).map(t=>t.load())]),this.createMaterials()}bgIsOpaque(){const t=this.materials.get("background");return t.alphaFactor.param.value[0]>.999}applyControls(t){t.forEach(t=>{const e=this.materials.get(t.name);e&&e.alphaFactor.param.set(t.position[0])})}createTextures(){for(const t of Mp){const e=t.name,s=Np.artworkTextureSet(e),i=new Pn(s,this.scene);this.textures.set(e,i)}this.textures.set("texts",new Pn(Np.createBBCTextureSet("intro/texts_spritesheet.jpg"),this.scene)),this.textures.set("labels",new Pn(Np.createBBCTextureSet("intro/names.jpg"),this.scene)),this.textures.set("main_artwork",new Pn(Np.createBBCTextureSet("intro/main_artwork.jpg"),this.scene)),this.textures.set("halo_proj",new Pn(new nn(ri.resolve("assets/webgl/halo_proj.png")),this.scene)),this.textures.set("volumetric",new Pn(new nn(ri.resolve("assets/webgl/volumetric-cone.png")),this.scene))}createMaterials(){for(const t of Mp){let e="ArtworkCanvas_"+t.index,s=this.createArtworkPass(t.name);this.materials.set(e,s),e="ArtworkLabel_"+t.index,s=this.createLabelsUnlitPass("labels"),this.materials.set(e,s)}for(let t=1;t<=9;t++)this.materials.set("Text_"+t,this.createTextUnlitPass("texts"));this.materials.set("background",this.createBackgroundUnlitPass()),this.materials.set("MainArtwork",this.createBasicUnlitPass("main_artwork")),this.materials.set("Halo",this.createLightPass("halo_proj")),this.materials.set("Volumetric",this.createLightPass("volumetric"))}createBasicUnlitPass(t){const e=new Pa["a"];return e.glconfig.depthMask(!1).enableDepthTest(!1).enableBlend().blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),e.alphaMode.set("BLEND"),e.baseColor.attachSampler().set(this.textures.get(t).texture),e.alphaFactor.attachUniform().set(1),e}createLightPass(t){const e=new Pa["a"];return e.glconfig.depthMask(!1).enableDepthTest(!1).enableBlend().blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),e.alphaMode.set("BLEND"),e.baseColor.attachConstant([1,1,1]),e.alpha.attachSampler(void 0,void 0,"r").set(this.textures.get(t).texture),e.alphaFactor.attachUniform().set(1),e}createArtworkPass(t){const e=this.createBasicUnlitPass(t);return e.inputs.add(new kp),e}createTintedUnlitPass(t){const e=new Pa["a"];return e.glconfig.depthMask(!1).enableDepthTest(!1).enableBlend().blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),e.baseColor.attachConstant(Array.from(Qc(16776640))),e.alphaMode.set("BLEND"),e.alpha.attachSampler(void 0,void 0,"r").set(this.textures.get(t).texture),e.alphaFactor.attachUniform().set(1),e}createLabelsUnlitPass(t){const e=this.createTintedUnlitPass(t);return e.inputs.add(new kp),e}createTextUnlitPass(t){const e=this.createTintedUnlitPass(t);return e}createBackgroundUnlitPass(){const t=new Pa["a"];return t.glconfig.depthMask(!1).enableDepthTest(!1).enableBlend().blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),t.alphaMode.set("BLEND"),t.alphaFactor.attachUniform().set(1),t.baseColor.attachConstant([0,0,0]),t}}var Fp,Bp=s("1e5c"),Up=s("451d"),Hp=s("65ee");(function(t){t["GALLERY_MUSIC"]="Gallery_Music",t["INSIDE_PAINTING"]="Inside_Painting",t["OUTSIDE_PAINTING"]="Outside_Painting",t["TRANSITION_PAINTING"]="Transition_Painting",t["PAINTING_FX"]="Painting_FX",t["UI"]="UI",t["INTRO_VOICE"]="intro"})(Fp||(Fp={}));const Gp=Nt["vec3"].fromValues(0,0,0),Vp=Nt["vec3"].fromValues(0,1,0),zp=Nt["vec3"].fromValues(0,0,-1),Xp=Nt["vec3"].create(),Wp=Nt["vec3"].create(),qp=Nt["vec3"].create(),Yp=Nt["quat"].create(),Kp=Nt["mat3"].create();class Zp{constructor(){this._audio=new Map,Bp["Howler"].autoSuspend=!1,Bp["Howler"].html5PoolSize=0,Bp["Howler"].usingWebAudio=!0,this.addAudio(Fp.GALLERY_MUSIC,{loop:!0,volume:0}),this.addAudio(Fp.OUTSIDE_PAINTING,{loop:!0}).pannerAttr({panningModel:"HRTF",refDistance:1,rolloffFactor:1.5,distanceModel:"exponential"}).pos(-0,1.6786199808120728,-16),this.addAudio(Fp.INSIDE_PAINTING,{loop:!0,volume:0}),this.addAudio(Fp.TRANSITION_PAINTING),this.addAudio(Fp.INTRO_VOICE);const t=Hp;t.volume=0,this._audio.set(Fp.PAINTING_FX,new Bp["Howl"](t)),this._audio.set(Fp.UI,new Bp["Howl"](Up))}updateListener(t){Nt["vec3"].transformMat4(Xp,Gp,t),Nt["mat3"].fromMat4(Kp,t),Nt["quat"].fromMat3(Yp,Kp),Nt["vec3"].transformMat3(Wp,zp,Kp),Nt["vec3"].transformMat3(qp,Vp,Kp),Bp["Howler"].pos(Xp[0],Xp[1],Xp[2]),Bp["Howler"].orientation(Wp[0],Wp[1],Wp[2],qp[0],qp[1],qp[2])}setMute(t){Bp["Howler"].volume(t?0:1)}getAudio(t){return this._audio.get(t)}getAudioPosition(t){return this._audio.get(t).seek()}play(t){const e=this._audio.get(t);if(e.playing())return;e.seek(0);const s=e.play();return t==Fp.INSIDE_PAINTING&&e._sounds[0]._node.bufferSource&&(e._sounds[0]._node.bufferSource.loopStart=56.873,e._sounds[0]._node.bufferSource.loopEnd=169.814),s}stop(t){this._audio.get(t).stop()}playUI(t){if("running"!=Bp["Howler"].state)return;const e=this._audio.get(Fp.UI);e.play(t)}fadeOut(t,e=1e3){const s=this._audio.get(t);return s.off("fade"),s.fade(s.volume(),0,e),new Promise(t=>{s.once("fade",t)})}fadeIn(t,e=1,s=1e3){const i=this._audio.get(t);return i.playing()||this.play(t),i.off("fade"),i.fade(i.volume(),e,s),new Promise(t=>{i.once("fade",t)})}fadeOutStop(t,e=1e3){this.fadeOut(t,e).then(()=>this.stop(t))}addAudio(t,e={}){const s={preload:!0,autoplay:!1};Object.assign(s,e);const i=new Bp["Howl"]({src:[ri.resolve(`assets/audio/${t}.mp3`)],...s});return this._audio.set(t,i),i}}var $p=new Zp;Nt["mat4"].create();const Qp=Nt["mat4"].create();function Jp(t,e){const s=Nt["vec3"].sqrDist(t.node._wposition,tg),i=Nt["vec3"].sqrDist(e.node._wposition,tg);return i-s}Nt["mat4"].fromTranslation(Qp,[0,1,0]);const tg=[-.22,.3,2.74];class eg{constructor(t){this.scene=t,this._animTime=0,this.materials=new Np(t),this.root=new vi["a"],this.root.position.set(tg),this.root.rotateY(Math.PI),this.camera=zo["a"].makePerspectiveCamera(),this.root.add(this.camera),this.camera.y=1,this.camera.rotateY(Math.PI),this.camera.lens.setHorizontalFov(Math.PI/2)}setAnimationTime(t){this._animTime=t}isOpaque(){return this.materials.bgIsOpaque()}async load(){await this.materials.load();const t=new Pp;t.getMaterial=this.materials.getMaterial,this.gltf=await new Sp(s("204c"),this.scene,{extensions:[t]}).load(),this.root.add(this.gltf.root),this._debug_startTime=performance.now()/1e3}preRender(){const t=$p.getAudioPosition(Fp.INTRO_VOICE);this.setAnimationTime(t),this.gltf.animations[0].evaluate(this._animTime),this.root.updateWorldMatrix(),this.renderables=this.gltf.renderables.concat(),this.renderables.sort(Jp),this.materials.applyControls(this.gltf.getElementByName(Yo.NODE,"controls")._children)}render(t,e){if(!this.gltf)return;if(this._animTime>this.gltf.animations[0].duration)return;let s;if(e){const t=this.scene.viewport.width/this.scene.viewport.height;t<1?this.camera.lens.setHorizontalFov(1*Math.PI/2):this.camera.lens.setVerticalFov(1*Math.PI/2),this.camera.updateViewProjectionMatrix(this.scene.viewport.width,this.scene.viewport.height),s=this.camera}else s=t.camera;for(const i of this.renderables)i.render(this.scene,s,Ql.BLENDED|Ql.OPAQUE,t.pass)}}const sg=16686892,ig={enabled:!1,init(t){},drawGuizmo(t){},drawFrustum(t){},drawCone(t){},drawSpotLight(t){},drawTexture(t,e,s=!1){},drawText(t,e){},drawLine(t,e,s=sg){},drawPoint(t){},render(t){},render(t,e){},clear(){}};var ng=ig,og=s("d688"),ag=s.n(og),rg=s("1402"),lg=s.n(rg);const cg="outlne",hg=Nt["mat4"].create(),dg=32771,ug=32772;class pg extends _h["a"]{constructor(){super({uid:cg,vert:ag()(),frag:lg()()});const t=this.inputs;t.add(this.version=new dh["a"]("100")),t.add(this.precision=new hh["a"]("highp")),t.add(this.thickness=new Jo["d"]("OutlineThickness",1,Jo["b"].VERTEX)),this.thickness.attachConstant(.01),this.glconfig.enableDepthTest().enableCullface().enablePolygonOffset().polygonOffset(1,1e3).frontFace(2304).enableBlend().blendFunc(dg,ug).blendColor(1,1,1,1)}set opacity(t){this.glconfig.blendColor(1,1,1,t)}prepare(t,e,s){t.uMVP&&(s.modelViewProjectionMatrix(hg,e._wmatrix),t.uMVP(hg)),t.uWorldMatrix&&t.uWorldMatrix(e._wmatrix),t.uVP&&t.uVP(s._viewProj)}}var gg;(function(t){t["DESKTOP"]="1050px"})(gg||(gg={}));let mg=class extends r["d"]{constructor(){super(...arguments),this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.isTouch="ontouchstart"in window,this.supportXR=!1}get isDesktop(){return this.windowWidth>=parseInt(gg.DESKTOP)}get isLandscape(){return this.windowWidth>this.windowHeight}get device(){return this.supportXR?"xr":xg.mobile?"mobile":"desktop"}init(){window.addEventListener("resize",()=>this.onResize()),console.log("init",{debug:"ontouchstart"in window,isTouch:this.isTouch})}dispose(){window.removeEventListener("resize",()=>this.onResize())}onResize(){this._SET_SIZE([window.innerWidth,window.innerHeight])}_SET_SIZE(t){this.windowWidth=t[0],this.windowHeight=t[1]}setSupportXR(t){this._SET_SUPPORT_XR(t)}_SET_SUPPORT_XR(t){this.supportXR=t}};Object(a["a"])([r["a"]],mg.prototype,"onResize",null),Object(a["a"])([r["c"]],mg.prototype,"_SET_SIZE",null),Object(a["a"])([r["a"]],mg.prototype,"setSupportXR",null),Object(a["a"])([r["c"]],mg.prototype,"_SET_SUPPORT_XR",null),mg=Object(a["a"])([r["b"]],mg);const _g=new mg({store:v,name:"viewport"});var bg=_g,fg=s("b085");const vg=Object(fg["a"])();var xg={...vg,ipad:!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&"standalone"in window.navigator),isMobile:vg.mobile,mobileVersion:vg.mobile&&bg.windowWidth<600,oculus:!!navigator.userAgent.match(/(OculusBrowser)/),isFacebook:(navigator.userAgent.indexOf("FBAN")>-1||navigator.userAgent.indexOf("FBAV")>-1)&&navigator.userAgent.indexOf("MessengerLiteForiOS")<0,isInsta:navigator.userAgent.indexOf("Instagram")>-1,isSnap:navigator.userAgent.indexOf("Snapchat")>-1};class Tg extends yp{constructor(){super(...arguments),this.loadLowTex=!1}resolvePath(t,e){return void 0===e||this.isDataURI(t)?t:(t.match(".jpg")&&(t.match("TX")||t.match("Textures_"))&&this.loadLowTex&&(t=t.replace(".jpg","_low.jpg")),e+"/"+t)}}new yp;const Eg=new Tg;class wg extends cn{constructor(t,e,s={},i=!0){super(),this.request=t,this.glp=e,this.opts=s,this._io=Eg,this._io.loadLowTex=xg.isMobile}get gltf(){return this.value}async doLoad(){const t=new xp(this._io,this.request,{...this.opts}),e=await t.load();return await e.allocateGl(this.glp.gl),e}doUnload(){}}const Og=.1,Ag=Nt["vec4"].create();class yg{constructor(t){this.scene=t,this.loaded=!1,this.rotation=0,this.root=new vi["a"],this.bakings=[],this.bakingChunk=new Nd,this._currentBg=null,this._currentPose=Cx[0],this.characterHighlight=0,this.wallHighlight=0,this.poses=null,this.createWallMaterialTest=(t,e)=>{const s=e.getPass("color").pass;return s.inputs.add(this._wallHighlight),this.addLightMapping(t,e),e.addPass(this._wallOutlinePass,$l.OUTLINE),null},this.createWallPaintedMaterial=(t,e)=>{const s=e.getPass("color"),i=s.pass;return i.inputs.add(this._wallHighlight),i.surface.baseColorFactor.attach(this.wallSampler),this.addLightMapping(t,e),null},this.createCharacterMaterial=(t,e)=>{const s=e.getPass("color").pass;return s.inputs.add(this._characterHighlight),this.addLightMapping(t,e),e.addPass(this._characterOutlinePass,$l.OUTLINE),null},this.addLightMapping=(t,e)=>{const s=e.getPass("color").pass;return e.addPass(this.lightmapPass,$l.LIGHTMAP),s.mask|=Ql.LIGHTMAPPED,s.inputs.add(this.lights.lightmapChunk),s.setLightSetup=t=>{s.inputs.addChunks(t.getChunks("lmmodel"))},this.addBaking(t,e),null},this.addORMOcclu=(t,e)=>{const s=e.getPass("color").pass,i=s.surface.roughness.param;return s.occlusion.attach(i,"r"),null},this.addBaking=(t,e)=>{const s=e.getPass("color").pass;return s.inputs.add(this.bakingChunk),null},this.createDomeMaterial=(t,e)=>{const s=e.getPass("color").pass,i=new Pa["a"];i.glconfig._dat.set(s.glconfig._dat),i.glconfig._set=s.glconfig._set,i.baseColor.attach(s.surface.baseColor.param);const n=.3;return i.baseColorFactor.attachConstant([n,n,n]),i},this.createDottedZone=(t,e)=>{const s=e.getPass("color").pass,i=new Pa["a"],n=this.scene.gl;return i.glconfig.enableDepthTest(!0).enableBlend().blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA).enablePolygonOffset().polygonOffset(-1,0),i.mask=Ql.BLENDED,i.alphaMode.set("BLEND"),i.alpha.attach(s.surface.baseColor.param),i.alphaFactor.attachConstant(.5),i},this.createDottedZoneXrays=(t,e)=>{const s=this.scene.gl,i=this.createDottedZone(t,e);return i.glconfig.depthFunc(s.GREATER),i.alphaFactor.attachConstant(.2),i},this.convertToUnlit=(t,e)=>{const s=e.getPass("color").pass,i=new Pa["a"];return i.glconfig._dat.set(s.glconfig._dat),i.glconfig._set=s.glconfig._set,i.baseColor.attach(s.surface.baseColor.param),i};const e=t.gl;this.lighting=new Xc(e),this.lights=new ch(this),this.lights.addToLightSetup(this.lighting.lightSetup),this.intro=new eg(t);for(let s=1;s<=Cx.length;s++){const e=ri.resolve(`assets/webgl/painting/lightmap_step_${s}.jpg`);this.bakings.push(new Pn(new nn(e),t))}this.lightmapPass=new xh(this.lighting.lightSetup),this.lightmapPass.version.set(Object(ua["a"])(e)?"300 es":"100"),this.wallTexture=new li["a"](e),this.wallTexture.fromData(2,2,new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255])),this.wallSampler=new Jo["a"]("paintwall_tex",Qo["a"].create("aTexCoord0")),this.wallSampler.set(this.wallTexture),this._characterHighlight=new Th,this._wallHighlight=new Th,this.orbs=new wd(this),this._characterOutlinePass=new pg,this._wallOutlinePass=new pg}setCurrentBg(t){if(this._currentBg!==t)return this._currentBg=t,this.loadCurrentBg()}setCurrentPose(t){this._currentPose!==t&&(this._currentPose=t,this.bakingChunk.texture=this.getLightmapForPose(t).texture,this.lights.invalidateScene())}getLightmapForPose(t){switch(t){case"pose1":return this.bakings[0];case"pose2":return this.bakings[1];case"pose3":return this.bakings[2];case"pose4":return this.bakings[3]}}async loadCurrentBg(){const t=ri.resolve(`assets/webgl/painting/${this._currentBg}.jpg`),e=new Pn(new nn(t),this.scene);e.createTexture=()=>this.wallTexture,await e.load()}async load(){this.loaded=!0,this.scene.root.add(this.root),await Promise.all([this.setCurrentBg(Wx.state.context.povDatas.background),this.lighting.loadDefault(),this._loadPaintingGltf(),this.orbs.load(),this.intro.load()])}raycastScene(t,e=[]){let s="none",[i,n]=[1/0,-1];if(!e.includes("light")&&([i,n]=this.raycastLights(t,this.lights._lights.map(t=>t.position)),-1!==n))return s="light",{type:s,distance:i,index:n};if(!e.includes("lookat")){const[e,o]=this.raycastLights(t,this.lights._lights.map((t,e)=>e===Wx.state.context.selectedLightIndex?t.target:null));if(-1!==o&&e<i)return s="lookat",i=e,n=o,{type:s,distance:i,index:n}}return e.includes("wall")||this.wallPicking.raycast(t,Ag)&&Ag[3]<i&&(s="wall",i=Ag[3]),e.includes("character")||this.poses[this._currentPose].picking.raycast(t,Ag)&&Ag[3]<i&&(s="character",i=Ag[3]),{type:s,distance:i,index:n}}raycastLights(t,e){let s=-1,i=1/0,n=1/0;for(let o=0;o<e.length;o++)if(null!==e[o]){if(Nt["vec3"].distance(e[o],t.pos)<Og)continue;const a=wh(t,e[o]);a<Og&&a<i&&(s=o,i=a,n=Nt["vec3"].distance(t.pos,e[o]))}return[n,s]}highlightCharacter(t){var e;null===(e=this._characterHighlightTween)||void 0===e||e.kill(),this._characterHighlightTween=wt["a"].to(this,{characterHighlight:t?1:0,duration:t?.4:.1})}highlightWall(t){var e;null===(e=this._wallHighlightTween)||void 0===e||e.kill(),this._wallHighlightTween=wt["a"].to(this,{wallHighlight:t?1:0,duration:t?.4:.1})}unload(){this.loaded&&(this.root.remove(this.gltf.root),this.scene.root.remove(this.root),this.gltf=null,this.navmesh=null,this.lighting.unload(),this.lighting=null)}isInIntro(){return(Wx.state.matches("painting.intro")||Wx.state.matches("painting_loading.outro"))&&!Wx.state.context.introCompleted}preRender(){this._characterHighlight.amount=this.characterHighlight,this._characterOutlinePass.opacity=this.characterHighlight,this._wallHighlight.amount=this.wallHighlight,this._wallOutlinePass.opacity=this.wallHighlight,this._characterOutlinePass.mask=this.characterHighlight>0?Ql.BLENDED:0,this._wallOutlinePass.mask=this.wallHighlight>0?Ql.BLENDED:0;const t=Wx.getSnapshot().context.povDatas.lightDatas;this.lights.applyLightDatas(t),this.isInIntro()&&this.intro.preRender()}rttPass(){this.lights.needRender()&&(this.lights.jitterLights(),this.lighting.lightSetup.prepare(this.scene.gl),this.lights.renderLightmaps(t=>{this._render(t)})),this.lights.resetLights(),this.lighting.lightSetup.prepare(this.scene.gl)}render(t,e=!1,s=!1){ng.drawTexture("lightmap",this.lights.lightmap.getColorTexture());const i={camera:t,viewport:[0,0,0,0],mask:Ql.OPAQUE,pass:$l.DEFAULT,gl:this.scene.gl,glConfig:null};this.isInIntro()&&this.intro.isOpaque()||(this._render(i,e),i.mask=Ql.BLENDED,i.pass=$l.OUTLINE,this._render(i,e),i.mask=Ql.BLENDED,i.pass=$l.DEFAULT,this._render(i,e)),this.isInIntro()&&this.intro.render(i,!s)}_render(t,e=!1){const s=this.poses[this._currentPose];for(const a of s.renderables)a.render(this.scene,t.camera,t.mask,t.pass);for(const a of this.gltf.renderables)a.render(this.scene,t.camera,t.mask,t.pass);0===(t.mask&Ql.BLENDED)||e||this.orbs.render(t.camera);const i=Wx.getSnapshot(),n=i.matches("painting.edit_light.move"),o=i.matches("painting.edit_light.lookat");n&&!e&&this.lightZoneOuter.render(this.scene,t.camera,t.mask,t.pass),o&&!e&&this.lightZoneInner.render(this.scene,t.camera,t.mask,t.pass)}async _loadPaintingGltf(){await Promise.all(this.bakings.map(t=>t.load())),this.bakingChunk.texture=this.getLightmapForPose(this._currentPose).texture;const t=new ac;t.overridePass("Wall",this.createWallMaterialTest),t.overridePass("WallPainted",this.createWallPaintedMaterial),t.overridePass("Ground",this.addLightMapping),t.overridePass("Rock",this.addLightMapping),t.overridePass("Estrade",this.addLightMapping),t.overridePass("PropsStones",this.addLightMapping),t.overridePass("PropsFurnitures",this.addLightMapping),t.overridePass("M_Body_Chill",this.createCharacterMaterial),t.overridePass("M_Clothes_Chill",this.createCharacterMaterial),t.overridePass("M_Body_Dance",this.createCharacterMaterial),t.overridePass("M_Clothes_Dance",this.createCharacterMaterial),t.overridePass("M_Body_Painting",this.createCharacterMaterial),t.overridePass("M_Clothes_Painting",this.createCharacterMaterial),t.overridePass("M_Body_Revolution",this.createCharacterMaterial),t.overridePass("M_Clothes_Revolution",this.createCharacterMaterial),t.overridePass("M_Eyes",this.createCharacterMaterial),t.overridePass("M_Hair",this.createCharacterMaterial),t.overridePass("LightZone",this.createDottedZone),t.overridePass("LightZoneXrays",this.createDottedZoneXrays),this.gltf=await new wg(ri.resolve("assets/webgl/painting/painting.gltf"),this.scene,{extensions:[t]}).load(),this.root.add(this.gltf.root),this.navmesh=this._extractPicking("navmesh"),this.wallPicking=this._extractPicking("picking_bg"),this.extractPoses(),this._setupLighting();const e=this.gltf.materials.find(t=>"LightZone"===t.name),s=e.materialPass.surface.baseColor.param._tex;s.bind(),s.setFilter(!0,!0,!0);const i=this.scene.gl;i.generateMipmap(i.TEXTURE_2D);const n=Math.min(kd(i).maxAnisotropy,4);n>0&&i.texParameterf(i.TEXTURE_2D,kd(i).extAniso.TEXTURE_MAX_ANISOTROPY_EXT,n),this.lightZoneOuter=this._extractRenderable("light_zone_outer"),this.lightZoneInner=this._extractRenderable("light_zone_inner")}extractPoses(){this.poses={};for(const t of Cx){const e=this._extractPicking(t+"_picking"),s={picking:e,renderables:[this._extractRenderable(t+"_mesh")]};this.poses[t]=s}}_setupLighting(){for(const t of this.gltf.materials){const e=t.materialPass;e&&e.setLightSetup&&(e.setLightSetup(this.lighting.lightSetup),e.iExposure.proxy(this.lighting.exposure),e.gammaMode.proxy(this.lighting.gammaMode))}this.lighting.lightSetup.bounds.fromMinMax([-5,-.1,-5],[5,3,5])}_extractPicking(t){const e=this.gltf.getElementByName(Yo.NODE,t),s=e.mesh;console.assert(null!=s,t+" mesh not found"),console.assert(null!=e,t+" node not found");const i=this.gltf.renderables.findIndex(e=>e.node.name===t);-1!==i&&this.gltf.renderables.splice(i,1);const n=s.primitives[0].attributes.getSemantic("POSITION").accessor,o=n.createElementHolderArray(n.count);n.getValues(o,0,n.count);const a=s.primitives[0].indices,r=a.createElementHolderArray(a.count);return a.getValues(r,0,a.count),new eo(e,r,o)}_extractRenderable(t){const e=this.gltf.getElementByName(Yo.NODE,t);console.assert(null!=e,t+" node not found"),console.assert(null!=e.renderable,t+" node not renderable");const s=e.renderable,i=this.gltf.renderables.indexOf(s);return-1!==i&&this.gltf.renderables.splice(i,1),s}}class Dg{constructor(t){this.scene=t,this._activities=[]}preFrame(){for(const t of this._activities)t.preFrame()}preRender(){for(const t of this._activities)t.preRender()}rttPass(){for(const t of this._activities)t.rttPass()}render(){for(const t of this._activities)t.render()}registerActivity(t){console.log("registerActivity",t),-1==this._activities.indexOf(t)&&(this._activities.push(t),this._activities.sort((t,e)=>e.priority-t.priority))}unregisterActivity(t){console.log("unregisterActivity",t);const e=this._activities.indexOf(t);-1!==e&&this._activities.splice(e,1)}}const jg=Nt["mat3"].create(),Rg=Nt["quat"].create(),Sg=Nt["vec3"].fromValues(0,0,-1);class Cg{constructor(t,e,s){this.hand=t,this.skin=e,this.mesh=s,this.skin.add(this.mesh),this.ray=new Cl}update(t){t.pose&&(this.skin.setMatrix(t.pose.transform.matrix),Nt["mat3"].fromMat4(jg,this.skin._wmatrix),Nt["quat"].fromMat3(Rg,jg),this.ray.pos.set(this.skin._wposition),Nt["vec3"].transformQuat(this.ray.dir,Sg,Rg))}render(t,e){var s;null===(s=this.mesh.renderable)||void 0===s||s.render(t,e,Ql.OPAQUE,$l.DEFAULT)}}class Ig{constructor(t){this.xrmodule=t,this.onLoaded=()=>{const t=this.xrmodule.resources.get("controllers");this.gltf=t;const e=t.root;this.node.add(e),console.log(t),this.list.set("left",new Cg("left",t.getElementByName(Yo.NODE,"left_quest2_controller_world"),t.getElementByName(Yo.NODE,"left_quest2_mesh"))),this.list.set("right",new Cg("right",t.getElementByName(Yo.NODE,"right_quest2_controller_world"),t.getElementByName(Yo.NODE,"right_quest2_mesh")));for(let s=0;s<t.materials.length;s++)this.xrmodule.scene.lights.registerPass(t.materials[s].materialPass)},this.list=new Map;const e=new Sp(ri.resolve("assets/webgl/gltfs/controllers/controllers.gltf"),this.xrmodule.scene);this.node=new sp,this.xrmodule.resources.add(e,"controllers"),this.xrmodule.resources.response().then(this.onLoaded)}init(t){this.inputs=t}setCustomLightSetup(t){for(let e=0;e<this.gltf.materials.length;e++)this.gltf.materials[e].materialPass.setLightSetup(t)}restoreDefaultLightSetup(){for(let t=0;t<this.gltf.materials.length;t++)this.xrmodule.scene.lights.registerPass(this.gltf.materials[t].materialPass)}preRender(){for(const t of this.inputs.list)this.list.get(t.source.handedness).update(t)}render(t){for(const e of this.gltf.renderables)e.render(this.xrmodule.scene,t,Ql.OPAQUE,$l.DEFAULT)}}class Pg{constructor(t,e,s){this.gl=t,this.path=e,this.name=s,this._defer=new Bt,this.response=this._defer.promise,this.image=new Image,this._chars=new Map,this._texture=new li["a"](t,t.RGBA),this._texture.bind(),this._texture.setFilter(!0,!1,!1),this._faceInfoUniform=Nt["vec4"].create()}get faceInfo(){return this._faceInfo}get faceInfoVec(){return this._faceInfoUniform}load(){return Promise.all([this.loadImage(),this.loadSettings()]).then(()=>{this._defer.resolve()})}loadImage(){return new Promise(t=>{this.image.onload=()=>{this._texture.fromImage(this.image),t(null)},this.image.src=this.path+"/"+this.name+".png"})}loadSettings(){return new Promise(t=>{fetch(this.path+"/"+this.name+".json").then(t=>t.json()).then(e=>{this.unpack(e),t()})})}getFromUnicode(t){return this._chars.get(t)}unpack(t){this._faceInfo=t.faceInfo,this._faceInfoUniform[0]=t.faceInfo.atlasPadding,this._faceInfoUniform[1]=t.faceInfo.textureWidth,this._faceInfoUniform[2]=t.faceInfo.textureHeight;for(const e of t.characters)this._chars.set(e.unicode,e)}}const Lg=Nt["vec2"].create(),Mg={fontSize:1,lineHeight:1,boxWidth:1e4,justifyCenter:!1,center:!1,font:"druk-bold"};class kg{constructor(t){this.context=t,this._renderQueueList=[];const e=t.gl;this._vbuffer=new $s["a"](e),this._vbuffer.attrib("aPosition",4,e.FLOAT).attrib("aTexCoord",3,e.FLOAT).attrib("aRand",3,e.FLOAT),this._ibuffer=new Qs["a"](e,e.UNSIGNED_SHORT),this.prg=t.programs.get("text-world"),this._cfg=t.glstate.config(),this._cfg.enableCullface(!1).enableDepthTest(!0).depthMask(!1).enableBlend(!0).blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),this.texts=new Map,this._currentIndice=0,this._meshData=[],this._indicesData=[],this._pendingList=[],this._shouldBuild=!1,this._renderQueueList=[]}clear(){this.texts=new Map,this._currentIndice=0,this._meshData=[],this._indicesData=[],this._pendingList=[],this._renderQueueList=[]}setFonts(t){this._fonts=t;for(let e=0;e<this._pendingList.length;e++)this.registerText(this._pendingList[e].key,this._pendingList[e].content,this._pendingList[e].style);this._shouldBuild&&(this.build(),this._shouldBuild=!1),this._pendingList=[],this._shouldBuild=!1}registerText(t,e,s={}){if(s.fontSize=s.fontSize?s.fontSize:Mg.fontSize,s.boxWidth=s.boxWidth?s.boxWidth:Mg.boxWidth,s.lineHeight=s.lineHeight?s.lineHeight:Mg.lineHeight,s.center=s.center?s.center:Mg.center,s.justifyCenter=s.justifyCenter?s.justifyCenter:Mg.justifyCenter,s.font=s.font?s.font:Mg.font,!this._fonts)return void this._pendingList.push({key:t,content:e,style:s});this._activeFont=this._fonts.get(s.font);const i=e,n=i.length,o=this._activeFont.faceInfo;this._texWidth=this._activeFont._texture.width,this._texHeight=this._activeFont._texture.height;const a=e.split(" "),r=s.boxWidth,l=[];for(let T=0;T<a.length;T++){const t=[];0!=T&&l.push([" ".charCodeAt(0)]);for(let e=0;e<a[T].length;e++)t.push(a[T].charCodeAt(e));l.push(t)}const c=s.fontSize/o.pointSize,h=this._indicesData.length,d=this._meshData.length;let u=this._meshData.length,p=this._currentIndice,g=s.justifyCenter?.5*s.boxWidth:0,m=-o.lineHeight*s.lineHeight*s.fontSize,_=0,b=0,f=0;for(let T of l){let t=32==T[0],e=s.justifyCenter?.5*s.boxWidth:0;(g-e)*c+this.computeWordLength(T,s.fontSize)>r&&!t&&(s.justifyCenter&&this.applyCenter(u,this._meshData.length,g/o.pointSize,0),u=this._meshData.length,g=s.justifyCenter?.5*s.boxWidth:0,m-=o.lineHeight*s.lineHeight*s.fontSize);for(let i of T)g+=this.pushQuadLetter(this._meshData,i,n,s.fontSize,g,m,_),this._indicesData.push(p,p+3,p+1,p,p+2,p+3),p+=4,_+=1;b=b<g?g:b,f=f>m?m:f}const v=b/o.pointSize,x=-f/o.pointSize;s.justifyCenter&&this.applyCenter(u,this._meshData.length,g/o.pointSize,0),s.center&&this.applyCenter(d,this._meshData.length,v,x),this.texts.set(t,{offset:2*h,count:this._indicesData.length-h,width:v,height:x,font:s.font}),this._currentIndice=p}computeWordLength(t,e){let s=0;const i=this._activeFont.faceInfo;for(let n=0;n<t.length;n++){const o=this._activeFont.getFromUnicode(t[n]);s+=o.glyph.metrics.horizontalAdvance*(e/i.pointSize)}return s}applyCenter(t,e,s,i){for(let n=t;n<e;n+=10)this._meshData[n+0]-=.5*s,this._meshData[n+1]+=i}pushQuadLetter(t,e,s,i,n,o,a){const r=this._activeFont.faceInfo,l=this._activeFont.getFromUnicode(e),c=l.glyph.metrics,h=l.glyph.glyphRect,d=c.width*i,u=c.height*i;let p=n+c.horizontalBearingX*i,g=p+d,m=o+c.horizontalBearingY*i,_=m-u,b=h.x,f=b+h.width,v=h.y,x=v+h.height;b/=this._texWidth,f/=this._texWidth,v/=this._texHeight,x/=this._texHeight,p/=r.pointSize,g/=r.pointSize,m/=r.pointSize,_/=r.pointSize;const T=(p+g)/2,E=(m+_)/2,w=a/s,O=[Math.random(),Math.random(),Math.random()];return t.push(p,m,T,E,b,x,w,O[0],O[1],O[2],p,_,T,E,b,v,w,O[0],O[1],O[2],g,m,T,E,f,x,w,O[0],O[1],O[2],g,_,T,E,f,v,w,O[0],O[1],O[2]),l.glyph.metrics.horizontalAdvance*i}build(){0!==this._currentIndice?(this._vbuffer.data(new Float32Array(this._meshData)),this._ibuffer.data(new Uint16Array(this._indicesData)),this._meshData=[],this._indicesData=[]):this._shouldBuild=!0}prepare(){this.prg.use(),this.bindBuffer(this.prg),this.context.glstate.push(this._cfg),this.context.glstate.apply()}bindBuffer(t){this._vbuffer.bind(),this._vbuffer.attribPointer(t),this._ibuffer.bind()}bindTex(t,e){t.tFontTex(this._fonts.get(this.texts.get(e).font)._texture)}drawCall(t){this._ibuffer.drawTriangles(this.texts.get(t).count,this.texts.get(t).offset)}finish(){this.context.glstate.pop(),this.context.glstate.apply()}render(t,e,s,i){this._renderQueueList.push({key:t,matrix:e,color:s,fog:i})}renderDirect(t,e,s,i,n){this.bindTex(this.prg,t),this.prg.uViewProjectionMatrix(e),this.prg.uWorldMatrix(s),this.prg.uColor(i),this.prg.uUseFog(void 0!==n?1:0),this.prg.uFog(void 0!==n?n:Lg),this.drawCall(t)}renderQueuedList(t){for(const e of this._renderQueueList)this.renderDirect(e.key,t._viewProj,e.matrix,e.color,e.fog)}flush(){this._renderQueueList.length=0,this.context.glstate.pop(),this.context.glstate.apply()}}const Ng="default";class Fg{constructor(t){this.context=t,this.content="",this.color=Nt["vec4"].fromValues(1,1,1,1),this._valid=!0,this.node=new vi["a"],this.renderer=new kg(t)}setStyle(t){this.style=t,this._valid=!1}setText(t){this.content=t,this._valid=!1}preRender(){this._valid||(this.renderer.clear(),this.renderer.registerText(Ng,this.content,this.style),this.renderer.build(),this.metrics=this.renderer.texts.get(Ng),this._valid=!0)}render(t){this.renderer.prepare(),this.renderer.renderDirect(Ng,t._viewProj,this.node._wmatrix,this.color),this.renderer.finish()}}const{t:Bg}=o.global,Ug=.01;class Hg{constructor(t){this.gl=t,this.fonts=new Map}clearText(){}createFont(t,e){this.fonts.set(t,new Pg(this.gl,ri.resolve("assets/webgl/fonts"),e))}load(){const t=[];return this.fonts.forEach((e,s)=>{t.push(e.load())}),Promise.all(t)}attach(t){this.renderer=t}buildXR(){const t=this.renderer;let e="";t.registerText(e="xr.teleport",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.next",Bg(e),{center:!0,fontSize:.15,font:"druk-medium"}),t.registerText(e="xr.skip",Bg(e),{center:!0,fontSize:.15,font:"druk-medium"}),t.registerText(e="xr.cancel",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.validate",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.yes",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.no",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.on",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.off",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.close",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.photo_gallery",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.painting",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.move",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.light_settings",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.light_grab",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.light_drop",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.light_lookat_grab",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.light_lookat_drop",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.background_settings",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.pose_settings",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.photo_take",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.depth",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.contrast",Bg(e),{center:!0,fontSize:.5,font:"druk-medium"}),t.registerText(e="xr.brightness",Bg(e),{center:!0,fontSize:.5,font:"druk-medium"}),t.registerText(e="xr.saturation",Bg(e),{center:!0,fontSize:.5,font:"druk-medium"}),t.registerText(e="xr.temperature",Bg(e),{center:!0,fontSize:.5,font:"druk-medium"}),t.registerText(e="xr.lookat",Bg(e),{center:!0,fontSize:.5,font:"druk-medium"}),t.registerText(e="xr.hue",Bg(e),{center:!0,fontSize:.5,font:"druk-medium"}),t.registerText(e="xr.intensity",Bg(e),{center:!0,fontSize:.5,font:"druk-medium"}),t.registerText(e="xr.select_settings",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.select_contrast",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.select_brightness",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.select_saturation",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.select_temperature",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.select_hue",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.select_intensity",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.reset",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.release_to_select",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.try_photo",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.tuto_settings_left",Bg(e),{center:!0,fontSize:.2*.9}),t.registerText(e="xr.tuto_aim_photo",Bg(e),{center:!0,fontSize:.2*.9}),t.registerText(e="xr.tuto_format_photo",Bg(e),{center:!0,fontSize:.2*.9}),t.registerText(e="xr.angle_of_view",Bg(e),{center:!0,fontSize:.2*.9}),t.registerText(e="xr.tuto_global.step1.desc",Bg(e),{center:!0,fontSize:.2*.9}),t.registerText(e="xr.tuto_global.step2.desc",Bg(e),{center:!0,fontSize:.2*.9}),t.registerText(e="xr.tuto_global.step3.desc",Bg(e),{center:!0,fontSize:.2*.9}),t.registerText(e="xr.tuto_global.step4.desc",Bg(e),{center:!0,fontSize:.2*.9}),t.registerText(e="xr.tuto_global.step5.desc",Bg(e),{center:!0,fontSize:.2*.9}),t.registerText(e="xr.tuto_global.step6.desc",Bg(e),{center:!0,fontSize:.2*.9}),t.registerText(e="share.title1",Bg(e).toUpperCase(),{center:!0,fontSize:.8,font:"times-conditalic"}),t.registerText(e="share.title2",Bg(e).toUpperCase(),{center:!0,fontSize:.8,font:"druk-medium"}),t.registerText(e="xr.download",Bg(e),{center:!0,fontSize:.1,font:"druk-medium"}),t.registerText(e="xr.image_downloaded",Bg(e),{center:!0,fontSize:.1,font:"druk-medium"}),t.registerText("share.photo_gallery",Bg("xr.photo_gallery"),{center:!0,fontSize:.1,font:"druk-medium"}),t.registerText(e="xr.slide_picture",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="xr.aim_to_dive",Bg(e),{center:!0,fontSize:Ug}),t.registerText(e="gallery.title1",Bg(e).toUpperCase(),{center:!0,fontSize:.4,font:"times-conditalic"}),t.registerText(e="gallery.title2",Bg(e).toUpperCase(),{center:!0,fontSize:.4,font:"druk-medium"}),t.registerText(e="gallery.subtitle",Bg(e).toUpperCase(),{center:!0,fontSize:.08,font:"druk-medium"}),t.registerText(e="gallery.background",Bg(e).toUpperCase(),{center:!1,fontSize:.08,font:"druk-medium"}),t.registerText(e="gallery.pose",Bg(e).toUpperCase(),{center:!1,fontSize:.08,font:"druk-medium"}),t.registerText(e="gallery.bg0",Bg(e),{center:!1,fontSize:.08,font:"times-italic"}),t.registerText(e="gallery.bg1",Bg(e),{center:!1,fontSize:.08,font:"times-italic"}),t.registerText(e="gallery.bg2",Bg(e),{center:!1,fontSize:.08,font:"times-italic"}),t.registerText(e="gallery.bg3",Bg(e),{center:!1,fontSize:.08,font:"times-italic"}),t.registerText(e="gallery.pose1",Bg(e),{center:!1,fontSize:.08,font:"times-italic"}),t.registerText(e="gallery.pose2",Bg(e),{center:!1,fontSize:.08,font:"times-italic"}),t.registerText(e="gallery.pose3",Bg(e),{center:!1,fontSize:.08,font:"times-italic"}),t.registerText(e="gallery.pose4",Bg(e),{center:!1,fontSize:.08,font:"times-italic"})}createUIText(){const t=new Fg(this.renderer.context);return t.renderer.setFonts(this.fonts),t}}class Gg extends lc["a"]{constructor(){super(!0,!0),this.size=Nt["vec3"].create(),this.color=Nt["vec3"].create(),this.borderColor=Nt["vec3"].create()}setup(t){t.uSize(this.size),t.uColor(this.color),t.uBorderColor(this.borderColor)}_genCode(t){t.add("pv","\n        uniform vec3 uSize;\n        IN mediump vec2 aTexCoord1;\n        OUT mediump vec2 vTexCoord1;\n      "),t.add("vertex_warp","\n      vec2 left = (vertex.position.xy * uSize.y + vec2(uSize.x * 0.5, 0.0)) * aColor0.r;\n      vec2 center = vertex.position.xy * vec2(uSize.xy) * aColor0.g;\n      vec2 right = (vertex.position.xy * uSize.y - vec2(uSize.x * 0.5, 0.0)) * aColor0.b;\n      vertex.position.xy = left + center + right;\n      vertex.position.y += uSize.z;\n      vertex.position.z -= 0.001;\n      vTexCoord1 = aTexCoord1;\n      "),t.add("pf","\n      uniform vec3 uColor;\n      uniform vec3 uBorderColor;\n      IN mediump vec2 vTexCoord1;\n      "),t.add("postf","\n      vec3 background = uColor;\n      vec3 border = uBorderColor;\n      float l = smoothstep(0.3, 0.5, vTexCoord1.x);\n      FragColor.rgb = mix(border, background, l);\n      ")}}class Vg{constructor(t){this.context=t,this.setup=()=>{for(const t of this.gltf.materials){const e=t.materialPass;e.inputs.add(this.border)}this.rect=this.gltf.getElementByName(Yo.NODE,"rounded_rect").renderable,this.btn=this.gltf.getElementByName(Yo.NODE,"rounded_btn").renderable},this.border=new Gg}async load(){const t=new Sp(ri.resolve("assets/webgl/gltfs/solid_primitives/solid_primitives.gltf"),this.context);this.gltf=await t.load(),this.setup()}renderRect(t,e,s,i,n,o,a){this.rect.node=e,this.border.size[0]=s,this.border.size[1]=i,this.border.size[2]=n,this.border.color[0]=o[0],this.border.color[1]=o[1],this.border.color[2]=o[2],this.border.borderColor[0]=a[0],this.border.borderColor[1]=a[1],this.border.borderColor[2]=a[2],this.rect.render(this.context,t,Ql.OPAQUE,$l.DEFAULT)}renderBtn(t,e,s,i,n,o,a){this.btn.node=e,this.border.size[0]=s,this.border.size[1]=i,this.border.size[2]=n,this.border.color[0]=o[0],this.border.color[1]=o[1],this.border.color[2]=o[2],this.border.borderColor[0]=a[0],this.border.borderColor[1]=a[1],this.border.borderColor[2]=a[2],this.btn.render(this.context,t,Ql.OPAQUE,$l.DEFAULT)}}class zg extends lc["a"]{constructor(){super(!0,!0),this.size=Nt["vec3"].create(),this.color=Nt["vec3"].create(),this.texcoord=Qo["a"].createTransformedDynamic("aTexCoord0"),this.texcoord.setMatrix(Nt["mat3"].create())}update(t){this.texcoord.translate(.22*Math.cos(.8*t),.22*Math.sin(.8*t))}setup(t){t.uSize(this.size),t.uColor(this.color)}_genCode(t){t.add("pv","\n        uniform vec3 uSize;\n        IN mediump vec2 aTexCoord1;\n        OUT mediump vec2 vTexCoord1;\n      "),t.add("vertex_warp","\n      vec2 left = (vertex.position.xy * uSize.y + vec2(uSize.x * 0.5, 0.0)) * aColor0.r;\n      vec2 center = vertex.position.xy * vec2(uSize.xy) * aColor0.g;\n      vec2 right = (vertex.position.xy * uSize.y - vec2(uSize.x * 0.5, 0.0)) * aColor0.b;\n      vertex.position.xy = left + center + right;\n      vertex.position.y += uSize.z;\n      vertex.position.z -= 0.001;\n      vTexCoord1 = aTexCoord1;\n      "),t.add("pf","\n      uniform vec3 uColor;\n      IN mediump vec2 vTexCoord1;\n      "),t.add("postf","\n      vec3 background = uColor;\n      vec3 purple = baseColor();\n      float l = smoothstep(0.3, 0.5, vTexCoord1.x);\n      FragColor.rgb = mix(purple, background, l);\n      ")}}class Xg{constructor(t){this.context=t,this.time=0,this.setup=()=>{for(const t of this.gltf.materials){const e=t.materialPass;e.inputs.add(this.gradient);const s=e.baseColor.param._tex;s.bind(),s.repeat(),e.baseColor.detach(),e.alpha.detach();const i=e.baseColor.attachSampler("baseColor",this.gradient.texcoord);i.set(s)}this.btn=this.gltf.getElementByName(Yo.NODE,"rounded_btn").renderable,this.rect=this.gltf.getElementByName(Yo.NODE,"rounded_rect").renderable,this.gradientTexture=this.gltf.getElementByName(Yo.TEXTURE,"gradient_purple").glTexture},this.gradient=new zg}async load(){const t=new Sp(ri.resolve("assets/webgl/gltfs/gradient_primitives/gradient_primitives.gltf"),this.context);this.gltf=await t.load(),this.setup()}preRender(t){this.time+=t,this.gradient.update(this.time)}renderRect(t,e,s,i,n,o){this.rect.node=e,this.gradient.size[0]=s,this.gradient.size[1]=i,this.gradient.size[2]=n,this.gradient.color[0]=o[0],this.gradient.color[1]=o[1],this.gradient.color[2]=o[2],this.rect.render(this.context,t,Ql.OPAQUE,$l.DEFAULT)}renderBtn(t,e,s,i,n,o){this.btn.node=e,this.gradient.size[0]=s,this.gradient.size[1]=i,this.gradient.size[2]=n,this.gradient.color[0]=o[0],this.gradient.color[1]=o[1],this.gradient.color[2]=o[2],this.btn.render(this.context,t,Ql.OPAQUE,$l.DEFAULT)}}class Wg{constructor(t){this.scene=t,this.root=new sp,this._defer=new Bt,this.textLib=new Hg(this.scene.gl),this.textRenderer=new kg(this.scene),this.gradientPrimitives=new Xg(this.scene),this.solidPrimitives=new Vg(this.scene),this.textLib.createFont("druk-medium","DrukTextWide-Medium SDF"),this.textLib.createFont("druk-bold","DrukTextWide-Bold SDF"),this.textLib.createFont("times-conditalic","TimesNRMTPro-CondItalic SDF"),this.textLib.createFont("times-italic","TimesNRMTPro-Italic SDF"),this.textLib.attach(this.textRenderer)}get response(){return this._defer.promise}async load(){await this.textLib.load(),await this.gradientPrimitives.load(),await this.solidPrimitives.load(),this.textRenderer.setFonts(this.textLib.fonts),this.textRenderer.build(),this._defer.resolve()}buildTextLibrary(t){}resize(){}preRender(){this.gradientPrimitives.preRender(this.scene.dt)}render(t){this.textRenderer.prepare(),this.textRenderer.renderQueuedList(t),this.textRenderer.flush()}}class qg{constructor(t){this.gltftype=Yo.MATERIAL,this._material=t}createMaterialForPrimitive(t,e,s){return this._material}parse(t,e){return null}}class Yg{constructor(t,e){this.name="material_override",this.priority=10,this.loader=t,this.materials=e}acceptElement(t,e){return null}loadElement(t){switch(t.gltftype){case Yo.MATERIAL:return this.createMaterial(t);default:return null}}createMaterial(t){const e=this.materials[t.name];if(void 0!==e){const t=new qg(e);return Promise.resolve(t)}return null}}class Kg{constructor(){this.name="material_override"}createInstance(t){if(void 0===this.overrides)throw new Error("MaterialOverrideExtension overrides not set");return new Yg(t,this.overrides)}}var Zg=s("8534"),$g=s.n(Zg),Qg=s("327b"),Jg=s.n(Qg);const tm="btn-highlight";class em extends _h["a"]{constructor(){super({uid:tm,vert:$g()(),frag:Jg()()});const t=this.inputs;t.add(this.version=new dh["a"]("300 es")),t.add(this.precision=new hh["a"]("highp")),t.add(this.shaderid=new ma["a"]("id_"+tm,!0))}prepare(t,e,s){t.uWorldMatrix(e._wmatrix),t.uCameraPosition(s._wposition),t.uBaseColor(this.color),t.uViewMatrix(s._view),t.uProjectionMatrix(s.lens.getProjection())}}const sm="btn-highlight";class im extends ga["a"]{constructor(t,e=sm){super(t,sm),this.addPass(new em,$l.DEFAULT),this.glconfig.enableDepthTest(!1).enableBlend(!0).blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA).enableCullface(!0).cullFace(t.BACK)}}class nm{constructor(t){this.ui=t,this._txtAlpha=0,this._scaleX=0,this._scaleY=0,this._color=Nt["vec4"].create(),this.node=new sp,this._padding=Nt["vec2"].create()}get TextInfo(){return this._txtRenderInfo}get scaleX(){return this._scaleX}get scaleY(){return this._scaleY}setPadding(t,e){this._padding[0]=t,this._padding[1]=e}setText(t){this._txtKey=t,this._txtRenderInfo=this.ui.textRenderer.texts.get(t)}show(t=0){return wt["a"].killTweensOf(this),new Promise(e=>{wt["a"].to(this,{_scaleX:1,duration:.6,delay:t,ease:"power2.out",onComplete:e}),wt["a"].to(this,{_scaleY:1,duration:.2,delay:t,ease:"power2.out"}),wt["a"].to(this,{_txtAlpha:1,duration:.4,delay:t+.2,ease:"power2.out"})})}hide(t=0){return wt["a"].killTweensOf(this),new Promise(e=>{wt["a"].to(this,{_scaleX:0,duration:.6,delay:t,ease:"power2.out",onComplete:e}),wt["a"].to(this,{_scaleY:0,duration:.2,delay:t+.4,ease:"power2.out"}),wt["a"].to(this,{_txtAlpha:0,duration:.4,delay:t,ease:"power2.out"})})}renderRect(t){this.ui.solidPrimitives.renderRect(t,this.node,(this._txtRenderInfo.width+this._padding[0])*this._scaleX,(this._txtRenderInfo.height+this._padding[1])*this._scaleY,.8*this._txtRenderInfo.height*.333,Mn,Nn)}renderText(t){this._color.set(t),this._color[3]=this._txtAlpha,this.ui.textRenderer.render(this._txtKey,this.node._wmatrix,this._color)}}const om=Nt["vec3"].create(),am=Nt["vec3"].create(),rm={"Right/Trigger":1,"Right/Squeeze":1,"Right/Touchpad":0,"Right/Thumbstick":0,A:-1,B:1,"Right/Up":0,"Right/Down":0,"Right/Left":0,"Right/Right":0,"Left/Trigger":-1,"Left/Squeeze":-1,"Left/Touchpad":0,"Left/Thumbstick":0,X:-1,Y:1,"Left/Up":0,"Left/Down":0,"Left/Left":0,"Left/Right":0};class lm{constructor(t){this.ui=t;const e=t.scene.gl;this._linebuffer=new $s["a"](e,null,e.DYNAMIC_DRAW),this._linebuffer.attrib("aPosition",3,e.FLOAT),this._linedata=new Float32Array(6),this._lineAttach=Nt["vec3"].fromValues(0,0,0),this._lineTarget=Nt["vec3"].fromValues(0,-.0075,0),this.labelRect=new nm(t),this.labelRect.setPadding(.02,.01),this.wrapper=new sp,this.wrapper.add(this.labelRect.node)}get nodeLabel(){return this.wrapper}get highlight(){return this._highlight}set highlight(t){this._highlight=t}get label(){return this._label}set label(t){t?(this.labelRect.show(),this._label=!0):this.labelRect.hide().then(()=>{this._label=!1})}updateLabel(t,e){Nt["vec3"].lerp(this.nodeLabel.position,this.nodeLabel.position,this.nodeLabelTarget._wposition,4*t),this.nodeLabel.lookAt(e),this.nodeLabel.rotateY(Math.PI),this.nodeLabel.invalidate()}syncPosition(){this.nodeLabelTarget&&this.nodeLabel.position.set(this.nodeLabelTarget._wposition)}attachText(t,e){if(null==e)return t.remove(this.nodeLabel),this.key="",void(this.label=!1);t.add(this.nodeLabel),this.nodeBtn.add(this.nodeLabelTarget),this.nodeLabel.position.set(this.nodeLabelTarget._wposition),this.nodeLabel.invalidate(),this.label=!0,this.key=e,this.labelRect.setText(e);const s=-rm[this.nodeBtn.name];this.labelRect.node.x=s*this.labelRect.TextInfo.width*.5+.015*s*.65}renderLine(t,e){Nt["vec3"].transformMat4(om,this._lineAttach,this.nodeBtn._wmatrix),Nt["vec3"].transformMat4(am,this._lineTarget,this.nodeLabel._wmatrix),Nt["vec3"].lerp(am,om,am,this.labelRect.scaleX),this._linedata.set(om,0),this._linedata.set(am,3),this._linebuffer.data(this._linedata),t.use();const s=Wx.state.matches("gallery")||Wx.state.matches("gallery_loading.outro")?kn:Mn;t.uColor([...s,1]),t.uMVP(e),this._linebuffer.bind(),this._linebuffer.attribPointer(t),this._linebuffer.drawLines()}renderLabel(t,e){this.labelRect.renderRect(t),this.labelRect.renderText(e)}}const cm=Nt["mat4"].create(),hm=Nt["vec3"].fromValues(Mn[0],Mn[1],Mn[2]),dm=Nt["vec3"].fromValues(kn[0],kn[1],kn[2]);class um{constructor(t){this.ctx=t,this.syncPosition=()=>{this._list.forEach(t=>{t.syncPosition()})},this._list=new Map;var e=new Kg;this.highlightMat=new im(this.ctx.xrmodule.scene.gl),e.overrides={shell_quest2BtnMAT:this.highlightMat};const s=this.highlightMat.getPass($l.DEFAULT).pass;this.highlightPass=s;const i=new Sp(ri.resolve("assets/webgl/gltfs/controllers/controllers_btns.gltf"),this.ctx.xrmodule.scene,{extensions:[e]});this.lineConfig=this.ctx.xrmodule.scene.glstate.config(),this.lineConfig.enableDepthTest(!0).lineWidth(2.5),this.ctx.xrmodule.resources.add(i,"controllers_btns")}init(){const t=this.ctx.xrmodule.resources.get("controllers_btns"),e=t.getElementByName(Yo.NODE,"left_quest2_buttons"),s=t.getElementByName(Yo.NODE,"right_quest2_buttons");this.ctx.list.get("left").skin.add(e),this.ctx.list.get("right").skin.add(s);for(const i of[...e._children,...s._children]){const t=new lm(this.ctx.xrmodule.ui);t.highlight=!1,t.label=!1,t.key="",t.nodeBtn=i,t.nodeLabelTarget=i._children[0],this._list.set(i.name,t)}}highlight(t,e=null,s=!0){this._list.get(t).highlight=s,""!==e&&null!==e&&this._list.get(t).attachText(this.ctx.xrmodule.scene.root,e)}release(t){this._list.has(t)&&(this._list.get(t).highlight=!1,this._list.get(t).attachText(this.ctx.xrmodule.scene.root,null))}preRender(t){this.highlightPass.color=Wx.state.matches("gallery")||Wx.state.matches("gallery_loading.outro")?dm:hm,this._list.forEach(e=>{e.label&&e.updateLabel(t,this.ctx.xrmodule.xrcamera.head._wposition)})}render(t){this._list.forEach(e=>{e.highlight&&e.nodeBtn.renderable.render(this.ctx.xrmodule.scene,t,Ql.BLENDED,$l.DEFAULT)}),this._list.forEach(e=>{e.label&&(e.renderLabel(t,[.0270944,.0270944,.0270944]),this.ctx.xrmodule.scene.glstate.push(this.lineConfig),this.ctx.xrmodule.scene.glstate.apply(),e.renderLine(this.ctx.xrmodule.scene.programs.get("unlit-color"),t.getMVP(cm)),this.ctx.xrmodule.scene.glstate.pop())})}}class pm{constructor(t,e){this.update(t,e)}update(t,e){this.eye=t,this.viewport=e}getProjection(){return this.proj}}const gm=Nt["vec3"].fromValues(0,0,-1),mm=Nt["mat3"].create();class _m{constructor(t){this.xrview=t,this.cameras=[],this.wposition=Nt["vec3"].create(),this.wrotation=Nt["quat"].create(),this.node=new vi["a"];let e=this.xrview.session.renderState.baseLayer;this.forward=Nt["vec3"].create(),this.head=new zo["a"](new cl["a"]),this.node.add(this.head);for(const s of t.pose.views){const t=new zo["a"](new pm(s.eye,e.getViewport(s)));this.node.add(t),this.cameras.push(t)}}update(){this.pose=this.xrview.pose,this.head.setMatrix(this.pose.transform.matrix),this.head.updateWorldMatrix();let t=this.xrview.session.renderState.baseLayer;this.wposition=this.head._wposition,Nt["mat3"].fromMat4(mm,this.head._wmatrix),Nt["vec3"].transformMat3(this.forward,gm,mm),Nt["quat"].fromMat3(this.wrotation,mm);for(let e=0;e<this.pose.views.length;e++)this.cameras[e].lens.update(this.pose.views[e].eye,t.getViewport(this.pose.views[e])),this.cameras[e].setMatrix(this.pose.views[e].transform.matrix),this.cameras[e].updateWorldMatrix(),this.cameras[e].lens.proj=this.pose.views[e].projectionMatrix,this.cameras[e].updateViewProjectionMatrix(1,1)}}class bm{constructor(t){this.tooltipRenderer=t,this._list=new Map;for(const e of Ct)this._list.set(e,[])}push(t,e,s=!0){-1==this._list.get(t).indexOf(e)&&(this._list.get(t).push(e),this.tooltipRenderer.release(t),this.tooltipRenderer.highlight(t,e,s))}pop(t,e){const s=this._list.get(t).indexOf(e);if(-1==s)return;this._list.get(t).splice(s,1),this.tooltipRenderer.release(t);const i=this._list.get(t).length;0!=i&&this.tooltipRenderer.highlight(t,this._list.get(t)[i-1])}clear(){for(const t of Ct)this.tooltipRenderer.release(t),this._list.set(t,[])}sync(){this.tooltipRenderer.syncPosition()}}Nt["vec3"].fromValues(0,1,0);const fm=Nt["mat3"].create(),vm=Nt["mat4"].create(),xm=Nt["quat"].create(),Tm=.05;class Em{constructor(t){this.xrmodule=t;const e=this.scene=t.scene;this.rect=new ho(e.gl,.5*-Tm,.5*-Tm,Tm,Tm),this.matrix=Nt["mat4"].create(),this.wposition=Nt["vec3"].create(),this.config=e.glstate.config(),this.config.enableDepthTest(!0).depthMask(!1).enableBlend(!0).blendFunc(e.gl.SRC_ALPHA,e.gl.ONE_MINUS_SRC_ALPHA).enableCullface(!1)}setPosition(t,e){this.wposition.set(t),Mi(fm,e),Nt["quat"].fromMat3(xm,fm),Nt["mat4"].fromRotationTranslation(this.matrix,xm,t)}setHit(t){this.hit=t}render(t){this.scene.glstate.push(this.config),this.scene.glstate.apply();const e=this.scene.programs.get("unlit-texture");e.use(),e.uMVP(t.getMVP(this.matrix)),e.tTexture(this.xrmodule.resources.get("raycast-target")),this.rect.bind(),this.rect.attribPointer(e),this.rect.render(),this.scene.glstate.pop()}prepare(){const t=this.scene.programs.get("unlit-texture");t.use(),t.tTexture(this.xrmodule.resources.get("raycast-target")),this.config.apply(),this.rect.bind(),this.rect.attribPointer(t)}renderImmediate(t,e,s){Mi(fm,s),Nt["quat"].fromMat3(xm,fm),Nt["mat4"].fromRotationTranslation(vm,xm,e);const i=this.scene.programs.get("unlit-texture");i.uMVP(t.getMVP(vm)),this.rect.render()}}var wm=s("4476");class Om{constructor(t){this.xrmodule=t,this.handedness="none",this._renderAlpha=0,this._targets=new Map,this.onInputDown=t=>{var e;let s=!1,i="none";switch(t.name){case"Left/Trigger":case"Left/Squeeze":case"Left/Thumbstick":case"X":case"Y":i="left";break;case"Right/Trigger":case"Right/Squeeze":case"Right/Thumbstick":case"A":case"B":i="right";break;default:s=!0;break}for(let n=0;n<this._hoveringList.length;n++){const s=this._hoveringList[n].castidx,o=this._hoveringList[n].hand;o==i&&(null===(e=this._castableItems[s])||void 0===e||e.click(t.name))}},this._active=!1,this._castableItems=[],this._hoveringList=[],this._targets.set("right",new Em(t)),this._targets.set("left",new Em(t)),t.resources.add(new Pn(new nn(ri.resolve("assets/webgl/raycast_target.png")),t.scene),"raycast-target"),this._castPlane=new Il,this._castPoint=Nt["vec3"].create()}get Targets(){return this._targets}get target(){return this._targets.get("right")}get IsActive(){return this._active}enable(){this._active=!0,wm["a"].killTweensOf(this,"_renderAlpha"),wm["a"].to(this,{_renderAlpha:1,duration:.4}),this.xrmodule.Inputs.onBtnDown.on(this.onInputDown)}disable(){wm["a"].killTweensOf(this,"_renderAlpha"),wm["a"].to(this,{_renderAlpha:0,duration:.4,onComplete:()=>this._active=!1}),this.xrmodule.Inputs.onBtnDown.off(this.onInputDown)}udpdatePlane(t,e){this._castPlane.origin.set(t),this._castPlane.normal.set(e)}add(t){-1==this._castableItems.indexOf(t)&&this._castableItems.push(t)}remove(t){const e=this._castableItems.indexOf(t);-1!==e&&this._castableItems.splice(e,1),this._hoveringList.length=0}clear(){this._castableItems.length=0}raycastHands(t){const e=[this.xrmodule.gamepads.list.get(t[0]).ray,this.xrmodule.gamepads.list.get(t[1]).ray];for(let s=0;s<this._castableItems.length;s++){const i=this._castableItems[s].isHover(),n=this._castableItems[s].raycastList(e);this._castableItems[s].isHover()&&(this._hoveringList.push({hand:t[n],castidx:s}),i||this.xrmodule.Inputs.getInput(t[n]).gamepad.pulse(.3,100))}for(let s=0;s<t.length;s++){const i=Ll(this._castPoint,e[s],this._castPlane);this._targets.get(t[s]).setPosition(this._castPoint,this._castPlane.normal),this._targets.get(t[s]).setHit(i)}}preRender(){this._active&&(this._hoveringList.length=0,"none"==this.handedness?this.raycastHands(["right","left"]):this.raycastHands([this.handedness]))}renderTarget(t){if(!this._active)return;"none"==this.handedness?this._targets.forEach((e,s)=>e.render(t)):this._targets.get(this.handedness).render(t);const e=this.xrmodule,s=e.raycastLineRenderer;s.prepare(t);let i=Nt["vec3"].distance(e.gamepads.list.get("left").skin._wposition,this.Targets.get("left").wposition);s.draw("left",this._renderAlpha,Math.min(1,i)),i=Nt["vec3"].distance(e.gamepads.list.get("right").skin._wposition,this.Targets.get("right").wposition),s.draw("right",this._renderAlpha,Math.min(1,i))}}var Am,ym=s("a0e6"),Dm=s.n(ym),jm=s("9019"),Rm=s.n(jm);(function(t){t[t["DEPTH_BUFFER_BIT"]=256]="DEPTH_BUFFER_BIT",t[t["STENCIL_BUFFER_BIT"]=1024]="STENCIL_BUFFER_BIT",t[t["COLOR_BUFFER_BIT"]=16384]="COLOR_BUFFER_BIT",t[t["POINTS"]=0]="POINTS",t[t["LINES"]=1]="LINES",t[t["LINE_LOOP"]=2]="LINE_LOOP",t[t["LINE_STRIP"]=3]="LINE_STRIP",t[t["TRIANGLES"]=4]="TRIANGLES",t[t["TRIANGLE_STRIP"]=5]="TRIANGLE_STRIP",t[t["TRIANGLE_FAN"]=6]="TRIANGLE_FAN",t[t["ZERO"]=0]="ZERO",t[t["ONE"]=1]="ONE",t[t["SRC_COLOR"]=768]="SRC_COLOR",t[t["ONE_MINUS_SRC_COLOR"]=769]="ONE_MINUS_SRC_COLOR",t[t["SRC_ALPHA"]=770]="SRC_ALPHA",t[t["ONE_MINUS_SRC_ALPHA"]=771]="ONE_MINUS_SRC_ALPHA",t[t["DST_ALPHA"]=772]="DST_ALPHA",t[t["ONE_MINUS_DST_ALPHA"]=773]="ONE_MINUS_DST_ALPHA",t[t["DST_COLOR"]=774]="DST_COLOR",t[t["ONE_MINUS_DST_COLOR"]=775]="ONE_MINUS_DST_COLOR",t[t["SRC_ALPHA_SATURATE"]=776]="SRC_ALPHA_SATURATE",t[t["FUNC_ADD"]=32774]="FUNC_ADD",t[t["BLEND_EQUATION"]=32777]="BLEND_EQUATION",t[t["BLEND_EQUATION_RGB"]=32777]="BLEND_EQUATION_RGB",t[t["BLEND_EQUATION_ALPHA"]=34877]="BLEND_EQUATION_ALPHA",t[t["FUNC_SUBTRACT"]=32778]="FUNC_SUBTRACT",t[t["FUNC_REVERSE_SUBTRACT"]=32779]="FUNC_REVERSE_SUBTRACT",t[t["BLEND_DST_RGB"]=32968]="BLEND_DST_RGB",t[t["BLEND_SRC_RGB"]=32969]="BLEND_SRC_RGB",t[t["BLEND_DST_ALPHA"]=32970]="BLEND_DST_ALPHA",t[t["BLEND_SRC_ALPHA"]=32971]="BLEND_SRC_ALPHA",t[t["CONSTANT_COLOR"]=32769]="CONSTANT_COLOR",t[t["ONE_MINUS_CONSTANT_COLOR"]=32770]="ONE_MINUS_CONSTANT_COLOR",t[t["CONSTANT_ALPHA"]=32771]="CONSTANT_ALPHA",t[t["ONE_MINUS_CONSTANT_ALPHA"]=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t["BLEND_COLOR"]=32773]="BLEND_COLOR",t[t["ARRAY_BUFFER"]=34962]="ARRAY_BUFFER",t[t["ELEMENT_ARRAY_BUFFER"]=34963]="ELEMENT_ARRAY_BUFFER",t[t["ARRAY_BUFFER_BINDING"]=34964]="ARRAY_BUFFER_BINDING",t[t["ELEMENT_ARRAY_BUFFER_BINDING"]=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t["STREAM_DRAW"]=35040]="STREAM_DRAW",t[t["STATIC_DRAW"]=35044]="STATIC_DRAW",t[t["DYNAMIC_DRAW"]=35048]="DYNAMIC_DRAW",t[t["BUFFER_SIZE"]=34660]="BUFFER_SIZE",t[t["BUFFER_USAGE"]=34661]="BUFFER_USAGE",t[t["CURRENT_VERTEX_ATTRIB"]=34342]="CURRENT_VERTEX_ATTRIB",t[t["FRONT"]=1028]="FRONT",t[t["BACK"]=1029]="BACK",t[t["FRONT_AND_BACK"]=1032]="FRONT_AND_BACK",t[t["CULL_FACE"]=2884]="CULL_FACE",t[t["BLEND"]=3042]="BLEND",t[t["DITHER"]=3024]="DITHER",t[t["STENCIL_TEST"]=2960]="STENCIL_TEST",t[t["DEPTH_TEST"]=2929]="DEPTH_TEST",t[t["SCISSOR_TEST"]=3089]="SCISSOR_TEST",t[t["POLYGON_OFFSET_FILL"]=32823]="POLYGON_OFFSET_FILL",t[t["SAMPLE_ALPHA_TO_COVERAGE"]=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t["SAMPLE_COVERAGE"]=32928]="SAMPLE_COVERAGE",t[t["NO_ERROR"]=0]="NO_ERROR",t[t["INVALID_ENUM"]=1280]="INVALID_ENUM",t[t["INVALID_VALUE"]=1281]="INVALID_VALUE",t[t["INVALID_OPERATION"]=1282]="INVALID_OPERATION",t[t["OUT_OF_MEMORY"]=1285]="OUT_OF_MEMORY",t[t["CW"]=2304]="CW",t[t["CCW"]=2305]="CCW",t[t["LINE_WIDTH"]=2849]="LINE_WIDTH",t[t["ALIASED_POINT_SIZE_RANGE"]=33901]="ALIASED_POINT_SIZE_RANGE",t[t["ALIASED_LINE_WIDTH_RANGE"]=33902]="ALIASED_LINE_WIDTH_RANGE",t[t["CULL_FACE_MODE"]=2885]="CULL_FACE_MODE",t[t["FRONT_FACE"]=2886]="FRONT_FACE",t[t["DEPTH_RANGE"]=2928]="DEPTH_RANGE",t[t["DEPTH_WRITEMASK"]=2930]="DEPTH_WRITEMASK",t[t["DEPTH_CLEAR_VALUE"]=2931]="DEPTH_CLEAR_VALUE",t[t["DEPTH_FUNC"]=2932]="DEPTH_FUNC",t[t["STENCIL_CLEAR_VALUE"]=2961]="STENCIL_CLEAR_VALUE",t[t["STENCIL_FUNC"]=2962]="STENCIL_FUNC",t[t["STENCIL_FAIL"]=2964]="STENCIL_FAIL",t[t["STENCIL_PASS_DEPTH_FAIL"]=2965]="STENCIL_PASS_DEPTH_FAIL",t[t["STENCIL_PASS_DEPTH_PASS"]=2966]="STENCIL_PASS_DEPTH_PASS",t[t["STENCIL_REF"]=2967]="STENCIL_REF",t[t["STENCIL_VALUE_MASK"]=2963]="STENCIL_VALUE_MASK",t[t["STENCIL_WRITEMASK"]=2968]="STENCIL_WRITEMASK",t[t["STENCIL_BACK_FUNC"]=34816]="STENCIL_BACK_FUNC",t[t["STENCIL_BACK_FAIL"]=34817]="STENCIL_BACK_FAIL",t[t["STENCIL_BACK_PASS_DEPTH_FAIL"]=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t["STENCIL_BACK_PASS_DEPTH_PASS"]=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t["STENCIL_BACK_REF"]=36003]="STENCIL_BACK_REF",t[t["STENCIL_BACK_VALUE_MASK"]=36004]="STENCIL_BACK_VALUE_MASK",t[t["STENCIL_BACK_WRITEMASK"]=36005]="STENCIL_BACK_WRITEMASK",t[t["VIEWPORT"]=2978]="VIEWPORT",t[t["SCISSOR_BOX"]=3088]="SCISSOR_BOX",t[t["COLOR_CLEAR_VALUE"]=3106]="COLOR_CLEAR_VALUE",t[t["COLOR_WRITEMASK"]=3107]="COLOR_WRITEMASK",t[t["UNPACK_ALIGNMENT"]=3317]="UNPACK_ALIGNMENT",t[t["PACK_ALIGNMENT"]=3333]="PACK_ALIGNMENT",t[t["MAX_TEXTURE_SIZE"]=3379]="MAX_TEXTURE_SIZE",t[t["MAX_VIEWPORT_DIMS"]=3386]="MAX_VIEWPORT_DIMS",t[t["SUBPIXEL_BITS"]=3408]="SUBPIXEL_BITS",t[t["RED_BITS"]=3410]="RED_BITS",t[t["GREEN_BITS"]=3411]="GREEN_BITS",t[t["BLUE_BITS"]=3412]="BLUE_BITS",t[t["ALPHA_BITS"]=3413]="ALPHA_BITS",t[t["DEPTH_BITS"]=3414]="DEPTH_BITS",t[t["STENCIL_BITS"]=3415]="STENCIL_BITS",t[t["POLYGON_OFFSET_UNITS"]=10752]="POLYGON_OFFSET_UNITS",t[t["POLYGON_OFFSET_FACTOR"]=32824]="POLYGON_OFFSET_FACTOR",t[t["TEXTURE_BINDING_2D"]=32873]="TEXTURE_BINDING_2D",t[t["SAMPLE_BUFFERS"]=32936]="SAMPLE_BUFFERS",t[t["SAMPLES"]=32937]="SAMPLES",t[t["SAMPLE_COVERAGE_VALUE"]=32938]="SAMPLE_COVERAGE_VALUE",t[t["SAMPLE_COVERAGE_INVERT"]=32939]="SAMPLE_COVERAGE_INVERT",t[t["COMPRESSED_TEXTURE_FORMATS"]=34467]="COMPRESSED_TEXTURE_FORMATS",t[t["DONT_CARE"]=4352]="DONT_CARE",t[t["FASTEST"]=4353]="FASTEST",t[t["NICEST"]=4354]="NICEST",t[t["GENERATE_MIPMAP_HINT"]=33170]="GENERATE_MIPMAP_HINT",t[t["BYTE"]=5120]="BYTE",t[t["UNSIGNED_BYTE"]=5121]="UNSIGNED_BYTE",t[t["SHORT"]=5122]="SHORT",t[t["UNSIGNED_SHORT"]=5123]="UNSIGNED_SHORT",t[t["INT"]=5124]="INT",t[t["UNSIGNED_INT"]=5125]="UNSIGNED_INT",t[t["FLOAT"]=5126]="FLOAT",t[t["DEPTH_COMPONENT"]=6402]="DEPTH_COMPONENT",t[t["ALPHA"]=6406]="ALPHA",t[t["RGB"]=6407]="RGB",t[t["RGBA"]=6408]="RGBA",t[t["LUMINANCE"]=6409]="LUMINANCE",t[t["LUMINANCE_ALPHA"]=6410]="LUMINANCE_ALPHA",t[t["UNSIGNED_SHORT_4_4_4_4"]=32819]="UNSIGNED_SHORT_4_4_4_4",t[t["UNSIGNED_SHORT_5_5_5_1"]=32820]="UNSIGNED_SHORT_5_5_5_1",t[t["UNSIGNED_SHORT_5_6_5"]=33635]="UNSIGNED_SHORT_5_6_5",t[t["FRAGMENT_SHADER"]=35632]="FRAGMENT_SHADER",t[t["VERTEX_SHADER"]=35633]="VERTEX_SHADER",t[t["MAX_VERTEX_ATTRIBS"]=34921]="MAX_VERTEX_ATTRIBS",t[t["MAX_VERTEX_UNIFORM_VECTORS"]=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t["MAX_VARYING_VECTORS"]=36348]="MAX_VARYING_VECTORS",t[t["MAX_COMBINED_TEXTURE_IMAGE_UNITS"]=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t["MAX_VERTEX_TEXTURE_IMAGE_UNITS"]=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t["MAX_TEXTURE_IMAGE_UNITS"]=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t["MAX_FRAGMENT_UNIFORM_VECTORS"]=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t["SHADER_TYPE"]=35663]="SHADER_TYPE",t[t["DELETE_STATUS"]=35712]="DELETE_STATUS",t[t["LINK_STATUS"]=35714]="LINK_STATUS",t[t["VALIDATE_STATUS"]=35715]="VALIDATE_STATUS",t[t["ATTACHED_SHADERS"]=35717]="ATTACHED_SHADERS",t[t["ACTIVE_UNIFORMS"]=35718]="ACTIVE_UNIFORMS",t[t["ACTIVE_ATTRIBUTES"]=35721]="ACTIVE_ATTRIBUTES",t[t["SHADING_LANGUAGE_VERSION"]=35724]="SHADING_LANGUAGE_VERSION",t[t["CURRENT_PROGRAM"]=35725]="CURRENT_PROGRAM",t[t["NEVER"]=512]="NEVER",t[t["LESS"]=513]="LESS",t[t["EQUAL"]=514]="EQUAL",t[t["LEQUAL"]=515]="LEQUAL",t[t["GREATER"]=516]="GREATER",t[t["NOTEQUAL"]=517]="NOTEQUAL",t[t["GEQUAL"]=518]="GEQUAL",t[t["ALWAYS"]=519]="ALWAYS",t[t["KEEP"]=7680]="KEEP",t[t["REPLACE"]=7681]="REPLACE",t[t["INCR"]=7682]="INCR",t[t["DECR"]=7683]="DECR",t[t["INVERT"]=5386]="INVERT",t[t["INCR_WRAP"]=34055]="INCR_WRAP",t[t["DECR_WRAP"]=34056]="DECR_WRAP",t[t["VENDOR"]=7936]="VENDOR",t[t["RENDERER"]=7937]="RENDERER",t[t["VERSION"]=7938]="VERSION",t[t["NEAREST"]=9728]="NEAREST",t[t["LINEAR"]=9729]="LINEAR",t[t["NEAREST_MIPMAP_NEAREST"]=9984]="NEAREST_MIPMAP_NEAREST",t[t["LINEAR_MIPMAP_NEAREST"]=9985]="LINEAR_MIPMAP_NEAREST",t[t["NEAREST_MIPMAP_LINEAR"]=9986]="NEAREST_MIPMAP_LINEAR",t[t["LINEAR_MIPMAP_LINEAR"]=9987]="LINEAR_MIPMAP_LINEAR",t[t["TEXTURE_MAG_FILTER"]=10240]="TEXTURE_MAG_FILTER",t[t["TEXTURE_MIN_FILTER"]=10241]="TEXTURE_MIN_FILTER",t[t["TEXTURE_WRAP_S"]=10242]="TEXTURE_WRAP_S",t[t["TEXTURE_WRAP_T"]=10243]="TEXTURE_WRAP_T",t[t["TEXTURE_2D"]=3553]="TEXTURE_2D",t[t["TEXTURE"]=5890]="TEXTURE",t[t["TEXTURE_CUBE_MAP"]=34067]="TEXTURE_CUBE_MAP",t[t["TEXTURE_BINDING_CUBE_MAP"]=34068]="TEXTURE_BINDING_CUBE_MAP",t[t["TEXTURE_CUBE_MAP_POSITIVE_X"]=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t["TEXTURE_CUBE_MAP_NEGATIVE_X"]=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t["TEXTURE_CUBE_MAP_POSITIVE_Y"]=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t["TEXTURE_CUBE_MAP_NEGATIVE_Y"]=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t["TEXTURE_CUBE_MAP_POSITIVE_Z"]=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t["TEXTURE_CUBE_MAP_NEGATIVE_Z"]=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t["MAX_CUBE_MAP_TEXTURE_SIZE"]=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t["TEXTURE0"]=33984]="TEXTURE0",t[t["TEXTURE1"]=33985]="TEXTURE1",t[t["TEXTURE2"]=33986]="TEXTURE2",t[t["TEXTURE3"]=33987]="TEXTURE3",t[t["TEXTURE4"]=33988]="TEXTURE4",t[t["TEXTURE5"]=33989]="TEXTURE5",t[t["TEXTURE6"]=33990]="TEXTURE6",t[t["TEXTURE7"]=33991]="TEXTURE7",t[t["TEXTURE8"]=33992]="TEXTURE8",t[t["TEXTURE9"]=33993]="TEXTURE9",t[t["TEXTURE10"]=33994]="TEXTURE10",t[t["TEXTURE11"]=33995]="TEXTURE11",t[t["TEXTURE12"]=33996]="TEXTURE12",t[t["TEXTURE13"]=33997]="TEXTURE13",t[t["TEXTURE14"]=33998]="TEXTURE14",t[t["TEXTURE15"]=33999]="TEXTURE15",t[t["TEXTURE16"]=34e3]="TEXTURE16",t[t["TEXTURE17"]=34001]="TEXTURE17",t[t["TEXTURE18"]=34002]="TEXTURE18",t[t["TEXTURE19"]=34003]="TEXTURE19",t[t["TEXTURE20"]=34004]="TEXTURE20",t[t["TEXTURE21"]=34005]="TEXTURE21",t[t["TEXTURE22"]=34006]="TEXTURE22",t[t["TEXTURE23"]=34007]="TEXTURE23",t[t["TEXTURE24"]=34008]="TEXTURE24",t[t["TEXTURE25"]=34009]="TEXTURE25",t[t["TEXTURE26"]=34010]="TEXTURE26",t[t["TEXTURE27"]=34011]="TEXTURE27",t[t["TEXTURE28"]=34012]="TEXTURE28",t[t["TEXTURE29"]=34013]="TEXTURE29",t[t["TEXTURE30"]=34014]="TEXTURE30",t[t["TEXTURE31"]=34015]="TEXTURE31",t[t["ACTIVE_TEXTURE"]=34016]="ACTIVE_TEXTURE",t[t["REPEAT"]=10497]="REPEAT",t[t["CLAMP_TO_EDGE"]=33071]="CLAMP_TO_EDGE",t[t["MIRRORED_REPEAT"]=33648]="MIRRORED_REPEAT",t[t["FLOAT_VEC2"]=35664]="FLOAT_VEC2",t[t["FLOAT_VEC3"]=35665]="FLOAT_VEC3",t[t["FLOAT_VEC4"]=35666]="FLOAT_VEC4",t[t["INT_VEC2"]=35667]="INT_VEC2",t[t["INT_VEC3"]=35668]="INT_VEC3",t[t["INT_VEC4"]=35669]="INT_VEC4",t[t["BOOL"]=35670]="BOOL",t[t["BOOL_VEC2"]=35671]="BOOL_VEC2",t[t["BOOL_VEC3"]=35672]="BOOL_VEC3",t[t["BOOL_VEC4"]=35673]="BOOL_VEC4",t[t["FLOAT_MAT2"]=35674]="FLOAT_MAT2",t[t["FLOAT_MAT3"]=35675]="FLOAT_MAT3",t[t["FLOAT_MAT4"]=35676]="FLOAT_MAT4",t[t["SAMPLER_2D"]=35678]="SAMPLER_2D",t[t["SAMPLER_CUBE"]=35680]="SAMPLER_CUBE",t[t["VERTEX_ATTRIB_ARRAY_ENABLED"]=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t["VERTEX_ATTRIB_ARRAY_SIZE"]=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t["VERTEX_ATTRIB_ARRAY_STRIDE"]=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t["VERTEX_ATTRIB_ARRAY_TYPE"]=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t["VERTEX_ATTRIB_ARRAY_NORMALIZED"]=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t["VERTEX_ATTRIB_ARRAY_POINTER"]=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t["VERTEX_ATTRIB_ARRAY_BUFFER_BINDING"]=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t["COMPILE_STATUS"]=35713]="COMPILE_STATUS",t[t["LOW_FLOAT"]=36336]="LOW_FLOAT",t[t["MEDIUM_FLOAT"]=36337]="MEDIUM_FLOAT",t[t["HIGH_FLOAT"]=36338]="HIGH_FLOAT",t[t["LOW_INT"]=36339]="LOW_INT",t[t["MEDIUM_INT"]=36340]="MEDIUM_INT",t[t["HIGH_INT"]=36341]="HIGH_INT",t[t["FRAMEBUFFER"]=36160]="FRAMEBUFFER",t[t["RENDERBUFFER"]=36161]="RENDERBUFFER",t[t["RGBA4"]=32854]="RGBA4",t[t["RGB5_A1"]=32855]="RGB5_A1",t[t["RGB565"]=36194]="RGB565",t[t["DEPTH_COMPONENT16"]=33189]="DEPTH_COMPONENT16",t[t["STENCIL_INDEX"]=6401]="STENCIL_INDEX",t[t["STENCIL_INDEX8"]=36168]="STENCIL_INDEX8",t[t["DEPTH_STENCIL"]=34041]="DEPTH_STENCIL",t[t["RENDERBUFFER_WIDTH"]=36162]="RENDERBUFFER_WIDTH",t[t["RENDERBUFFER_HEIGHT"]=36163]="RENDERBUFFER_HEIGHT",t[t["RENDERBUFFER_INTERNAL_FORMAT"]=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t["RENDERBUFFER_RED_SIZE"]=36176]="RENDERBUFFER_RED_SIZE",t[t["RENDERBUFFER_GREEN_SIZE"]=36177]="RENDERBUFFER_GREEN_SIZE",t[t["RENDERBUFFER_BLUE_SIZE"]=36178]="RENDERBUFFER_BLUE_SIZE",t[t["RENDERBUFFER_ALPHA_SIZE"]=36179]="RENDERBUFFER_ALPHA_SIZE",t[t["RENDERBUFFER_DEPTH_SIZE"]=36180]="RENDERBUFFER_DEPTH_SIZE",t[t["RENDERBUFFER_STENCIL_SIZE"]=36181]="RENDERBUFFER_STENCIL_SIZE",t[t["FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE"]=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t["FRAMEBUFFER_ATTACHMENT_OBJECT_NAME"]=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t["FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL"]=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t["FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE"]=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t["COLOR_ATTACHMENT0"]=36064]="COLOR_ATTACHMENT0",t[t["DEPTH_ATTACHMENT"]=36096]="DEPTH_ATTACHMENT",t[t["STENCIL_ATTACHMENT"]=36128]="STENCIL_ATTACHMENT",t[t["DEPTH_STENCIL_ATTACHMENT"]=33306]="DEPTH_STENCIL_ATTACHMENT",t[t["NONE"]=0]="NONE",t[t["FRAMEBUFFER_COMPLETE"]=36053]="FRAMEBUFFER_COMPLETE",t[t["FRAMEBUFFER_INCOMPLETE_ATTACHMENT"]=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t["FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT"]=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t["FRAMEBUFFER_INCOMPLETE_DIMENSIONS"]=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t["FRAMEBUFFER_UNSUPPORTED"]=36061]="FRAMEBUFFER_UNSUPPORTED",t[t["FRAMEBUFFER_BINDING"]=36006]="FRAMEBUFFER_BINDING",t[t["RENDERBUFFER_BINDING"]=36007]="RENDERBUFFER_BINDING",t[t["MAX_RENDERBUFFER_SIZE"]=34024]="MAX_RENDERBUFFER_SIZE",t[t["INVALID_FRAMEBUFFER_OPERATION"]=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t["UNPACK_FLIP_Y_WEBGL"]=37440]="UNPACK_FLIP_Y_WEBGL",t[t["UNPACK_PREMULTIPLY_ALPHA_WEBGL"]=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t["CONTEXT_LOST_WEBGL"]=37442]="CONTEXT_LOST_WEBGL",t[t["UNPACK_COLORSPACE_CONVERSION_WEBGL"]=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t["BROWSER_DEFAULT_WEBGL"]=37444]="BROWSER_DEFAULT_WEBGL",t[t["READ_BUFFER"]=3074]="READ_BUFFER",t[t["UNPACK_ROW_LENGTH"]=3314]="UNPACK_ROW_LENGTH",t[t["UNPACK_SKIP_ROWS"]=3315]="UNPACK_SKIP_ROWS",t[t["UNPACK_SKIP_PIXELS"]=3316]="UNPACK_SKIP_PIXELS",t[t["PACK_ROW_LENGTH"]=3330]="PACK_ROW_LENGTH",t[t["PACK_SKIP_ROWS"]=3331]="PACK_SKIP_ROWS",t[t["PACK_SKIP_PIXELS"]=3332]="PACK_SKIP_PIXELS",t[t["COLOR"]=6144]="COLOR",t[t["DEPTH"]=6145]="DEPTH",t[t["STENCIL"]=6146]="STENCIL",t[t["RED"]=6403]="RED",t[t["RGB8"]=32849]="RGB8",t[t["RGBA8"]=32856]="RGBA8",t[t["RGB10_A2"]=32857]="RGB10_A2",t[t["TEXTURE_BINDING_3D"]=32874]="TEXTURE_BINDING_3D",t[t["UNPACK_SKIP_IMAGES"]=32877]="UNPACK_SKIP_IMAGES",t[t["UNPACK_IMAGE_HEIGHT"]=32878]="UNPACK_IMAGE_HEIGHT",t[t["TEXTURE_3D"]=32879]="TEXTURE_3D",t[t["TEXTURE_WRAP_R"]=32882]="TEXTURE_WRAP_R",t[t["MAX_3D_TEXTURE_SIZE"]=32883]="MAX_3D_TEXTURE_SIZE",t[t["UNSIGNED_INT_2_10_10_10_REV"]=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t["MAX_ELEMENTS_VERTICES"]=33e3]="MAX_ELEMENTS_VERTICES",t[t["MAX_ELEMENTS_INDICES"]=33001]="MAX_ELEMENTS_INDICES",t[t["TEXTURE_MIN_LOD"]=33082]="TEXTURE_MIN_LOD",t[t["TEXTURE_MAX_LOD"]=33083]="TEXTURE_MAX_LOD",t[t["TEXTURE_BASE_LEVEL"]=33084]="TEXTURE_BASE_LEVEL",t[t["TEXTURE_MAX_LEVEL"]=33085]="TEXTURE_MAX_LEVEL",t[t["MIN"]=32775]="MIN",t[t["MAX"]=32776]="MAX",t[t["DEPTH_COMPONENT24"]=33190]="DEPTH_COMPONENT24",t[t["MAX_TEXTURE_LOD_BIAS"]=34045]="MAX_TEXTURE_LOD_BIAS",t[t["TEXTURE_COMPARE_MODE"]=34892]="TEXTURE_COMPARE_MODE",t[t["TEXTURE_COMPARE_FUNC"]=34893]="TEXTURE_COMPARE_FUNC",t[t["CURRENT_QUERY"]=34917]="CURRENT_QUERY",t[t["QUERY_RESULT"]=34918]="QUERY_RESULT",t[t["QUERY_RESULT_AVAILABLE"]=34919]="QUERY_RESULT_AVAILABLE",t[t["STREAM_READ"]=35041]="STREAM_READ",t[t["STREAM_COPY"]=35042]="STREAM_COPY",t[t["STATIC_READ"]=35045]="STATIC_READ",t[t["STATIC_COPY"]=35046]="STATIC_COPY",t[t["DYNAMIC_READ"]=35049]="DYNAMIC_READ",t[t["DYNAMIC_COPY"]=35050]="DYNAMIC_COPY",t[t["MAX_DRAW_BUFFERS"]=34852]="MAX_DRAW_BUFFERS",t[t["DRAW_BUFFER0"]=34853]="DRAW_BUFFER0",t[t["DRAW_BUFFER1"]=34854]="DRAW_BUFFER1",t[t["DRAW_BUFFER2"]=34855]="DRAW_BUFFER2",t[t["DRAW_BUFFER3"]=34856]="DRAW_BUFFER3",t[t["DRAW_BUFFER4"]=34857]="DRAW_BUFFER4",t[t["DRAW_BUFFER5"]=34858]="DRAW_BUFFER5",t[t["DRAW_BUFFER6"]=34859]="DRAW_BUFFER6",t[t["DRAW_BUFFER7"]=34860]="DRAW_BUFFER7",t[t["DRAW_BUFFER8"]=34861]="DRAW_BUFFER8",t[t["DRAW_BUFFER9"]=34862]="DRAW_BUFFER9",t[t["DRAW_BUFFER10"]=34863]="DRAW_BUFFER10",t[t["DRAW_BUFFER11"]=34864]="DRAW_BUFFER11",t[t["DRAW_BUFFER12"]=34865]="DRAW_BUFFER12",t[t["DRAW_BUFFER13"]=34866]="DRAW_BUFFER13",t[t["DRAW_BUFFER14"]=34867]="DRAW_BUFFER14",t[t["DRAW_BUFFER15"]=34868]="DRAW_BUFFER15",t[t["MAX_FRAGMENT_UNIFORM_COMPONENTS"]=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t["MAX_VERTEX_UNIFORM_COMPONENTS"]=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t["SAMPLER_3D"]=35679]="SAMPLER_3D",t[t["SAMPLER_2D_SHADOW"]=35682]="SAMPLER_2D_SHADOW",t[t["FRAGMENT_SHADER_DERIVATIVE_HINT"]=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t["PIXEL_PACK_BUFFER"]=35051]="PIXEL_PACK_BUFFER",t[t["PIXEL_UNPACK_BUFFER"]=35052]="PIXEL_UNPACK_BUFFER",t[t["PIXEL_PACK_BUFFER_BINDING"]=35053]="PIXEL_PACK_BUFFER_BINDING",t[t["PIXEL_UNPACK_BUFFER_BINDING"]=35055]="PIXEL_UNPACK_BUFFER_BINDING",t[t["FLOAT_MAT2x3"]=35685]="FLOAT_MAT2x3",t[t["FLOAT_MAT2x4"]=35686]="FLOAT_MAT2x4",t[t["FLOAT_MAT3x2"]=35687]="FLOAT_MAT3x2",t[t["FLOAT_MAT3x4"]=35688]="FLOAT_MAT3x4",t[t["FLOAT_MAT4x2"]=35689]="FLOAT_MAT4x2",t[t["FLOAT_MAT4x3"]=35690]="FLOAT_MAT4x3",t[t["SRGB"]=35904]="SRGB",t[t["SRGB8"]=35905]="SRGB8",t[t["SRGB8_ALPHA8"]=35907]="SRGB8_ALPHA8",t[t["COMPARE_REF_TO_TEXTURE"]=34894]="COMPARE_REF_TO_TEXTURE",t[t["RGBA32F"]=34836]="RGBA32F",t[t["RGB32F"]=34837]="RGB32F",t[t["RGBA16F"]=34842]="RGBA16F",t[t["RGB16F"]=34843]="RGB16F",t[t["VERTEX_ATTRIB_ARRAY_INTEGER"]=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",t[t["MAX_ARRAY_TEXTURE_LAYERS"]=35071]="MAX_ARRAY_TEXTURE_LAYERS",t[t["MIN_PROGRAM_TEXEL_OFFSET"]=35076]="MIN_PROGRAM_TEXEL_OFFSET",t[t["MAX_PROGRAM_TEXEL_OFFSET"]=35077]="MAX_PROGRAM_TEXEL_OFFSET",t[t["MAX_VARYING_COMPONENTS"]=35659]="MAX_VARYING_COMPONENTS",t[t["TEXTURE_2D_ARRAY"]=35866]="TEXTURE_2D_ARRAY",t[t["TEXTURE_BINDING_2D_ARRAY"]=35869]="TEXTURE_BINDING_2D_ARRAY",t[t["R11F_G11F_B10F"]=35898]="R11F_G11F_B10F",t[t["UNSIGNED_INT_10F_11F_11F_REV"]=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t["RGB9_E5"]=35901]="RGB9_E5",t[t["UNSIGNED_INT_5_9_9_9_REV"]=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t["TRANSFORM_FEEDBACK_BUFFER_MODE"]=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",t[t["MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS"]=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t["TRANSFORM_FEEDBACK_VARYINGS"]=35971]="TRANSFORM_FEEDBACK_VARYINGS",t[t["TRANSFORM_FEEDBACK_BUFFER_START"]=35972]="TRANSFORM_FEEDBACK_BUFFER_START",t[t["TRANSFORM_FEEDBACK_BUFFER_SIZE"]=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",t[t["TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN"]=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",t[t["RASTERIZER_DISCARD"]=35977]="RASTERIZER_DISCARD",t[t["MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS"]=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t["MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS"]=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t["INTERLEAVED_ATTRIBS"]=35980]="INTERLEAVED_ATTRIBS",t[t["SEPARATE_ATTRIBS"]=35981]="SEPARATE_ATTRIBS",t[t["TRANSFORM_FEEDBACK_BUFFER"]=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t["TRANSFORM_FEEDBACK_BUFFER_BINDING"]=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t["RGBA32UI"]=36208]="RGBA32UI",t[t["RGB32UI"]=36209]="RGB32UI",t[t["RGBA16UI"]=36214]="RGBA16UI",t[t["RGB16UI"]=36215]="RGB16UI",t[t["RGBA8UI"]=36220]="RGBA8UI",t[t["RGB8UI"]=36221]="RGB8UI",t[t["RGBA32I"]=36226]="RGBA32I",t[t["RGB32I"]=36227]="RGB32I",t[t["RGBA16I"]=36232]="RGBA16I",t[t["RGB16I"]=36233]="RGB16I",t[t["RGBA8I"]=36238]="RGBA8I",t[t["RGB8I"]=36239]="RGB8I",t[t["RED_INTEGER"]=36244]="RED_INTEGER",t[t["RGB_INTEGER"]=36248]="RGB_INTEGER",t[t["RGBA_INTEGER"]=36249]="RGBA_INTEGER",t[t["SAMPLER_2D_ARRAY"]=36289]="SAMPLER_2D_ARRAY",t[t["SAMPLER_2D_ARRAY_SHADOW"]=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t["SAMPLER_CUBE_SHADOW"]=36293]="SAMPLER_CUBE_SHADOW",t[t["UNSIGNED_INT_VEC2"]=36294]="UNSIGNED_INT_VEC2",t[t["UNSIGNED_INT_VEC3"]=36295]="UNSIGNED_INT_VEC3",t[t["UNSIGNED_INT_VEC4"]=36296]="UNSIGNED_INT_VEC4",t[t["INT_SAMPLER_2D"]=36298]="INT_SAMPLER_2D",t[t["INT_SAMPLER_3D"]=36299]="INT_SAMPLER_3D",t[t["INT_SAMPLER_CUBE"]=36300]="INT_SAMPLER_CUBE",t[t["INT_SAMPLER_2D_ARRAY"]=36303]="INT_SAMPLER_2D_ARRAY",t[t["UNSIGNED_INT_SAMPLER_2D"]=36306]="UNSIGNED_INT_SAMPLER_2D",t[t["UNSIGNED_INT_SAMPLER_3D"]=36307]="UNSIGNED_INT_SAMPLER_3D",t[t["UNSIGNED_INT_SAMPLER_CUBE"]=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t["UNSIGNED_INT_SAMPLER_2D_ARRAY"]=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t["DEPTH_COMPONENT32F"]=36012]="DEPTH_COMPONENT32F",t[t["DEPTH32F_STENCIL8"]=36013]="DEPTH32F_STENCIL8",t[t["FLOAT_32_UNSIGNED_INT_24_8_REV"]=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t["FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING"]=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t["FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE"]=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t["FRAMEBUFFER_ATTACHMENT_RED_SIZE"]=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t["FRAMEBUFFER_ATTACHMENT_GREEN_SIZE"]=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t["FRAMEBUFFER_ATTACHMENT_BLUE_SIZE"]=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t["FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE"]=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t["FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE"]=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t["FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE"]=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t["FRAMEBUFFER_DEFAULT"]=33304]="FRAMEBUFFER_DEFAULT",t[t["UNSIGNED_INT_24_8"]=34042]="UNSIGNED_INT_24_8",t[t["DEPTH24_STENCIL8"]=35056]="DEPTH24_STENCIL8",t[t["UNSIGNED_NORMALIZED"]=35863]="UNSIGNED_NORMALIZED",t[t["DRAW_FRAMEBUFFER_BINDING"]=36006]="DRAW_FRAMEBUFFER_BINDING",t[t["READ_FRAMEBUFFER"]=36008]="READ_FRAMEBUFFER",t[t["DRAW_FRAMEBUFFER"]=36009]="DRAW_FRAMEBUFFER",t[t["READ_FRAMEBUFFER_BINDING"]=36010]="READ_FRAMEBUFFER_BINDING",t[t["RENDERBUFFER_SAMPLES"]=36011]="RENDERBUFFER_SAMPLES",t[t["FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER"]=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",t[t["MAX_COLOR_ATTACHMENTS"]=36063]="MAX_COLOR_ATTACHMENTS",t[t["COLOR_ATTACHMENT1"]=36065]="COLOR_ATTACHMENT1",t[t["COLOR_ATTACHMENT2"]=36066]="COLOR_ATTACHMENT2",t[t["COLOR_ATTACHMENT3"]=36067]="COLOR_ATTACHMENT3",t[t["COLOR_ATTACHMENT4"]=36068]="COLOR_ATTACHMENT4",t[t["COLOR_ATTACHMENT5"]=36069]="COLOR_ATTACHMENT5",t[t["COLOR_ATTACHMENT6"]=36070]="COLOR_ATTACHMENT6",t[t["COLOR_ATTACHMENT7"]=36071]="COLOR_ATTACHMENT7",t[t["COLOR_ATTACHMENT8"]=36072]="COLOR_ATTACHMENT8",t[t["COLOR_ATTACHMENT9"]=36073]="COLOR_ATTACHMENT9",t[t["COLOR_ATTACHMENT10"]=36074]="COLOR_ATTACHMENT10",t[t["COLOR_ATTACHMENT11"]=36075]="COLOR_ATTACHMENT11",t[t["COLOR_ATTACHMENT12"]=36076]="COLOR_ATTACHMENT12",t[t["COLOR_ATTACHMENT13"]=36077]="COLOR_ATTACHMENT13",t[t["COLOR_ATTACHMENT14"]=36078]="COLOR_ATTACHMENT14",t[t["COLOR_ATTACHMENT15"]=36079]="COLOR_ATTACHMENT15",t[t["FRAMEBUFFER_INCOMPLETE_MULTISAMPLE"]=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",t[t["MAX_SAMPLES"]=36183]="MAX_SAMPLES",t[t["HALF_FLOAT"]=5131]="HALF_FLOAT",t[t["RG"]=33319]="RG",t[t["RG_INTEGER"]=33320]="RG_INTEGER",t[t["R8"]=33321]="R8",t[t["RG8"]=33323]="RG8",t[t["R16F"]=33325]="R16F",t[t["R32F"]=33326]="R32F",t[t["RG16F"]=33327]="RG16F",t[t["RG32F"]=33328]="RG32F",t[t["R8I"]=33329]="R8I",t[t["R8UI"]=33330]="R8UI",t[t["R16I"]=33331]="R16I",t[t["R16UI"]=33332]="R16UI",t[t["R32I"]=33333]="R32I",t[t["R32UI"]=33334]="R32UI",t[t["RG8I"]=33335]="RG8I",t[t["RG8UI"]=33336]="RG8UI",t[t["RG16I"]=33337]="RG16I",t[t["RG16UI"]=33338]="RG16UI",t[t["RG32I"]=33339]="RG32I",t[t["RG32UI"]=33340]="RG32UI",t[t["VERTEX_ARRAY_BINDING"]=34229]="VERTEX_ARRAY_BINDING",t[t["R8_SNORM"]=36756]="R8_SNORM",t[t["RG8_SNORM"]=36757]="RG8_SNORM",t[t["RGB8_SNORM"]=36758]="RGB8_SNORM",t[t["RGBA8_SNORM"]=36759]="RGBA8_SNORM",t[t["SIGNED_NORMALIZED"]=36764]="SIGNED_NORMALIZED",t[t["COPY_READ_BUFFER"]=36662]="COPY_READ_BUFFER",t[t["COPY_WRITE_BUFFER"]=36663]="COPY_WRITE_BUFFER",t[t["COPY_READ_BUFFER_BINDING"]=36662]="COPY_READ_BUFFER_BINDING",t[t["COPY_WRITE_BUFFER_BINDING"]=36663]="COPY_WRITE_BUFFER_BINDING",t[t["UNIFORM_BUFFER"]=35345]="UNIFORM_BUFFER",t[t["UNIFORM_BUFFER_BINDING"]=35368]="UNIFORM_BUFFER_BINDING",t[t["UNIFORM_BUFFER_START"]=35369]="UNIFORM_BUFFER_START",t[t["UNIFORM_BUFFER_SIZE"]=35370]="UNIFORM_BUFFER_SIZE",t[t["MAX_VERTEX_UNIFORM_BLOCKS"]=35371]="MAX_VERTEX_UNIFORM_BLOCKS",t[t["MAX_FRAGMENT_UNIFORM_BLOCKS"]=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t["MAX_COMBINED_UNIFORM_BLOCKS"]=35374]="MAX_COMBINED_UNIFORM_BLOCKS",t[t["MAX_UNIFORM_BUFFER_BINDINGS"]=35375]="MAX_UNIFORM_BUFFER_BINDINGS",t[t["MAX_UNIFORM_BLOCK_SIZE"]=35376]="MAX_UNIFORM_BLOCK_SIZE",t[t["MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS"]=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t["MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS"]=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t["UNIFORM_BUFFER_OFFSET_ALIGNMENT"]=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t["ACTIVE_UNIFORM_BLOCKS"]=35382]="ACTIVE_UNIFORM_BLOCKS",t[t["UNIFORM_TYPE"]=35383]="UNIFORM_TYPE",t[t["UNIFORM_SIZE"]=35384]="UNIFORM_SIZE",t[t["UNIFORM_BLOCK_INDEX"]=35386]="UNIFORM_BLOCK_INDEX",t[t["UNIFORM_OFFSET"]=35387]="UNIFORM_OFFSET",t[t["UNIFORM_ARRAY_STRIDE"]=35388]="UNIFORM_ARRAY_STRIDE",t[t["UNIFORM_MATRIX_STRIDE"]=35389]="UNIFORM_MATRIX_STRIDE",t[t["UNIFORM_IS_ROW_MAJOR"]=35390]="UNIFORM_IS_ROW_MAJOR",t[t["UNIFORM_BLOCK_BINDING"]=35391]="UNIFORM_BLOCK_BINDING",t[t["UNIFORM_BLOCK_DATA_SIZE"]=35392]="UNIFORM_BLOCK_DATA_SIZE",t[t["UNIFORM_BLOCK_ACTIVE_UNIFORMS"]=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",t[t["UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES"]=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",t[t["UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER"]=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",t[t["UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER"]=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",t[t["INVALID_INDEX"]=4294967295]="INVALID_INDEX",t[t["MAX_VERTEX_OUTPUT_COMPONENTS"]=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t["MAX_FRAGMENT_INPUT_COMPONENTS"]=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t["MAX_SERVER_WAIT_TIMEOUT"]=37137]="MAX_SERVER_WAIT_TIMEOUT",t[t["OBJECT_TYPE"]=37138]="OBJECT_TYPE",t[t["SYNC_CONDITION"]=37139]="SYNC_CONDITION",t[t["SYNC_STATUS"]=37140]="SYNC_STATUS",t[t["SYNC_FLAGS"]=37141]="SYNC_FLAGS",t[t["SYNC_FENCE"]=37142]="SYNC_FENCE",t[t["SYNC_GPU_COMMANDS_COMPLETE"]=37143]="SYNC_GPU_COMMANDS_COMPLETE",t[t["UNSIGNALED"]=37144]="UNSIGNALED",t[t["SIGNALED"]=37145]="SIGNALED",t[t["ALREADY_SIGNALED"]=37146]="ALREADY_SIGNALED",t[t["TIMEOUT_EXPIRED"]=37147]="TIMEOUT_EXPIRED",t[t["CONDITION_SATISFIED"]=37148]="CONDITION_SATISFIED",t[t["WAIT_FAILED"]=37149]="WAIT_FAILED",t[t["SYNC_FLUSH_COMMANDS_BIT"]=1]="SYNC_FLUSH_COMMANDS_BIT",t[t["VERTEX_ATTRIB_ARRAY_DIVISOR"]=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",t[t["ANY_SAMPLES_PASSED"]=35887]="ANY_SAMPLES_PASSED",t[t["ANY_SAMPLES_PASSED_CONSERVATIVE"]=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",t[t["SAMPLER_BINDING"]=35097]="SAMPLER_BINDING",t[t["RGB10_A2UI"]=36975]="RGB10_A2UI",t[t["INT_2_10_10_10_REV"]=36255]="INT_2_10_10_10_REV",t[t["TRANSFORM_FEEDBACK"]=36386]="TRANSFORM_FEEDBACK",t[t["TRANSFORM_FEEDBACK_PAUSED"]=36387]="TRANSFORM_FEEDBACK_PAUSED",t[t["TRANSFORM_FEEDBACK_ACTIVE"]=36388]="TRANSFORM_FEEDBACK_ACTIVE",t[t["TRANSFORM_FEEDBACK_BINDING"]=36389]="TRANSFORM_FEEDBACK_BINDING",t[t["TEXTURE_IMMUTABLE_FORMAT"]=37167]="TEXTURE_IMMUTABLE_FORMAT",t[t["MAX_ELEMENT_INDEX"]=36203]="MAX_ELEMENT_INDEX",t[t["TEXTURE_IMMUTABLE_LEVELS"]=33503]="TEXTURE_IMMUTABLE_LEVELS",t[t["TIMEOUT_IGNORED"]=-1]="TIMEOUT_IGNORED",t[t["MAX_CLIENT_WAIT_TIMEOUT_WEBGL"]=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL"})(Am||(Am={}));var Sm=Am;const Cm=Nt["mat4"].create(),Im=Nt["mat4"].create();Nt["mat4"].fromTranslation(Im,[0,0,-.03]);class Pm{constructor(t){this.xrmodule=t;const e=t.xrview.gl;this.prg=new js["a"](e,Dm()(),Rm()()),this.geom=new $s["a"](e,new Float32Array([0,1,0,-1,1,1,1,-1])),this.geom.attrib("aPosition",2,e.FLOAT),this.cfg=t.scene.glstate.config().depthMask(!1).enableCullface(!1).enableBlend().enableDepthTest().blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA)}prepare(t){this.prg.use(),this.prg.uViewProjMatrix(t._viewProj),this.prg.uCameraWorldPos(t._wposition),this.geom.attribPointer(this.prg),this.cfg.apply()}draw(t,e=1,s=2,i=.01){const n=this.xrmodule.gamepads.list.get(t),o=n.skin;Nt["mat4"].multiply(Cm,o._wmatrix,Im),this.prg.uWorldMatrix(Cm),this.prg.uParams([i,s,e]);const a=Wx.state.matches("gallery")||Wx.state.matches("gallery_loading.outro")?kn:Mn;this.prg.uColor(a),this.geom.draw(Sm.TRIANGLE_STRIP)}}class Lm{constructor(t){this.scene=t,this._ready=!1,this.resources=new Cn,this.gamepads=new Ig(this),this.ui=new Wg(t),this.ui.textLib.buildXR(),this.tooltipRenderer=new um(this.gamepads),this.tooltips=new bm(this.tooltipRenderer),this.raycaster=new Om(this),this.xrroot=new vi["a"],t.root.add(this.xrroot),t.root.add(this.ui.root)}get Ready(){return this._ready}get Inputs(){return this.xrview.inputs}async load(){return this._loadPromise||(this._loadPromise=this._doLoad()),this._loadPromise}async _doLoad(){await this.ui.load(),await this.resources.load(),await this.scene.xrview.poseReady,this.init()}init(){this._ready=!0,this.xrview=this.scene.xrview,this.xrcamera=new _m(this.xrview),this.raycastLineRenderer=new Pm(this),this.gamepads.init(this.xrview.inputs),this.tooltipRenderer.init(),this.xrroot.add(this.xrcamera.node),this.xrroot.add(this.gamepads.node)}preRender(){this.xrcamera.update(),this.ui.preRender(),this.gamepads.preRender(),this.raycaster.preRender(),this.tooltipRenderer.preRender(this.scene.dt)}render(t){this.gamepads.render(t),this.tooltipRenderer.render(t),this.raycaster.renderTarget(t),this.ui.render(t)}}const Mm=18e4;class km{constructor(t){this.xrview=t,this._hiddenDate=0,this._visible=!0,this.onVisibilityChange=t=>{const e=Date.now();this._visible&&!t&&(this._hiddenDate=e),!this._visible&&t&&e-this._hiddenDate>Mm&&this.xrview.session.end().then(()=>{window.location.reload()}),this._visible=t}}listen(){this.xrview.onVisibilityChange.on(this.onVisibilityChange)}removeListener(){this.xrview.onVisibilityChange.off(this.onVisibilityChange)}}class Nm{constructor(){this.enableDebugDraw=!1,this.envRotation=0,this.onXREnd=()=>{Wx.getSnapshot().context._xr.send("SESSION_END"),this.xrreload.removeListener(),this.glview.start()},this.onCanvasFrame=t=>{this.viewport={x:0,y:0,width:this.glview.width,height:this.glview.height},this.render(t,!1)},this.onXRFrame=t=>{this.viewport={x:0,y:0,width:this.xrview.gllayer.framebufferWidth,height:this.xrview.gllayer.framebufferHeight},this.render(t,!0)},this.compileShaders=()=>(this.programs.compile(),Promise.resolve()),this.onLoaded=()=>{},this.dt=0,this.time=0,this.aspect=1,this.ilayer=null,this.viewport={x:0,y:0,width:0,height:0}}get Resources(){return this.resources}get camera(){return this.cameras.camera}init(t){this.loaddefer=new Bt,this.glview=t,this.gl=this.glview.gl,kd(this.gl),this.xrview=new Ut(this.gl),this.xrreload=new km(this.xrview),this.resources=new Cn,this.sroot=new vi["a"],this.root=new vi["a"],this.sroot.add(this.root),this.glstate=pr["a"].get(this.gl),this.programs=new el(this),this.quad=new Ds["a"](this.gl),this.inputs=new ol(this.ilayer),this.cameras=new zl(this),this.lights=new Zl(this),this.museumScene=new ec(this),this.paintingScene=new yg(this),this.activities=new Dg(this),this.inputs.start(),this.glview.onRender.on(this.onCanvasFrame),this.xrview.onRender.on(this.onXRFrame)}async requestXR(){try{this.glview.stop(),console.log("[Scene] requesting XR"),await this.xrview.requestSession(),console.log("[Scene] start xrview"),this.xrview.start(),await this.xrview.poseReady,console.log("[Scene] pose ready"),this.xrview.onSessionEnded.on(this.onXREnd),this.xrreload.listen()}catch(t){this.glview.start(),this.xrview.onSessionEnded.emit()}}loadXRModule(){return this.xrmodule||(this.xrmodule=new Lm(this)),this.xrmodule.load()}handleResize(){}render(t,e){this.dt=t,this.time+=t,this.activities.preFrame(),this.drawScene(this.camera),ng.clear()}preRender(){this.activities.preRender(),this.cameras.preRender(),this.root.rotation.set([0,0,0,1]),this.root.rotateY(this.envRotation*Math.PI),this.root.updateWorldMatrix()}drawScene(t,e=null,s=!0){const i=e?e.width:this.glview.width,n=e?e.height:this.glview.height;this.aspect=i/n,t.lens.aspect=this.aspect,this.preRender(),t.updateViewProjectionMatrix(i,n),this.lights.setup.prepare(this.gl),this.glstate.apply(),this.activities.rttPass(),this.glstate.apply(),this.activities.render(),this.glstate.apply()}async load(){await this.resources.load(),await this.compileShaders(),this.onLoaded()}loadPaintingScene(){return this.museumScene.unload(),this.paintingScene.load()}loadMuseumScene(){return this.paintingScene.unload(),this.museumScene.load()}}class Fm{constructor(){this._loadPromise=null,this.canvas=document.createElement("canvas"),this.glview=new ur(this.canvas),this.scene=new Nm,this.scene.ilayer=this.canvas,this.scene.init(this.glview)}static get activities(){return this.getInstance().scene.activities}static getInstance(){return null===this._instance&&(this._instance=new Fm),this._instance}getResources(){return this.scene.Resources}load(){return null===this._loadPromise&&(this._loadPromise=this._doLoad()),this._loadPromise}async _doLoad(){await this.scene.load()}start(){this.glview.start()}stop(){this.glview.stop()}requestXR(){return this.scene.requestXR()}}Fm._instance=null;const Bm=Object(As["a"])({id:"Activity_fsm",initial:"unloaded",context:{started:!1,activity:null},on:{START:{actions:Object(ys["b"])({started:t=>!0})},STOP:{actions:Object(ys["b"])({started:t=>!1})}},states:{unloaded:{on:{LOAD:"loading",START:"loading"}},loading:{on:{UNLOAD:{target:"unloaded",actions:"unloadActivity"}},invoke:{src:"loadActivity",onDone:"loaded"}},loaded:{on:{UNLOAD:{target:"unloaded",actions:"unloadActivity"}},initial:"stopped",states:{stopped:{always:{target:"started",cond:t=>t.started}},started:{always:{target:"stopped",cond:t=>!t.started},on:{STATE_UPDATE:{actions:(t,e)=>{t.activity.onStateUpdate(e.state)},cond:"isCreated"}},entry:"startActivity",exit:"stopActivity"}}}}},{services:{loadActivity(t){return console.log("LOAD ACTIVITY",{ctx:t}),t.activity?t.activity.load():new Promise(t=>t())}},actions:{unloadActivity(t){return t.activity?t.activity.unload():()=>{}},startActivity(t){null!==t.activity&&(console.log("[Activity AAA start"),t.activity.start(),t.activity.onStateUpdate(Wx.getSnapshot()),Fm.activities.registerActivity(t.activity))},stopActivity(t){null!==t.activity&&(Fm.activities.unregisterActivity(t.activity),t.activity.stop())}},guards:{isCreated(t){return null!==t.activity}}});class Um{constructor(t){this.id=t,this._xrmode=!1}get hasActivity(){return this._hasActivity}set xrmode(t){this._xrmode!==t&&(this._xrmode=t,this.allocateActivity())}load(){return this._lazyAllocate(),this._load=!0,console.log(`[Activity ${this.id}] load`),this.service.send("LOAD"),this.awaitServiceLoading()}unload(){this._lazyAllocate(),this._load=!1,this.service.send("UNLOAD")}start(){this._lazyAllocate(),this._load||this.load(),this._started=!0,this.service.send("START")}stop(){this._lazyAllocate(),this._started=!1,this.service.send("STOP")}onStateUpdate(t){this.service.send({type:"STATE_UPDATE",state:t})}_lazyAllocate(){this.service||this.allocateActivity()}allocateActivity(){this.releaseActivity();const t=this.createActivity(this._xrmode);this._hasActivity=null!==t;const e=this._started;this.service=Object(_s["a"])(Bm.withContext({activity:t,started:e})),this.service.start(),this._load&&this.service.send("LOAD")}releaseActivity(){this.service&&(this.service.send("UNLOAD"),this.service.stop(),this.service=null)}awaitServiceLoading(){return new Promise((t,e)=>{this.service.onTransition(e=>{e.matches("loaded")&&t(),e.matches("unloaded")&&t()})})}}class Hm extends Um{createActivity(t){const e=Fm.getInstance().scene;return t?new vo(e):null}}const Gm=new Hm("gallery");var Vm=Gm,zm=s("2325"),Xm=s("c4c5");class Wm{constructor(t,e,s=!1){this.gl=t,this._useMsaa=Object(ua["a"])(t)&&e>1,this.renderFbo=new nh["a"](t),Object(ua["a"])(t)&&this._useMsaa?(this.renderFbo.attach(t.COLOR_ATTACHMENT0,new Xm["a"](t,t.RGBA8,e)),this.renderFbo.attach(t.DEPTH_ATTACHMENT,new Xm["a"](t,t.DEPTH_COMPONENT24,e)),this.blitFbo=new nh["a"](t),this.blitFbo.attach(t.COLOR_ATTACHMENT0,new li["a"](t,t.RGBA,t.UNSIGNED_BYTE)),this.blitFbo.attach(t.DEPTH_ATTACHMENT,new Xm["a"](t,t.DEPTH_COMPONENT24)),this.blitFbo.getColorTexture(0).setFilter(!1,!1,!1),this.renderFbo.resize(4,4),this.blitFbo.resize(4,4)):(this.renderFbo.attach(t.COLOR_ATTACHMENT0,new li["a"](t,t.RGBA,t.UNSIGNED_BYTE)),s?this.renderFbo.attach(t.DEPTH_STENCIL_ATTACHMENT,new Xm["a"](t,t.DEPTH_STENCIL)):this.renderFbo.attach(t.DEPTH_ATTACHMENT,new Xm["a"](t,t.DEPTH_COMPONENT16)),this.renderFbo.resize(4,4),this.blitFbo=this.renderFbo)}blitMsaa(){if(this._useMsaa){const t=this.gl;t.bindFramebuffer(t.READ_FRAMEBUFFER,this.renderFbo.fbo),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,this.blitFbo.fbo),t.clearBufferfv(t.COLOR,0,[0,0,0,1]),t.blitFramebuffer(0,0,this.renderFbo.width,this.renderFbo.height,0,0,this.renderFbo.width,this.renderFbo.height,t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT,t.NEAREST)}}getColorTexture(){return this.blitFbo.getColorTexture()}setSize(t,e){this.renderFbo.resize(t,e),this.blitFbo.resize(t,e)}}var qm=s("8c7e"),Ym=s("4ef7"),Km=s.n(Ym),Zm=s("3690"),$m=s.n(Zm);const Qm=new Uint8Array(9);Qm[0]=255,Qm[4]=255,Qm[8]=255;class Jm extends qm["b"]{constructor(){super(),this.adjust=.42,this._flags|=qm["a"].LINEAR,this._code=Km()(),this._preCode=$m()(),this._rgbTex=null,this.amount=.015}init(){var t=this.post.gl;this._rgbTex=new li["a"](t,t.RGB),this._rgbTex.fromData(3,1,Qm),this._rgbTex.clamp(),this._rgbTex.setFilter(!0,!1,!1)}release(){this._rgbTex.dispose(),this._rgbTex=null}preRender(){}genCode(t,e){t.push(this._preCode),e.push(this._code)}setupProgram(t){t.tChromaShiftTex&&t.tChromaShiftTex(this._rgbTex),t.uAmount(this.amount)}resize(){}}var t_=s("c15e"),e_=s("9d79"),s_=s("043c"),i_=s.n(s_),n_=s("01a4"),o_=s.n(n_);const a_=64,r_=a_*a_,l_=new Uint8Array(3*r_);for(let oB=0;oB<3*r_;oB++)l_[oB]=127*(Math.random()+Math.random());class c_ extends qm["b"]{constructor(){super(),this.adjust=.42,this._code=i_()(),this._preCode=o_()(),this._noiseTex=null,this.amount=.015}init(){var t=this.post.gl;this._noiseTex=new li["a"](t,t.RGB),this._noiseTex.fromData(a_,a_,l_),this._noiseTex.repeat(),this._noiseTex.setFilter(!1,!1,!1)}release(){this._noiseTex.dispose(),this._noiseTex=null}preRender(){}genCode(t,e){t.push(this._preCode),e.push(this._code)}setupProgram(t){const e=this.post.bufferWidth,s=this.post.bufferHeight;t.tDitherNoise(this._noiseTex),t.uDitherTCScale(e/a_,s/a_)}resize(){}}class h_{constructor(t,e=!0){this.scene=t,this.setup=new t_["a"](t.gl,!1),this.setup.enabled=!0,this.fetch=new e_["a"],this.setup.add(this.fetch),this.msaa=new Wm(t.gl,e?16:0),this.setup.mainColor=this.msaa.blitFbo.getColorTexture(),this.setup.mainFbo=this.msaa.blitFbo;const s=this.msaa.getColorTexture();s.bind(),s.clamp().setFilter(!0,!1,!1)}get enabled(){return this.setup.enabled}set enabled(t){this.setup.enabled=t}bindFrameBuffer(t,e,s=null){const i=this.scene.gl;this.enabled?(this.setup.preRender(t,e),this.msaa.setSize(t,e),this.msaa.renderFbo.bind()):i.bindFramebuffer(i.FRAMEBUFFER,s),i.viewport(0,0,t,e),i.clearColor(0,0,0,1),i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT)}bindColor(){}blit(t=this.setup.renderWidth,e=this.setup.renderHeight,s=null){const i=this.setup;if(!i.enabled)return;const n=i.gl;this.msaa.blitMsaa();for(var o=0;o<i._effects.length;o++)i._effects[o].preRender();n.bindFramebuffer(n.FRAMEBUFFER,s),n.viewport(0,0,t,e),i._shaderInvalid&&i.buildProgram(),i.prg.use();for(o=0;o<i._effects.length;o++)i._effects[o].setupProgram(i.prg);if(i.prg.tInput(this.msaa.getColorTexture()),this.msaa.getColorTexture().clamp(),i._needDepth()){if(!i.hasDepthTexture)throw"no depth texture";i.prg.tDepth(this.msaa.blitFbo.getDepth())}this.scene.glstate.apply(),i.fillScreen(i.prg)}}class d_ extends h_{constructor(t){super(t,t.glview.pixelRatio<2),this.chromaShift=new Jm,this.chromaShift.amount=.015,this.setup.add(this.chromaShift),this.dithering=new c_,this.setup.add(this.dithering)}}var u_=s("3802"),p_=s.n(u_),g_=s("c9e4"),m_=s.n(g_);const __=2,b_=32,f_=Nt["vec4"].create(),v_=[Nt["vec4"].fromValues(200,300,-300,1),Nt["vec4"].fromValues(200,300,300,1),Nt["vec4"].fromValues(-300,300,0,1)];class x_{constructor(t){this.scene=t,this.createGeom(),this.prg=new js["a"](this.scene.gl,p_()(),m_()()),this.cfg=t.glstate.config().enableBlend().blendFunc(Sm.ONE,Sm.ONE_MINUS_SRC_COLOR),this.texture=new Pn(new nn(Lp["default"].getPath("lensflares/rainbow-ring.png")),this.scene),this.texture.response().then(t=>t.repeat())}load(){return this.texture.load().then()}createGeom(){const t=new Float32Array(__*(b_+1)*2),e=2*Math.PI/b_;let s=0;for(let n=0;n<=b_;n++){const i=e*n;t[s++]=i,t[s++]=0,t[s++]=i,t[s++]=1}const i=this.scene.gl;this.geom=new $s["a"](i,t),this.geom.attrib("aData",2,i.FLOAT)}render(t){this.prg.use(),this.geom.attribPointer(this.prg),this.cfg.apply();for(let e=0;e<v_.length;e++){const s=v_[e];Nt["vec4"].transformMat4(f_,s,t._viewProj),f_[0]/=f_[3],f_[1]/=f_[3];const i=Math.atan2(f_[1],f_[0]),n=Nt["vec2"].length(f_),o=Ii(n-.5);f_[3]>0&&o>.01&&n<(Math.SQRT2+.1)/.5&&(this.prg.uParams(i,n),this.prg.uTexture(this.texture.texture),this.prg.uOpacity(o),this.geom.drawTriangleStrip())}}}class T_{constructor(t){this.rainbowRing=new x_(t)}render(t){this.rainbowRing.render(t)}load(){return this.rainbowRing.load()}}var E_=s("3d8b"),w_=s.n(E_),O_=s("b9f5"),A_=s.n(O_);const y_=1024;function D_(){return Date.now()/1e3}class j_{constructor(t){this.gl=t,this.strength=.5,this.refTime=0,this.fbo=new nh["a"](t),this.fbo.attachColor(),this.fbo.resize(y_,y_),this.fbo.getColorTexture().mirror(),this.prg=new js["a"](t,w_()(),A_()()),this.quad=new Ds["a"](t)}get active(){return this.strength>0}diveIn(t=3){this.refTime=D_(),wt["a"].to(this,{strength:1,duration:t})}reset(){wt["a"].killTweensOf(this),this.strength=0}render(t,e){const s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,null),s.viewport(0,0,t,e),this.prg.use(),this.prg.uTime((D_()-this.refTime)%5*.3),this.prg.uStrength(Math.pow(this.strength,2)),this.prg.ufadeColor(Qc(16184292)),this.prg.tTex(this.fbo.getColorTexture()),this.quad.attribPointer(this.prg),this.quad.render()}}class R_{constructor(t){this.scene=t,this.priority=0,this.enterLockedMode=()=>{},this.exitLockedMode=()=>{},this.enterExplore=()=>{this.scene.inputs.onTouchRemoved.on(this.onMouseClick)},this.onMouseClick=t=>{if(t.getDeltaLength()>.1||t.duration>500)return;const e=new Cl;e.unproject(t.ncoords,this.camera),this.hoverController.preRender(e),Wx.send({type:"SELECT_ARTWORK",artworkId:this.hoverController.currentArtwork})},this.exploreUpdate=t=>{},this.exitExplore=()=>{this.scene.inputs.onTouchRemoved.off(this.onMouseClick)},this.enterPaintingEntry=()=>{Wx.send({type:"PAINTING_TRANSITION_COMPLETE"})},this.exitPaintingEntry=()=>{this.diveinEffect.reset()},this.root=new sp,this.postProcessing=new d_(t),this.lensflares=new T_(t),this.diveinEffect=new j_(t.gl),this.stateHelper=new Ns([{match:"museum_loading.outro",enter:this.enterLockedMode,exit:this.exitLockedMode},{match:"museum.intro",enter:this.enterLockedMode,exit:this.exitLockedMode},{match:"museum.explore",enter:this.enterExplore,exit:this.exitExplore,update:this.exploreUpdate},{match:"museum.toPainting",enter:this.enterPaintingEntry,exit:this.exitPaintingEntry}]),this.camera=zo["a"].makePerspectiveCamera()}onStateUpdate(t){}load(){return Promise.all([this.scene.loadMuseumScene(),this.lensflares.load()]).then()}unload(){this.scene.museumScene.unload()}start(){this.diveinEffect.reset(),this.scene.root.add(this.root),this.stateHelper.start(),this._startAbortController=new zm["a"]}stop(){this._startAbortController.abort(),this._startAbortController=null,this.scene.root.remove(this.root),this.stateHelper.stop()}preFrame(){}preRender(){this.scene.museumScene.preRender([this.camera]);const t=new Cl;t.unproject(this.scene.inputs.mouseCoords,this.camera),this.hoverController.preRender(t),$p.updateListener(this.camera._wmatrix)}render(){const t=this.scene.viewport.width,e=this.scene.viewport.height;this.camera.updateViewProjectionMatrix(t,e),this.postProcessing.bindFrameBuffer(t,e),this.scene.museumScene.render(this.camera),this.lensflares.render(this.camera),this.diveinEffect.active&&this.postProcessing.enabled?(this.postProcessing.blit(this.diveinEffect.fbo.width,this.diveinEffect.fbo.height,this.diveinEffect.fbo.fbo),this.diveinEffect.render(t,e)):this.postProcessing.blit(t,e)}renderUI(){}rttPass(){this.scene.museumScene.reflectPass([this.camera])}}const S_=Nt["vec3"].create(),C_=Nt["vec3"].create(),I_=Nt["vec3"].create(),P_=Nt["vec3"].create(),L_=Nt["vec3"].create();Nt["vec3"].create();function M_(t,e,s,i,n,o=null){t=Ii(t);let a=1-t;return Nt["vec3"].scale(C_,e,a*a*a),Nt["vec3"].scale(I_,s,3*a*a*t),Nt["vec3"].scale(P_,i,3*a*t*t),Nt["vec3"].scale(L_,n,t*t*t),null==o&&(o=Nt["vec3"].create()),Nt["vec3"].add(o,S_,C_),Nt["vec3"].add(o,o,I_),Nt["vec3"].add(o,o,P_),Nt["vec3"].add(o,o,L_),o}const k_=.3,N_=Nt["vec3"].create(),F_=Nt["vec3"].create(),B_=Nt["vec3"].create(),U_=Nt["vec3"].create(),H_=Nt["vec3"].create(),G_=Nt["vec3"].create(),V_=Nt["vec3"].create();class z_{constructor(t){this._segcount=30,this.start=Nt["vec3"].create(),this.end=Nt["vec3"].create(),this._vbuffer=new $s["a"](t,null,t.DYNAMIC_DRAW),this._ibuffer=new Qs["a"](t,t.UNSIGNED_SHORT),this._vbuffer.attrib("aPosition",3,t.FLOAT).attrib("aNextPosition",3,t.FLOAT).attrib("aPreviousPosition",3,t.FLOAT).attrib("aTexCoord",2,t.FLOAT),this._vdata=new Float32Array(2*this._segcount*11)}updateBezier(t,e,s,i,n){for(let o=this._segcount-1;o>=0;o--){const a=2*o*11,r=o/this._segcount;M_(r,t,e,s,i,N_),M_(Ii(r+1/this._segcount),t,e,s,i,F_),M_(Ii(r-1/this._segcount),t,e,s,i,B_),this._vdata.set(N_,a+0),this._vdata.set(F_,a+3),this._vdata.set(B_,a+6),this._vdata.set([0,.5*r+(n?.5:0)],a+9),this._vdata.set(N_,a+11),this._vdata.set(F_,a+14),this._vdata.set(B_,a+17),this._vdata.set([1,.5*r+(n?.5:0)],a+20)}this._vbuffer.data(this._vdata)}render(t,e){e.use(),e.tTexture(this.texture),e.uModelViewMatrix(t._view),e.uProjectionMatrix(t.lens.getProjection()),e.uResolution([.5*window.innerWidth,window.innerHeight]),e.uLineWidth(.015),this._vbuffer.bind(),this._vbuffer.attribPointer(e),this._vbuffer.drawTriangleStrip()}}class X_{constructor(t){this.navigation=t,this.scene=t.scene,this.targetNode=new vi["a"],this.targetNode.setScale(k_),this.cfg=this.scene.glstate.config(),this.cfg.enableDepthTest(!0).depthMask(!1).enableBlend(!0).blendFunc(this.scene.gl.ONE,this.scene.gl.ONE_MINUS_SRC_ALPHA),this.rayLine=new z_(this.scene.gl)}init(){this.navigation.resources.get("ray_line").bind(),this.navigation.resources.get("ray_line").clamp(),this.navigation.resources.get("ray_line").setFilter(!0,!1,!1),this.rayLine.texture=this.navigation.resources.get("ray_line")}preRender(){this.targetNode.position.set(this.navigation.target),this.targetNode.invalidate();const t=Nt["vec3"].sqrDist(this.navigation.ray.pos,this.navigation.target)/20,e=.3+1.5*t;U_.set(this.navigation.ray.pos),Nt["vec3"].scaleAndAdd(H_,this.navigation.ray.pos,this.navigation.forward,e),Nt["vec3"].scaleAndAdd(G_,this.navigation.target,this.navigation.normal,e),V_.set(this.navigation.target),this.rayLine.updateBezier(U_,H_,G_,V_,!this.navigation.hasTarget)}render(t){this.scene.glstate.push(this.cfg),this.scene.glstate.apply(),this.rayLine.render(t,this.scene.programs.get("unlit-texture-line")),this.scene.glstate.pop(),this.navigation.hasTarget&&this.navigation.targetRenderer.render(this.targetNode._wmatrix,t,1)}}const W_=Nt["vec3"].create(),q_=Nt["vec3"].fromValues(0,0,-1),Y_=Nt["vec3"].fromValues(0,0,-1),K_=Nt["quat"].create();Nt["quat"].rotateX(K_,K_,-Math.PI/5),Nt["vec3"].transformQuat(Y_,Y_,K_);const Z_=Nt["mat3"].create(),$_=Nt["quat"].create(),Q_=Nt["quat"].create(),J_=Nt["vec3"].create(),tb=Nt["vec3"].create();class eb{constructor(t){this.navigation=t,this.aiming=!1,this.ctrlhand="right",this._bound=!1,this._enabledControllers={left:!0,right:!0,none:!1},this._rotationEnabled=!0,this.onBtnDown=t=>{if(!this.aiming){if(this._enabledControllers.left)switch(t.name){case"Left/Down":case"Left/Up":case"Left/Right":case"Left/Left":this.navigation.active=!0,this.aiming=!0,this.ctrlhand="left";break;default:break}if(this._enabledControllers.right)switch(t.name){case"Right/Down":case"Right/Up":case"Right/Right":case"Right/Left":this.navigation.active=!0,this.aiming=!0,this.ctrlhand="right";break;default:break}if(this._rotationEnabled)switch(t.name){case"Left/Right":this.rotate(-Math.PI/5);break;case"Left/Left":this.rotate(Math.PI/5);break;default:break}}},this.xrmodule=t.xrmodule,this.rotation=Nt["quat"].create(),this._targetRotation=Nt["quat"].create(),this._tgtAngle=0}bind(){this._bound||(this._bound=!0,this.xrmodule.xrview.inputs.onBtnDown.on(this.onBtnDown))}unbind(){this._bound&&(this._bound=!1,this.xrmodule.xrview.inputs.onBtnDown.off(this.onBtnDown))}disableController(t){this._enabledControllers[t]=!1,this.ctrlhand==t&&this.aiming&&(this.navigation.active=!1,this.aiming=!0)}enableController(t){this._enabledControllers[t]=!0}disableRotation(){this._rotationEnabled=!1}enableRotation(){this._rotationEnabled=!0}rotate(t){const e=this.xrmodule.xrview.pose,s=Nt["quat"].create();Nt["quat"].rotateY(s,s,t);const i=Nt["mat4"].create();Nt["mat4"].fromQuat(i,s);const n=Nt["vec3"].fromValues(e.transform.position.x,0,e.transform.position.z),o=Nt["mat4"].create();Nt["mat4"].copy(o,this.navigation.xrmodule.xrroot._matrix),Nt["mat4"].translate(o,o,n),Nt["mat4"].multiply(o,o,i),Nt["vec3"].scale(n,n,-1),Nt["mat4"].translate(o,o,n),this.navigation.xrmodule.xrroot.setMatrix(o)}onStickRelease(){this.navigation.hasTarget&&this.aiming&&this.navigation.moveToTarget(),this.aiming=!1,this.navigation.active=!1}prepareRay(t){Nt["mat3"].fromMat4(Z_,this.xrmodule.gamepads.list.get(this.ctrlhand).skin._wmatrix),Nt["quat"].fromMat3($_,Z_),Nt["vec3"].transformQuat(t.dir,Y_,$_),Nt["vec3"].transformQuat(this.navigation.forward,q_,$_),Nt["vec3"].normalize(t.dir,t.dir),Nt["vec3"].normalize(this.navigation.forward,this.navigation.forward),t.pos.set(this.xrmodule.gamepads.list.get(this.ctrlhand).skin._wposition),Nt["vec3"].scaleAndAdd(t.pos,t.pos,t.dir,.05)}update(t){if(this.navigation.hasTarget||Nt["vec3"].scaleAndAdd(this.navigation.target,this.navigation.ray.pos,this.navigation.ray.dir,1),this.aiming){const t=Nt["vec2"].squaredLength(this.xrmodule.xrview.inputs.getAxes(this.ctrlhand));if(t<.1)return void this.onStickRelease();W_.set(this.navigation.ray.dir),W_[1]=0,Nt["vec3"].normalize(W_,W_),Nt["quat"].identity($_),Nt["quat"].rotateY($_,$_,Math.atan2(-W_[0],-W_[2]));const e=Math.atan2(-this.xrmodule.xrview.inputs.getAxes(this.ctrlhand)[0],-this.xrmodule.xrview.inputs.getAxes(this.ctrlhand)[1]);Nt["quat"].identity(Q_),Nt["quat"].rotateY(Q_,Q_,e),Nt["quat"].multiply(this._targetRotation,$_,Q_),this.navigation.renderer.targetNode.rotation.set(this._targetRotation)}}setPovDatas(t){const e=Nt["vec3"].create(),s=new Cl;s.pos.set(t.position),s.dir[1]=-1,this.navigation.navmesh.raycast(s,e),e[0]=t.position[0],e[2]=t.position[2];const i=Nt["quat"].create();i.set(t.rotation);const n=Nt["mat4"].create();Nt["mat4"].fromQuat(n,i);const o=Nt["mat4"].create();Nt["mat4"].fromRotationTranslation(o,i,e),Nh(J_,o),J_[1]=0,J_[0]*=-1,J_[2]*=-1,zh(n,tb,J_,Nt["vec3"].fromValues(0,1,0)),n[12]=o[12],n[13]=o[13],n[14]=o[14];const a=Nt["mat3"].create();Nt["mat3"].fromMat4(a,n),Nt["quat"].fromMat3(i,a),this.setTargetRotation(i),this.moveTo(e)}setTargetRotation(t){this._targetRotation.set(t)}reset(){Nt["quat"].identity(this._targetRotation),Nt["quat"].identity(this.rotation),this.moveTo(Nt["vec3"].create())}moveTo(t){Nt["quat"].invert($_,this.xrmodule.xrcamera.head.rotation);const e=Math.sqrt($_[3]*$_[3]+$_[1]*$_[1]);$_[0]=0,$_[1]=$_[1],$_[2]=0,$_[3]=$_[3]/e,this.rotation.set(this._targetRotation),Nt["quat"].multiply(this.rotation,this.rotation,$_);const s=Nt["vec3"].create();s.set(t);const i=Nt["mat4"].create(),n=this.xrmodule.xrview.pose.transform,o=Nt["vec3"].fromValues(n.position.x,0,n.position.z);s[0]=s[0]-o[0],s[2]=s[2]-o[2],Nt["mat4"].fromRotationTranslation(i,this.rotation,s),this.navigation.xrmodule.xrroot.setMatrix(i),this.navigation.xrmodule.xrroot.updateWorldMatrix()}}var sb=s("760c"),ib=s.n(sb),nb=s("3623"),ob=s.n(nb);class ab{constructor(t){this.gl=t,this.loaded=!1,this.quad=new Ds["a"](t),this.prg=new js["a"](t,ib()(),ob()()),this.glconfig=pr["a"].get(t).config().enableCullface(!1).enableDepthTest(!1).enableBlend().blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)}async load(){const t=new Pn(new nn(ri.resolve("assets/webgl/navigation-target.png")),this),e=await t.load();this.texture=e,this.loaded=!0}render(t,e,s){this.loaded&&(this.prg.use(),this.quad.attribPointer(this.prg),this.glconfig.apply(),this.prg.tTex(this.texture),this.prg.uMVP(e.getMVP(t)),this.prg.uColorValid(Mn),this.prg.uColorInvalid(Bn),this.prg.uValid(s),this.quad.render())}}class rb{constructor(t){this.xrmodule=t,this.offset=0,this.active=!1,this.scene=t.scene,this.ray=new Cl,this.target=Nt["vec3"].create(),this.normal=Nt["vec3"].create(),this.forward=Nt["vec3"].create(),this.renderer=new X_(this),this.xrctrl=new eb(this),this.onMove=new jt,this.resources=new Cn;const e=new nn(ri.resolve("assets/webgl/ray_line.png"));e.options={bbc:!1,flipY:!0,genMips:!1,wrap:Zi.CLAMP,filtering:$i.LINEAR},this.resources.add(new Pn(e,this.scene),"ray_line"),this.targetRenderer=new ab(this.scene.gl)}async load(){return this._loadPromise||(this._loadPromise=this._doLoad()),this._loadPromise}async _doLoad(){await this.resources.load(),await this.targetRenderer.load(),this.init()}init(){this.renderer.init(),this.scene.root.add(this.renderer.targetNode)}release(){this.xrctrl.unbind(),this.scene.root.remove(this.renderer.targetNode)}enable(){this.xrctrl.bind()}disable(){this.xrctrl.unbind()}preRender(){if(this.xrctrl.prepareRay(this.ray),this.hasTarget=!1,this.navmesh){const t=this.navmesh.raycast(this.ray,this.target,this.normal);t&&Nt["vec3"].scaleAndAdd(this.target,this.target,this.normal,this.offset),this.hasTarget=0!==t}this.xrctrl.update(this.xrmodule.scene.dt),this.renderer.preRender()}moveToTarget(){this.xrctrl.moveTo(this.target),this.xrmodule.tooltips.sync(),this.onMove.emit()}render(t){this.active&&this.renderer.render(t)}}class lb extends h_{constructor(t){super(t),this.dithering=new c_,this.setup.add(this.dithering)}}const cb=Object(E["G"])({pathProgress:0,xrpositionset:!1,xrposition:[0,0,0],xrrotation:[0,0,0,1]}),hb=Nt["vec3"].fromValues(0,0,22.8414);class db{constructor(t){this.scene=t,this.priority=0,this.onArtworkClicked=t=>{},this.enterLockedMode=()=>{cb.xrpositionset?(this.navigation.xrctrl.rotation.set(cb.xrrotation),this.navigation.xrctrl.moveTo(new Float32Array(cb.xrposition))):this.navigation.xrctrl.moveTo(hb)},this.exitLockedMode=()=>{},this.enterExplore=()=>{this.navigation.enable(),this.navigation.xrctrl.enableController("left"),this.navigation.xrctrl.enableController("right"),this.scene.xrmodule.tooltips.push("Right/Thumbstick","xr.teleport"),this.navigation.onMove.on(this.onTeleportOccur)},this.exitExplore=()=>{this.navigation.disable(),this.navigation.xrctrl.disableController("left"),this.navigation.xrctrl.disableController("right"),this.scene.xrmodule.tooltips.pop("Right/Thumbstick","xr.teleport"),this.navigation.onMove.off(this.onTeleportOccur)},this.onTeleportOccur=()=>{cb.xrposition=Array.from(this.navigation.target),cb.xrrotation=Array.from(this.navigation.xrctrl.rotation),cb.xrpositionset=!0,this.scene.xrmodule.tooltips.pop("Right/Thumbstick","xr.teleport")},this.enterPaintingEntry=()=>{Wx.send({type:"PAINTING_TRANSITION_COMPLETE"})},this.exitPaintingEntry=()=>{},this.postProcessing=new lb(t),this.stateHelper=new Ns([{match:"museum_loading.outro",enter:this.enterLockedMode,exit:this.exitLockedMode},{match:"museum.explore",enter:this.enterExplore,exit:this.exitExplore},{match:"museum.toPainting",enter:this.enterPaintingEntry,exit:this.exitPaintingEntry}])}onStateUpdate(t){}async load(){console.log("MuseumXRActivity.load()"),await Promise.all([this.scene.loadMuseumScene(),this.scene.loadXRModule()]).then(()=>{console.log("MuseumXRActivity.loaded()")}),this.navigation=new rb(this.scene.xrmodule),this.navigation.offset=.1,await Promise.all([this.navigation.load()])}unload(){}start(){this.stateHelper.start(),this._startAbortController=new zm["a"],this.scene.xrview.session.updateRenderState({depthNear:.05,depthFar:90})}stop(){this.stateHelper.stop(),this.scene.xrmodule.gamepads.restoreDefaultLightSetup(),this._startAbortController.abort(),this._startAbortController=null}preFrame(){}preRender(){this.scene.museumScene.preRender(this.scene.xrmodule.xrcamera.cameras),this.scene.xrmodule.preRender(),this.navigation.preRender(),$p.updateListener(this.scene.xrmodule.xrcamera.head._wmatrix)}render(){const t=this.scene.gl,e=this.scene.xrview.gllayer,s=this.scene.viewport.width,i=this.scene.viewport.height;t.bindFramebuffer(t.FRAMEBUFFER,e.framebuffer),t.clearColor(.1,0,0,1),t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT),this.postProcessing.bindFrameBuffer(s,i,e.framebuffer);for(const n of this.scene.xrmodule.xrcamera.cameras){const e=n.lens.viewport;t.viewport(e.x,e.y,e.width,e.height),this.scene.museumScene.render(n),this.scene.xrmodule.render(n),this.navigation.render(n)}this.postProcessing.blit(s,i,e.framebuffer)}renderUI(){}rttPass(){this.scene.museumScene.reflectPass(this.scene.xrmodule.xrcamera.cameras)}}class ub extends Um{createActivity(t){const e=Fm.getInstance().scene;return t?new db(e):new R_(e)}}const pb=new ub("museum");var gb,mb=pb;(function(t){t[t["MOUSE"]=0]="MOUSE",t[t["TOUCH"]=1]="TOUCH"})(gb||(gb={}));const _b=Nt["vec2"].create(),bb=Nt["quat"].create(),fb=Nt["quat"].create(),vb=Nt["quat"].create(),xb=Nt["mat4"].create(),Tb=Nt["mat4"].create(),Eb=Nt["vec3"].create(),wb=Nt["vec3"].create(),Ob=Nt["vec3"].create(),Ab=Nt["mat4"].create();function yb(t,e,s){Nh(wb,t),kh(Ob,t),wb[1]=0,wb[0]*=-1,wb[2]*=-1,zh(e,Eb,wb,Ob),e[12]=t[12],e[13]=t[13],e[14]=t[14],Nt["mat4"].invert(Ab,e),Nt["mat4"].multiply(s,Ab,t)}class Db{constructor(t){this.camctrl=t,this.currentTouch=null,this.rotations=Nt["vec2"].create(),this.lastFrameRotation=Nt["vec2"].create(),this.rotationsVelocity=Nt["vec2"].create(),this.startRotations=Nt["vec2"].create(),this._rotationMatrix=Nt["mat4"].create(),this.onStartLook=new jt,this.onEndLook=new jt,this.onTouchDown=t=>{this.onStartLook.emit(),this.startRotations.set(this.rotations),this.currentTouch=t,this.currentTouch.onEnd.on(this.onTouchUp)},this.onTouchUp=()=>{this.currentTouch=null,this.onEndLook.emit()}}start(){this.camctrl.activity.scene.inputs.onTouchAdded.on(this.onTouchDown)}stop(){this.currentTouch=null,this.camctrl.activity.scene.inputs.onTouchAdded.off(this.onTouchDown)}_storeVelocity(t){Nt["vec2"].sub(_b,this.rotations,this.lastFrameRotation),Nt["vec2"].length(_b)>0&&Nt["vec2"].scale(this.rotationsVelocity,_b,1/t)}update(t){if(this.lastFrameRotation.set(this.rotations),this.currentTouch){this.currentTouch.getDelta(_b);const e=_b[0]*this.camctrl.camera.lens._hfov*.5,s=_b[1]*this.camctrl.camera.lens._vfov*.5;this.rotations[0]=this.startRotations[0]+e,this.rotations[1]=this.startRotations[1]+s,this._storeVelocity(t)}else Nt["vec2"].scale(this.rotationsVelocity,this.rotationsVelocity,.9),Nt["vec2"].scaleAndAdd(this.rotations,this.rotations,this.rotationsVelocity,t)}attenuateRotations(t){this.rotations[0]*=t,this.rotations[1]*=t}getRotationMatrix(){return Nt["quat"].rotateY(fb,bb,this.rotations[0]),Nt["quat"].rotateX(vb,bb,-this.rotations[1]),Nt["quat"].multiply(fb,fb,vb),Nt["mat4"].fromQuat(this._rotationMatrix,fb),this._rotationMatrix}}class jb{constructor(t){this.camctrl=t,this.onPinchStart=new jt,this.onPinchUpdate=new jt,this.onPinchEnd=new jt,this._touches=[],this._tcount=0,this._sdelta=0,this._cdelta=0,this._delta=0,this.onTouchDown=t=>{const e=this.IsPinching;-1===this._touches.indexOf(t)&&this._tcount<2&&this._touches.push(t),this._tcount+=1,!e&&this.IsPinching&&this.startPinch()},this.onTouchMove=()=>{if(!this.IsPinching)return;this._cdelta=Nt["vec2"].distance(this._touches[0].ncoords,this._touches[1].ncoords);let t=this._cdelta-this._sdelta;t!=this._delta&&(this._delta=t,this.onPinchUpdate.emit()),this._delta=t},this.onTouchUp=t=>{const e=this._touches.indexOf(t),s=this.IsPinching;-1!==e&&(this._touches.splice(e,1),this._tcount-=1),s&&!this.IsPinching&&this.onPinchEnd.emit()}}get IsPinching(){return 2==this._tcount}start(){this.camctrl.activity.scene.inputs.onTouchAdded.on(this.onTouchDown),this.camctrl.activity.scene.inputs.onTouchMove.on(this.onTouchMove),this.camctrl.activity.scene.inputs.onTouchRemoved.on(this.onTouchUp)}stop(){this.camctrl.activity.scene.inputs.onTouchAdded.off(this.onTouchDown),this.camctrl.activity.scene.inputs.onTouchMove.off(this.onTouchMove),this.camctrl.activity.scene.inputs.onTouchRemoved.off(this.onTouchUp)}startPinch(){this.onPinchStart.emit(),this._sdelta=Nt["vec2"].distance(this._touches[0].ncoords,this._touches[1].ncoords)}getDelta(){return this._delta}}class Rb{constructor(t,e){this.activity=t,this.camera=e,this._active=!1,this._canMove=!0,this._moving=!1,this._storedZoom=.5,this._zoomValue=.5,this._canZoom=!1,this._defaultFOV=Math.PI/3,this._mixZoomProgress=0,this.dragRay=new Cl,this.pickingRay=new Cl,this.navmesh=null,this.onMove=new jt,this.hasTarget=!1,this.isNavigable=!0,this.target=Nt["vec3"].create(),this.normal=Nt["vec3"].create(),this.hasGuardTarget=!1,this.onTouchAdded=t=>{"mouse0"===t.nativeTouch.identifier.toString()?this._ctrlMode=gb.MOUSE:this._ctrlMode=gb.TOUCH,this._tdown=!0,this._touchMoved=!1},this.onTouchMove=()=>{this._touchMoved=!0},this.onTouchRemoved=t=>{"mouse0"===t.nativeTouch.identifier.toString()?this._ctrlMode=gb.MOUSE:this._ctrlMode=gb.TOUCH,this._tdown=!1,this._touchMoved||!this.hasTarget||this.hasGuardTarget||this._occluded||this.moveToTarget(),this._touchMoved=!1},this.onPinchStart=()=>{this.lookat.stop(),this._storedZoom=this.ZoomValue},this.onPinchUpdate=()=>{const t=Ii(this._storedZoom+this.pinch.getDelta());Wx.send({type:"UPDATE_POV_DATA",pov:{zoom:t}})},this.onPinchEnd=()=>{this.lookat.start()},this.updateIdleMatrix=()=>{this.lookat.attenuateRotations(0),this.camTransform.setMatrix(this.camera._matrix),this.camTransform.invalidate(),this.camTransform.updateWorldMatrix()},this._defaultFOV=this.camera.lens.fov,this.lookat=new Db(this),this.pinch=new jb(this),this.lookat.onStartLook.on(this.updateIdleMatrix),this.pinch.onPinchStart.on(this.onPinchStart),this.pinch.onPinchUpdate.on(this.onPinchUpdate),this.pinch.onPinchEnd.on(this.onPinchEnd),this.camTransform=new vi["a"],this.activity.scene.root.add(this.camTransform),this.floorPlane=new Il}get occluded(){return this._occluded}get Active(){return this._active}get CanMove(){return this._canMove}get Moving(){return this._moving}get ZoomValue(){return this._zoomValue}get CanZoom(){return this._canZoom}get CtrlMode(){return this._ctrlMode}get height(){return Wx.getSnapshot().context.povDatas.position[1]}updateHeight(t){this.camTransform.position[1]=t.position[1],this.camTransform.invalidate(),this.camTransform.updateWorldMatrix()}updatePovData(t){const e=Nt["vec3"].create();e.set(t.position);const s=Nt["quat"].create();s.set(t.rotation);const i=Nt["mat4"].create();Nt["mat4"].fromQuat(i,s);const n=Nt["mat4"].create();Nt["mat4"].fromRotationTranslation(n,s,e),Nh(wb,n),wb[1]*=-1,wb[0]*=-1,wb[2]*=-1,zh(i,Eb,wb,Nt["vec3"].fromValues(0,1,0)),i[12]=n[12],i[13]=n[13],i[14]=n[14];const o=Nt["mat3"].create();Nt["mat3"].fromMat4(o,i),Nt["quat"].fromMat3(s,o),this.camTransform.position.set(e),this.camTransform.rotation.set(s),this.camTransform.invalidate(),this.camTransform.updateWorldMatrix()}enable(){this._active||(this.activity.scene.inputs.onTouchAdded.on(this.onTouchAdded),this.activity.scene.inputs.onTouchMove.on(this.onTouchMove),this.activity.scene.inputs.onTouchRemoved.on(this.onTouchRemoved),this._active=!0,this.updateIdleMatrix(),this.lookat.start())}disable(){this._active&&(this.activity.scene.inputs.onTouchAdded.off(this.onTouchAdded),this.activity.scene.inputs.onTouchMove.off(this.onTouchMove),this.activity.scene.inputs.onTouchRemoved.off(this.onTouchRemoved),this.lookat.stop(),this.pinch.stop(),this._active=!1)}setOccluded(t){this._occluded=t}enableZoom(){this.pinch.start(),this._canZoom=!0,wt["a"].killTweensOf(this),wt["a"].to(this,{_mixZoomProgress:1,duration:.4,onUpdate:()=>this.applyZoom()})}disableZoom(){this.pinch.stop(),wt["a"].killTweensOf(this),wt["a"].to(this,{_mixZoomProgress:0,duration:.4,onUpdate:()=>this.applyZoom(),onComplete:()=>this.setZoom(.5)}),this._canZoom=!1}lockMove(){this._canMove=!1}unlockMove(){this._canMove=!0}setZoom(t){t!==this.ZoomValue&&this.CanZoom&&(this._zoomValue=t,this.applyZoom())}applyZoom(){const t=this.ZoomValue;let e=this.ZoomValue;t>=.5&&(e=1+2*(t-.5)),t<.5&&(e=.5+t);let s=Li(this._defaultFOV,this._defaultFOV/e,this._mixZoomProgress);this.camera.lens.setVerticalFov(s),this.camera.invalidate()}resetFOV(){this.camera.lens.setVerticalFov(this._defaultFOV)}raycastNavMesh(t){return this.pickingRay.unproject(t,this.camera),0!==this.navmesh.raycast(this.pickingRay,this.target,this.normal)}raycastPlane(t){return this.pickingRay.unproject(t,this.camera),Ll(this.target,this.pickingRay,this.floorPlane)}moveToTarget(){if(this._moving||!this.CanMove)return;$p.playUI("ui_click_move"),this._moving=!0,wt["a"].killTweensOf(this.camTransform);const t=[this.target[0],this.height,this.target[2]];wt["a"].to(this.camTransform,{x:t[0],y:t[1],z:t[2],duration:2,ease:"power2.inOut",onComplete:()=>{this._moving=!1,Wx.send({type:"UPDATE_POV_DATA",pov:{position:t}})}}),this.onMove.emit()}resolveRaycastCoords(){if(!this.Active)return!1;const t=this.activity.scene.inputs.touches.length>0,e=this.activity.scene.inputs.hasMouse;return e&&(this._castCoord=this.activity.scene.inputs.mouseCoords),t&&(this._castCoord=this.activity.scene.inputs.touches[0].ncoords),e||t}preRender(){this.hasTarget=!1,this.hasGuardTarget=!1,this.resolveRaycastCoords()&&(this.hasTarget=this.raycastNavMesh(this._castCoord),this.hasTarget||(this.hasGuardTarget=this.raycastPlane(this._castCoord),this.hasTarget=this.hasGuardTarget));const t=this.camera._matrix;t.set(this.camTransform._wmatrix),yb(t,xb,Tb),this.lookat.update(this.activity.scene.dt),Nt["mat4"].multiply(t,xb,this.lookat.getRotationMatrix()),Nt["mat4"].multiply(t,t,Tb),this.camera.setMatrix(t)}}const Sb=Nt["vec3"].create(),Cb=Nt["vec3"].create(),Ib=.3;class Pb{constructor(t){this.scene=t,this.isLightPosValid=!0,this._scale=1,this._active=!1,this._valid=1,this._lightValid=1,this.onCtrlMove=()=>{this._scale=1},this.cfg=this.scene.glstate.config(),this.cfg.enableDepthTest(!0).depthMask(!1).enableBlend(!0).blendFunc(this.scene.gl.ONE,this.scene.gl.ONE),this.targetNode=new sp,this.targetRenderer=new ab(this.scene.gl)}get Active(){return this._active}attachController(t){this._ctrl=t,this._ctrl.onMove.on(this.onCtrlMove)}async load(){return this._loadPromise||(this._loadPromise=this._doLoad()),this._loadPromise}async _doLoad(){await this.targetRenderer.load().then()}enable(){wt["a"].killTweensOf(this),wt["a"].to(this,{_scale:1,duration:.4,ease:"power2.out"}),this._active=!0}disable(){wt["a"].killTweensOf(this),wt["a"].to(this,{_scale:0,duration:.4,ease:"power2.out",onComplete:()=>{this._active=!1}})}preRender(){(!this._ctrl.hasTarget&&this.Active||!this._ctrl.CanMove||this._ctrl.CtrlMode===gb.MOUSE&&this._ctrl.Moving||this._ctrl.occluded)&&this.disable(),this._ctrl.hasTarget&&!this.Active&&this._ctrl.CanMove&&!this._ctrl.Moving&&this.enable(),this._valid+=5*this.scene.dt*(this._ctrl.hasGuardTarget?-1:1),this._valid=Ii(this._valid),this._lightValid+=5*this.scene.dt*(this.isLightPosValid?1:-1),this._lightValid=Ii(this._lightValid)}render(t){this.Active&&(this.targetNode.setScale(this._scale*Ib),this.targetNode.position.set(this._ctrl.target),this.targetNode.rotation.set(this._ctrl.camera.rotation),this.targetNode.rotation[0]=0,this.targetNode.rotation[2]=0,Nt["quat"].normalize(this.targetNode.rotation,this.targetNode.rotation),this.targetNode.invalidate(),this.targetNode.updateWorldMatrix(),this.targetRenderer.render(this.targetNode._wmatrix,t,this._valid))}renderTargetWithPosition(t,e,s){Sb.set(e),Cb.set(s),Sb[1]=.05,Cb[1]=.05;const i=this.targetNode._matrix;zh(i,Sb,Cb),Nt["mat4"].scale(i,i,[Ib,Ib,Ib]),this.targetNode.setMatrix(i),this.targetNode.updateWorldMatrix(),this.targetRenderer.render(this.targetNode._wmatrix,t,this._lightValid)}}var Lb,Mb=s("fcfb"),kb=s("a206");(function(t){t["SATURATION"]="saturation",t["CONTRAST"]="contrast",t["TEMPERATURE"]="temperature",t["BRIGHTNESS"]="brightness",t["NONE"]="none"})(Lb||(Lb={}));class Nb{constructor(t,e,s,i,n,o){this.id=t,this.min=e,this.max=s,this.mix=i,this.handler=n,this.property=o,this.active=!1,this._mtrans=0,this.onChange=new jt,this.defaultMix=i}setActive(t){this.active=t,this.onChange.emit(this.id)}setMix(t){this.mix=t,this.onChange.emit(this.id)}getValue(){let t=this.active?this.mix:this.defaultMix;return Li(this.min,this.max,t)}reset(){this.mix=this.defaultMix}}class Fb{constructor(t){this.post=t,this.active=!1,this.applySettings=t=>{this.post[this.list.get(t).handler][this.list.get(t).property]=this.list.get(t).getValue()},this.applyPovDatas=t=>{this.list.get(Lb.CONTRAST).setMix(t.contrast),this.list.get(Lb.BRIGHTNESS).setMix(t.brightness),this.list.get(Lb.SATURATION).setMix(t.saturation),this.list.get(Lb.TEMPERATURE).setMix(t.temperature)},this.list=new Map;const e=kx();this.addSettings(Lb.SATURATION,0,2,e.saturation,"saturation","amount"),this.addSettings(Lb.CONTRAST,.9,1.1,e.contrast,"contrast","contrast"),this.addSettings(Lb.BRIGHTNESS,.65,1.35,e.brightness,"contrast","brightness"),this.addSettings(Lb.TEMPERATURE,1,0,e.temperature,"temperature","temperature")}addSettings(t,e,s,i,n,o){const a=new Nb(t,e,s,i,n,o);a.onChange.on(this.applySettings),this.list.set(t,a),this.applySettings(t)}setActive(t){this.list.forEach(e=>{e.setActive(t)})}reset(){this.list.forEach(t=>{t.reset()})}}class Bb extends qm["b"]{constructor(){super(...arguments),this.temperature=6e3}release(){}init(){this.lut=new li["a"](this.post.gl,this.post.gl.RGB),this.lut.bind(),this.lut.clamp();const t=new Image;t.onload=()=>this.lut.fromImage(t),t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAECAYAAABGHzcFAAAACXBIWXMAAAsTAAALEwEAmpwYAAABU0lEQVRIicWUXXLoIAiFP0i6ym6xW6znPoiKxHRun8oMIz/nECWo6etT+AV+g3/EerFi4dtVchGzjHXAwe6u7oHxVMMXzzx8B66u7gtD5IZ6iZH4w+dKHAsd9cOfdQxhtAbfYq4StOETfouVnpNArfiRVwMFb6wtbLTip9jkCWCPo70uZX2zeYnfDo71vqxmJRvr5IqZYntM0WyjqD31CQJPOR3wKvhHLUhHLjhWfWX8QmIlmv0dvsVqyg7YH+h/KvcaO9bozRHMY2Nr7M1Xn/NYkXhvtrYPLt+y3dKPipgnvCV+S76z10Z93xkD3bZuS7Yf/dCOuVWeW09VZz+0BV5uZ25bBT/NQvql6J3m55ua7DnmWnEGXgfuSdM3xiEeL0LGHF6AcWvzjZft+5B3rR9zFq/U245bmJZpaWsjmXFT6itSjvV4e07gkxw/9p9y2NOQfxqv2veEg7DVAAAAAElFTkSuQmCC"}resize(t,e){}preRender(){}setupProgram(t){t.uTemperature(this.temperature),t.tTemperatureLUT(this.lut)}genCode(t,e){t.push("\n    uniform float uTemperature;\n    uniform sampler2D tTemperatureLUT;\n    #define LUMINANCE_PRESERVATION 0.9\n    #define EPSILON 1e-10\n\n    float saturate(float v) { return clamp(v, 0.0,       1.0);       }\n    vec2  saturate(vec2  v) { return clamp(v, vec2(0.0), vec2(1.0)); }\n    vec3  saturate(vec3  v) { return clamp(v, vec3(0.0), vec3(1.0)); }\n    vec4  saturate(vec4  v) { return clamp(v, vec4(0.0), vec4(1.0)); }\n\n    float Luminance(vec3 color)\n    {\n      float fmin = min(min(color.r, color.g), color.b);\n      float fmax = max(max(color.r, color.g), color.b);\n      return (fmax + fmin) / 2.0;\n    }\n    vec3 HUEtoRGB(float H)\n    {\n        float R = abs(H * 6.0 - 3.0) - 1.0;\n        float G = 2.0 - abs(H * 6.0 - 2.0);\n        float B = 2.0 - abs(H * 6.0 - 4.0);\n        return saturate(vec3(R,G,B));\n    }\n    \n    vec3 HSLtoRGB(in vec3 HSL)\n    {\n        vec3 RGB = HUEtoRGB(HSL.x);\n        float C = (1.0 - abs(2.0 * HSL.z - 1.0)) * HSL.y;\n        return (RGB - 0.5) * C + vec3(HSL.z);\n    }\n    vec3 RGBtoHCV(vec3 RGB)\n    {\n        // Based on work by Sam Hocevar and Emil Persson\n        vec4 P = (RGB.g < RGB.b) ? vec4(RGB.bg, -1.0, 2.0/3.0) : vec4(RGB.gb, 0.0, -1.0/3.0);\n        vec4 Q = (RGB.r < P.x) ? vec4(P.xyw, RGB.r) : vec4(RGB.r, P.yzx);\n        float C = Q.x - min(Q.w, Q.y);\n        float H = abs((Q.w - Q.y) / (6.0 * C + EPSILON) + Q.z);\n        return vec3(H, C, Q.x);\n    }\n    \n    vec3 RGBtoHSL(vec3 RGB)\n    {\n        vec3 HCV = RGBtoHCV(RGB);\n        float L = HCV.z - HCV.y * 0.5;\n        float S = HCV.y / (1.0 - abs(L * 2.0 - 1.0) + EPSILON);\n        return vec3(HCV.x, S, L);\n    }\n    "),e.push("\n    vec3 colorTempRGB = texture2D(tTemperatureLUT, vec2(uTemperature, 0.5)).rgb;\n    vec3 clcc = clamp( c, vec3(0.0), vec3(1.0));\n\n    float originalLuminance = Luminance(clcc);\n        \n    vec3 blended = clcc * colorTempRGB;\n    vec3 resultHSL = RGBtoHSL(blended);\n    vec3 luminancePreservedRGB = HSLtoRGB(vec3(resultHSL.x, resultHSL.y, originalLuminance));        \n\n    c = mix(blended, luminancePreservedRGB, LUMINANCE_PRESERVATION);\n\n    ")}}const Ub=!1;class Hb{constructor(t){if(this.scene=t,this._effectList=[],this.useMsaa=Ub,this.setup=new t_["a"](t.gl,!1),this.setup.enabled=!0,this.fetch=new e_["a"],this.setup.add(this.fetch),this.saturation=new Mb["a"](1),this.contrast=new kb["a"](1,1,1),this.temperature=new Bb,this.setup.add(this.saturation),this.setup.add(this.contrast),this.setup.add(this.temperature),this.settings=new Fb(this),this.useMsaa){this.msaa=new Wm(t.gl,2),this.setup.mainColor=this.msaa.blitFbo.getColorTexture(),this.setup.mainFbo=this.msaa.blitFbo;const e=this.msaa.getColorTexture();e.bind(),e.clamp().setFilter(!0,!1,!1)}}get enabled(){return this.setup.enabled}set enabled(t){this.setup.enabled=t}paneSetup(){}init(){}preRender(t,e){this.setup.preRender(t,e),this.useMsaa&&this.msaa.setSize(t,e)}bindColor(){this.useMsaa?(this.msaa.renderFbo.bind(),this.scene.gl.viewport(0,0,this.setup.renderWidth,this.setup.renderHeight),this.msaa.renderFbo.clear()):this.setup.bindColor()}render(t=0,e=0,s=this.setup.renderWidth,i=this.setup.renderHeight,n=null){const o=this.setup;if(!o.enabled)return;const a=o.gl;this.useMsaa&&this.msaa.blitMsaa();for(var r=0;r<o._effects.length;r++)o._effects[r].preRender();null!==n?a.bindFramebuffer(a.FRAMEBUFFER,n):a.bindFramebuffer(a.FRAMEBUFFER,null),a.clearColor(1,1,1,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.viewport(t,e,s,i),o._shaderInvalid&&o.buildProgram(),o.prg.use();for(r=0;r<o._effects.length;r++)o._effects[r].setupProgram(o.prg);this.useMsaa?o.prg.tInput(this.msaa.getColorTexture()):o.prg.tInput(o.mainColor),o.fillScreen(o.prg),a.bindFramebuffer(a.FRAMEBUFFER,null)}}const Gb=Object(E["G"])({frame:{x:0,y:0,width:0,height:0}}),Vb=Nt["vec3"].create();class zb{constructor(t){this.activity=t,this._isSnapPending=!1,this.camera=new zo["a"](new cl["a"]),this.camera.lens.setVerticalFov(55*Ci),this.camera.lens.near=.1,this.camera.lens.far=800,this._outputCVS=document.createElement("canvas"),this._outputCTX=this._outputCVS.getContext("2d")}generateBlob(t,e){const s=this._outputCVS,i=this._outputCTX;s.width=t.width,s.height=t.height,i.drawImage(t,0,0,t.width,t.height),i.scale(1,-1),s.toBlob(e,"image/jpeg",70)}updateCamera(t,e,s){this.camera.setMatrix(t._wmatrix),this.camera.updateWorldMatrix(),this.camera.lens.aspect=e/s;const i=Gb.frame,n=new Cl,o=Nt["vec3"].fromValues(2*((i.x+.5*i.width)/bg.windowWidth-.5),2*-((i.y+.5*i.height)/bg.windowHeight-.5),0);n.unproject(o,t),Vb.set(n.pos),Nt["vec3"].scale(n.dir,n.dir,1),Nt["vec3"].add(Vb,Vb,n.dir),this.camera.lookAt(Vb),this.camera.updateWorldMatrix();const a=Gb.frame.height,r=bg.windowHeight,l=t.lens.fov,c=a/r*l;this.camera.lens.setVerticalFov(1.025*c),this.camera.updateViewProjectionMatrix(e,s)}}const Xb=new Cl,Wb=new Il,qb=Nt["vec3"].create();class Yb{constructor(t,e){this.activity=t,this._light=null,this._editMode=!1,this._lookAtMode=!1,this.spotMaxRadius=5,this.spotMinRadius=1.6,this.onMoveTouchRemoved=t=>{if(!(t.getDeltaLength()>.05)&&this._light&&this._editMode){Xb.unproject(t.ncoords,this.activity.camera),Ll(qb,Xb,Wb);const e=Nt["vec2"].distance([0,0],[qb[0],qb[2]]);if(e>this.spotMinRadius&&e<this.spotMaxRadius){const t=Wx.state.context.selectedLightIndex,e=Wx.state.context.povDatas.lightDatas[t].position;this.moveTransition([qb[0],e[1],qb[2]])}}},this.onLookAtTouchRemoved=t=>{if(this._light&&this._lookAtMode){Xb.unproject(t.ncoords,this.activity.camera),Ll(qb,Xb,Wb);const e=Nt["vec2"].distance([0,0],[qb[0],qb[2]]);if(e<this.spotMinRadius){const t=Wx.state.context.selectedLightIndex,e=Wx.state.context.povDatas.lightDatas[t].lookat;this.targetTransition([qb[0],e[1],qb[2]])}}},this.scene=t.scene}setLight(t){this._light=t}async startMove(){this.scene.inputs.onTouchRemoved.on(this.onMoveTouchRemoved),await dn(1),this._editMode=!0}stop(){var t;this.scene.inputs.onTouchRemoved.off(this.onMoveTouchRemoved),this._editMode=!1,null===(t=this._posTween)||void 0===t||t.kill()}raycatsMoveZone(t,e){Xb.unproject(t,this.activity.camera),Ll(e,Xb,Wb);const s=Nt["vec2"].distance([0,0],[e[0],e[2]]);return s>this.spotMinRadius&&s<this.spotMaxRadius}raycatsLookatZone(t,e){Xb.unproject(t,this.activity.camera),Ll(e,Xb,Wb);const s=Nt["vec2"].distance([0,0],[e[0],e[2]]);return s<this.spotMinRadius}async startLookAt(){this.scene.inputs.onTouchRemoved.on(this.onLookAtTouchRemoved),await dn(1),this._lookAtMode=!0}stopLookAt(){var t;this.scene.inputs.onTouchRemoved.off(this.onLookAtTouchRemoved),this._lookAtMode=!1,null===(t=this._tgtTween)||void 0===t||t.kill()}moveTransition(t){var e;const s=Wx.state.context.selectedLightIndex,i=Wx.state.context.povDatas.lightDatas[s].position,n=Nt["vec3"].fromValues(i[0],i[1],i[2]);null===(e=this._posTween)||void 0===e||e.kill(),this._posTween=wt["a"].to(n,{0:t[0],1:t[1],2:t[2],duration:.5,ease:"power2.inOut",onUpdate:()=>{Wx.send("UPDATE_LIGHT_DATA",{light:{position:n}})}})}targetTransition(t){var e;const s=Wx.state.context.selectedLightIndex,i=Wx.state.context.povDatas.lightDatas[s].lookat,n=Nt["vec3"].fromValues(i[0],i[1],i[2]);null===(e=this._tgtTween)||void 0===e||e.kill(),this._tgtTween=wt["a"].to(n,{0:t[0],1:t[1],2:t[2],duration:.5,ease:"power2.inOut",onUpdate:()=>{Wx.send("UPDATE_LIGHT_DATA",{light:{lookat:n}})}})}render(t){if(this._editMode){const e=Wx.state.context.selectedLightIndex,s=Wx.state.context.povDatas.lightDatas[e].lookat;this.activity.camTarget.isLightPosValid=this.raycatsMoveZone(this.scene.inputs.nmouseCoords,qb),this.activity.camTarget.renderTargetWithPosition(t,qb,s)}if(this._lookAtMode){const e=Wx.state.context.selectedLightIndex,s=Wx.state.context.povDatas.lightDatas[e].position;this.activity.camTarget.isLightPosValid=this.raycatsLookatZone(this.scene.inputs.nmouseCoords,qb),this.activity.camTarget.renderTargetWithPosition(t,qb,s)}}}var Kb;(function(t){t["DEFAULT"]="default",t["RED"]="red",t["GREEN_RED"]="green_red",t["BLUE_PINK"]="blue_pink",t["SPOTLIGHT"]="spotlight",t["RAINBOW"]="rainbow"})(Kb||(Kb={}));const Zb={[Kb.DEFAULT]:{lightDatas:[{position:Nt["vec3"].fromValues(2.773,1.5,-.01741),lookat:Nt["vec3"].fromValues(-.898,1,.07351),hue:.21,saturation:0,intensity:1.4,isOn:!0},{position:Nt["vec3"].fromValues(-1.743,5,-.01001),lookat:Nt["vec3"].fromValues(.2383,2,-1.506),hue:.16,saturation:0,intensity:1.5,isOn:!0},{position:Nt["vec3"].fromValues(-3.191,2.5,3.56),lookat:Nt["vec3"].fromValues(-.04378,1.5,.1971),hue:.16,saturation:.12,intensity:.3,isOn:!0}],pose:"pose2",background:"bg0"},[Kb.RED]:{lightDatas:[{position:Nt["vec3"].fromValues(3.812,3,2.169),lookat:Nt["vec3"].fromValues(-.2718,1,-.3972),hue:0,saturation:.66,intensity:5,isOn:!0},{position:Nt["vec3"].fromValues(-2.635,.5,2.267),lookat:Nt["vec3"].fromValues(-.4785,1.5,.1321),hue:0,saturation:.61,intensity:3.8,isOn:!1},{position:Nt["vec3"].fromValues(2.679,1.5,4.098),lookat:Nt["vec3"].fromValues(.2419,2.5,-.1091),hue:1,saturation:.76,intensity:1.1,isOn:!1}],pose:"pose1",background:"bg3"},[Kb.GREEN_RED]:{lightDatas:[{position:Nt["vec3"].fromValues(-2.229,.5,1.217),lookat:Nt["vec3"].fromValues(-.6606,1.5,-.05731),hue:.43,saturation:.66,intensity:.8,isOn:!0},{position:Nt["vec3"].fromValues(1.671,.5,.04914),lookat:Nt["vec3"].fromValues(-.27,1.5,-.807),hue:0,saturation:.81,intensity:2,isOn:!0},{position:Nt["vec3"].fromValues(.5803,.5,-.9465),lookat:Nt["vec3"].fromValues(-.7707,1,.08112),hue:.44,saturation:.76,intensity:1,isOn:!1}],pose:"pose1",background:"bg2"},[Kb.BLUE_PINK]:{lightDatas:[{position:Nt["vec3"].fromValues(2.193,.5,.3419),lookat:Nt["vec3"].fromValues(.3092,1,.1139),hue:.61,saturation:.98,intensity:5,isOn:!0},{position:Nt["vec3"].fromValues(-2.88,.5,-.7016),lookat:Nt["vec3"].fromValues(.2946,1.5,-.3354),hue:.83,saturation:.6,intensity:3.8,isOn:!0},{position:Nt["vec3"].fromValues(-3.858,5,2.873),lookat:Nt["vec3"].fromValues(.2419,1,-.1091),hue:.49,saturation:0,intensity:4,isOn:!1}],pose:"pose1",background:"bg1"},[Kb.SPOTLIGHT]:{lightDatas:[{position:Nt["vec3"].fromValues(1.1,1.5,3.005),lookat:Nt["vec3"].fromValues(0,1,0),hue:.16,saturation:.2,intensity:.6,isOn:!1},{position:Nt["vec3"].fromValues(1.557,2,-.5616),lookat:Nt["vec3"].fromValues(-.1078,1.5,-.03208),hue:.61,saturation:.77,intensity:1.2,isOn:!0},{position:Nt["vec3"].fromValues(-1.36,3.5,.3648),lookat:Nt["vec3"].fromValues(0,1,0),hue:.16,saturation:.46,intensity:.6,isOn:!0}],pose:"pose3",background:"bg2"},[Kb.RAINBOW]:{lightDatas:[{position:Nt["vec3"].fromValues(.1766,2.5,1.79),lookat:Nt["vec3"].fromValues(-.08761,1,.4607),hue:.13,saturation:1,intensity:.9,isOn:!0},{position:Nt["vec3"].fromValues(1.415,3,.5951),lookat:Nt["vec3"].fromValues(.1248,1.5,.4088),hue:.84,saturation:1,intensity:1,isOn:!0},{position:Nt["vec3"].fromValues(1.461,.5,2.512),lookat:Nt["vec3"].fromValues(-.2694,2,.08973),hue:.49,saturation:1,intensity:.6,isOn:!0}],pose:"pose4",background:"bg0"}};class $b{static apply(t){Wx.send({type:"UPDATE_POV_DATA",pov:Zb[t]})}}const Qb=new Cl;Nt["vec3"].create();class Jb{constructor(t){this.scene=t,this.priority=0,this.loaded=!1,this._showSkybox=!1,this.lightClickRadius=.2,this.studioSetup=()=>{const t=Wx.state.context.povDatas,e=t=>`vec3.fromValues(${Array.from(t).map(t=>t.toPrecision(4)).join(",")})`,s=t=>`\n  {\n    position: ${e(t.position)},\n    lookat: ${e(t.lookat)},\n    hue: ${t.hue},\n    saturation: ${t.saturation},\n    intensity: ${t.intensity},\n    isOn: ${t.isOn},\n  }`,i=t.lightDatas.map(s).join(","),n=`{\n  lightDatas: [${i}],\n  pose: "${t.pose}",\n  background: "${t.background}",\n}`;return console.log(n),""},this.onTouchAdded=t=>{},this.onTouchRemoved=t=>{if(t.getDeltaLength()>.1)return;if(Wx.getSnapshot().matches("painting.edit_light"))return;Qb.unproject(t.ncoords,this.camera);const e=this.scene.paintingScene.raycastScene(Qb);switch(e.type){case"character":Wx.send("EDIT_POSE");break;case"wall":Wx.send("EDIT_BACKGROUND");break;case"light":Wx.send({type:"EDIT_LIGHT_MOVE",lightIndex:e.index});break;case"none":Wx.send("EXIT");break}},this.enterExplore=()=>{console.log("[PaintinActivity] enterExplore"),this.camCtrl.enable(),this.camCtrl.disableZoom(),this.postprocess.settings.setActive(!0),this.scene.inputs.onTouchAdded.on(this.onTouchAdded),this.scene.inputs.onTouchRemoved.on(this.onTouchRemoved)},this.exitExplore=()=>{this.camCtrl.disable(),this.scene.inputs.onTouchAdded.off(this.onTouchAdded),this.scene.inputs.onTouchRemoved.off(this.onTouchRemoved)},this.enterTutorial=()=>{console.log("[PaintinActivity] enterTutorial"),this.camCtrl.disable()},this.exitTutorial=()=>{this.camCtrl.enable()},this.enterLightEdition=()=>{this.camCtrl.enable(),this.camCtrl.lockMove(),this.scene.inputs.onTouchAdded.on(this.onTouchAdded),this.scene.inputs.onTouchRemoved.on(this.onTouchRemoved)},this.exitLightEdition=()=>{this.camCtrl.disable(),this.camCtrl.unlockMove(),this.scene.inputs.onTouchAdded.off(this.onTouchAdded),this.scene.inputs.onTouchRemoved.off(this.onTouchRemoved)},this.enterLightMoveEdition=t=>{console.log("[PaintinActivity] enterLightMoveEdition "+t.context.selectedLightIndex),this.setActiveLight(t),this.lightControl.startMove()},this.updateLightMoveEdition=t=>{"UPDATE_LIGHT_DATA"!==t.event.type?(console.log("[PaintinActivity] updateLightMoveEdition "+t.context.selectedLightIndex),this.lightControl.stop(),this.setActiveLight(t),this.lightControl.startMove()):console.log("[PaintinActivity] updateLightDatas",t.context.povDatas.lightDatas)},this.exitLightMoveEdition=()=>{console.log("[PaintinActivity] exitLightMoveEdition"),this.lightControl.stop()},this.enterLightLookatEdition=t=>{console.log("[PaintinActivity] enterLightLookatEdition "+t.context.selectedLightIndex),this.setActiveLight(t),this.lightControl.startLookAt()},this.exitLightLookatEdition=()=>{console.log("[PaintinActivity] exitLightLookatEdition"),this.lightControl.stopLookAt()},this.updateLightLookatEdition=t=>{"UPDATE_LIGHT_DATA"===t.event.type&&console.log("[PaintinActivity] updateLightDatas",t.context.povDatas.lightDatas)},this.updateLightSettingsEdition=t=>{"UPDATE_LIGHT_DATA"===t.event.type&&console.log("[PaintinActivity] updateLightDatas",t.context.povDatas.lightDatas)},this.enterPhoto=()=>{console.log("[PaintinActivity] enterPhoto"),this.removeHighlights(),this.camCtrl.enable(),this.camCtrl.enableZoom(),this.camCtrl.lockMove(),this.postprocess.settings.setActive(!0)},this.exitPhoto=()=>{this.camCtrl.disable(),this.camCtrl.unlockMove()},this.enterSnapshot=()=>{this.removeHighlights(),console.log("[PaintinActivity] enterSnapshot"),Wx.send("UPDATE_POV_DATA",{pov:{position:Array.from(this.camera.position),rotation:Array.from(this.camera.rotation),contrast:this.postprocess.settings.list.get(Lb.CONTRAST).mix,brightness:this.postprocess.settings.list.get(Lb.BRIGHTNESS).mix,saturation:this.postprocess.settings.list.get(Lb.SATURATION).mix,temperature:this.postprocess.settings.list.get(Lb.TEMPERATURE).mix,zoom:this.camCtrl.ZoomValue}}),this.createSnapshot()},this.enterPreview=()=>{console.log("[PaintinActivity] enterPreview"),this.postprocess.settings.setActive(!0)},this.exitPreview=()=>{},this.enterShare=()=>{console.log("[PaintinActivity] enterShare"),this.postprocess.settings.setActive(!0)},this.exitShare=()=>{},this._camera=zo["a"].makePerspectiveCamera(),this._camera.lens.setVerticalFov(Math.PI/3.5),this._camera.lens.near=.025,this._camera.lens.far=50,this.stateHelper=new Ns([{match:"painting.explore.default",enter:this.enterExplore,exit:this.exitExplore},{match:"painting.explore.tutorial",enter:this.enterTutorial,exit:this.exitTutorial},{match:"painting.edit_light",enter:this.enterLightEdition,exit:this.exitLightEdition},{match:"painting.edit_light.move",enter:this.enterLightMoveEdition,exit:this.exitLightMoveEdition,update:this.updateLightMoveEdition},{match:"painting.edit_light.lookat",enter:this.enterLightLookatEdition,exit:this.exitLightLookatEdition,update:this.updateLightLookatEdition},{match:"painting.edit_light.settings",update:this.updateLightSettingsEdition},{match:"painting.photo",enter:this.enterPhoto,exit:this.exitPhoto},{match:"painting.snapshot",enter:this.enterSnapshot},{match:"painting.share.preview",enter:this.enterPreview,exit:this.exitPreview},{match:"painting.share.select",enter:this.enterShare,exit:this.exitShare}]),this.lightControl=new Yb(this),document.addEventListener("keydown",t=>{switch(t.code){case"Digit1":Wx.send({type:"EDIT_LIGHT",lightIndex:0});break;case"Digit2":Wx.send({type:"EDIT_LIGHT",lightIndex:1});break;case"Digit3":Wx.send({type:"EDIT_LIGHT",lightIndex:2});break}}),window.studioSetup=this.studioSetup}get camera(){return this._camera}async load(){this.loaded||(this.postprocess=new Hb(this.scene),this.postprocess.init(),this.postprocess.settings.setActive(!0),this.camTarget=new Pb(this.scene),await Promise.all([this.scene.loadPaintingScene(),this.camTarget.load()]),this.snapshot=new zb(this),this.camCtrl=new Rb(this,this._camera),this.camCtrl.navmesh=this.scene.paintingScene.navmesh,this.camTarget.attachController(this.camCtrl),this.lightControl.setLight(this.scene.paintingScene.lights._lights[0]),$b.apply(Kb.DEFAULT),this.loaded=!0)}unload(){this.postprocess=null,this.camCtrl=null,this.snapshot=null,this.camTarget=null,this.loaded=!1}start(){this.scene.root.add(this._camera),this.stateHelper.start(),this.camCtrl.updatePovData(Wx.state.context.povDatas)}stop(){this.camCtrl.resetFOV(),this.camCtrl.disable(),this.scene.root.remove(this._camera),this.stateHelper.stop()}onStateUpdate(t){t.matches("painting.explore")&&console.log("[PaintingActivity] explore"),t.matches("painting.explore.tutorial")&&console.log("[PaintingActivity] tutorial "),t.matches("painting.settings")&&console.log("[PaintingActivity] settings"),console.log("[PaintingActivity] state bg",t.context.povDatas.background),this.scene.paintingScene.setCurrentBg(t.context.povDatas.background),this.scene.paintingScene.setCurrentPose(t.context.povDatas.pose),this.camCtrl.updateHeight(Wx.state.context.povDatas)}setActiveLight(t){const e=t.context.selectedLightIndex;this.lightControl.setLight(this.scene.paintingScene.lights._lights[e])}preFrame(){if(this.snapshotDefered){const t=this.scene.gl;pr["a"].get(t).apply();const e=Lx[Wx.state.context.povDatas.format].width,s=Lx[Wx.state.context.povDatas.format].height;this.snapshot.updateCamera(this._camera,e,s);const i=this.snapshot.camera,n=this.scene.glview.canvas.width,o=this.scene.glview.canvas.height;this.scene.glview.canvas.width=e,this.scene.glview.canvas.height=s,this.postprocess.setup.enabled?(this.postprocess.preRender(e,s),this.postprocess.bindColor()):t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,e,s),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.scene.paintingScene.render(i,!0,!1),this.scene.glstate.apply(),this.postprocess.render(0,0,e,s,null),this.snapshot.generateBlob(this.scene.glview.canvas,this.snapshotDefered.resolve),this.snapshotDefered=null,this.scene.glview.canvas.width=n,this.scene.glview.canvas.height=o}}preRender(){this.camCtrl.preRender(),this.camTarget.preRender(),this.postprocess.settings.applyPovDatas(Wx.state.context.povDatas),this.camCtrl.setZoom(Wx.state.context.povDatas.zoom),this.scene.paintingScene.preRender(),this._camera.updateViewProjectionMatrix(this.scene.glview.width,this.scene.glview.height),$p.updateListener(this._camera._wmatrix),this.hightightHovered()}hightightHovered(){if(Wx.getSnapshot().matches("painting.edit_light")||Wx.getSnapshot().matches("painting.photo")||Wx.getSnapshot().matches("painting.snapshot")||Wx.getSnapshot().matches("painting_loading"))return;if(xg.isMobile)return;Qb.unproject(this.scene.inputs.nmouseCoords,this.camera);const t=this.scene.paintingScene.raycastScene(Qb);this.scene.paintingScene.highlightCharacter("character"===t.type),this.scene.paintingScene.highlightWall("wall"===t.type),this.camCtrl.setOccluded("none"!==t.type);const e="light"===t.type?t.index:null;Wx.state.context.hoveredLightIndex!==e&&Wx.send("HOVER_LIGHT",{lightIndex:e})}removeHighlights(){this.scene.paintingScene.highlightCharacter(!1),this.scene.paintingScene.highlightWall(!1)}render(){const t=this.scene.glview.width,e=this.scene.glview.height,s=this.scene.gl;s.clearColor(.01,.01,.01,1),this.postprocess.setup.enabled?(this.postprocess.preRender(t,e),this.postprocess.bindColor()):(s.bindFramebuffer(s.FRAMEBUFFER,null),s.viewport(0,0,t,e),s.clear(s.DEPTH_BUFFER_BIT|s.COLOR_BUFFER_BIT)),this.scene.paintingScene.render(this.camera,!1,!1),this.camTarget.render(this.camera),this.lightControl.render(this.camera),this.scene.glstate.apply(),this.postprocess.render(0,0,t,e,null),this.scene.enableDebugDraw&&ng.render(this.camera,[0,0,t,e])}rttPass(){this.scene.paintingScene.rttPass()}async createSnapshot(){this.snapshotDefered=new Bt;const t=await this.snapshotDefered.promise;Wx.send({type:"SNAPSHOT_READY",media:{blob:t,url:"",loaded:!1,artworkId:""}})}}var tf=s("2293"),ef=s.n(tf),sf=s("29a6"),nf=s.n(sf);const of=Nt["vec3"].create(),af=Nt["vec3"].create(),rf=Nt["vec3"].create(),lf=Nt["vec3"].create(),cf=Nt["mat4"].create(),hf=Nt["mat4"].create(),df=Nt["vec4"].create(),uf=Nt["vec4"].fromValues(0,0,0,1),pf=.15;class gf{constructor(t){this.snapshot=t,this.wposition=Nt["vec3"].create(),this.scale=Nt["vec2"].fromValues(1,1),this._scale=Nt["vec2"].create(),this._scaleX=1,this._scaleY=1,this._offsetY=0,this._scaleMode=Nt["vec4"].create(),this._landscape=0,this._square=0,this._portrait=0,this.processMode=0;const e=this.snapshot.scene;this.node=new vi["a"],this.quad=new Ds["a"](e.gl,.5*-pf,.5*-pf,pf,pf),this.prg=new js["a"](e.gl,ef()(),nf()(),e.programs.getGlobalDefinitions()),this.cfg=e.glstate.config(),this.cfg.enableBlend(!0).enableDepthTest(!0).blendFunc(e.gl.ONE,e.gl.ONE),this.cfgPreview=e.glstate.config(),this.cfgPreview.enableBlend(!1).enableDepthTest(!0).depthMask(!0)}get Rect(){return{x:-.5*this.scale[0]*pf,y:-.5*this.scale[1]*pf,width:this.scale[0]*pf,height:this.scale[1]*pf}}init(){this.snapshot.xrmodule.gamepads.list.get("right").skin.add(this.node),this.node.y=.135,this.node.z=-.3*pf}unload(){this.snapshot.xrmodule.gamepads.list.get("right").skin.remove(this.node)}setScale(t,e){this.scale.set(t),wt["a"].to(this,{_scaleX:this.scale[0],_scaleY:this.scale[1],_offsetY:(this.scale[1]-1)*pf*.5,_landscape:"landscape"==e?1:0,_square:"square"==e?1:0,_portrait:"portrait"==e?1:0,duration:.25,onUpdate:()=>{this.node.y=.135+this._offsetY,this._scaleMode[0]=this._landscape,this._scaleMode[1]=this._square,this._scaleMode[2]=this._portrait}})}setFrameTexture(t){this._frameTex=t}getFOV(t){const e=Nt["vec3"].create();return e[1]=this.Rect.height/2,Nt["vec3"].transformMat4(e,e,this.node._wmatrix),af.set([0,0,0]),Nt["vec3"].transformMat4(af,af,this.node._wmatrix),Nt["vec3"].sub(rf,e,t),Nt["vec3"].sub(lf,af,e),2*Math.atan(Nt["vec3"].length(lf)/Nt["vec3"].length(rf))}getTarget(){return this.wposition}preRender(){Nt["vec3"].transformMat4(this.wposition,of,this.node._wmatrix)}render(t){this.prg.use();const e=t;Nt["mat4"].copy(cf,this.node._wmatrix),Nt["mat4"].multiply(cf,e._view,cf),Nt["vec4"].transformMat4(df,uf,cf),Nt["mat4"].copy(hf,e.lens.getProjection()),this.prg.uV4Model(df),this.prg.uProjection(hf),this.prg.tTex(this.snapshot.HasSnapshot?this.snapshot.Texture:this._frameTex);const s=.5*(Math.sin(12*this.snapshot.scene.time)+1)-.5;this.prg.uProcessMode(s*this.processMode*.4),this._scaleMode[3]=this.snapshot.HasSnapshot?0:1,this._scale[0]=this._scaleX,this._scale[1]=this._scaleY,this.prg.uScale(this._scale),this.prg.uScaleMode(this._scaleMode),this.quad.bind(),this.quad.attribPointer(this.prg),this.snapshot.scene.glstate.push(this.snapshot.HasSnapshot?this.cfgPreview:this.cfg),this.snapshot.scene.glstate.apply(),this.quad.render(),this.snapshot.scene.glstate.pop()}}const mf=1,_f=["landscape","square","portrait"],bf={landscape:{scale:Nt["vec2"].fromValues(1.33333,1)},square:{scale:Nt["vec2"].fromValues(1,1)},portrait:{scale:Nt["vec2"].fromValues(1,1.33333)}};class ff{constructor(t,e){this.xrmodule=t,this.activity=e,this._isSnapPending=!1,this._enabled=!1,this._hasSnapshot=!1,this._currentFormat="landscape",this._sizeIdx=0,this._canSnapshot=!1,this.resources=new Cn,this.fbo=new nh["a"](this.scene.gl),this.fbo.attachColor(),this.fbo.attachDepth(),this.fbo.resize(this.width,this.height),this.camera=new zo["a"](new cl["a"]),this.camera.lens.setVerticalFov(55*Ci),this.camera.lens.near=.1,this.camera.lens.far=1e3;const s=new nn(ri.resolve("assets/webgl/photo_frame_x2.png"));s.options={bbc:!1,flipY:!0,genMips:!1,wrap:Dn.CLAMP,filtering:$i.LINEAR};const i=new Pn(s,this.scene);this.resources.add(i,"photo-frame"),this.xrframe=new gf(this),this.xrframe.setScale(this.scale,this._currentFormat),this.blitCfg=this.scene.glstate.config(),this.blitCfg.enableDepthTest(!1).enableBlend(!1).enableCullface(!1)}get scale(){return bf[this._currentFormat].scale}get width(){return Lx[this._currentFormat].width}get height(){return Lx[this._currentFormat].height}get Texture(){return this.fbo.getColorTexture()}get HasSnapshot(){return this._hasSnapshot}get Enabled(){return this._enabled}get CanSnapshot(){return this._canSnapshot}get CurrentFormat(){return this._currentFormat}get scene(){return this.xrmodule.scene}async load(){return this._loadPromise||(this._loadPromise=this._doLoad()),this._loadPromise}unload(){this.xrframe.unload()}async _doLoad(){await this.resources.load(),this.init()}init(){this.resources.get("photo-frame").setFilter(!0,!1,!0),this.xrframe.setFrameTexture(this.resources.get("photo-frame")),this.xrframe.init(),this.xrmodule.xrcamera.head.add(this.camera)}enable(){this._enabled=!0}disable(){this._enabled=!1,this._canSnapshot=!1,this.xrmodule.tooltips.pop("Right/Trigger",""),this.xrmodule.tooltips.pop("Right/Thumbstick",""),this.xrmodule.tooltips.pop("Right/Squeeze",""),this.clear()}changeSize(){this.clear(),this._sizeIdx+=1,this._sizeIdx=this._sizeIdx%_f.length,this._currentFormat=_f[this._sizeIdx],Wx.send("UPDATE_POV_DATA",{pov:{format:this._currentFormat}}),this.xrframe.setScale(bf[this._currentFormat].scale,this._currentFormat),this.fbo.resize(this.width,this.height)}clear(){this._hasSnapshot=!1}snap(){if(!this._canSnapshot)return;this.xrmodule.Inputs.getInput("right").gamepad.pulse(1,100);this.xrmodule.xrcamera.cameras[0],this.xrmodule.xrcamera.cameras[1];const t=this.xrmodule.xrcamera.cameras[1],e=Nt["mat4"].create();Nt["mat4"].invert(e,t._wmatrix);const s=Nt["vec3"].create();Nt["vec3"].transformMat4(s,this.xrframe.getTarget(),e),this.camera.lookAt(s),this.camera.lens.aspect=this.width/this.height,this.camera.lens.setVerticalFov(this.xrframe.getFOV(t._wposition)),this.camera.updateWorldMatrix(),this.camera.updateViewProjectionMatrix(this.width,this.height),this.activity.renderSnapshot(this.camera,this.fbo),this._hasSnapshot=!0,this.xrmodule.tooltips.pop("Right/Trigger",""),this.xrmodule.tooltips.pop("Right/Thumbstick",""),this.xrmodule.tooltips.pop("Right/Squeeze",""),this._canSnapshot=!1}snapshotToBlob(){wt["a"].killTweensOf(this.xrframe,"processMode"),this.xrframe.processMode=1;const t=Lx[Wx.state.context.povDatas.format].width,e=Lx[Wx.state.context.povDatas.format].height,s=this.scene.glview.canvas.width,i=this.scene.glview.canvas.height;this.scene.glview.canvas.width=t,this.scene.glview.canvas.height=e;const n=this.scene.gl;n.bindFramebuffer(n.FRAMEBUFFER,null),n.viewport(0,0,t,e),n.clearColor(1,1,1,1),n.clear(n.DEPTH_BUFFER_BIT|n.COLOR_BUFFER_BIT);const o=this.scene.programs.get("blit");o.use(),o.tTex(this.fbo.getColorTexture()),this.scene.quad.bind(),this.scene.quad.attribPointer(o),this.scene.glstate.push(this.blitCfg),this.scene.glstate.apply(),this.scene.quad.render(),this.scene.glstate.pop();const a=new Promise(t=>{this.scene.glview.canvas.toBlob(e=>{wt["a"].to(this.xrframe,{processMode:0,duration:.4}),t(e)},"image/jpeg",70)});return this.scene.glview.canvas.width=s,this.scene.glview.canvas.height=i,a}preRender(){if(!this._enabled)return;this.xrframe.preRender();const t=Nt["vec3"].dist(this.camera._wposition,this.xrframe.wposition)<mf;this.HasSnapshot||(t&&!this._canSnapshot&&(this.xrmodule.tooltips.push("Right/Trigger",""),this.xrmodule.tooltips.push("Right/Thumbstick",""),this.xrmodule.tooltips.push("Right/Squeeze","")),!t&&this._canSnapshot&&(this.xrmodule.tooltips.pop("Right/Trigger",""),this.xrmodule.tooltips.pop("Right/Thumbstick",""),this.xrmodule.tooltips.pop("Right/Squeeze","")),this._canSnapshot=t)}render(t){(this.HasSnapshot||this._enabled&&this._canSnapshot)&&this.xrframe.render(t)}}class vf{constructor(t){this.scene=t,this.alpha=0,this.color=Nt["vec4"].fromValues(0,0,0,0),this.prg=t.programs.get("fader"),this.cfg=t.glstate.config();const e=t.gl;this.cfg.enableDepthTest(!1).enableBlend(!0).blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA)}reset(){this.alpha=0}set(t){this.alpha=t}fadeIn(t=1){return new Promise(e=>{wt["a"].to(this,{alpha:t,duration:1.2,onComplete:e})})}fadeOut(){return new Promise(t=>{wt["a"].to(this,{alpha:0,duration:1.2,onComplete:t})})}preRender(){}render(t){0!=this.alpha&&(this.color[3]=this.alpha,this.prg.use(),this.prg.uColor(this.color),this.cfg.enableBlend(1!==this.alpha),this.scene.glstate.push(this.cfg),this.scene.glstate.apply(),this.scene.quad.bind(),this.scene.quad.attribPointer(this.prg),this.scene.quad.render(),this.scene.glstate.pop())}}const xf=[0,3,2,0,1,3],Tf=[-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0];class Ef{constructor(t,e,s){this.ui=t,this._txtKey=e,this.variant=s,this._isHover=!1,this._hoverProgress=0,this._txtAlpha=0,this._scaleX=0,this._scaleY=0,this._padding=Nt["vec2"].fromValues(.2,.15),this._clickButton=null,this.node=new vi["a"],s?(this._bgIdleColor=kn,this._txtIdleColor=Mn,this._borderIdleColor=Mn,this._bgHoverColor=Mn,this._txtHoverColor=kn,this._borderHoverColor=Mn):(this._bgIdleColor=Mn,this._txtIdleColor=Nn,this._borderIdleColor=Nn,this._bgHoverColor=Fn,this._txtHoverColor=Nn,this._borderHoverColor=Nn),this._bgColor=Nt["vec3"].create(),this._txtColor=Nt["vec4"].create(),this._borderColor=Nt["vec4"].create(),this._bgColor.set(this._bgIdleColor),this._txtColor.set(this._txtIdleColor),this._borderColor.set(this._borderIdleColor),this.pickable=new eo(this.node,xf,Tf,!0),this._castPos=Nt["vec3"].create(),this._txtRenderInfo=this.ui.textRenderer.texts.get(this._txtKey),this.onClick=new jt,this.onHoverStart=new jt,this.onHoverStop=new jt}get Padding(){return this._padding}get Width(){return this._txtRenderInfo.width+2.5*this._padding[0]}get ClickButton(){return this._clickButton}isHover(){return this._isHover}setPadding(t,e){this._padding[0]=t,this._padding[1]=e}updateRect(){if(!this._txtRenderInfo)return;const t=this._txtRenderInfo.width+2*this._padding[0],e=this._txtRenderInfo.height+this._padding[1];this.pickable.vertices=[-.5*t,-e,0,.5*t,-e,0,-.5*t,e,0,.5*t,e,0]}show(t=0){wt["a"].to(this,{_scaleX:1,duration:.6,delay:t,ease:"power2.out"}),wt["a"].to(this,{_scaleY:1,duration:.2,delay:t,ease:"power2.out"}),wt["a"].to(this,{_txtAlpha:1,duration:.4,delay:t+.2,ease:"power2.out"})}hide(t=0){wt["a"].to(this,{_scaleX:0,duration:.6,delay:t,ease:"power2.out"}),wt["a"].to(this,{_scaleY:0,duration:.2,delay:t+.4,ease:"power2.out"}),wt["a"].to(this,{_txtAlpha:0,duration:.4,delay:t,ease:"power2.out"})}click(t=null){this._clickButton=t,this.onClick.emit(this)}raycastList(t){this.updateRect();let e=0,s=0;for(let n=0;n<t.length;n++){const i=this.pickable.raycast(t[n],this._castPos);0!=i&&(e=i,s=n)}const i=0!=e;return this._isHover&&!i&&(wt["a"].to(this,{_hoverProgress:0,duration:.3}),this.onHoverStop.emit(this)),!this._isHover&&i&&(wt["a"].to(this,{_hoverProgress:1,duration:.3}),this.onHoverStart.emit(this)),this._isHover=0!=e,s}raycast(t){this.updateRect();const e=this.pickable.raycast(t,this._castPos),s=0!=e;this._isHover&&!s&&(wt["a"].to(this,{_hoverProgress:0,duration:.3}),this.onHoverStop.emit(this)),!this._isHover&&s&&(wt["a"].to(this,{_hoverProgress:1,duration:.3}),this.onHoverStart.emit(this)),this._isHover=0!=e}render(t){0!==this._scaleX&&(Nt["vec3"].lerp(this._bgColor,this._bgIdleColor,this._bgHoverColor,this._hoverProgress),Nt["vec4"].lerp(this._txtColor,this._txtIdleColor,this._txtHoverColor,this._hoverProgress),Nt["vec4"].lerp(this._borderColor,this._borderIdleColor,this._borderHoverColor,this._hoverProgress),this._txtColor[3]=this._txtAlpha,this.ui.solidPrimitives.renderBtn(t,this.node,(this._txtRenderInfo.width+this._padding[0])*this._scaleX,(this._txtRenderInfo.height+this._padding[1])*this._scaleY,.9*this._txtRenderInfo.height*.333,this._bgColor,this._borderColor),this.ui.textRenderer.render(this._txtKey,this.node._wmatrix,this._txtColor))}}const{t:wf}=o.global,Of=Nt["vec3"].fromValues(0,0,1),Af=Nt["vec3"].create(),yf=Nt["vec3"].create(),Df=Nt["mat4"].create(),jf=Nt["mat3"].create(),Rf=Nt["quat"].create(),Sf=[{hand:"left",key:"xr.tuto_settings_left"},{hand:"right",key:"xr.tuto_aim_photo"},{hand:"right",key:"xr.tuto_format_photo"},{key:"xr.angle_of_view"}];class Cf{constructor(t){this.activity=t,this.step=0,this.active=!1,this._complete=!1,this._time=0,this.next=()=>{this.step+=1,this.step!=Sf.length?this.applyStep():this.stop()},this.skip=()=>{this.step=Sf.length,this.stop()};const e=t.xrmodule;this.label=new nm(e.ui),this.label.setPadding(.35,.35),this._fader=new vf(t.scene),this.nextBtn=new Ef(this.xrmodule.ui,"xr.next"),this.nextBtn.onClick.on(this.next),this.skipBtn=new Ef(this.xrmodule.ui,"xr.skip"),this.skipBtn.onClick.on(this.skip),this.title=t.xrmodule.ui.textLib.createUIText(),this.title.setStyle({fontSize:.15,center:!0}),this.title.color=Nt["vec4"].fromValues(Mn[0],Mn[1],Mn[2],1),this.node=new vi["a"],this.node.add(this.label.node),this.node.add(this.title.node),this.node.add(this.nextBtn.node),this.node.add(this.skipBtn.node),this.label.node.z=0,this.label.node.y=.1,this.title.node.z=0,this.title.node.y=.75,this.nextBtn.node.y=-1,this.skipBtn.node.y=-1,this.nextBtn.node.x=1.5*-this.xrmodule.ui.textRenderer.texts.get("xr.next").width,this.skipBtn.node.x=1.5*this.xrmodule.ui.textRenderer.texts.get("xr.skip").width,this._deffered=new Bt}get xrmodule(){return this.activity.xrmodule}updatePosition(){Nt["mat4"].invert(Df,this.xrmodule.xrroot._wmatrix),Nt["mat3"].fromMat4(jf,Df),Nt["vec3"].transformMat3(Af,this.xrmodule.xrcamera.forward,jf),Nt["vec3"].scale(Af,Af,4.5),this.node.x=Af[0],this.node.y=this.xrmodule.xrcamera.head.position[1]+.2,this.node.z=Af[2],Af[1]=0,Nt["vec3"].normalize(Af,Af);const t=Math.atan2(Af[0],Af[2]);Nt["quat"].identity(Rf),Nt["quat"].rotateY(Rf,Rf,Math.PI),Nt["quat"].rotateY(Rf,Rf,t),this.node.rotation.set(Rf),this.node.updateWorldMatrix(),Nt["mat3"].fromMat4(jf,this.node._wmatrix),Nt["vec3"].transformMat3(Af,Of,jf),Nt["vec3"].scaleAndAdd(yf,this.node._wposition,Af,.07),this.xrmodule.raycaster.udpdatePlane(yf,Af)}updateTitle(){this.title.setText(`${wf("xr.tutorial")} ${this.step+1}/${Sf.length}`)}start(){return this._complete||(this.xrmodule.xrroot.add(this.node),this.label.show(),this.updatePosition(),this.xrmodule.raycaster.enable(),this.xrmodule.raycaster.add(this.nextBtn),this.xrmodule.raycaster.add(this.skipBtn),this._fader.fadeIn(.4),this.nextBtn.show(.5),this.skipBtn.show(.8),this.active=!0,this.step=0,this.applyStep()),this._deffered.promise}stop(){this.nextBtn.onClick.off(this.next),this.skipBtn.onClick.off(this.skip),this._fader.fadeOut(),this.nextBtn.hide(),this.skipBtn.hide(),this.xrmodule.raycaster.remove(this.nextBtn),this.xrmodule.raycaster.remove(this.skipBtn),this.xrmodule.raycaster.disable(),this.xrmodule.xrroot.remove(this.node),this.active=!1,this._complete=!0,this.activity.postprocess.settings.reset(),this.activity.xrmodule.xrcamera.head.remove(this.label.node),this._deffered.resolve()}applyStep(){var t;if(this._time=0,this._pulseCount=0,this.label.setText(Sf[this.step].key),this.updateTitle(),this.step>=1&&(this.activity.snapshot.enable(),this.activity.postprocess.settings.reset()),Sf[this.step].hand){const e=this.activity.xrmodule.xrview.inputs.getInput(Sf[this.step].hand);null===(t=null===e||void 0===e?void 0:e.gamepad)||void 0===t||t.pulse(.5,100)}}preRender(){var t;if(this.active&&(this.title.preRender(),this._time+=this.activity.scene.dt,this._time>1&&this._pulseCount<1&&(this._time=0,this._pulseCount+=1,Sf[this.step].hand))){const e=this.activity.xrmodule.xrview.inputs.getInput(Sf[this.step].hand);null===(t=null===e||void 0===e?void 0:e.gamepad)||void 0===t||t.pulse(.25,100)}}render(t){this.active&&(this._fader.render(t),this.nextBtn.render(t),this.skipBtn.render(t),this.label.renderRect(t),this.title.render(t),this.label.renderText([...Nn,1]))}}const If=-.5;class Pf{constructor(t){this.activity=t,this._alpha=0,this.node=new sp,this.node.rotateY(Math.PI),this.node.y=If,this.node.z=-.1,this._geom=new ho(t.scene.gl,-.5,-.5,1,1),this._prg=t.scene.programs.get("unlit-texture"),this._blendedCfg=new Rs["c"],this._opaqueCfg=new Rs["c"];const e=t.scene.gl;this._blendedCfg.enableBlend(!0).enableDepthTest(!0).depthMask(!0).blendFunc(e.CONSTANT_ALPHA,e.ONE_MINUS_CONSTANT_ALPHA).enableCullface(!0).cullFace(e.BACK),this._opaqueCfg.enableBlend(!1).enableDepthTest(!0).depthMask(!0).enableCullface(!0).cullFace(e.BACK)}get cfg(){return 1!==this._alpha?this._blendedCfg:this._opaqueCfg}show(){return new Promise(t=>{wt["a"].to(this.node,{y:0,ease:"power3.out",duration:1.5}),wt["a"].to(this,{_alpha:1,duration:1.5,onComplete:t})})}hide(){return new Promise(t=>{wt["a"].to(this.node,{y:If,ease:"power3.out",duration:1.5}),wt["a"].to(this,{_alpha:0,duration:1.5,onComplete:t})})}updateScale(t){this.node.scale[0]=-2*t[0],this.node.scale[1]=-2*t[1],this.node.invalidate()}setTexture(t){this._texture=t}render(t){this._prg.use(),this._prg.uMVP(t.getMVP(this.node._wmatrix)),this._prg.tTexture(this._texture),1!==this._alpha&&this._blendedCfg.blendColor(1,1,1,this._alpha),this.activity.scene.glstate.push(this.cfg),this.activity.scene.glstate.apply(),this._geom.bind(),this._geom.attribPointer(this._prg),this._geom.render(),this.activity.scene.glstate.pop()}}function Lf(t,e){var s=document.createElement("a");s.href=URL.createObjectURL(t),s.download=e,s.click(),URL.revokeObjectURL(s.href)}function Mf(t){return new Promise((e,s)=>{const i=new FileReader;i.addEventListener("loadend",()=>{e(new Blob([i.result],{type:t.type}))},{once:!0}),i.addEventListener("error",t=>{s(new Error("Failed to read image file."))}),i.readAsArrayBuffer(t)})}const kf=Nt["vec2"].create(),Nf=Nt["vec3"].fromValues(0,0,1),Ff=Nt["vec3"].create(),Bf=Nt["vec3"].create(),Uf=Nt["mat4"].create(),Hf=Nt["mat3"].create(),Gf=Nt["quat"].create(),Vf=5,zf=.005,Xf=.001,Wf=.1;class qf{constructor(t,e){this.ui=t,this.fog=e,this.alpha=0,this.title=[],this.node=new vi["a"],this.node.z=-1.5,this.node.y=.4*-this.ui.textRenderer.texts.get("share.title2").height,this.init()}init(){const t=this.ui.textRenderer.texts.get("share.title1").width,e=this.ui.textRenderer.texts.get("share.title2").width,s=t+e+zf,i=s*Vf+Xf*(Vf-1);for(let n=0;n<Vf;n++){this.title[n]={title1:new vi["a"],title2:new vi["a"]};const o=(s+Xf)*n-i/2;this.title[n].title1.x=o+t/2,this.title[n].title2.x=o+t+zf+e/2,this.node.add(this.title[n].title1),this.node.add(this.title[n].title2)}}show(){wt["a"].killTweensOf(this,"alpha"),wt["a"].to(this,{alpha:1,duration:.5})}hide(){wt["a"].killTweensOf(this,"alpha"),wt["a"].to(this,{alpha:0,duration:.5})}render(){Nt["vec2"].set(kf,2*this.fog.worldRadius,this.fog.edge);for(let t=0;t<Vf;t++)this.ui.textRenderer.render("share.title1",this.title[t].title1._wmatrix,[...Mn,this.alpha],kf),this.ui.textRenderer.render("share.title2",this.title[t].title2._wmatrix,[...Mn,this.alpha],kf)}}class Yf{constructor(t,e){this.ui=t,this.text=e,this.alpha=0,this.node=new vi["a"]}show(){wt["a"].killTweensOf(this,"alpha"),wt["a"].to(this,{alpha:1,duration:.5})}hide(){wt["a"].killTweensOf(this,"alpha"),wt["a"].to(this,{alpha:0,duration:.5})}render(){this.ui.textRenderer.render(this.text,this.node._wmatrix,[...Mn,this.alpha])}}class Kf{constructor(t){this.activity=t,this._downloadedMode=!1,this._active=!1,this._intransit=!1,this.download=()=>{this._downloadedMode=!0,this.xrmodule.raycaster.remove(this.downloadBtn),this.downloadBtn.onClick.off(this.download),this.downloadBtn.onHoverStart.off(this.buttonHoverStart),this.downloadBtn.onHoverStop.off(this.buttonHoverStop),this.downloadBtn.hide(),this.downloadedLabel.show(),Lf(Wx.state.context.sharedMedia.blob,"painting_photo.png"),this.xrmodule.tooltips.pop("Right/Trigger","xr.validate")},this.goToGallery=()=>{Wx.send("SHARE")},this.buttonHoverStart=()=>{this.xrmodule.tooltips.push("Right/Trigger","xr.validate")},this.buttonHoverStop=()=>{this.xrmodule.tooltips.pop("Right/Trigger","xr.validate")},this.release=()=>{this.xrmodule.xrroot.remove(this.node),this.xrmodule.xrroot.remove(this.floor.node),this._intransit=!1,this._active=!1},this.downloadBtn=new Ef(this.xrmodule.ui,"xr.download",!0),this.downloadedLabel=new Yf(this.xrmodule.ui,"xr.image_downloaded"),this.galleryBtn=new Ef(this.xrmodule.ui,"share.photo_gallery",!0),this.preview=new Pf(t),this.fog=new qi,this.fog.radius=5,this.fog.edge=1,this.background=new Ms(t.scene,kn),this.floor=new _o(t.scene),this.title=new qf(this.xrmodule.ui,this.fog),this.node=new vi["a"],this.node.add(this.downloadBtn.node),this.node.add(this.downloadedLabel.node),this.node.add(this.galleryBtn.node),this.node.add(this.preview.node),this.node.add(this.title.node),this.node.add(this.floor.node),this.node.add(this.fog.root)}get IsActive(){return this._active}get xrmodule(){return this.activity.xrmodule}get InTransition(){return this._intransit}async load(){return Promise.all([this.floor.load()])}enable(){this._downloadedMode=!1,this.xrmodule.xrroot.add(this.node),this.xrmodule.xrroot.add(this.floor.node),this.updatePosition(),this.downloadBtn.node.y=.8*-this.activity.snapshot.scale[1]*1.8,this.downloadedLabel.node.y=.8*-this.activity.snapshot.scale[1]*1.8,this.galleryBtn.node.y=.8*-this.activity.snapshot.scale[1]*1.8;const t=this.downloadBtn.Width+this.galleryBtn.Width;this.downloadBtn.node.x=-(t-this.downloadBtn.Width)/2-Wf/2,this.downloadedLabel.node.x=this.downloadBtn.node.x,this.galleryBtn.node.x=(t-this.galleryBtn.Width)/2+Wf/2,this.preview.updateScale(this.activity.snapshot.scale),this.preview.setTexture(this.activity.snapshot.Texture),this.xrmodule.raycaster.enable(),this.xrmodule.raycaster.add(this.downloadBtn),this.xrmodule.raycaster.add(this.galleryBtn),this._intransit=!0,this.downloadBtn.show(.2),this.galleryBtn.show(.2),this.preview.show(),this.title.show(),this.floor.show(),this.downloadBtn.onClick.on(this.download),this.downloadBtn.onHoverStart.on(this.buttonHoverStart),this.downloadBtn.onHoverStop.on(this.buttonHoverStop),this.galleryBtn.onClick.on(this.goToGallery),this.galleryBtn.onHoverStart.on(this.buttonHoverStart),this.galleryBtn.onHoverStop.on(this.buttonHoverStop),this.background.show().then(()=>{this._intransit=!1}),this._active=!0}disable(){this._intransit=!0,this.downloadBtn.hide(),this.downloadedLabel.hide(),this.galleryBtn.hide(),this.preview.hide(),this.title.hide(),this.floor.hide(),this.downloadBtn.onClick.off(this.download),this.galleryBtn.onClick.off(this.goToGallery),this._downloadedMode||(this.downloadBtn.onHoverStart.off(this.buttonHoverStart),this.downloadBtn.onHoverStop.off(this.buttonHoverStop),this.xrmodule.raycaster.remove(this.downloadBtn)),this.galleryBtn.onHoverStart.off(this.buttonHoverStart),this.galleryBtn.onHoverStop.off(this.buttonHoverStop),this.xrmodule.raycaster.remove(this.galleryBtn),this.xrmodule.raycaster.disable(),this.background.hide().then(this.release),this.xrmodule.tooltips.pop("Right/Trigger","xr.validate")}updatePosition(){Nt["mat4"].invert(Uf,this.xrmodule.xrroot._wmatrix),Nt["mat3"].fromMat4(Hf,Uf),Nt["vec3"].transformMat3(Ff,this.xrmodule.xrcamera.forward,Hf),Nt["vec3"].scale(Ff,Ff,4.5),this.node.x=Ff[0],this.node.y=this.xrmodule.xrcamera.head.position[1]+.4,this.node.z=Ff[2],Ff[1]=0,Nt["vec3"].normalize(Ff,Ff);const t=Math.atan2(Ff[0],Ff[2]);Nt["quat"].identity(Gf),Nt["quat"].rotateY(Gf,Gf,Math.PI),Nt["quat"].rotateY(Gf,Gf,t),this.node.rotation.set(Gf),this.node.updateWorldMatrix(),Nt["mat3"].fromMat4(Hf,this.node._wmatrix),Nt["vec3"].transformMat3(Ff,Nf,Hf),Nt["vec3"].scaleAndAdd(Bf,this.node._wposition,Ff,.07),this.xrmodule.raycaster.udpdatePlane(Bf,Ff)}preRender(){}render(t){this._active&&(this.background.render(t),this.title.render(),this.preview.render(t),this._downloadedMode&&this.downloadedLabel.render(),this.downloadBtn.render(t),this.galleryBtn.render(t),this.floor.render(t))}}const Zf=()=>{};class $f{constructor(t){this.activity=t,this.hasMoved=!1,this._inputCallback=Zf,this.btnDown=t=>{this._inputCallback(t)},this.enterExploreDefault=()=>{this.xrmodule.tooltips.push("Right/Thumbstick",this.hasMoved?"":"xr.move"),this._inputCallback=this.btnDownExplore},this.exitExplore=()=>{this.xrmodule.tooltips.pop("Right/Thumbstick",this.hasMoved?"":"xr.move"),this._inputCallback=Zf},this.btnDownExplore=t=>{switch(t.name){case"X":case"Y":case"Left/Thumbstick":Wx.send("ENTER_PHOTO");break;case"Right/Up":case"Right/Down":case"Right/Left":case"Right/Right":if(this.hasMoved)break;this.hasMoved=!0,this.xrmodule.tooltips.pop("Right/Thumbstick","xr.move"),this.xrmodule.tooltips.push("Right/Thumbstick","");break;default:break}},this.enterPhotoTutorial=()=>{this.xrmodule.tooltips.push("Left/Thumbstick",""),this.xrmodule.tooltips.push("Right/Trigger",""),this.xrmodule.tooltips.push("Right/Squeeze",""),this._inputCallback=this.btnDownPhotoTutorial},this.exitPhotoTutorial=()=>{this.xrmodule.tooltips.pop("Left/Thumbstick",""),this.xrmodule.tooltips.pop("Right/Trigger",""),this.xrmodule.tooltips.pop("Right/Squeeze",""),this._inputCallback=Zf},this.btnDownPhotoTutorial=t=>{switch(t.name){case"Right/Thumbstick":case"Right/Squeeze":this.activity.snapshot.CanSnapshot&&!this.activity.snapshot.HasSnapshot&&this.activity.snapshot.changeSize();break;default:break}},this.enterLightEdition=()=>{this.xrmodule.tooltips.push("A","xr.close")},this.exitLightEdition=()=>{this.xrmodule.tooltips.pop("A","xr.close"),this.xrmodule.tooltips.pop("Left/Trigger","xr.on"),this.xrmodule.tooltips.pop("Left/Trigger","xr.off")},this.enterLightMoveEdition=()=>{this.xrmodule.tooltips.pop("Right/Squeeze","xr.light_grab"),this.xrmodule.tooltips.pop("Left/Trigger","xr.on"),this.xrmodule.tooltips.pop("Left/Trigger","xr.off"),this.xrmodule.tooltips.push("Right/Squeeze","xr.light_drop"),this.xrmodule.tooltips.push("Right/Thumbstick","xr.depth")},this.exitLightMoveEdition=()=>{this.xrmodule.tooltips.pop("Right/Squeeze","xr.light_drop"),this.xrmodule.tooltips.pop("Right/Thumbstick","xr.depth")},this.enterLightLookatEdition=()=>{this._inputCallback=this.btnDownLightEdition},this.exitLightLookatEdition=()=>{this.xrmodule.tooltips.pop("Right/Squeeze","xr.light_lookat_drop"),this.xrmodule.tooltips.pop("Right/Thumbstick","xr.depth"),this._inputCallback=Zf},this.enterLightSettingsEdition=()=>{this._inputCallback=this.btnDownLightEdition},this.exitLightSettingsEdition=()=>{this._inputCallback=Zf},this.btnDownLightEdition=t=>{switch(t.name){case"A":this.activity.settingswheels.settingsWheelLights.settingswheel.editMode||Wx.send("EXIT");break;case"Left/Trigger":Wx.send("UPDATE_LIGHT_DATA",{light:{isOn:!Wx.state.context.povDatas.lightDatas[Wx.state.context.selectedLightIndex].isOn}});break;default:break}},this.enterPhoto=()=>{this.xrmodule.tooltips.push("Right/Trigger","xr.photo_take"),this.xrmodule.tooltips.push("A","xr.close"),this._inputCallback=this.btnDownPhoto},this.exitPhoto=()=>{this.xrmodule.tooltips.pop("Right/Trigger","xr.photo_take"),this.xrmodule.tooltips.pop("A","xr.close"),this._inputCallback=Zf},this.btnDownPhoto=t=>{switch(t.name){case"A":this.activity.settingswheels.settingsWheelPhoto.settingswheel.editMode||Wx.send("CANCEL");break;case"Right/Trigger":this.activity.snapshot.CanSnapshot&&Wx.send("SUBMIT");break;case"Right/Thumbstick":this.activity.snapshot.CanSnapshot&&!this.activity.snapshot.HasSnapshot&&this.activity.snapshot.changeSize();break;default:break}},this.enterPreview=()=>{this.xrmodule.tooltips.push("Right/Trigger","xr.validate"),this.xrmodule.tooltips.push("A","xr.cancel"),this._inputCallback=this.btnDownPreview},this.exitPreview=()=>{this.xrmodule.tooltips.pop("Right/Trigger","xr.validate"),this.xrmodule.tooltips.pop("A","xr.cancel"),this._inputCallback=Zf},this.btnDownPreview=t=>{switch(t.name){case"Right/Trigger":Wx.send("SUBMIT");break;case"A":Wx.send("CANCEL");break;default:break}},this.enterShare=()=>{this.xrmodule.tooltips.push("A","xr.painting"),this._inputCallback=this.btnDownShare},this.exitShare=()=>{this.xrmodule.tooltips.pop("A","xr.painting"),this._inputCallback=Zf},this.btnDownShare=t=>{switch(t.name){case"A":Wx.send("CANCEL");break;default:break}},this.xrmodule=t.xrmodule,this.stateHelper=new Ns([{match:"painting.explore",exit:this.exitExplore},{match:"painting.explore.default",enter:this.enterExploreDefault},{match:"painting.edit_light",enter:this.enterLightEdition,exit:this.exitLightEdition},{match:"painting.edit_light.move",enter:this.enterLightMoveEdition,exit:this.exitLightMoveEdition},{match:"painting.edit_light.lookat",enter:this.enterLightLookatEdition,exit:this.exitLightLookatEdition},{match:"painting.edit_light.settings",enter:this.enterLightSettingsEdition,exit:this.exitLightSettingsEdition},{match:"painting.photo.tutorial",enter:this.enterPhotoTutorial,exit:this.exitPhotoTutorial},{match:"painting.photo.default",enter:this.enterPhoto,exit:this.exitPhoto},{match:"share.preview",enter:this.enterPreview,exit:this.exitPreview},{match:"share.select",enter:this.enterShare,exit:this.exitShare}])}start(){this.xrmodule.xrview.inputs.onBtnDown.on(this.btnDown),this.stateHelper.start()}stop(){this._inputCallback=Zf,this.xrmodule.xrview.inputs.onBtnDown.off(this.btnDown),this.stateHelper.stop()}}var Qf;(function(t){t["LOOKAT"]="lookat",t["HUE"]="hue",t["SATURATION"]="saturation",t["INTENSITY"]="intensity"})(Qf||(Qf={}));class Jf{constructor(t,e,s,i,n){this.id=t,this.min=e,this.max=s,this.mix=i,this.property=n,this._mtrans=0,this.onChange=new jt,this.defaultMix=i}setMix(t){this.mix=t,this.onChange.emit(this.id)}getValue(){let t=this.mix;return Li(this.min,this.max,t)}reset(){this.mix=this.defaultMix}}class tv{constructor(){this.active=!1,this.applySettings=t=>{const e=this.list.get(t).property;let s=this.list.get(t).getValue();Wx.send("UPDATE_LIGHT_DATA",{light:{[e]:s}})},this.applyLightDatas=()=>{const t=Wx.state.context.povDatas.lightDatas[Wx.state.context.selectedLightIndex];this.list.get(Qf.HUE).mix=t.hue,this.list.get(Qf.SATURATION).mix=t.saturation,this.list.get(Qf.INTENSITY).mix=t.intensity},this.list=new Map,this.addSettings(Qf.HUE,0,1,0,"hue"),this.addSettings(Qf.SATURATION,0,1,0,"saturation"),this.addSettings(Qf.INTENSITY,.02,1.5,.2,"intensity")}addSettings(t,e,s,i,n){const o=new Jf(t,e,s,i,n);o.onChange.on(this.applySettings),this.list.set(t,o)}}var ev=s("d1e4"),sv=s.n(ev),iv=s("4020"),nv=s.n(iv);const ov="slider-pin";class av extends _h["a"]{constructor(){super({uid:ov,vert:sv()(),frag:nv()()});const t=this.inputs;t.add(this.version=new dh["a"]("300 es")),t.add(this.precision=new hh["a"]("highp")),t.add(this.shaderid=new ma["a"]("id_"+ov,!0)),t.add(this.hue=new Jo["d"]("hue",1)),t.add(this.isHue=new Jo["d"]("isHue",1))}prepare(t,e,s){t.uWorldMatrix(e._wmatrix),t.uVP(s._viewProj)}}const rv="slider-pin";class lv extends ga["a"]{constructor(t,e=rv){super(t,rv),this.addPass(new av,$l.DEFAULT)}}var cv=s("880e"),hv=s.n(cv),dv=s("efd9"),uv=s.n(dv);const pv="slider-line";class gv extends _h["a"]{constructor(){super({uid:pv,vert:hv()(),frag:uv()()});const t=this.inputs;t.add(this.version=new dh["a"]("300 es")),t.add(this.precision=new hh["a"]("highp")),t.add(this.shaderid=new ma["a"]("id_"+pv,!0)),t.add(this.progress=new Jo["d"]("progress",1)),t.add(this.lineType=new Jo["d"]("lineType",1)),t.add(this.hue=new Jo["d"]("hue",1)),t.add(this.halfCut=new Jo["d"]("halfCut",1)),t.add(this.isReversed=new Jo["d"]("isReversed",1))}prepare(t,e,s){t.uWorldMatrix(e._wmatrix),t.uVP(s._viewProj)}}const mv="slider-line";class _v extends ga["a"]{constructor(t,e=mv){super(t,mv),this.addPass(new gv,$l.DEFAULT)}}const bv=Nt["vec2"].create(),fv=2,vv=4;class xv{constructor(t,e,s,i,n){this.wheel=t,this.node=e,this.data=s,this.index=i,this.total=n,this.isActive=!1,this.isHover=!1,this.isSelected=!1,this.toggleButton=new jt,this.clickButton=new jt,this.position=Nt["vec3"].create(),this._depth=0,this.active=e.findChild("active"),this.idle=e.findChild("idle");const o=(Math.PI-(Math.PI*n/vv-Math.PI/4))/2,a=n-1-i,r=Math.cos(Math.PI*a/vv+o)*fv,l=Math.sin(Math.PI*a/vv+o)*fv;this.position.set([r,l,e.z]),Nt["vec2"].set(bv,this.position[0],this.position[1]),Nt["vec2"].normalize(bv,bv),this.angle=Math.atan2(bv[0],bv[1]),this.data.isToggle&&void 0!==this.data.toggleHandler&&this.toggleButton.on(this.data.toggleHandler),this.wheel.isSelect&&void 0!==this.wheel.handleSelect&&this.clickButton.on(()=>this.wheel.handleSelect(this.data.setting))}get Renderable(){return this.isActive||this.isHover?this.active.renderable:this.idle.renderable}get Renderables(){return this.isActive||this.isHover?[this.idle.renderable,this.active.renderable]:[this.idle.renderable]}enable(){this.node.position.set(this.position),this.node.invalidate()}setActive(){this.wheel.isSelect?this.clickButton.emit():(!0!==this.isActive&&this.toggleButton.emit(!0),this.isActive=!0)}setHover(){!1!==this.isActive&&this.toggleButton.emit(!1),this.isActive=!1,this.isHover=!0}setSelected(t){this.isSelected=t;const e=this.isSelected?.5:0;wt["a"].killTweensOf(this,"_depth"),this._tween=wt["a"].to(this,{_depth:e,duration:.3,ease:"power2.out",onUpdate:()=>{this.node.z=this._depth}})}setIdle(){!1!==this.isActive&&this.toggleButton.emit(!1),this.isActive=!1,this.isHover=!1}}class Tv{constructor(t,e){this.wheel=t,this.node=e,this.isActive=!1,this._scale=1,this.z=0,this.node.x=0,this.idle=e.findChild("idle"),this._renderables=this.idle?[this.idle.renderable]:[]}get Renderable(){return!this.isActive&&this.idle?[this.idle.renderable]:[]}preRender(t){}setActive(){this.isActive=!0}setIdle(){this.isActive=!1}}const Ev=Nt["quat"].create();class wv{constructor(t,e){this.wheel=t,this.node=e,this.angle=0,this._angle=0,this.shown=!1,this.scale=0,this.node.setScale(0)}get Renderable(){return this.node._children[0].renderable}setShown(t){t&&!this.shown&&this.show(),!t&&this.shown&&this.hide()}setAngle(t){this.angle=-t}show(){this.shown=!0,wt["a"].killTweensOf(this,"scale"),wt["a"].to(this,{scale:1,duration:.2,ease:"power2.out",onUpdate:()=>this.node.setScale(this.scale)})}hide(){this.shown=!1,wt["a"].killTweensOf(this,"scale"),wt["a"].to(this,{scale:0,duration:.2,ease:"power2.out",onUpdate:()=>this.node.setScale(this.scale)})}preRender(t){this.angle!==this._angle&&(this.node.rotation.set(Ev),this.node.rotateZ(this.angle),this._angle=this.angle)}}const Ov=Nt["vec2"].create();var Av;(function(t){t[t["DEFAULT"]=.25]="DEFAULT",t[t["HUE"]=.5]="HUE",t[t["COLOR"]=.75]="COLOR",t[t["BLACK_WHITE"]=1]="BLACK_WHITE"})(Av||(Av={}));class yv{constructor(t,e){this.wheel=t,this.node=e,this.value=-1,this.active=!1,this.visible=!1,this.selected=!1,this._depth=0,this._renderables=[],this._pdeadzone=0,this._inDeadzone=!1,this.text=e.findChild("text"),this.selectCircle=e.findChild("select-circle"),this.line=e.findChild("line"),this.pin=this.selectCircle.findChild("pin"),this.sliderLine=e.findChild("slider-line"),this._rotation=Nt["quat"].create()}get InDeadZone(){return this._inDeadzone}get Renderables(){return this._renderables.length=0,this.visible&&this.active&&(this._renderables.push(this.line.renderable),this._renderables.push(this.sliderLine.renderable),this._renderables.push(this.pin.renderable)),this._renderables}processInput(t){const e=this.wheel.scene.xrview.inputs.getAxes("left");Ov.set(e);let s=this.value,i=this.value;this._inDeadzone?(this._pdeadzone=Pi(this._pdeadzone+e[0]*t*8,-1,1),1!=this._pdeadzone&&-1!=this._pdeadzone||(this._inDeadzone=!1)):(i=Ii(this.value+e[0]*t),Math.sign(s-.5)!==Math.sign(i-.5)&&(this._pdeadzone=0,this._inDeadzone=!0,this.wheel.xrmodule.Inputs.getInput("left").gamepad.pulse(.6,50),this.setValue(.5))),this.setValue(i)}preRender(t){}setActive(t){this.active=t}setSelected(t){this.selected=t;const e=this.selected?.8:0;wt["a"].killTweensOf(this,"_depth"),wt["a"].to(this,{_depth:e,duration:.3,ease:"power2.out",onUpdate:()=>{this.node.z=this._depth}})}setVisible(t){this.visible=t}setValue(t){t!=this.value&&(this.value=t,this.wheel.settingsWheelController.setSliderValue(t),Nt["quat"].identity(this._rotation),Nt["quat"].rotateZ(this._rotation,this._rotation,-(t-.5)*Math.PI),this.selectCircle.rotation.set(this._rotation),this.selectCircle.invalidate())}}const Dv=Nt["vec2"].create();class jv{constructor(t,e,s,i,n,o,a,r){this.settingsWheelController=t,this.xrmodule=e,this.settings=s,this.buttonsData=i,this.defaultTooltip=n,this.toggleBtnName=o,this.isSelect=a,this.handleSelect=r,this.active=!1,this.enabled=!1,this.locked=!1,this.editMode=!1,this.hoverIdx=-1,this.activeIdx=-1,this.clickTime=0,this.clickDelay=.1,this.renderables=[],this.onBtnDownActive=t=>{if(!this.locked)switch(t.name){case"A":if(-1!==this.activeIdx&&!this.isSelect)return void this.back();break;default:break}},this.node=new vi["a"],this.toggleBtn=null,this.buttons=[],this.cfg=this.scene.glstate.config(),this.cfg.enableCullface(!1).enableDepthTest(!0).depthMask(!1).enableBlend(!0).blendFunc(this.scene.gl.SRC_ALPHA,this.scene.gl.ONE_MINUS_SRC_ALPHA)}get scene(){return this.xrmodule.scene}init(){this.xrmodule.gamepads.list.get("left").skin.add(this.node);const t=this.xrmodule.gamepads.list.get("left").skin.findChild("b_thumbstick");t.add(this.node),this.node.rotateY(Math.PI/2),this.node.rotateX(Math.PI),this.node.x=-.014,this.node.y=.002,this.node.z=-.014,this.node.add(this.settingsWheelController.wheelRoot),this.toggleBtnName&&(this.toggleBtnNode=this.settingsWheelController.toggleBtns[this.toggleBtnName],this.toggleBtn=new Tv(this,this.toggleBtnNode)),this.slider=new yv(this,this.settingsWheelController.slider),this.buttonsNodes=[];for(let e=0;e<this.buttonsData.length;e++){const t=this.buttonsData[e];this.createButton(t,e)}this.target=new wv(this,this.settingsWheelController.target)}unload(){this.xrmodule.gamepads.list.get("left").skin.remove(this.node)}createButton(t,e){const s=this.settingsWheelController.settingsBtns[t.nodeName];this.buttonsNodes.push(s);const i=new xv(this,s,t,e,this.buttonsData.length);this.buttons.push(i)}enable(){this.enabled=!0,this.toggleBtn&&this.settingsWheelController.stickBtn.add(this.toggleBtnNode);for(let t=0;t<this.buttons.length;t++)this.buttons[t].enable(),this.settingsWheelController.settings.add(this.buttonsNodes[t])}disable(){this.backMode=!1,this.enabled=!1,this.toggleBtn&&this.settingsWheelController.stickBtn.remove(this.toggleBtnNode);for(const t of this.buttonsNodes)this.settingsWheelController.settings.remove(t)}lock(){this.locked=!0}unlock(){this.locked=!1}setActive(t){this.active=t,t?(this.toggleBtn&&this.toggleBtn.setActive(),this.xrmodule.tooltips.push("Left/Thumbstick",this.defaultTooltip),this.xrmodule.xrview.inputs.onBtnDown.on(this.onBtnDownActive)):(this.toggleBtn&&this.toggleBtn.setIdle(),this.xrmodule.tooltips.pop("Left/Thumbstick",this.defaultTooltip),this.xrmodule.xrview.inputs.onBtnDown.off(this.onBtnDownActive),this.editMode=!1,this.slider.setActive(!1),this.setHover(-1),this.activeIdx=-1,this.hoverIdx=-1)}select(){if(-1==this.hoverIdx||!this.active||!this.buttons[this.hoverIdx])return;this.xrmodule.Inputs.getInput("left").gamepad.pulse(.5,100),this.xrmodule.tooltips.pop("Left/Thumbstick","xr.release_to_select"),this.activeIdx=this.hoverIdx;const t=this.buttons[this.activeIdx];if(t.setActive(),this.slider.setActive(!0),this.isSelect)for(let e=0;e<this.buttons.length;e++)this.buttons[e].setSelected(e===this.activeIdx);else{if(this.editMode=!0,t.data.isSlider&&this.settings){const e=this.settings.get(t.data.setting).mix;this.slider.setValue(t.data.isReversed?1-e:e),this.settingsWheelController.setSliderLineType(t.data.lineType),this.settingsWheelController.setSliderHalfCut(t.data.isHalfCut),this.settingsWheelController.setSliderIsReversed(t.data.isReversed)}t.data.tooltip&&(this.xrmodule.tooltips.pop("Left/Thumbstick",this.defaultTooltip),this.xrmodule.tooltips.push("Left/Thumbstick",t.data.tooltip))}}back(){if(this.backMode=!1,-1==this.hoverIdx)return;this.xrmodule.Inputs.getInput("left").gamepad.pulse(.2,100);const t=this.buttons[this.hoverIdx];t.data.tooltip&&this.xrmodule.tooltips.pop("Left/Thumbstick",t.data.tooltip),this.xrmodule.tooltips.push("Left/Thumbstick",this.defaultTooltip),t.setIdle(),this.hoverIdx=-1,this.activeIdx=-1,this.editMode=!1,this.slider.setActive(!1)}setHover(t){-1!==this.hoverIdx&&this.buttons[this.hoverIdx]&&(this.buttons[this.hoverIdx].setIdle(),this.isSelect&&(this.activeIdx=-1,this.slider.setActive(!1))),-1!==t&&this.buttons[t]?(t!=this.hoverIdx&&(this.xrmodule.tooltips.push("Left/Thumbstick","xr.release_to_select"),this.xrmodule.Inputs.getInput("left").gamepad.pulse(.5,100)),this.hoverIdx=t,this.buttons[this.hoverIdx].setHover(),this.buttons[this.hoverIdx].data.isSlider?this.slider.setVisible(!0):this.slider.setVisible(!1)):(this.slider.setVisible(!1),this.xrmodule.tooltips.pop("Left/Thumbstick","xr.release_to_select"))}preRender(){if(!this.enabled)return;const t=this.scene.xrview.inputs.getAxes("left");Dv.set(t);const e=Nt["vec2"].sqrLen(Dv)>.5;let s=Math.atan2(Dv[0],-Dv[1]);if(e?this.backMode=Math.abs(s)-Math.PI/2>.5:this.backMode&&(this.backMode=!1,this.back()),!this.editMode&&!this.locked&&this.active)if(e){let t=-1;for(let e=0;e<this.buttons.length;e++)Math.abs(s-this.buttons[e].angle)<.5&&(t=e);this.setHover(t),this.target.setAngle(s)}else-1!==this.hoverIdx&&-1===this.activeIdx&&this.select();if(this.target.setShown(e),this.clickTime+=this.scene.dt,this.editMode&&void 0!=t&&!this.locked&&this.active&&-1!==this.activeIdx&&this.buttons[this.activeIdx].data.isSlider&&this.settings){const t=this.settings.get(this.buttons[this.activeIdx].data.setting);this.slider.processInput(this.scene.dt);const e=this.buttons[this.activeIdx].data.isReversed?1-this.slider.value:this.slider.value;console.log(t.mix,e),t.mix===e||this.slider.InDeadZone||(this.clickTime>this.clickDelay&&(this.xrmodule.Inputs.getInput("left").gamepad.pulse(.4,100),this.clickTime=0),t.setMix(e)),this.slider.InDeadZone&&t.setMix(.5)}this.target.preRender(this.scene.dt),this.slider.preRender(this.scene.dt),this.toggleBtn&&this.toggleBtn.preRender(this.scene.dt)}collectRenderables(t){if(t.length=0,this.enabled&&(this.toggleBtn&&t.push(...this.toggleBtn.Renderable),this.active)){t.push(...this.slider.Renderables);for(const e of this.buttons)t.push(...e.Renderables);this.editMode||t.push(this.target.Renderable)}}render(t){if(this.enabled){this.collectRenderables(this.renderables),this.scene.glstate.push(this.cfg),this.scene.glstate.apply();for(const e of this.renderables)e.render(this.scene,t,Ql.SPRITE,$l.DEFAULT);if(this.active&&-1!==this.hoverIdx&&this.buttons[this.hoverIdx]){const t="xr."+this.buttons[this.hoverIdx].data.setting;this.xrmodule.ui.textRenderer.render(t,this.slider.text._wmatrix,[...Mn,1])}this.scene.glstate.pop(),this.scene.glstate.apply()}}}const Rv=[{setting:Lb.BRIGHTNESS,nodeName:Lb.BRIGHTNESS,isSlider:!0,isHalfCut:!0,tooltip:"xr.select_brightness"},{setting:Lb.CONTRAST,nodeName:Lb.CONTRAST,isSlider:!0,isHalfCut:!0,tooltip:"xr.select_contrast"},{setting:Lb.SATURATION,nodeName:Lb.SATURATION,isSlider:!0,isHalfCut:!0,tooltip:"xr.select_saturation"},{setting:Lb.TEMPERATURE,nodeName:Lb.TEMPERATURE,isSlider:!0,isHalfCut:!0,tooltip:"xr.select_temperature"}];class Sv{constructor(t,e,s){this.settingsWheelController=t,this.xrmodule=e,this.postsettings=s,this.settingswheel=new jv(this.settingsWheelController,this.xrmodule,this.postsettings,Rv,"xr.select_settings",Iv.PHOTO)}init(){this.settingswheel.init()}setActive(t){this.settingswheel.setActive(t)}enable(){this.settingswheel.enable()}disable(){this.settingswheel.disable()}preRender(){this.settingswheel.preRender()}render(t){this.settingswheel.render(t)}}class Cv{constructor(t,e,s){this.settingsWheelController=t,this.xrmodule=e,this.lightsettings=s,this.toggleLookat=t=>{t?Wx.send("LOOKAT"):Wx.send("SETTINGS")};const i=[{setting:Qf.HUE,nodeName:Qf.HUE,isSlider:!0,lineType:Av.HUE,tooltip:"xr.select_hue"},{setting:Qf.SATURATION,nodeName:Qf.SATURATION,isSlider:!0,lineType:Av.COLOR,tooltip:"xr.select_saturation"},{setting:Qf.INTENSITY,nodeName:Qf.INTENSITY,isSlider:!0,lineType:Av.BLACK_WHITE,tooltip:"xr.select_intensity"}];this.settingswheel=new jv(this.settingsWheelController,this.xrmodule,this.lightsettings,i,"xr.select_settings")}init(){this.settingswheel.init()}setActive(t){this.settingswheel.setActive(t)}enable(){this.settingswheel.enable()}disable(){this.settingswheel.disable()}preRender(){this.settingswheel.preRender()}render(t){this.settingswheel.render(t)}}var Iv,Pv;(function(t){t["PHOTO"]="camera"})(Iv||(Iv={}));class Lv{constructor(t,e,s,i){this.scene=t,this.xrmodule=e,this.postsettings=s,this.lightsettings=i;var n=new Kg;n.overrides={SliderLine:new _v(this.scene.gl),SliderPin:new lv(this.scene.gl)};const o=new Sp(ri.resolve("assets/webgl/gltfs/settings_wheel/settings-wheel.gltf"),this.scene,{extensions:[n]});this.resources=new Cn,this.resources.add(o,"settings-wheel"),this.settingsWheelPhoto=new Sv(this,this.xrmodule,this.postsettings),this.settingsWheelLights=new Cv(this,this.xrmodule,this.lightsettings)}async load(){return this._loadPromise||(this._loadPromise=this._doLoad()),this._loadPromise}async _doLoad(){console.log("Loading settings wheel"),await this.resources.load(),console.log("Loaded settings wheel"),this.init()}init(){this.wheelGltf=this.resources.get("settings-wheel"),this.wheelRoot=this.wheelGltf.root._children[0],this.stickBtn=this.wheelRoot.findChild("stick-btn");const t=this.stickBtn.findChild("buttons");this.toggleBtns=this.toObjectName(t._children),this.stickBtn.remove(t),this.settings=this.wheelRoot.findChild("settings");const e=this.settings.findChild("buttons");this.settingsBtns=this.toObjectName(e._children),this.settings.remove(e),this.slider=this.settings.findChild("slider"),this.target=this.settings.findChild("settings_target_container");const s=this.slider.findChild("slider-line"),i=s.renderable.materials[0].getPass($l.DEFAULT).pass;this._progressUniform=i.progress.attachUniform("uProgress",1),this._progressUniform.set(0),this._lineTypeUniform=i.lineType.attachUniform("uLineType",1),this._lineTypeUniform.set(Av.DEFAULT),this._hueUniform=i.hue.attachUniform("uHue",1),this._hueUniform.set(0),this._halfCutUniform=i.halfCut.attachUniform("uHalfCut",1),this._halfCutUniform.set(0),this._isReversedUniform=i.isReversed.attachUniform("uIsReversed",1),this._isReversedUniform.set(0);const n=this.slider.findChild("select-circle").findChild("pin"),o=n.renderable.materials[0].getPass($l.DEFAULT).pass;this._pinHueUniform=o.hue.attachUniform("uHue",1),this._pinHueUniform.set(0),this._pinIsHueUniform=o.isHue.attachUniform("uIsHue",1),this._pinIsHueUniform.set(0),this.settingsWheelPhoto.init(),this.settingsWheelLights.init()}preRender(){this.settingsWheelPhoto.preRender(),this.settingsWheelLights.preRender()}render(t){this.settingsWheelPhoto.render(t),this.settingsWheelLights.render(t)}toObjectName(t){const e={};for(let s=0;s<t.length;s++){const i=t[s],n=i.name;e[n]=i}return e}setSliderValue(t){this._progressUniform.set(t)}setSliderLineType(t){this._lineTypeUniform.set(t||Av.DEFAULT),this._pinIsHueUniform.set(t===Av.HUE?1:0)}setSliderHue(t){this._hueUniform.set(t),this._pinHueUniform.set(t)}setSliderHalfCut(t){this._halfCutUniform.set(t?1:0)}setSliderIsReversed(t){this._isReversedUniform.set(t?1:0)}}(function(t){t["POSE_1"]="pose2",t["POSE_2"]="pose1",t["POSE_3"]="pose3",t["POSE_4"]="pose4"})(Pv||(Pv={}));const Mv=[Pv.POSE_1,Pv.POSE_2,Pv.POSE_3,Pv.POSE_4];class kv{static next(){const t=Mv.indexOf(Wx.state.context.povDatas.pose),e=(t+1)%Mv.length;Wx.send({type:"UPDATE_POV_DATA",pov:{pose:Mv[e]}})}}var Nv;(function(t){t["BACKGROUND_1"]="bg0",t["BACKGROUND_2"]="bg1",t["BACKGROUND_3"]="bg2",t["BACKGROUND_4"]="bg3"})(Nv||(Nv={}));const Fv=[Nv.BACKGROUND_1,Nv.BACKGROUND_2,Nv.BACKGROUND_3,Nv.BACKGROUND_4];class Bv{static next(){const t=Fv.indexOf(Wx.state.context.povDatas.background),e=(t+1)%Fv.length;Wx.send({type:"UPDATE_POV_DATA",pov:{background:Fv[e]}})}}class Uv{constructor(t){this.activity=t,this.start=()=>{Wx.state.context.paintingPhotoTutorialCompleted||(this._activeTimeout=window.setTimeout(this.show,3e4))},this.stop=()=>{Wx.state.context.paintingPhotoTutorialCompleted||this.hide(),window.clearTimeout(this._activeTimeout),this.stateHelper.stop()},this.show=()=>{this.activity.xrmodule.xrview.inputs.getInput("left").gamepad.pulse(.25,100),this.active=!0,this.shown=!0,this.activity.xrmodule.tooltips.push("Left/Thumbstick","xr.try_photo")},this.hide=()=>{this.shown=!1,this.activity.xrmodule.tooltips.pop("Left/Thumbstick","xr.try_photo")},this.stateHelper=new Ns([{match:"painting.explore",enter:this.start,exit:this.stop}])}get xrmodule(){return this.activity.xrmodule}preRender(){}render(t){}}class Hv{constructor(t){this.grabHelper=t,this._editMode=!1,this._lookAtMode=!1,this.spotMaxRadius=5,this.spotMinRadius=1.6,this.spotMinHeight=0,this.spotMaxHeight=5,this.spotMinHeightCenter=2,this.onMove=t=>{this._editMode&&Wx.send("UPDATE_LIGHT_DATA",{light:{position:t}})},this.onDrop=()=>{const t=Wx.state.context.selectedLightIndex,e=Wx.state.context.povDatas.lightDatas[t].position;Ch.isValidPosition(e)||this.moveTransition(t,Ch.nearestValidPosition(e))},this.onMoveLookAt=t=>{this._lookAtMode&&Wx.send("UPDATE_LIGHT_DATA",{light:{lookat:t}})},this.onDropLookat=()=>{const t=Wx.state.context.selectedLightIndex,e=Wx.state.context.povDatas.lightDatas[t].lookat;Ch.isValidTarget(e)||this.targetTransition(t,Ch.nearestValidTarget(e))}}async startMove(){this._editMode=!0,this.grabHelper.onGrabMove.on(this.onMove),this.grabHelper.onGrabDrop.on(this.onDrop)}stop(){this._editMode=!1,this.grabHelper.onGrabMove.off(this.onMove),this.grabHelper.onGrabDrop.off(this.onDrop),this.onDrop()}async startLookAt(){this._lookAtMode=!0,this.grabHelper.onGrabMove.on(this.onMoveLookAt)}stopLookAt(){this._lookAtMode=!1,this.grabHelper.onGrabMove.off(this.onMoveLookAt),this.grabHelper.onGrabDrop.off(this.onDropLookat),this.onDropLookat()}moveTransition(t,e){var s;const i=Wx.state.context.povDatas.lightDatas[t].position,n=Nt["vec3"].fromValues(i[0],i[1],i[2]);null===(s=this._posTween)||void 0===s||s.kill(),this._posTween=wt["a"].to(n,{0:e[0],1:e[1],2:e[2],duration:.5,ease:"power2.inOut",onUpdate:()=>{Wx.send("UPDATE_LIGHT_DATA",{light:{position:n}})}})}targetTransition(t,e){var s;const i=Wx.state.context.povDatas.lightDatas[t].lookat,n=Nt["vec3"].fromValues(i[0],i[1],i[2]);null===(s=this._tgtTween)||void 0===s||s.kill(),this._tgtTween=wt["a"].to(n,{0:e[0],1:e[1],2:e[2],duration:.5,ease:"power2.inOut",onUpdate:()=>{Wx.send("UPDATE_LIGHT_DATA",{light:{lookat:n}})}})}}class Gv{constructor(t,e,s){this.xrmodule=t,this.scene=e,this.navigation=s,this.type="light",this.onGrab=new jt,this.grabDir=Nt["vec3"].create(),this.moveDepth=0,this.onGrabMove=new jt,this.onGrabDrop=new jt,this.isGrabbing=!1,this.grabbedIndex=null,this.grabDistance=0,this.grabPosition=Nt["vec3"].create(),this._currentDistance=0,this.isJoystickMoving=!1,this.onBtnDown=t=>{if(!this.navigation.active)switch(t.name){case"Right/Squeeze":this.handleGrab();break;case"Right/Up":case"Right/Down":this.handleJoystick();break}},this.onBtnUp=t=>{if("Right/Squeeze"===t.name&&this.isGrabbing&&!this.navigation.active){const t=this.grabbedIndex;this.isGrabbing=!1,this.grabbedIndex=null,this.type="light",this.onGrabDrop.emit(t),this.onJoystickRelease()}}}get positions(){return Wx.state.context.povDatas.lightDatas.map(t=>"lookat"===this.type?t.lookat:t.position)}enable(){this.xrmodule.xrview.inputs.onBtnDown.on(this.onBtnDown),this.xrmodule.xrview.inputs.onBtnUp.on(this.onBtnUp)}disable(){this.xrmodule.xrview.inputs.onBtnDown.off(this.onBtnDown),this.xrmodule.xrview.inputs.onBtnUp.off(this.onBtnUp)}onRayMove(){const t=this.xrmodule.gamepads.list.get("right").ray;Nt["vec3"].copy(this.grabDir,t.dir),this._currentDistance=this.grabDistance+this.moveDepth,Nt["vec3"].scale(this.grabDir,this.grabDir,this._currentDistance),Nt["vec3"].add(this.grabPosition,t.pos,this.grabDir),this.onGrabMove.emit(this.grabPosition)}onJoystickMove(){const t=this.xrmodule.xrview.inputs.getAxes("right")[1];Math.abs(t)<.1?this.onJoystickRelease():this.moveDepth+=-4*t*this.scene.dt}onJoystickRelease(){this.isJoystickMoving=!1}async handleGrab(){if(!this.isGrabbing){const t=this.xrmodule.gamepads.list.get("right").ray,{index:e,type:s}=this.raycastPositions(t);-1!==e&&(this.isGrabbing=!0,this.grabbedIndex=e,this.type=s,this.grabDistance=Nt["vec3"].distance(t.pos,this.positions[this.grabbedIndex]),this.moveDepth=0,this.onGrab.emit({index:e,type:s}))}}raycastPositions(t){const e=this.scene.paintingScene.raycastScene(t,[]);return e}handleJoystick(){!this.isJoystickMoving&&this.isGrabbing&&(this.isJoystickMoving=!0)}preRender(){!this.navigation.active&&this.isGrabbing&&null!==this.grabbedIndex&&(this.isJoystickMoving&&this.onJoystickMove(),this.onRayMove())}}class Vv{constructor(t,e,s,i){this.xrmodule=t,this.scene=e,this.navigation=s,this.grabHelper=i,this.removed=!1,this.enabled=!1,this.lineDisplay=.1,this.getRaycastOmit=()=>Wx.state.matches("painting.edit_light")?[]:["lookat"],this.setRaycastLabels=t=>{if(this.hovered.type!==t.type||this.hovered.index!==t.index)switch(this.hovered.type){case"light":this.xrmodule.tooltips.pop("Right/Squeeze","xr.light_lookat_grab"),this.xrmodule.tooltips.pop("Right/Trigger","xr.background_settings"),this.xrmodule.tooltips.pop("Right/Trigger","xr.pose_settings"),this.xrmodule.tooltips.push("Right/Trigger","xr.light_settings"),this.xrmodule.tooltips.push("Right/Squeeze","xr.light_grab"),this.removed=!1;break;case"lookat":this.xrmodule.tooltips.pop("Right/Trigger","xr.light_settings"),this.xrmodule.tooltips.pop("Right/Squeeze","xr.light_grab"),this.xrmodule.tooltips.pop("Right/Trigger","xr.background_settings"),this.xrmodule.tooltips.pop("Right/Trigger","xr.pose_settings"),this.xrmodule.tooltips.push("Right/Squeeze","xr.light_lookat_grab"),this.removed=!1;break;case"wall":this.xrmodule.tooltips.pop("Right/Trigger","xr.light_settings"),this.xrmodule.tooltips.pop("Right/Squeeze","xr.light_grab"),this.xrmodule.tooltips.pop("Right/Squeeze","xr.light_lookat_grab"),this.xrmodule.tooltips.pop("Right/Trigger","xr.pose_settings"),this.xrmodule.tooltips.push("Right/Trigger","xr.background_settings"),this.removed=!1;break;case"character":this.xrmodule.tooltips.pop("Right/Trigger","xr.light_settings"),this.xrmodule.tooltips.pop("Right/Squeeze","xr.light_grab"),this.xrmodule.tooltips.pop("Right/Squeeze","xr.light_lookat_grab"),this.xrmodule.tooltips.pop("Right/Trigger","xr.background_settings"),this.xrmodule.tooltips.push("Right/Trigger","xr.pose_settings"),this.removed=!1;break;case"none":this.removeAllRaycastLabels();break}},this.preRender=()=>{if(!this.enabled)return;if(this.grabHelper.isGrabbing||this.navigation.active)return void this.removeAllRaycastLabels();const t={...this.hovered},e=this.getRaycastOmit();this.hovered=this.scene.paintingScene.raycastScene(this.xrmodule.gamepads.list.get("right").ray,e),this.scene.paintingScene.highlightCharacter("character"===this.hovered.type),this.scene.paintingScene.highlightWall("wall"===this.hovered.type),"none"!==this.hovered.type?(this.lineDisplay+=this.scene.dt/.2,(t.type!==this.hovered.type||"light"===this.hovered.type&&this.hovered.index!==t.index)&&this.xrmodule.gamepads.inputs.getInput("right").gamepad.pulse(.5,.01)):this.lineDisplay-=this.scene.dt/.2,this.lineDisplay=Pi(this.lineDisplay,.1,1),this.setRaycastLabels(t)}}enable(){this.enabled=!0}disable(){this.enabled=!1,this.removeAllRaycastLabels(),this.scene.paintingScene.highlightCharacter(!1),this.scene.paintingScene.highlightWall(!1)}removeAllRaycastLabels(){this.removed||(this.xrmodule.tooltips.pop("Right/Trigger","xr.light_settings"),this.xrmodule.tooltips.pop("Right/Squeeze","xr.light_grab"),this.xrmodule.tooltips.pop("Right/Squeeze","xr.light_lookat_grab"),this.xrmodule.tooltips.pop("Right/Trigger","xr.background_settings"),this.xrmodule.tooltips.pop("Right/Trigger","xr.pose_settings"),this.removed=!0)}render(t){!this.navigation.active&&this.enabled&&(this.xrmodule.raycastLineRenderer.prepare(t),this.drawHand())}drawHand(){const t=this.grabHelper.isGrabbing?this.grabHelper.grabDistance:this.hovered.distance;this.xrmodule.raycastLineRenderer.draw("right",this.lineDisplay,Math.min(5,t))}}const{t:zv}=o.global,Xv=Nt["vec3"].fromValues(0,0,1),Wv=Nt["vec3"].create(),qv=Nt["vec3"].create(),Yv=Nt["mat4"].create(),Kv=Nt["mat3"].create(),Zv=Nt["quat"].create(),$v=[{hand:"right",key:"xr.tuto_global.step1"},{hand:"left",key:"xr.tuto_global.step2"},{hand:"right",key:"xr.tuto_global.step3"},{hand:"left",key:"xr.tuto_global.step4"},{hand:"right",key:"xr.tuto_global.step5"},{hand:"right",key:"xr.tuto_global.step6"}];class Qv{constructor(t){this.activity=t,this.step=0,this.active=!1,this._complete=!1,this._time=0,this.next=()=>{this.step+=1,this.step!=$v.length?this.applyStep():this.stop()},this.skip=()=>{this.step=$v.length,this.stop()};const e=t.xrmodule;this.label=new nm(e.ui),this.label.setPadding(.35,.35),this._fader=new vf(t.scene),this.nextBtn=new Ef(this.xrmodule.ui,"xr.next"),this.nextBtn.onClick.on(this.next),this.skipBtn=new Ef(this.xrmodule.ui,"xr.skip"),this.skipBtn.onClick.on(this.skip),this.title=t.xrmodule.ui.textLib.createUIText(),this.title.setStyle({fontSize:.15,center:!0}),this.title.color=Nt["vec4"].fromValues(Mn[0],Mn[1],Mn[2],1),this.node=new vi["a"],this.node.add(this.label.node),this.node.add(this.title.node),this.node.add(this.nextBtn.node),this.node.add(this.skipBtn.node),this.label.node.z=0,this.label.node.y=.1,this.title.node.z=0,this.title.node.y=.75,this.nextBtn.node.y=-1,this.skipBtn.node.y=-1,this.nextBtn.node.x=1.5*-this.xrmodule.ui.textRenderer.texts.get("xr.next").width,this.skipBtn.node.x=1.5*this.xrmodule.ui.textRenderer.texts.get("xr.skip").width,this._deffered=new Bt}get xrmodule(){return this.activity.xrmodule}updatePosition(){Nt["mat4"].invert(Yv,this.xrmodule.xrroot._wmatrix),Nt["mat3"].fromMat4(Kv,Yv),Nt["vec3"].transformMat3(Wv,this.xrmodule.xrcamera.forward,Kv),Nt["vec3"].scale(Wv,Wv,4.5),this.node.x=Wv[0],this.node.y=this.xrmodule.xrcamera.head.position[1]+.2,this.node.z=Wv[2],Wv[1]=0,Nt["vec3"].normalize(Wv,Wv);const t=Math.atan2(Wv[0],Wv[2]);Nt["quat"].identity(Zv),Nt["quat"].rotateY(Zv,Zv,Math.PI),Nt["quat"].rotateY(Zv,Zv,t),this.node.rotation.set(Zv),this.node.updateWorldMatrix(),Nt["mat3"].fromMat4(Kv,this.node._wmatrix),Nt["vec3"].transformMat3(Wv,Xv,Kv),Nt["vec3"].scaleAndAdd(qv,this.node._wposition,Wv,.07),this.xrmodule.raycaster.udpdatePlane(qv,Wv)}updateTitle(){this.title.setText(`${zv($v[this.step].key+".title")} ${this.step+1}/${$v.length}`)}start(){return this._complete||(this.xrmodule.xrroot.add(this.node),this.label.show(),this.updatePosition(),this.xrmodule.raycaster.enable(),this.xrmodule.raycaster.add(this.nextBtn),this.xrmodule.raycaster.add(this.skipBtn),this._fader.fadeIn(.4),this.nextBtn.show(.5),this.skipBtn.show(.8),this.active=!0,this.step=0,this.applyStep()),this._deffered.promise}stop(){this.nextBtn.onClick.off(this.next),this.skipBtn.onClick.off(this.skip),this._fader.fadeOut(),this.nextBtn.hide(),this.skipBtn.hide(),this.xrmodule.raycaster.remove(this.nextBtn),this.xrmodule.raycaster.remove(this.skipBtn),this.xrmodule.raycaster.disable(),this.xrmodule.xrroot.remove(this.node),this.active=!1,this._complete=!0,this.activity.postprocess.settings.reset(),this.activity.xrmodule.xrcamera.head.remove(this.label.node),this._deffered.resolve()}applyStep(){var t;if(this._time=0,this._pulseCount=0,this.label.setText($v[this.step].key+".desc"),this.updateTitle(),$v[this.step].hand){const e=this.activity.xrmodule.xrview.inputs.getInput($v[this.step].hand);null===(t=null===e||void 0===e?void 0:e.gamepad)||void 0===t||t.pulse(.5,100)}}preRender(){var t;if(this.active&&(this.title.preRender(),this._time+=this.activity.scene.dt,this._time>1&&this._pulseCount<1&&(this._time=0,this._pulseCount+=1,$v[this.step].hand))){const e=this.activity.xrmodule.xrview.inputs.getInput($v[this.step].hand);null===(t=null===e||void 0===e?void 0:e.gamepad)||void 0===t||t.pulse(.25,100)}}render(t){this.active&&(this._fader.render(t),this.nextBtn.render(t),this.skipBtn.render(t),this.label.renderRect(t),this.title.render(t),this.label.renderText([...Nn,1]))}}const Jv=Os.getBool("debug-xr");Nt["vec4"].create();class tx{constructor(t){this.scene=t,this.priority=0,this.loaded=!1,this.lightMoveFromSettings=!1,this.firstLoad=!0,this.enterGlobalTutorial=()=>{this.globalTutorial.start().then(()=>{Wx.send("COMPLETE_TUTORIAL")})},this.exitGlobalTutorial=()=>{},this.enterTutorial=()=>{console.log("[PaintingXRActivity] enterTutorial()"),this.navigation.disable(),this.postprocess.settings.setActive(!0),this.settingswheels.settingsWheelPhoto.enable(),this.settingswheels.settingsWheelPhoto.setActive(!0),this.photoTutorial.start().then(()=>{Wx.send("COMPLETE_TUTORIAL")})},this.exitTutorial=()=>{console.log("[PaintingXRActivity] exitTutorial()")},this._handleTriggerDown=t=>{if("Right/Trigger"===t.name&&!this.grabHelper.isGrabbing){const t=this.scene.paintingScene.raycastScene(this.xrmodule.gamepads.list.get("right").ray,[]);switch(t.type){case"character":kv.next();break;case"wall":Bv.next();break;case"light":Wx.send({type:"EDIT_LIGHT",lightIndex:t.index});break;case"none":Wx.send("EXIT");break}}},this.enterExplore=()=>{console.log("[PaintingXRActivity] enterExplore()"),this.navigation.xrctrl.enableRotation(),this.settingswheels.settingsWheelPhoto.enable(),this.postprocess.settings.setActive(!0)},this.enterExploreDefault=()=>{console.log("[PaintingXRActivity] enterExploreDefault()"),this.navigation.enable(),this.snapshot.disable(),this.startTriggerHandler(),this.grabHelper.enable(),this.grabHelper.onGrab.on(this.handleGrab),this.rayHelper.enable(),this.navigation.xrctrl.enableRotation()},this.exitExplore=()=>{console.log("[PaintingXRActivity] exitExplore()"),this.stopTriggerHandler(),this.grabHelper.disable(),this.grabHelper.onGrab.off(this.handleGrab),this.rayHelper.disable()},this.handleGrab=({index:t,type:e})=>{"light"===e?Wx.send({type:"EDIT_LIGHT_MOVE",lightIndex:t}):(Wx.send({type:"LOOKAT"}),this.xrmodule.tooltips.pop("Right/Squeeze","xr.light_lookat_grab"),this.xrmodule.tooltips.push("Right/Squeeze","xr.light_lookat_drop"),this.xrmodule.tooltips.push("Right/Thumbstick","xr.depth"))},this.handleDrop=()=>{this.navigation.enable(),Wx.send({type:this.lightMoveFromSettings?"SETTINGS":"EXIT"}),this.xrmodule.tooltips.pop("Right/Squeeze","xr.light_lookat_drop"),this.xrmodule.tooltips.pop("Right/Thumbstick","xr.depth")},this.enterEditLight=t=>{console.log("[ENTER EDIT LIGHT]"),this.navigation.enable(),this.startTriggerHandler(),this.grabHelper.enable(),this.grabHelper.onGrab.on(this.handleGrab),this.grabHelper.onGrabDrop.on(this.handleDrop),this.rayHelper.enable(),this.settingswheels.settingsWheelPhoto.disable(),this.settingswheels.settingsWheelPhoto.setActive(!1)},this.exitEditLight=()=>{this.stopTriggerHandler(),this.grabHelper.disable(),this.grabHelper.onGrab.off(this.handleGrab),this.grabHelper.onGrabDrop.off(this.handleDrop),this.rayHelper.disable(),this.settingswheels.settingsWheelLights.disable(),this.settingswheels.settingsWheelLights.setActive(!1),this.lightMoveFromSettings=!1},this.enterLightMoveEdition=t=>{console.log("[PaintingXRActivity] enterLightMoveEdition "+t.context.selectedLightIndex),this.navigation.disable(),this.settingswheels.settingsWheelLights.disable(),this.settingswheels.settingsWheelLights.setActive(!1),this.lightControl.startMove()},this.exitLightMoveEdition=()=>{console.log("[PaintingXRActivity] exitLightMoveEdition"),this.navigation.enable(),this.lightControl.stop()},this.enterLightLookatEdition=t=>{console.log("[PaintingXRActivity] enterLightLookatEdition "+t.context.selectedLightIndex),this.navigation.disable(),this.lightControl.startLookAt(),this.lightMoveFromSettings=!0},this.exitLightLookatEdition=()=>{console.log("[PaintingXRActivity] exitLightLookatEdition"),this.lightControl.stopLookAt()},this.enterLightSettingsEdition=t=>{console.log("[PaintingXRActivity] enterLightSettingsEdition "+t.context.selectedLightIndex),this.xrmodule.Inputs.getInput("left").gamepad.pulse(.5,100),this.settingswheels.settingsWheelLights.enable(),this.settingswheels.settingsWheelLights.setActive(!0),this.navigation.xrctrl.disableRotation(),this.setActiveLight(t),this.lightMoveFromSettings=!0},this.exitLightSettingsEdition=()=>{console.log("[PaintingXRActivity] exitLightSettingsEdition")},this.updateLightSettingsEdition=t=>{"UPDATE_LIGHT_DATA"===t.event.type?(console.log("[PaintingXRActivity] updateLightDatas",t.context.povDatas.lightDatas),void 0!==t.event.light.isOn&&(this.xrmodule.tooltips.pop("Left/Trigger",t.event.light.isOn?"xr.on":"xr.off"),this.xrmodule.tooltips.push("Left/Trigger",t.event.light.isOn?"xr.off":"xr.on")),void 0!==t.event.light.hue&&this.settingswheels.setSliderHue(t.event.light.hue)):"EDIT_LIGHT"===t.event.type&&(this.settingswheels.settingsWheelLights.setActive(!1),this.settingswheels.settingsWheelLights.setActive(!0),this.setActiveLight(t))},this.enterPhoto=()=>{console.log("[PaintingXRActivity] enterPhoto()"),this.snapshot.clear(),this.snapshot.enable(),this.settingswheels.settingsWheelPhoto.enable(),this.settingswheels.settingsWheelPhoto.setActive(!0),this.postprocess.settings.setActive(!0),this.navigation.enable(),this.navigation.xrctrl.disableRotation()},this.exitPhoto=()=>{Wx.state.matches("painting.photo.tutorial")||(console.log("[PaintingXRActivity] exitPhoto()"),this.settingswheels.settingsWheelPhoto.setActive(!1))},this.enterSnapshot=()=>{this.navigation.xrctrl.disableRotation(),console.log("[PaintingXRActivity] enterSnapshot()"),this.snapshot.enable(),this.xrmodule.tooltips.clear(),this.settingswheels.settingsWheelPhoto.disable(),this.navigation.disable(),Wx.send("UPDATE_POV_DATA",{pov:{position:Array.from(this.xrmodule.xrcamera.wposition),rotation:Array.from(this.xrmodule.xrcamera.wrotation),contrast:this.postprocess.settings.list.get(Lb.CONTRAST).mix,brightness:this.postprocess.settings.list.get(Lb.BRIGHTNESS).mix,saturation:this.postprocess.settings.list.get(Lb.SATURATION).mix,temperature:this.postprocess.settings.list.get(Lb.TEMPERATURE).mix,zoom:.5}}),this.createSnapshot()},this.enterPreview=()=>{console.log("[PaintingXRActivity] enterPreview()"),this.snapshot.enable(),this.postprocess.settings.setActive(!0),this.settingswheels.settingsWheelPhoto.disable(),this.navigation.disable()},this.exitPreview=()=>{console.log("[PaintingXRActivity] exitPreview()")},this.enterShare=()=>{console.log("[PaintingXRActivity] enterShare()"),this.share.enable(),this.postprocess.settings.setActive(!0),this.snapshot.disable(),this.settingswheels.settingsWheelPhoto.disable(),this.navigation.disable()},this.exitShare=()=>{console.log("[PaintingXRActivity] exitShare()"),this.share.disable()},console.log("Creating PaintingXRActivity"),this.postprocess=new Hb(t),this.postprocess.enabled=!0,this.stateHelper=new Ns([{match:"painting.explore",enter:this.enterExplore,exit:this.exitExplore},{match:"painting.explore.default",enter:this.enterExploreDefault},{match:"painting.explore.tutorial",enter:this.enterGlobalTutorial,exit:this.exitGlobalTutorial},{match:"painting.edit_light",enter:this.enterEditLight,exit:this.exitEditLight},{match:"painting.edit_light.move",enter:this.enterLightMoveEdition,exit:this.exitLightMoveEdition},{match:"painting.edit_light.lookat",enter:this.enterLightLookatEdition,exit:this.exitLightLookatEdition,update:this.updateLightSettingsEdition},{match:"painting.edit_light.settings",enter:this.enterLightSettingsEdition,exit:this.exitLightSettingsEdition,update:this.updateLightSettingsEdition},{match:"painting.photo.tutorial",enter:this.enterTutorial,exit:this.exitTutorial},{match:"painting.photo.default",enter:this.enterPhoto,exit:this.exitPhoto},{match:"painting.snapshot",enter:this.enterSnapshot},{match:"share.preview",enter:this.enterPreview,exit:this.exitPreview},{match:"share.select",enter:this.enterShare,exit:this.exitShare}])}get xrmodule(){return this.scene.xrmodule}async load(){this.loaded||(this.postprocess.init(),await Promise.all([this.scene.loadXRModule(),this.scene.loadPaintingScene()]),this.navigation=new rb(this.xrmodule),this.inputHelper=new $f(this),this.grabHelper=new Gv(this.xrmodule,this.scene,this.navigation),this.rayHelper=new Vv(this.xrmodule,this.scene,this.navigation,this.grabHelper),this.lightSettingsController=new tv,this.lightControl=new Hv(this.grabHelper),this.snapshot=new ff(this.xrmodule,this),this.settingswheels=new Lv(this.scene,this.xrmodule,this.postprocess.settings.list,this.lightSettingsController.list),this.photoTutorial=new Cf(this),this.globalTutorial=new Qv(this),this.photoModePush=new Uv(this),this.share=new Kf(this),this.fader=new vf(this.scene),this.fader.color=Nt["vec4"].fromValues(kn[0],kn[1],kn[2],1),this.firstLoad&&$b.apply(Kb.DEFAULT),await Promise.all([this.snapshot.load(),this.settingswheels.load(),this.navigation.load(),this.share.load()]),this.navigation.navmesh=this.scene.paintingScene.navmesh,this.loaded=!0,this.firstLoad=!1,console.log("Loaded PaintingXRActivity"))}unload(){this.loaded=!1,this.inputHelper=null,this.grabHelper=null,this.rayHelper=null,this.lightControl=null,this.snapshot=null,this.settingswheels=null,this.navigation=null,this.photoTutorial=null,this.globalTutorial=null,this.photoModePush=null,this.share=null,this.fader=null}start(){Wx.state.context.paintingPhotoTutorialCompleted||this.photoModePush.stateHelper.start(),this.stateHelper.start(),this.inputHelper.start(),this.fader.set(1),this.fader.fadeOut(),this.updatePovDatas(Wx.state.context.povDatas),this.scene.xrview.session.updateRenderState({depthNear:.15,depthFar:500}),this.navigation.xrctrl.enableController("right"),this.navigation.xrctrl.disableController("left")}stop(){console.log("[PaintingXRActivity] stop()"),this.settingswheels.settingsWheelPhoto.setActive(!1),this.settingswheels.settingsWheelLights.setActive(!1),this.scene.xrmodule.gamepads.restoreDefaultLightSetup(),this.stateHelper.stop(),this.inputHelper.stop()}onStateUpdate(t){this.scene.paintingScene.setCurrentBg(t.context.povDatas.background),this.scene.paintingScene.setCurrentPose(t.context.povDatas.pose)}getPovDatas(){const t=this.xrmodule.xrcamera.wposition,e=this.xrmodule.xrcamera.wrotation;return{position:[t[0],t[1],t[2]],rotation:[e[0],e[1],e[2],e[3]],format:this.snapshot.CurrentFormat,contrast:this.postprocess.settings.list.get(Lb.CONTRAST).mix,brightness:this.postprocess.settings.list.get(Lb.BRIGHTNESS).mix,saturation:this.postprocess.settings.list.get(Lb.SATURATION).mix,temperature:this.postprocess.settings.list.get(Lb.TEMPERATURE).mix,zoom:.5,background:Wx.state.context.povDatas.background,pose:Wx.state.context.povDatas.pose,lightDatas:Wx.state.context.povDatas.lightDatas}}updatePovDatas(t){this.navigation.xrctrl.setPovDatas(t),this.postprocess.settings.applyPovDatas(Wx.state.context.povDatas)}startTriggerHandler(){this.xrmodule.xrview.inputs.onBtnDown.on(this._handleTriggerDown)}stopTriggerHandler(){this.xrmodule.xrview.inputs.onBtnDown.off(this._handleTriggerDown)}setActiveLight(t){const e=t.context.selectedLightIndex;this.lightSettingsController.applyLightDatas();const s=t.context.povDatas.lightDatas[e];this.settingswheels.setSliderHue(s.hue),this.xrmodule.tooltips.pop("Left/Trigger",s.isOn?"xr.on":"xr.off"),this.xrmodule.tooltips.push("Left/Trigger",s.isOn?"xr.off":"xr.on")}preFrame(){if(this.snapshotDefered){this.snapshot.snap();const t=this.snapshotDefered.resolve;this.snapshot.snapshotToBlob().then(e=>t(e)),this.snapshotDefered=null}}preRender(){this.scene.paintingScene.preRender(),this.navigation.preRender(),this.xrmodule.preRender(),this.snapshot.preRender(),this.settingswheels.preRender(),this.photoTutorial.preRender(),this.globalTutorial.preRender(),this.share.preRender(),this.grabHelper.preRender(),this.rayHelper.preRender(),$p.updateListener(this.xrmodule.xrcamera.head._wmatrix)}render(){const t=this.scene.gl,e=this.scene.xrview.gllayer,s=e.framebufferWidth,i=e.framebufferHeight;if(t.clearColor(.01,.01,.01,1),!this.share.IsActive||this.share.InTransition){this.postprocess.setup.enabled?(this.postprocess.preRender(s,i),this.postprocess.bindColor()):(t.bindFramebuffer(t.FRAMEBUFFER,e.framebuffer),t.clear(t.COLOR_BUFFER_BIT)),this.scene.glstate.apply();for(const e of this.xrmodule.xrcamera.cameras){const s=e.lens.viewport;t.viewport(s.x,s.y,s.width,s.height),this.renderScene(e),this.fader.render(e)}this.scene.glstate.apply()}this.postprocess.setup.enabled&&(Jv?this.postprocess.render(0,0,s,i,null):(this.postprocess.render(0,0,s,i,e.framebuffer),t.bindFramebuffer(t.FRAMEBUFFER,e.framebuffer)));for(const n of this.xrmodule.xrcamera.cameras){const e=n.lens.viewport;t.viewport(e.x,e.y,e.width,e.height),this.renderUI(n),this.rayHelper.render(n),this.scene.enableDebugDraw&&ng.render(n,[e.x,e.y,e.width,e.height])}}renderSnapshot(t,e){const s=this.scene.gl,i=e.width,n=e.height;this.postprocess.setup.enabled?(this.postprocess.preRender(i,n),this.postprocess.bindColor()):(e.bind(),e.clear()),s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.viewport(0,0,i,n),this.scene.paintingScene.render(t,!0,!1),this.scene.glstate.apply(),this.postprocess.render(0,0,i,n,e.fbo)}renderScene(t){this.scene.paintingScene.render(t,!1,!0)}renderUI(t){this.photoModePush.render(t),this.share.render(t),this.navigation.render(t),this.photoTutorial.render(t),this.globalTutorial.render(t),this.xrmodule.render(t),this.settingswheels.render(t),this.snapshot.render(t)}rttPass(){this.scene.paintingScene.rttPass()}async createSnapshot(){this.snapshotDefered=new Bt;const t=await this.snapshotDefered.promise;Wx.send({type:"SNAPSHOT_READY",media:{blob:t,url:"",loaded:!1,artworkId:""}})}}class ex extends Um{createActivity(t){const e=Fm.getInstance().scene;return t?new tx(e):new Jb(e)}}let sx=new ex("painting");var ix=sx;class nx{constructor(t){this.scene=t,this.priority=0,this.enterIntro=()=>{dn(500).then(()=>{Wx.send("LOADING_INTRO_COMPLETE")})},this.enterDefault=()=>{},this.enterOutro=()=>{},this.stateHelper=new Ns([{match:"painting_loading.outro",enter:this.enterOutro}])}load(){return console.log("LoadingActivity.load()"),Promise.resolve()}onStateUpdate(t){}start(){this.stateHelper.start()}stop(){this.stateHelper.stop()}unload(){}preFrame(){}render(){}renderUI(){}preRender(){}rttPass(){}}const ox=Nt["mat3"].create();function ax(t,e,s,i){e[0]=t[12],e[1]=t[13],e[2]=t[14],i[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),i[1]=Math.sqrt(t[4]*t[4]+t[5]*t[5]+t[6]*t[6]),i[2]=Math.sqrt(t[8]*t[8]+t[9]*t[9]+t[10]*t[10]),ox[0]=t[0]/i[0],ox[1]=t[1]/i[0],ox[2]=t[2]/i[0],ox[3]=t[4]/i[1],ox[4]=t[5]/i[1],ox[5]=t[6]/i[1],ox[6]=t[8]/i[2],ox[7]=t[9]/i[2],ox[8]=t[10]/i[2],Nt["quat"].fromMat3(s,ox)}var rx=s("e3c2"),lx=s.n(rx),cx=s("1af7"),hx=s.n(cx);const dx="loader-ribbon";class ux extends _h["a"]{constructor(){super({uid:dx,vert:lx()(),frag:hx()()});const t=this.inputs;t.add(this.version=new dh["a"]("300 es")),t.add(this.precision=new hh["a"]("highp")),t.add(this.shaderid=new ma["a"]("id_"+dx,!0)),t.add(this.time=new Jo["d"]("sceneTime",1)),t.add(this.alpha=new Jo["d"]("globalAlpha",1))}prepare(t,e,s){t.uColor(this.color),t.uTexture(this.texture),t.uWorldMatrix(e._wmatrix),t.uVP(s._viewProj)}}const px="loader-ribbon";class gx extends ga["a"]{constructor(t,e=px){super(t,px),this.addPass(new ux,$l.DEFAULT)}}const mx=Nt["mat4"].create(),_x=Nt["vec3"].create(),bx=Nt["vec3"].create(),fx=Nt["quat"].create();class vx{constructor(t,e){this.scene=t,this.path=e,this.time=0,this.alpha=0;const s=new Kg;s.overrides={ribbon:new gx(this.scene.gl)};const i=new Sp(ri.resolve("assets/webgl/gltfs/loader/loader.gltf"),this.scene,{extensions:[s]}),n=new Pn(new nn(ri.resolve(this.path)),this.scene);this.resources=new Cn,this.resources.add(i,"loader"),this.resources.add(n,"texture")}async load(){await this.resources.load()}init(t){this.loaderGltf=this.resources.get("loader"),this.loaderRoot=this.loaderGltf.root._children[0],this.ribbon=this.loaderRoot.findChild("ribbon"),Nt["vec3"].multiply(this.ribbon.scale,this.ribbon.scale,[1.25,1.25,1]),t.add(this.ribbon),this.texture=this.resources.get("texture"),this.texture.repeat();const e=this.ribbon.renderable.materials[0].getPass($l.DEFAULT).pass;e.texture=this.texture,e.color=Nt["vec4"].fromValues(Mn[0],Mn[1],Mn[2],1),this._timeUniform=e.time.attachUniform("uSceneTime",1),this._timeUniform.set(0),this._alphaUniform=e.alpha.attachUniform("uGlobalAplha",1),this._alphaUniform.set(0)}show(){this.time=0,wt["a"].killTweensOf(this,"alpha"),wt["a"].to(this,{alpha:1,duration:.5})}hide(){wt["a"].killTweensOf(this,"alpha"),wt["a"].to(this,{alpha:0,duration:.5})}preRender(t){this.alpha>0&&(this.time+=t,this._timeUniform.set(this.time),this._alphaUniform.set(this.alpha))}render(t){this.ribbon&&this.ribbon.renderable.render(this.scene,t,Ql.OPAQUE,$l.DEFAULT)}}class xx{constructor(t,e){this.xrmodule=t,this.scene=e,this.loaded=!1,this.visible=!1,this.node=new vi["a"],this.tgtNode=new vi["a"],this.tgtNode.z=-4,this.tgtNode.y=0,this.image=new Ln(this.scene,"assets/webgl/woman_right.png"),this.node.add(this.image.node),this.ribbon=new vx(this.scene,"assets/webgl/loader_ribbon_sdf.png"),this.glconfig=new Rs["c"],this.glconfig.depthMask(!1).enableDepthTest(!1).enableBlend(!0).blendFunc(this.scene.gl.SRC_ALPHA,this.scene.gl.ONE_MINUS_SRC_ALPHA)}load(){return this._loadPromise||(this._loadPromise=this._doLoad()),this._loadPromise}async _doLoad(){await this.ribbon.load(),await this.image.load(),this.ribbon.init(this.node),this.loaded=!0}start(){this.xrmodule.scene.root.add(this.node),this.xrmodule.xrcamera.head.add(this.tgtNode)}stop(){this.xrmodule.scene.root.remove(this.node),this.xrmodule.xrcamera.head.remove(this.tgtNode)}show(){this.setMatrix(),this.image.show(),this.ribbon.show(),this.visible=!0}hide(){this.setMatrix(),this.image.hide(),this.ribbon.hide(),this.visible=!1}setMatrix(){this.node.setMatrix(this.tgtNode._wmatrix),this.node.updateMatrix()}reachTarget(t){mx.set(this.tgtNode._wmatrix),ax(mx,_x,fx,bx),Nt["vec3"].lerp(_x,this.node.position,_x,t),fx[2]=0,Nt["quat"].normalize(fx,fx),Nt["quat"].slerp(fx,this.node.rotation,fx,t),this.node.rotation.set(fx),this.node.position.set(_x),this.node.invalidate()}preRender(){this.loaded&&(this.visible&&this.reachTarget(4*this.xrmodule.scene.dt),this.ribbon.preRender(this.xrmodule.scene.dt))}render(t){this.loaded&&(this.xrmodule.scene.glstate.push(this.glconfig),this.xrmodule.scene.glstate.apply(),this.ribbon&&this.ribbon.render(t),this.image.render(t),this.xrmodule.scene.glstate.pop())}}class Tx{constructor(t){this.scene=t,this.alpha=0,this.color=Nt["vec4"].fromValues(0,0,0,0),this.prg=t.programs.get("fader"),this.cfg=t.glstate.config();const e=t.gl;this.cfg.enableDepthTest(!1).enableBlend(!0).blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA)}fadeIn(){return new Promise(t=>{wt["a"].to(this,{alpha:1,duration:1.2,onComplete:t})})}fadeOut(){return new Promise(t=>{wt["a"].to(this,{alpha:0,duration:1.2,onComplete:t})})}preRender(){}render(t){this.color[3]=this.alpha,this.prg.use(),this.prg.uColor(this.color),this.cfg.enableBlend(1!==this.alpha),this.scene.glstate.push(this.cfg),this.scene.glstate.apply(),this.scene.quad.bind(),this.scene.quad.attribPointer(this.prg),this.scene.quad.render(),this.scene.glstate.pop()}}const Ex=Os.getBool("debug-xr");class wx{constructor(t){this.scene=t,this.priority=-1,this.loaded=!1,this.clear=!0,this.enterIntro=()=>{this.clear=!0,this.background.fadeIn().then(()=>{Wx.send("LOADING_INTRO_COMPLETE")})},this.enterDefault=()=>{},this.enterOutro=()=>{this.clear=!1,Promise.all([this.loading.hide(),this.background.fadeOut()]).then(()=>{this.loading.stop(),Wx.send("LOADING_OUTRO_COMPLETE")})},this.stateHelper=new Ns([{match:"painting_loading.intro",enter:this.enterIntro},{match:"painting_loading.default",enter:this.enterDefault},{match:"painting_loading.outro",enter:this.enterOutro},{match:"museum_loading.intro",enter:this.enterIntro},{match:"museum_loading.default",enter:this.enterDefault},{match:"museum_loading.outro",enter:this.enterOutro},{match:"gallery_loading.intro",enter:this.enterIntro},{match:"gallery_loading.fromshare",enter:this.enterIntro},{match:"gallery_loading.default",enter:this.enterDefault},{match:"gallery_loading.outro",enter:this.enterOutro}])}get xrmodule(){return this.scene.xrmodule}onStateUpdate(t){}async load(){return console.log("LoadingXRActivity.load()"),await this.scene.loadXRModule(),this.loading=new xx(this.xrmodule,this.scene),await this.loading.load(),this.loaded=!0,this.loading.start(),this.loading.show(),this.background=new Tx(this.scene),this.background.color=Nt["vec4"].fromValues(kn[0],kn[1],kn[2],1),Promise.resolve()}unload(){}start(){this.loaded&&(this.loading.start(),this.loading.show()),this.stateHelper.start()}stop(){this.stateHelper.stop()}renderUI(t){this.xrmodule.Ready&&this.xrmodule.render(t)}preRender(){this.xrmodule.Ready&&this.xrmodule.preRender(),this.loaded&&this.loading.preRender(),this.background.preRender()}render(){const t=this.scene.gl;if(t.bindFramebuffer(t.FRAMEBUFFER,Ex?null:this.scene.xrview.gllayer.framebuffer),t.clearColor(kn[0],kn[1],kn[2],1),this.clear&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT),this.scene.glstate.apply(),this.xrmodule.Ready)for(const e of this.xrmodule.xrcamera.cameras){const s=e.lens.viewport;t.viewport(s.x,s.y,s.width,s.height),this.background.render(e),this.loading&&this.loading.render(e),this.renderUI(e)}this.scene.glstate.apply()}preFrame(){}rttPass(){}}class Ox extends Um{createActivity(t){const e=Fm.getInstance().scene;return t?new wx(e):new nx(e)}}let Ax=new Ox("loading");var yx,Dx=Ax;(function(t){t["INACTIVE"]="inactive"})(yx||(yx={}));const jx=Object(As["a"])({id:"XR_fsm",initial:"inactive",context:{},states:{inactive:{entry:["setupStdActivities","notifyChange"],on:{REQUEST:"requesting"}},requesting:{on:{SESSION_END:"inactive",EXIT:"inactive"},invoke:{src:"requestXR",onDone:"active",onError:"inactive"}},active:{entry:["setupXrActivities","notifyChange"],on:{SESSION_END:"inactive",EXIT:"inactive"}}}},{services:{requestXR:()=>(console.log("requesting XR session"),Fm.getInstance().requestXR())},actions:{notifyChange:Object(ys["l"])("XR_STATE_CHANGE"),setupXrActivities(){Object(ys["l"])("XR_STATE_CHANGE"),console.log("setting up XR activities"),ix.xrmode=!0,mb.xrmode=!0,Dx.xrmode=!0,Vm.xrmode=!0},setupStdActivities(){console.log("setting up STD activities"),ix.xrmode=!1,mb.xrmode=!1,Dx.xrmode=!1,Vm.xrmode=!1}}});var Rx,Sx=jx;(function(t){t["HOME"]="home",t["INIT_XR"]="initxr",t["PAINTING_LOADING"]="painting_loading",t["PAINTING"]="painting",t["GALLERY_LOADING"]="gallery_loading",t["GALLERY"]="gallery",t["SHARE"]="share"})(Rx||(Rx={}));const Cx=["pose2","pose1","pose3","pose4"],Ix=["bg0","bg1","bg2","bg3"],Px=!1,Lx=Px?{portrait:{width:3072,height:4096},landscape:{width:4096,height:3072},square:{width:4096,height:4096}}:{portrait:{width:1080,height:1440},landscape:{width:1440,height:1080},square:{width:1080,height:1080}},Mx=()=>({position:Nt["vec3"].create(),lookat:Nt["vec3"].create(),hue:0,saturation:0,intensity:.1,isOn:!0});function kx(t=null){return{position:[-.22305898368358612,1.440000057220459,2.743638038635254],rotation:[-.08949697017669678,-.040187012404203415,-.0036140738520771265,.995169460773468],format:t||"landscape",brightness:1,contrast:.05,saturation:.45,temperature:.43,zoom:.5,pose:Cx[0],background:Ix[0],lightDatas:[Mx(),Mx(),Mx()]}}async function Nx(t,e,s){}function Fx(t){return{Position:Array.from(t.position),Lookat:Array.from(t.lookat),Hue:t.hue,Saturation:t.saturation,Intensity:t.intensity,IsOn:t.isOn?1:0}}async function Bx(t,e){const s=await vs({Image:t.blob,Artwork:{Format:e.format,PointOfView:{Position:e.position,Rotation:e.rotation},PostProcessing:{Brightness:e.brightness,Contrast:e.contrast,Saturation:e.saturation,Temperature:e.temperature,Zoom:e.zoom},Background:e.background,Pose:e.pose,Light0:Fx(e.lightDatas[0]),Light1:Fx(e.lightDatas[1]),Light2:Fx(e.lightDatas[2])}}),{ArtworkID:i}=s.expect("Failed to create the artwork."),n=Ts({ArtworkID:i,lang:"en"});return t.url=n,t.artworkId=i,t}const Ux=(t,e)=>{var s,i,n,o;const a=void 0!==e.id?e.id:t.selectedLightIndex,r=[...t.povDatas.lightDatas],l=r[a],c=e.light;return l.hue=null!==(s=c.hue)&&void 0!==s?s:l.hue,l.intensity=null!==(i=c.intensity)&&void 0!==i?i:l.intensity,l.saturation=null!==(n=c.saturation)&&void 0!==n?n:l.saturation,l.isOn=null!==(o=c.isOn)&&void 0!==o?o:l.isOn,c.position&&l.position.set(c.position),c.lookat&&l.lookat.set(c.lookat),{...t.povDatas,lightDatas:r}},Hx=Object(As["a"])({id:"app",initial:"initial",context:{_xr:null,xrActive:!1,nearbyArtworkId:null,selectedArtworkId:null,introCompleted:Os.getBool("skipIntro"),paintingTutorialCompleted:!1,paintingPoseTutorialCompleted:!1,paintingBackgroundTutorialCompleted:!1,paintingPhotoTutorialCompleted:!1,sharedMedia:null,povDatas:kx(),galleryPovDatas:{...kx()},galleryUrl:null,galleryFocusedBounds:{left:0,top:0,right:0,bottom:0},openPhotoPending:!1,galleryReferer:null,selectedLightIndex:0,hoveredLightIndex:null},entry:["spawnXR"],on:{XR_STATE_CHANGE:{actions:Object(ys["b"])({xrActive:(t,e)=>t._xr.getSnapshot().matches("active")})}},states:{initial:{on:{INIT:Object({VUE_APP_HIRES_PHOTOS:"false",VUE_APP_DEBUG:"false",VUE_APP_GTM_ID:"GTM-TEMP000",VUE_APP_CAPTCHA_SITE_KEY:"6LfuFz4hAAAAAMcMvbF8fAHJF2K73LhwISRreUbs",VUE_APP_SERVERLESS_BASE_URL:"https://pvm2zxz5v7.execute-api.eu-west-1.amazonaws.com/production",VUE_APP_GTM_DEBUG:"false",VUE_APP_ENVCONFIG:"production",VUE_APP_WEBSITE_URL:"https://www.thefemalegaze.art/",VUE_APP_ABOUT_PAGE:"true",VUE_APP_CREDITS_PAGE:"false",VUE_APP_LEGALS_PAGE:"true",VUE_APP_COOKIE_MENU:"true",NODE_ENV:"production",VUE_APP_API_BASE_PATH:"/api",VUE_APP_BASE_URL:"/",VUE_APP_BUGSNAG_APIKEY:"",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",VUE_APP_VUEX_STRICT:"false",VUE_APP_VUEX_LOGGER:"false",VUE_APP_IDLE_RELOAD_TIME:"180",VUE_APP_VERSION:"0.1.0",VUE_APP_NAME:"2022-meta-charlottenborg",VUE_APP_COMMIT_HASH:"767f460",BASE_URL:""}).VUE_APP_INITIAL_STATE||Rx.HOME}},[Rx.HOME]:{initial:"landing",entry:["exitXr"],meta:{views:["HomeVue"]},on:{ENTER:[{target:"painting_loading.fromhome",cond:(t,e)=>!e.xr,actions:Object(ys["k"])((t,e)=>({type:e.xr?"REQUEST":"EXIT"}),{to:"xr"})},{target:"startXR",cond:(t,e)=>e.xr},{}]},states:{landing:{on:{GOTO_ABOUT:"#app.home.about",GOTO_CREDITS:"#app.home.credits",GOTO_LEGALS:"#app.home.legals"}},about:{on:{EXIT:"#app.home.landing"}},credits:{on:{EXIT:"#app.home.landing"}},legals:{on:{EXIT:"#app.home.landing"}}}},startXR:{entry:Object(ys["k"])((t,e)=>({type:"REQUEST"}),{to:"xr"}),on:{XR_STATE_CHANGE:[{target:"painting_loading",actions:Object(ys["b"])({xrActive:(t,e)=>!0})}]}},[Rx.PAINTING_LOADING]:{meta:{views:["LoadingVue"],activities:["loading"]},initial:"intro",on:{UPDATE_POV_DATA:{actions:Object(ys["b"])({povDatas:(t,e)=>({...t.povDatas,...e.pov})})},UPDATE_LIGHT_DATA:{actions:Object(ys["b"])({povDatas:(t,e)=>Ux(t,e)})}},states:{fromhome:{meta:{views:["HomeVue"]},on:{LOADING_COMPLETE:"#app.painting"},invoke:{src:"loadPaintingActivity",onDone:"outro"}},fromgallery:{},intro:{on:{LOADING_INTRO_COMPLETE:"default",LOADING_COMPLETE:"#app.painting"}},default:{invoke:{src:"loadPaintingActivity",onDone:"outro"}},outro:{meta:{views:["LoadingVue"],activities:["loading","painting"]},on:{LOADING_OUTRO_COMPLETE:[{target:"#app.painting.photo",cond:"isOpeningPhoto"},{target:Os.getBool("gallery")?"#app.gallery":"#app.painting"}]}}}},[Rx.PAINTING]:{meta:{views:["PaintingVue"],activities:["painting"]},on:{GOTO_GALLERY:[{target:"gallery_loading",cond:"isXr"},{target:"gallery",cond:"notXr"}],UPDATE_POV_DATA:{actions:Object(ys["b"])({povDatas:(t,e)=>({...t.povDatas,...e.pov})})},UPDATE_LIGHT_DATA:{actions:Object(ys["b"])({povDatas:(t,e)=>Ux(t,e)})},HOVER_LIGHT:{actions:Object(ys["b"])({hoveredLightIndex:(t,e)=>e.lightIndex})}},initial:"initial",states:{initial:{always:[{target:"intro",cond:"needIntro"},"explore"]},intro:{exit:"completeIntro",on:{INTRO_COMPLETE:"explore"}},explore:{initial:"init",on:{ENTER_PHOTO:"#app.painting.photo",EDIT_LIGHT:{target:"edit_light",actions:Object(ys["b"])({selectedLightIndex:(t,e)=>e.lightIndex})},EDIT_POSE:"edit_pose",EDIT_BACKGROUND:"edit_background",EDIT_LIGHT_LOOKAT:{target:"edit_light.lookat",actions:Object(ys["b"])({selectedLightIndex:(t,e)=>e.lightIndex})},EDIT_LIGHT_MOVE:{target:"edit_light.move",actions:Object(ys["b"])({selectedLightIndex:(t,e)=>e.lightIndex})}},states:{init:{after:{100:{target:"default",cond:"tutorialCompleted"},0:{target:"tutorial",cond:"needTutorial"}}},default:{},tutorial:{meta:{views:["PaintingTutorialVue"]},on:{COMPLETE_TUTORIAL:{actions:["completePaintingNavigationTutorial"],target:"default"}}}}},edit_light:{initial:"settings",on:{EXIT:"explore",EDIT_LIGHT:{target:"edit_light",internal:!0,actions:Object(ys["b"])({selectedLightIndex:(t,e)=>e.lightIndex})},EDIT_LIGHT_LOOKAT:{target:"edit_light.lookat",actions:Object(ys["b"])({selectedLightIndex:(t,e)=>e.lightIndex})},EDIT_LIGHT_MOVE:{target:"edit_light.move",actions:Object(ys["b"])({selectedLightIndex:(t,e)=>e.lightIndex})},MOVE:"#l_move",LOOKAT:"#l_lookat",SETTINGS:"#l_settings",EDIT_POSE:"explore",EDIT_BACKGROUND:"explore"},states:{move:{id:"l_move"},lookat:{id:"l_lookat"},settings:{id:"l_settings",always:[{target:"move",cond:"notXr"}]}}},edit_pose:{on:{EXIT:"explore",SUBMIT:{target:"explore",actions:["completePaintingPoseTutorial"]}}},edit_background:{on:{EXIT:"explore",SUBMIT:{target:"explore",actions:["completePaintingBackgroundTutorial"]}}},photo:{entry:Object(ys["b"])({openPhotoPending:t=>!1}),on:{CANCEL:"#app.painting.explore",SUBMIT:"snapshot"},initial:"default",states:{default:{after:{300:{target:"tutorial",cond:"needPhotoTutorial"}}},tutorial:{on:{COMPLETE_TUTORIAL:{actions:["completePaintingPhotoTutorial"],target:"default"}}}}},snapshot:{on:{SNAPSHOT_READY:{target:"#app.share.preview",actions:Object(ys["b"])({sharedMedia:(t,e)=>({...e.media,loaded:!1})})}}}}},[Rx.SHARE]:{meta:{views:["PaintingVue","ShareVue"],activities:["painting"]},on:{GOTO_HOME:"home",GOTO_GALLERY:[{target:"gallery_loading",cond:"isXr"},{target:"gallery",cond:"notXr"}]},initial:"preview",states:{preview:{on:{CANCEL:"#app.painting.photo",SUBMIT:"upload"}},upload:{invoke:{src:async(t,e)=>{t.sharedMedia=await Bx(t.sharedMedia,t.povDatas)},onError:"error",onDone:"select"}},select:{on:{CANCEL:"#app.painting.photo",SHARE:"pending"}},pending:{invoke:{src:(t,e)=>Nx(t.sharedMedia,t.povDatas,e.service),onError:"error",onDone:"success"}},error:{},success:{after:{10:[{target:"#app.gallery_loading",cond:"isXr"},{target:"#app.gallery",cond:"notXr"}]}}}},[Rx.GALLERY_LOADING]:{meta:{activities:["loading"]},initial:"intro",states:{intro:{on:{LOADING_INTRO_COMPLETE:"default"}},default:{invoke:{src:"loadGalleryActivity",onDone:"outro"}},outro:{meta:{activities:["loading","gallery"]},on:{LOADING_OUTRO_COMPLETE:"#app.gallery"}}}},[Rx.GALLERY]:{meta:{views:["GalleryVue"],activities:["gallery"]},initial:"list",on:{GOTO_HOME:"home",GOTO_PAINTING:"painting_loading",OPEN_PHOTO:{actions:Object(ys["b"])({povDatas:(t,e)=>(console.log("assign pov data to ",e.pov,e.pov.position),{...t.povDatas,...Object(E["P"])(e.pov)}),openPhotoPending:t=>!0}),target:"painting_loading"}},states:{list:{on:{GALLERY_ENTER:{actions:Object(ys["b"])({galleryPovDatas:(t,e)=>({...t.galleryPovDatas,...Object(E["P"])(e.pov)}),galleryUrl:(t,e)=>e.url}),target:"#app.gallery.single"}}},single:{on:{CANCEL:"#app.gallery.list"}}},exit:["resetReferer"]}}},{services:{loadMuseumActivity(){return Vm.hasActivity&&Vm.unload(),ix.unload(),mb.load()},loadPaintingActivity(){return Vm.hasActivity&&Vm.unload(),mb.unload(),ix.load()},loadGalleryActivity(){return ix.unload(),mb.unload(),Vm.hasActivity?Vm.load():()=>{}}},actions:{startMuseumActivity(){return mb.start()},stopMuseumActivity(){return mb.stop()},startPaintingActivity(){return ix.start()},stopPaintingActivity(){return ix.stop()},spawnXR:Object(ys["b"])({_xr:()=>Object(_s["b"])(Sx,"xr")}),exitXr:Object(ys["k"])({type:"EXIT"},{to:"xr"}),completePaintingNavigationTutorial:Object(ys["b"])({paintingTutorialCompleted:!0}),completePaintingPoseTutorial:Object(ys["b"])({paintingPoseTutorialCompleted:!0}),completePaintingBackgroundTutorial:Object(ys["b"])({paintingBackgroundTutorialCompleted:!0}),completePaintingPhotoTutorial:Object(ys["b"])({paintingPhotoTutorialCompleted:!0}),resetReferer:Object(ys["b"])({galleryReferer:null}),completeIntro:Object(ys["b"])({introCompleted:!0})},guards:{isXr:t=>t.xrActive,notXr:t=>!t.xrActive,tutorialCompleted:t=>t.paintingTutorialCompleted,needTutorial:t=>!t.paintingTutorialCompleted,needIntro:t=>!t.introCompleted,needPhotoTutorial:t=>!t.paintingPhotoTutorialCompleted,isOpeningPhoto:t=>t.openPhotoPending}});var Gx=Hx;function Vx(t){const e=t.meta,s=[];for(const i of Object.values(e)){const t=i;t.views&&s.push(...t.views)}return Array.from(new Set(s).values())}function zx(t){const e=t.meta,s=[];for(const i of Object.values(e)){const t=i;t.activities&&s.push(...t.activities)}return Array.from(new Set(s).values())}const Xx=Object(_s["a"])(Gx);Xx.onTransition(t=>{const e=zx(t);e.includes("painting")?ix.start():ix.stop(),Vm.hasActivity&&(e.includes("gallery")?Vm.start():Vm.stop()),e.includes("loading")?Dx.start():Dx.stop(),ix.onStateUpdate(t),Dx.onStateUpdate(t),Vm.hasActivity&&Vm.onStateUpdate(t)}),Xx.start();var Wx=Xx;const qx=t=>(Object(E["F"])("data-v-24020e99"),t=t(),Object(E["E"])(),t),Yx={class:"Page"},Kx={class:"Page__Inner",ref:"inner"},Zx=qx(()=>Object(E["j"])("div",{class:"Background"},[Object(E["j"])("div",{class:"Background__Part Background__Part--Left"}),Object(E["j"])("div",{class:"Background__Part Background__Part--Right"})],-1)),$x={class:"Page__Left"},Qx={class:"Owner"},Jx={class:"Line__Parent Owner__Name"},tT={class:"Line"},eT={class:"Line__Parent Owner__Name"},sT={class:"Line"},iT={class:"Nav",ref:"scroller"},nT={ref:"scrolling"},oT={class:"Page__Right"},aT=qx(()=>Object(E["j"])("hr",{class:"Header__Line"},null,-1)),rT={class:"Content"};function lT(t,e,s,i,n,o){const a=Object(E["K"])("ui-btn-close");return Object(E["D"])(),Object(E["i"])("div",Yx,[Object(E["j"])("div",Kx,[Zx,Object(E["j"])("div",$x,[Object(E["j"])("div",Qx,[Object(E["j"])("div",Jx,[Object(E["j"])("div",tT,Object(E["O"])(t.$t("about.owner_line1")),1)]),Object(E["j"])("div",eT,[Object(E["j"])("div",sT,Object(E["O"])(t.$t("about.owner_line2")),1)])]),Object(E["j"])("nav",iT,[Object(E["j"])("ul",nT,[Object(E["J"])(t.$slots,"nav",{},void 0,!0)],512)],512)]),Object(E["j"])("div",oT,[Object(E["j"])("header",{class:Object(E["w"])(["Header",{"is-appear":t.isAppear}])},[Object(E["m"])(a,{delay:.5,text:t.$t("about.cta_close"),onClick:t.onClose},null,8,["delay","text","onClick"]),aT],2),Object(E["j"])("div",rT,[Object(E["J"])(t.$slots,"content",{},void 0,!0)])])],512)])}const cT={class:"Item__Number cta"},hT=["href"];function dT(t,e,s,i,n,o){return Object(E["D"])(),Object(E["i"])("li",{class:Object(E["w"])(["Item",["Item--"+t.index,t.item.first?"current":""]])},[Object(E["j"])("span",cT,[Object(E["j"])("span",null,Object(E["O"])(t.index<10?"0"+t.index:t.index),1)]),Object(E["j"])("a",{href:"#/"+t.item.id,onClick:e[0]||(e[0]=Object(E["bb"])(e=>t.$emit("navClick",e,t.item),["prevent"]))},[Object(E["J"])(t.$slots,"default",{},void 0,!0)],8,hT)],2)}var uT=s("5c40"),pT=Object(uT["r"])({emits:["navClick"],props:{index:{type:Number,default:0},item:{type:Object,default:null}}});s("baa2");const gT=Zt()(pT,[["render",dT],["__scopeId","data-v-5347f8da"]]);var mT=gT;const _T=["id"],bT={class:"Mark",ref:"mark"};function fT(t,e,s,i,n,o){return Object(E["D"])(),Object(E["i"])("section",{id:t.item.id,class:"Section"},[Object(E["j"])("div",bT,null,512),Object(E["J"])(t.$slots,"default",{},void 0,!0)],8,_T)}var vT=Object(uT["r"])({emits:["reachChange"],props:{item:{type:Object,default:null}},setup(){let t;return{intersectionObserver:t}},mounted(){this.intersectionObserver=new IntersectionObserver(t=>{t[0].intersectionRatio?this.item.reached=!0:this.item.reached=!1,this.$emit("reachChange",this.item)}),this.intersectionObserver.observe(this.$refs.mark)},unmounted(){}});s("c56e");const xT=Zt()(vT,[["render",fT],["__scopeId","data-v-53a94040"]]);var TT=xT;function ET(t,e,s,i,n,o){const a=Object(E["K"])("ContentParagraph");return Object(E["D"])(),Object(E["g"])(a,{is:"h2"},{default:Object(E["Z"])(()=>[Object(E["J"])(t.$slots,"default",{},void 0,!0)]),_:3})}function wT(t,e,s,i,n,o){const a=Object(E["K"])("line-by-line"),r=Object(E["K"])("AppearObject");return Object(E["D"])(),Object(E["g"])(r,{class:Object(E["w"])(["Parent","Parent--"+t.is])},{default:Object(E["Z"])(()=>[Object(E["m"])(a,{tag:t.is,auto:!1,animated:!1},{default:Object(E["Z"])(()=>[Object(E["J"])(t.$slots,"default",{},void 0,!0)]),_:3},8,["tag"])]),_:3},8,["class"])}function OT(t,e,s,i,n,o){return Object(E["D"])(),Object(E["g"])(Object(E["M"])(t.is),{class:Object(E["w"])({"is-appear":t.isAppear})},{default:Object(E["Z"])(()=>[Object(E["J"])(t.$slots,"default")]),_:3},8,["class"])}var AT=s("c0e2");class yT{constructor(){this.isInit=!1,this.onDebounceResize=()=>{clearTimeout(this.timeout),this.timeout=setTimeout(this.onResize,200)},this.calculateVH=()=>{const t=document.documentElement;t.style.setProperty("--vh",window.innerHeight/100+"px")},this.onResize=()=>{this.calculateVH(),PT.emit(PT.events.RESIZE)}}init(){this.isInit||(this.isInit=!0,window.addEventListener("resize",this.onDebounceResize),this.calculateVH())}}var DT=new yT,jT=s("27d6"),RT=s.n(jT);const ST=new Promise(t=>{const e=()=>{t(),PT.emit(PT.events.FONT_LOADED)};RT.a.load({custom:{families:["Times New Roman","Times New Roman Cond","Druk"]},active:e,inactive:e})});var CT=ST;class IT extends AT["TinyEmitter"]{constructor(){super(...arguments),this.events={SCROLL:"Global.SCROLL",RESIZE:"Global.RESIZE",FONT_LOADED:"Global.FONT_LOADED"},this.Resize=null,this.fontLoaded=CT}init(){DT.init()}on(t,e,s){return this.init(),super.on(t,e,s)}once(t,e,s){return this.init(),super.once(t,e,s)}}var PT=new IT,LT=Object(E["o"])({setup(){let t;return{intersectionObserver:t,isAppear:Object(E["H"])(!1)}},props:{is:{type:String,default:"div"},once:{type:Boolean,default:!0},ratio:{type:Number,default:.3},delay:{type:Number,default:0}},async mounted(){await this.$nextTick(),PT.fontLoaded.then(this.init)},unmounted(){this.intersectionObserver&&this.intersectionObserver.disconnect()},methods:{init(){this.intersectionObserver=new IntersectionObserver(t=>{t[0].intersectionRatio>this.ratio?(this.isAppear=!0,this.$emit("appear"),this.once&&this.intersectionObserver.unobserve(this.$el)):this.once||(this.isAppear=!1,this.$emit("disappear"))},{threshold:[this.ratio]}),this.intersectionObserver.observe(this.$el)}}});const MT=Zt()(LT,[["render",OT]]);var kT=MT;function NT(t,e,s,i,n,o){return Object(E["D"])(),Object(E["g"])(Object(E["M"])(t.tag),null,{default:Object(E["Z"])(()=>[Object(E["J"])(t.$slots,"default",{},void 0,!0)]),_:3})}var FT=s("690a"),BT=s.n(FT);wt["b"].registerPlugin(BT.a);var UT=Object(E["o"])({props:{debug:{type:Boolean,default:!1},tag:{type:String,default:"div"},overflow:{type:Boolean,default:!1},auto:{type:Boolean,default:!0},delay:{type:Number,default:0},animated:{type:Boolean,default:!0}},setup(){let t,e;const s=0;let i=!1,n=!1,o=!1;return{wantToPlay:n,init:i,played:o,textSplited:t,textSplitedParent:e,oldWindowWidth:s}},mounted(){PT.on(PT.events.RESIZE,this.onResize),PT.on(PT.events.FONT_LOADED,this.onFontLoaded),this.onResize(),this.animated&&this.auto&&this.onEnter()},unmounted(){PT.off(PT.events.RESIZE,this.onResize),PT.off(PT.events.FONT_LOADED,this.onFontLoaded)},methods:{async recalc(){this.$el.style.height=null,this.textSplitedParent&&this.textSplitedParent.revert(),this.textSplited&&this.textSplited.revert(),await this.$nextTick(),this.textSplited=new BT.a(this.$el,{type:"lines",linesClass:"Line"}),this.overflow&&(this.textSplitedParent=new BT.a(this.$el,{type:"lines",linesClass:"Line__Parent"})),this.init=!0,this.animated&&this.auto&&this.onEnter()},onFontLoaded(){this.recalc()},onResize(){bg.windowWidth!==this.oldWindowWidth&&(this.oldWindowWidth=bg.windowWidth,this.recalc())},onEnter(){const t=wt["b"].timeline({delay:this.delay});if(this.init&&!this.played){this.played=!0;const e=wt["b"].utils.selector(this.$el);t.from([e(".Line")],{yPercent:t=>100*(t+1),clearProps:"all",duration:1,ease:"quart.out"},"start")}return t}}});s("90eb");const HT=Zt()(UT,[["render",NT],["__scopeId","data-v-3445b9d6"]]);var GT=HT,VT=Object(uT["r"])({props:{is:{type:String,default:"p"}},components:{AppearObject:kT,LineByLine:GT}});s("e40b");const zT=Zt()(VT,[["render",wT],["__scopeId","data-v-541ffb56"]]);var XT=zT,WT=Object(uT["r"])({components:{ContentParagraph:XT}});s("8a65");const qT=Zt()(WT,[["render",ET],["__scopeId","data-v-b0f738e6"]]);var YT=qT;const KT={key:0};function ZT(t,e,s,i,n,o){const a=Object(E["K"])("AppearObject");return Object(E["D"])(),Object(E["g"])(a,{is:"figure"},{default:Object(E["Z"])(()=>[Object(E["j"])("picture",null,[Object(E["J"])(t.$slots,"default",{},void 0,!0)]),this.$slots["caption"]?(Object(E["D"])(),Object(E["i"])("figcaption",KT,[Object(E["J"])(t.$slots,"caption",{},void 0,!0)])):Object(E["h"])("",!0)]),_:3})}const $T=Object(uT["r"])({components:{AppearObject:kT},props:{ratio:{type:Number,default:1}}}),QT=()=>{Object(E["T"])(t=>({"5a7bcc1a":t.ratio}))},JT=$T.setup;$T.setup=JT?(t,e)=>(QT(),JT(t,e)):QT;var tE=$T;s("e53d");const eE=Zt()(tE,[["render",ZT],["__scopeId","data-v-70e0c4c0"]]);var sE=eE;const iE=t=>(Object(E["F"])("data-v-e4c7c99c"),t=t(),Object(E["E"])(),t),nE={ref:"picture"},oE={class:"Title",ref:"title"},aE={class:"Title__Part Title__Part--Italic"},rE=iE(()=>Object(E["j"])("br",null,null,-1)),lE={class:"Title__Part Title__Part--Bold"};function cE(t,e,s,i,n,o){const a=Object(E["K"])("AppearObject");return Object(E["D"])(),Object(E["g"])(a,{is:"figure"},{default:Object(E["Z"])(()=>[Object(E["j"])("picture",nE,[Object(E["J"])(t.$slots,"default",{},void 0,!0)],512),Object(E["j"])("figcaption",oE,[Object(E["j"])("span",aE,[Object(E["j"])("span",null,Object(E["O"])(t.firstname),1)]),rE,Object(E["j"])("span",lE,[Object(E["j"])("span",null,Object(E["O"])(t.lastname),1)])],512)]),_:3})}var hE=s("1dac");wt["a"].registerPlugin.apply(wt["a"],[hE["a"]]);const dE=Object(uT["r"])({props:{ratio:{type:Number,default:1},firstname:{type:String,default:""},lastname:{type:String,default:""}},components:{AppearObject:kT},setup(){return{timeline:null}},mounted(){this.$nextTick(this.initScrollTrigger),PT.on(PT.events.RESIZE,this.initScrollTrigger)},unmounted(){PT.off(PT.events.RESIZE,this.initScrollTrigger),this.timeline&&this.timeline.kill()},methods:{initScrollTrigger(){this.timeline&&this.timeline.kill(),this.timeline=wt["a"].timeline({scrollTrigger:{scroller:"#app",trigger:this.$el,scrub:.1}}).fromTo(this.$refs.title,{y:0},{y:this.$refs.picture.offsetHeight-this.$refs.title.offsetHeight/4,duration:1,ease:"none"})}}}),uE=()=>{Object(E["T"])(t=>({"01f3dc52":t.ratio}))},pE=dE.setup;dE.setup=pE?(t,e)=>(uE(),pE(t,e)):uE;var gE=dE;s("e3bb");const mE=Zt()(gE,[["render",cE],["__scopeId","data-v-e4c7c99c"]]);var _E=mE;function bE(t,e,s,i,n,o){const a=Object(E["K"])("AppearObject");return Object(E["D"])(),Object(E["g"])(a,{is:"ul"},{default:Object(E["Z"])(()=>[Object(E["J"])(t.$slots,"default",{},void 0,!0)]),_:3})}var fE=Object(uT["r"])({components:{AppearObject:kT}});s("61dc");const vE=Zt()(fE,[["render",bE],["__scopeId","data-v-53b8476a"]]);var xE=vE;const TE={class:"Label__Wrapper"},EE={class:"Label subtitle"},wE={class:"Label__Inner Label__Inner--main center"},OE={class:"Label__Inner Label__Inner--clone center"},AE={class:"Label subtitle"},yE={class:"Label__Inner Label__Inner--main right"},DE={class:"Label__Inner Label__Inner--clone right"},jE={key:0,class:"Modal"};function RE(t,e,s,i,n,o){const a=Object(E["K"])("ui-icon"),r=Object(E["K"])("AppearObject"),l=Object(E["K"])("vueVimeoPlayer"),c=Object(E["K"])("ui-btn-close");return Object(E["D"])(),Object(E["i"])(E["a"],null,[Object(E["m"])(r,{class:"Wrapper"},{default:Object(E["Z"])(()=>[Object(E["j"])("button",{class:"Play",onClick:e[0]||(e[0]=(...e)=>t.onPlay&&t.onPlay(...e))},[Object(E["j"])("picture",null,[Object(E["J"])(t.$slots,"default",{},void 0,!0)]),Object(E["j"])("span",TE,[Object(E["j"])("span",EE,[Object(E["j"])("span",wE,[Object(E["j"])("span",null,Object(E["O"])(t.$t("content.play_video")),1)]),Object(E["j"])("span",OE,[Object(E["j"])("span",null,Object(E["O"])(t.$t("content.play_video")),1)])]),Object(E["j"])("span",AE,[Object(E["j"])("span",yE,[Object(E["j"])("span",null,[Object(E["m"])(a,{name:"play"})])]),Object(E["j"])("span",DE,[Object(E["j"])("span",null,[Object(E["m"])(a,{name:"play"})])])])])])]),_:3}),(Object(E["D"])(),Object(E["g"])(E["b"],{to:"body"},[t.playing?(Object(E["D"])(),Object(E["i"])("div",jE,[Object(E["m"])(l,{class:"Modal__Player","video-url":t.vimeoUrl,controls:!1,options:{byline:!1,dnt:!0},playerWidth:t.Viewport.windowWidth,playerHeight:t.Viewport.windowHeight,ref:"video"},null,8,["video-url","playerWidth","playerHeight"]),t.playing?(Object(E["D"])(),Object(E["g"])(c,{key:0,class:"Modal__Close",delay:0,text:t.$t("content.close_video"),onClick:t.onStop},null,8,["text","onClick"])):Object(E["h"])("",!0)])):Object(E["h"])("",!0)]))],64)}var SE=s("a1e9"),CE=s("558f");const IE=Object(uT["r"])({components:{AppearObject:kT,vueVimeoPlayer:CE["a"]},props:{vimeoUrl:{type:String,default:""},ratio:{type:Number,default:1}},setup(t){return console.log("debug video",{props:t}),{playing:Object(SE["m"])(!1)}},data(){return{Viewport:bg}},mounted(){console.log("Viewport",bg.windowHeight)},methods:{async onPlay(){console.log("ContentVideo PLAY"),this.playing=!0,await this.$nextTick(),console.log("debug",this.$refs.video,this.$refs.video),this.$refs.video.play()},onStop(){this.playing=!1,this.$refs.video.pause()}}}),PE=()=>{Object(E["T"])(t=>({e77f8704:t.ratio}))},LE=IE.setup;IE.setup=LE?(t,e)=>(PE(),LE(t,e)):PE;var ME=IE;s("c1b2");const kE=Zt()(ME,[["render",RE],["__scopeId","data-v-1d155c0b"]]);var NE=kE;function FE(t){let e=0;do{e+=t.offsetTop,t=t.offsetParent}while(t);return e}wt["b"].registerPlugin(ms["a"]);const{send:BE,state:UE}=Object(Ot["b"])(Wx);var HE=Object(E["o"])({props:{delay:{type:Number,default:0},items:{type:Object,default:null},menuItems:{type:Object,default:null}},components:{PageNavItem:mT,ContentSection:TT,ContentTitle:YT,ContentParagraph:XT,ContentImage:sE,ContentPortrait:_E,ContentList:xE,ContentVideo:NE},setup(t){const e=Object(E["H"])(null);return{firstUnder:e,nbItems:Object(E["e"])(()=>t.items?t.items.length:0),...Object(Ot["b"])(Wx)}},data(){return{Viewport:bg,isAppear:!1}},watch:{firstUnder(){if(!this.Viewport.isDesktop&&this.firstUnder){const t=this.menuItems[this.firstUnder.id].$el,e=this.$refs.scrolling.offsetWidth-bg.windowWidth,s=Math.max(0,Math.min(e,t.offsetLeft-bg.windowWidth/2+t.offsetWidth/2));wt["b"].to(this.$refs.scroller,{scrollTo:{x:s},duration:1,ease:"quart.out"})}}},mounted(){this.$nextTick(this.onEnter)},methods:{onReachChange(){let t=null,e=0;while(e<this.nbItems)this.items[e].reached&&!t&&(t=this.items[e]),this.items[e].first=!1,e++;this.firstUnder=t,this.firstUnder&&(this.firstUnder.first=!0)},async onClose(){await this.onLeave(),BE("EXIT")},onEnter(){const t=wt["b"].utils.selector(this.$el),e=wt["b"].timeline({delay:this.delay}).set([t(".Nav .Item a")],{pointerEvents:"none"},"start");bg.isDesktop&&e.fromTo([t(".Background__Part--Left, .Page__Left")],{clipPath:"inset(0 100% 0 0)"},{clipPath:"inset(0 0% 0 0)",clearProps:"all",duration:1,ease:"quart.out"},"start"),e.fromTo([t(".Background__Part--Right")],{scaleY:0,transformOrigin:"50% 0"},{scaleY:1,clearProps:"all",duration:1,ease:"quart.out"},"start").fromTo([t(".Page__Right")],{clipPath:`inset(0 0 ${this.$refs.inner.offsetHeight}px 0)`},{clipPath:`inset(0 0 ${this.$refs.inner.offsetHeight-bg.windowHeight}px 0)`,clearProps:"all",duration:1,ease:"quart.out"},"start").from([t(".Header__Line")],{scaleX:0,duration:1,ease:"quart.out"},"start+=0.5").from([t(".Owner .Line")],{yPercent:100,duration:1,ease:"quart.out",stagger:{each:.25}},"start").from([t(".Nav__Text--Left > span")],{transition:"none",xPercent:105,duration:1.25,ease:"quart.out"},"start").from([t(".Nav__Text--Right > span")],{transition:"none",xPercent:-105,duration:1.25,ease:"quart.out"},"start").add(()=>{this.isAppear=!0}).set([t(".Nav .Item a")],{clearProps:"pointerEvents"})},onLeave(){return new Promise(t=>{const e=wt["b"].utils.selector(this.$el);wt["b"].timeline({onComplete:t}).to([e(".Page__Inner")],{opacity:0,duration:.5,ease:"none"},"start")})},onNavClick(t,e){if(e){const t=e.id,s=this.$el.querySelector("#"+t),i=FE(s);wt["b"].to(document.getElementById("app"),{scrollTo:i-100,duration:1,ease:"quart.inOut"})}}}});s("d67a");const GE=Zt()(HE,[["render",lT],["__scopeId","data-v-24020e99"]]);var VE=GE;wt["b"].registerPlugin(ms["a"]);const{send:zE,state:XE}=Object(Ot["b"])(Wx);var WE=Object(E["o"])({props:{delay:{type:Number,default:0}},components:{Page:VE,PageNavItem:mT,ContentSection:TT,ContentTitle:YT,ContentParagraph:XT,ContentImage:sE,ContentPortrait:_E,ContentList:xE,ContentVideo:NE},setup(){const t=Object(E["H"])([{id:"about",reached:!0,gtm:{action:"clickabouttitle",label:"Click on About Title in About Page"}},{id:"male-gaze",reached:!1,gtm:{action:"clickmaletitle",label:"Click on Male Gaze Title in About Page"}},{id:"artist-and-artwork",reached:!1,gtm:{action:"clickartisttitle",label:"Click on The Artist and Artwork Title in About Page"}},{id:"female-gaze",reached:!1,gtm:{action:"clickfemaletitle",label:"Click on Female Gaze Title in About Page"}}]),e=Object(E["H"])([]);return{menuItems:e,items:t}},methods:{onNavClick(t,e){if(e){const t=e.id,s=this.$el.querySelector("#"+t),i=FE(s);wt["b"].to(document.getElementById("app"),{scrollTo:i-100,duration:1,ease:"quart.inOut"}),e.gtm.action}}}});s("8c5f");const qE=Zt()(WE,[["render",gs],["__scopeId","data-v-64008b30"]]);var YE=qE;const KE=t=>(Object(E["F"])("data-v-b4fec82a"),t=t(),Object(E["E"])(),t),ZE=KE(()=>Object(E["j"])("span",{class:"Nav__Text Nav__Text--Italic Nav__Text--Right"},[Object(E["j"])("span",null," Credits ")],-1)),$E=Object(E["l"])("Credits Title "),QE=KE(()=>Object(E["j"])("br",null,null,-1)),JE=Object(E["l"])("Lorem ipsum dolor sit amet"),tw=Object(E["l"])("Fusce dictum lectus in varius tempus. Integer pretium semper lorem, et tempor mi auctor vitae. Etiam eleifend, libero et fringilla feugiat, lacus nibh fermentum lectus, at gravida neque lorem sed leo. Donec id velit ac lectus elementum fermentum. Suspendisse potenti. Phasellus consequat urna vitae vulputate vulputate. In non erat eros. Aliquam vulputate porttitor scelerisque. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas."),ew=Object(E["l"])("Fusce dictum lectus in varius tempus. Integer pretium semper lorem, et tempor mi auctor vitae. Etiam eleifend, libero et fringilla feugiat, lacus nibh fermentum lectus, at gravida neque lorem sed leo. Donec id velit ac lectus elementum fermentum. Suspendisse potenti. Phasellus consequat urna vitae vulputate vulputate. In non erat eros. Aliquam vulputate porttitor scelerisque. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas."),sw=Object(E["l"])("Fusce dictum lectus in varius tempus. Integer pretium semper lorem, et tempor mi auctor vitae. Etiam eleifend, libero et fringilla feugiat, lacus nibh fermentum lectus, at gravida neque lorem sed leo. Donec id velit ac lectus elementum fermentum. Suspendisse potenti. Phasellus consequat urna vitae vulputate vulputate. In non erat eros. Aliquam vulputate porttitor scelerisque. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.");function iw(t,e,s,i,n,o){const a=Object(E["K"])("PageNavItem"),r=Object(E["K"])("content-title"),l=Object(E["K"])("content-paragraph"),c=Object(E["K"])("content-section"),h=Object(E["K"])("Page");return Object(E["D"])(),Object(E["g"])(h,{class:"z-about",ref:"page",menuItems:t.menuItems,items:t.items},{nav:Object(E["Z"])(()=>[Object(E["m"])(a,{index:1,item:t.items[0],onNavClick:t.onNavClick,ref:e=>{t.menuItems[t.items[0].id]=e}},{default:Object(E["Z"])(()=>[ZE]),_:1},8,["item","onNavClick"])]),content:Object(E["Z"])(()=>[Object(E["m"])(c,{item:t.items[0],onReachChange:e[0]||(e[0]=t=>this.$refs.page&&this.$refs.page.onReachChange())},{default:Object(E["Z"])(()=>[Object(E["m"])(r,null,{default:Object(E["Z"])(()=>[$E,QE,JE]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[tw]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[ew]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[sw]),_:1})]),_:1},8,["item"])]),_:1},8,["menuItems","items"])}wt["b"].registerPlugin(ms["a"]);const{send:nw,state:ow}=Object(Ot["b"])(Wx);var aw=Object(E["o"])({props:{delay:{type:Number,default:0}},components:{Page:VE,PageNavItem:mT,ContentSection:TT,ContentTitle:YT,ContentParagraph:XT,ContentImage:sE,ContentPortrait:_E,ContentList:xE,ContentVideo:NE},setup(){const t=Object(E["H"])([{id:"credits",reached:!0,gtm:{action:"clickcreditstitle",label:"Click on Credits Title in Credits Page"}}]),e=Object(E["H"])([]);return{menuItems:e,items:t}},methods:{onNavClick(t,e){if(e){const t=e.id,s=this.$el.querySelector("#"+t),i=FE(s);wt["b"].to(document.getElementById("app"),{scrollTo:i-100,duration:1,ease:"quart.inOut"})}}}});s("a5d4");const rw=Zt()(aw,[["render",iw],["__scopeId","data-v-b4fec82a"]]);var lw=rw;const cw=t=>(Object(E["F"])("data-v-988509ac"),t=t(),Object(E["E"])(),t),hw=cw(()=>Object(E["j"])("span",{class:"Nav__Text Nav__Text--Italic Nav__Text--Right"},[Object(E["j"])("span",null," Legals ")],-1)),dw=Object(E["l"])("PRIVACY POLICY"),uw=Object(E["l"])("Last updated 21 September 2022"),pw=Object(E["l"])("WHO WE ARE"),gw=Object(E["l"])('We are the Royal Danish Academy of Fine Arts\' Schools of Visual Arts (CVR number 11 88 73 17). All references in this policy to "Academy", "our", "us" or "we" refer to the Royal Danish Academy of Fine Arts\' School of Visual Arts. All references in this policy to "our website", refer to the website at '),mw=cw(()=>Object(E["j"])("a",{href:"https://www.thefemalegaze.art/"},"https://www.thefemalegaze.art/.",-1)),_w=Object(E["l"])("PROCESSING OF PERSONAL DATA"),bw=Object(E["l"])("When you visit our website, your browser automatically transfers personal data such as your IP address in order to enable access to and the display of our website. We also process that data, as well as data collected using the reCAPTCHA and Cookiebot cookies, in order to try and distinguish between humans and bots and for the operation of the cookie banner on our website. For those purposes, personal data is shared with "),fw=cw(()=>Object(E["j"])("a",{href:"https://policies.google.com/privacy"},"Google",-1)),vw=Object(E["l"])(" and "),xw=cw(()=>Object(E["j"])("a",{href:"https://www.cookiebot.com/en/privacy-policy/"},"Cybot A/S",-1)),Tw=Object(E["l"])(' respectively. (For more information about their cookies, please see "Cookies" on the home page of our website.) The Royal Danish Academy of Fine Arts’ Schools of Visual Arts is the Data Controller for the personal data in question. You are considered ‘the data subject’.'),Ew=Object(E["l"])("LEGAL BASIS FOR PROCESSING OF PERSONAL DATA"),ww=Object(E["l"])("Generally, the processing described above is based on our legitimate interests to operate an internet website for general information and communication purposes and to protect it from attacks. Exceptionally, we may process personal data for compliance with our legal obligations, in particular in cases of unauthorised interference with our website."),Ow=Object(E["l"])("INTERNATIONAL DATA TRANSFER"),Aw=Object(E["l"])("Our website uses Google reCAPTCHA, which sends personal data to the US. The transfer is subject to the safeguard of European Commission approved Standard Contractual Clauses."),yw=Object(E["l"])("HOW LONG DO WE STORE YOUR PERSONAL DATA"),Dw=Object(E["l"])("The only personal data we store in connection with our website is the Cookiebot cookie, which allows us to know if you gave consent. This is stored for 60 days."),jw=Object(E["l"])("THE DATA SUBJECT’S RIGHTS"),Rw=Object(E["l"])("Under certain circumstances, you have a number of rights pertaining to our processing of data about you: "),Sw=cw(()=>Object(E["j"])("br",null,null,-1)),Cw=Object(E["l"])("The right to access personal data that we process regarding you "),Iw=cw(()=>Object(E["j"])("br",null,null,-1)),Pw=Object(E["l"])("The right to request rectification, i.e. to have incorrect information about yourself amended "),Lw=cw(()=>Object(E["j"])("br",null,null,-1)),Mw=Object(E["l"])("The right to request the deletion of personal data "),kw=cw(()=>Object(E["j"])("br",null,null,-1)),Nw=Object(E["l"])("The right to request the restriction of processing or to object to the processing of personal data "),Fw=cw(()=>Object(E["j"])("br",null,null,-1)),Bw=Object(E["l"])("The right to withdraw consent "),Uw=cw(()=>Object(E["j"])("br",null,null,-1)),Hw=Object(E["l"])("The right to object to the processing of your personal data "),Gw=cw(()=>Object(E["j"])("br",null,null,-1)),Vw=Object(E["l"])("The right to lodge a complaint with a supervisory authority"),zw=Object(E["l"])("You can read more about your rights on the Danish Data Protection Agency's website https://www.datatilsynet.dk/borger/hvad-er-dine-rettigheder . To exercise any of these rights and if you have any questions about how we store, collect and use personal data please contact us using the details below."),Xw=Object(E["l"])("THE DATA CONTROLLER'S IDENTITY AND CONTACT INFORMATION"),Ww=Object(E["l"])(" The Royal Danish Academy of Fine Arts’ Schools of Visual Arts can be contacted at"),qw=cw(()=>Object(E["j"])("br",null,null,-1)),Yw=Object(E["l"])(" The Royal Danish Academy of Fine Arts’ Schools of Visual Arts"),Kw=cw(()=>Object(E["j"])("br",null,null,-1)),Zw=Object(E["l"])(" Kongens Nytorv 1"),$w=cw(()=>Object(E["j"])("br",null,null,-1)),Qw=Object(E["l"])(" 1050 København K"),Jw=cw(()=>Object(E["j"])("br",null,null,-1)),tO=cw(()=>Object(E["j"])("a",{href:"tel:+4533744600"},"Tel. (+45) 3374 4600",-1)),eO=cw(()=>Object(E["j"])("br",null,null,-1)),sO=cw(()=>Object(E["j"])("a",{href:"mailto:info@kunstakademiet.net"},"info@kunstakademiet.net",-1)),iO=Object(E["l"])(" You can contact the Royal Danish Academy of Fine Arts’ data protection officer at"),nO=cw(()=>Object(E["j"])("br",null,null,-1)),oO=cw(()=>Object(E["j"])("a",{href:"mailto:dpo@kunstakademiet.net"},"dpo@kunstakademiet.net",-1)),aO=Object(E["l"])("COMPLAINTS AUTHORITY"),rO=Object(E["l"])(" You can complain about the Royal Danish Academy of Fine Arts’ Schools of Visual Arts’ processing"),lO=cw(()=>Object(E["j"])("br",null,null,-1)),cO=Object(E["l"])(" of personal data at: "),hO=cw(()=>Object(E["j"])("br",null,null,-1)),dO=Object(E["l"])(" The Danish Data Protection Agency (Datatilsynet)"),uO=cw(()=>Object(E["j"])("br",null,null,-1)),pO=Object(E["l"])(" Carl Jacobsens Vej 35"),gO=cw(()=>Object(E["j"])("br",null,null,-1)),mO=Object(E["l"])(" 2500 Valby"),_O=cw(()=>Object(E["j"])("br",null,null,-1)),bO=cw(()=>Object(E["j"])("a",{href:"tel:+4533193200"},"Tel. (+45) 33 19 32 00",-1)),fO=cw(()=>Object(E["j"])("br",null,null,-1)),vO=cw(()=>Object(E["j"])("a",{href:"mailto:dt@datatilsynet.dk"},"dt@datatilsynet.dk",-1));function xO(t,e,s,i,n,o){const a=Object(E["K"])("PageNavItem"),r=Object(E["K"])("content-title"),l=Object(E["K"])("content-paragraph"),c=Object(E["K"])("content-section"),h=Object(E["K"])("Page");return Object(E["D"])(),Object(E["g"])(h,{class:"z-about",ref:"page",menuItems:t.menuItems,items:t.items},{nav:Object(E["Z"])(()=>[Object(E["m"])(a,{index:1,item:t.items[0],onNavClick:t.onNavClick,ref:e=>{t.menuItems[t.items[0].id]=e}},{default:Object(E["Z"])(()=>[hw]),_:1},8,["item","onNavClick"])]),content:Object(E["Z"])(()=>[Object(E["m"])(c,{item:t.items[0],onReachChange:e[0]||(e[0]=t=>this.$refs.page&&this.$refs.page.onReachChange())},{default:Object(E["Z"])(()=>[Object(E["m"])(r,null,{default:Object(E["Z"])(()=>[dw]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[uw]),_:1}),Object(E["m"])(r,null,{default:Object(E["Z"])(()=>[pw]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[gw,mw]),_:1}),Object(E["m"])(r,null,{default:Object(E["Z"])(()=>[_w]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[bw,fw,vw,xw,Tw]),_:1}),Object(E["m"])(r,null,{default:Object(E["Z"])(()=>[Ew]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[ww]),_:1}),Object(E["m"])(r,null,{default:Object(E["Z"])(()=>[Ow]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[Aw]),_:1}),Object(E["m"])(r,null,{default:Object(E["Z"])(()=>[yw]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[Dw]),_:1}),Object(E["m"])(r,null,{default:Object(E["Z"])(()=>[jw]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[Rw,Sw,Cw,Iw,Pw,Lw,Mw,kw,Nw,Fw,Bw,Uw,Hw,Gw,Vw]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[zw]),_:1}),Object(E["m"])(r,null,{default:Object(E["Z"])(()=>[Xw]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[Ww,qw,Yw,Kw,Zw,$w,Qw,Jw,tO,eO,sO]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[iO,nO,oO]),_:1}),Object(E["m"])(r,null,{default:Object(E["Z"])(()=>[aO]),_:1}),Object(E["m"])(l,null,{default:Object(E["Z"])(()=>[rO,lO,cO,hO,dO,uO,pO,gO,mO,_O,bO,fO,vO]),_:1})]),_:1},8,["item"])]),_:1},8,["menuItems","items"])}wt["b"].registerPlugin(ms["a"]);const{send:TO,state:EO}=Object(Ot["b"])(Wx);var wO=Object(E["o"])({props:{delay:{type:Number,default:0}},components:{Page:VE,PageNavItem:mT,ContentSection:TT,ContentTitle:YT,ContentParagraph:XT,ContentImage:sE,ContentPortrait:_E,ContentList:xE,ContentVideo:NE},setup(){const t=Object(E["H"])([{id:"legals",reached:!0,gtm:{action:"clicklegalstitle",label:"Click on Legals Title in Legals Page"}}]),e=Object(E["H"])([]);return{menuItems:e,items:t}},methods:{onNavClick(t,e){if(e){const t=e.id,s=this.$el.querySelector("#"+t),i=FE(s);wt["b"].to(document.getElementById("app"),{scrollTo:i-100,duration:1,ease:"quart.inOut"}),e.gtm.action}}}});s("bcf5");const OO=Zt()(wO,[["render",xO],["__scopeId","data-v-988509ac"]]);var AO=OO,yO=t=>t.replace(/\*([^*]*)\*/,"<b>$1</b>"),DO=Object(E["o"])({components:{PreLoader:Qt,About:YE,Credits:lw,Legals:AO,LogoMetaDesktop:Ht["default"],LogoMetaMobile:Gt["default"]},setup(){const{t:t,locale:e}=Object(i["b"])(),{send:s}=Object(Ot["b"])(Wx),n=(Wt(60),Object(E["H"])(null)),o=Object(E["H"])(null),a=Object(E["H"])(null);Object(E["B"])(()=>{const t=xg.oculus||Os.getBool("debug-xr");Ut.IsSessionSupportedAsync("immersive-vr").then(e=>{bg.setSupportXR(e&&t||Os.getBool("debug-xr"))}),CT.then(l)});const r=async t=>{await c(),s({type:"ENTER",xr:bg.supportXR})},l=()=>{const t=wt["b"].utils.selector(n.value);b.value=!0;const e=wt["b"].timeline({delay:1}).from([t(".Title__Part--left > span")],{transition:"none",xPercent:105,duration:1.25,ease:"quart.out"},"start").from([t(".Title__Part--right > span")],{transition:"none",xPercent:-105,duration:1.25,ease:"quart.out"},"start").from([t(".Home__Background__Part--1 img")],{opacity:.8,duration:1,ease:"linear"},"start").from([t(".Home__Background__Part--1 img")],{scale:1.1,duration:1,ease:"quart.out"},"start").from([t(".Home__Owner .Line")],{yPercent:100,duration:1,ease:"quart.out",stagger:{amount:.5}},"start").from([t(".Home__Footer .Line")],{yPercent:200,duration:1,ease:"quart.out"},"start");t(".Home__Partnership").length&&e.from([t(".Home__Partnership a")],{opacity:0,duration:1,ease:"quart.out"},"start+=0.6"),t(".AboutCta").length&&e.addLabel("about","start+=0.5").set([t(".AboutCta")],{pointerEvents:"none"},"start").fromTo([t(".AboutCta__Label")],{clipPath:"inset(0 0 0 100%)"},{clipPath:"inset(0 0 0 0%)",clearProps:"clipPath",duration:1,ease:"quart.out"},"about").fromTo([t(".AboutCta__Right")],{clipPath:"inset(0 100% 0 0)"},{clipPath:"inset(0 0% 0 0)",transition:"none",clearProps:"all",duration:1,ease:"quart.out"},"about").from([t(".AboutCta .Line")],{transition:"none",clearProps:"all",yPercent:100,duration:1,ease:"quart.out"},"about").set([t(".AboutCta")],{clearProps:"pointerEvents"},"about+=1")},c=()=>new Promise(t=>{const e=wt["b"].utils.selector(n.value),s=wt["b"].timeline({onComplete:t}).to([e(".Home__Background")],{scale:3,duration:1,ease:"quart.inOut"},"start").to([e(".Home__Background")],{autoAlpha:0,duration:1,ease:"none"},"start").to([e(".Title__Part--left > span")],{transition:"none",xPercent:105,duration:1,ease:"quart.inOut"},"start").to([e(".Title__Part--right > span")],{transition:"none",xPercent:-105,duration:1,ease:"quart.inOut"},"start").to([e(".Home__Owner .Line")],{yPercent:100,duration:.6,ease:"quart.inOut",stagger:{from:"end",each:.1}},"start").to([e(".Home__Partnership a")],{opacity:0,duration:.6,ease:"quart.inOut"},"start").to([e(".Home__Footer .Line")],{yPercent:200,duration:.6,ease:"quart.inOut"},"start").to([e(".Home__Cta")],{opacity:0,duration:1,ease:"none"},"start");e(".AboutCta").length&&s.set([e(".AboutCta")],{pointerEvents:"none"},"start").fromTo([e(".AboutCta__Label")],{clipPath:"inset(0 0 0 0%)"},{clipPath:"inset(0 0 0 100%)",duration:1,ease:"quart.out"},"start").fromTo([e(".AboutCta__Right")],{clipPath:"inset(0 0% 0 0)"},{clipPath:"inset(0 100% 0 0)",transition:"none",duration:1,ease:"quart.out"},"start").to([e(".AboutCta .Line")],{transition:"none",clearProps:"all",yPercent:100,duration:1,ease:"quart.out"},"start")}),h=()=>{},d=()=>{console.log("[HOME] GOTO_ABOUT"),s({type:"GOTO_ABOUT"})},u=Object(E["e"])(()=>yO(t("home.cta"))),p=(t,e,i)=>{s({type:t})},g=Object(E["H"])(!1),m=Object(E["H"])(!1),_=Object(E["H"])(!1),b=Object(E["H"])(!1);return{root:n,ownerName:o,ownerVerb:a,isBackground1Loaded:g,isBackground2Loaded:m,isAboutLoaded:_,isReady:b,locale:e,...Object(Ot["b"])(Wx),onStart:r,onPreloadComplete:h,onAboutClick:d,ctaLabel:u,onFooterLinkClick:p,hasAboutPage:!0,hasCreditsPage:!1,hasLegalsPage:!0,hasCookie:!0}}});s("2f6b");const jO=Zt()(DO,[["render",Et],["__scopeId","data-v-4f323888"]]);var RO=jO;function SO(t){t.component(b.INTRO,RO)}function CO(t,e,s,i,n,o){const a=Object(E["K"])("AppVersion"),r=Object(E["K"])("GLViewer"),l=Object(E["K"])("RotationBlocker"),c=Object(E["K"])("UIAudioBtn"),h=Object(E["K"])("LegalPage");return Object(E["D"])(),Object(E["i"])("div",null,[t.$store.state.app.debug?(Object(E["D"])(),Object(E["g"])(a,{key:0})):Object(E["h"])("",!0),Object(E["m"])(r),(Object(E["D"])(!0),Object(E["i"])(E["a"],null,Object(E["I"])(t.viewList,t=>(Object(E["D"])(),Object(E["g"])(Object(E["M"])(t),{key:t}))),128)),Object(E["m"])(l),t.showAudioBtn?(Object(E["D"])(),Object(E["g"])(c,{key:1,class:"z-ui",theme:t.uiTheme},null,8,["theme"])):Object(E["h"])("",!0),Object(E["ab"])(Object(E["m"])(h,null,null,512),[[E["X"],t.$store.state.legalPage.isOpen]])])}wt["b"].registerPlugin(zt.a),zt.a.create("customOut","0.33, 0, 0.67, 1"),zt.a.create("customOut2","0.33, 0, 0, 1"),zt.a.create("customOut3","0.22, 1.44, 0.36, 1"),zt.a.create("archeOut","0.84, 0, 0.16, 1");const IO={class:"AppVersion"};function PO(t,e,s,i,n,o){return Object(E["D"])(),Object(E["i"])("div",IO,Object(E["O"])(t.env)+" - "+Object(E["O"])(t.version)+" - "+Object(E["O"])(t.commit),1)}var LO=Object(E["o"])({data(){return{name:"2022-meta-charlottenborg",version:"0.1.0",commit:"767f460",env:"production"}}});s("6921");const MO=Zt()(LO,[["render",PO],["__scopeId","data-v-a8e9e37a"]]);var kO=MO,NO=s("a80a"),FO=s.n(NO);s("5b81");const BO={ref:"inner",class:"Inner"},UO=["innerHTML"],HO=Object(E["o"])({});var GO=Object(E["o"])({...HO,__name:"Heading",props:{tag:{default:"div"},text:null},setup(t){const e=t,s=Object(E["U"])(),i=Object(E["e"])(()=>e.text?e.text:s.default?s.default()[0].children:""),n=Object(E["e"])(()=>i.value?i.value.replaceAll("<br>","\n"):"");return(s,o)=>(Object(E["D"])(),Object(E["g"])(Object(E["M"])(t.tag),{class:"Heading","data-text":Object(E["S"])(n)},{default:Object(E["Z"])(()=>[Object(E["j"])("span",BO,[e.text?(Object(E["D"])(),Object(E["i"])("span",{key:0,innerHTML:Object(E["S"])(i)},null,8,UO)):Object(E["J"])(s.$slots,"default",{key:1})],512)]),_:3},8,["data-text"]))}});s("d0a0");const VO=Zt()(GO,[["__scopeId","data-v-5b99d55c"]]);var zO=VO;let XO=class extends r["d"]{constructor(){super(...arguments),this.isOpen=!1}open(){this._SET_OPEN(!0)}close(){this._SET_OPEN(!1)}toggle(){this._SET_OPEN(!this.isOpen)}_SET_OPEN(t){this.isOpen=t}};Object(a["a"])([r["a"]],XO.prototype,"open",null),Object(a["a"])([r["a"]],XO.prototype,"close",null),Object(a["a"])([r["a"]],XO.prototype,"toggle",null),Object(a["a"])([r["c"]],XO.prototype,"_SET_OPEN",null),XO=Object(a["a"])([r["b"]],XO);const WO=new XO({store:v,name:"informationPanel"});var qO=WO;const YO={LEGALS:"legals",CREDITS:"credits"};let KO=class extends r["d"]{constructor(){super(...arguments),this.isOpen=!1,this.page=YO.LEGALS}open(t){t&&this.setPage(t),this._SET_OPEN(!0)}close(){this._SET_OPEN(!1)}toggle(){this._SET_OPEN(!this.isOpen)}setPage(t){this._SET_PAGE(t)}_SET_OPEN(t){this.isOpen=t}_SET_PAGE(t){this.page=t}};Object(a["a"])([r["a"]],KO.prototype,"open",null),Object(a["a"])([r["a"]],KO.prototype,"close",null),Object(a["a"])([r["a"]],KO.prototype,"toggle",null),Object(a["a"])([r["a"]],KO.prototype,"setPage",null),Object(a["a"])([r["c"]],KO.prototype,"_SET_OPEN",null),Object(a["a"])([r["c"]],KO.prototype,"_SET_PAGE",null),KO=Object(a["a"])([r["b"]],KO);const ZO=new KO({store:v,name:"legalPage"});var $O=ZO;const QO=t=>(Object(E["F"])("data-v-1ef5cf26"),t=t(),Object(E["E"])(),t),JO={class:"UIBtnPrimary__Inner"},tA=QO(()=>Object(E["j"])("span",{class:"Background"},null,-1)),eA=QO(()=>Object(E["j"])("span",{class:"Border"},null,-1)),sA={class:"Label cta"},iA={ref:"labelInner",class:"Label__Inner Label__Inner--main"},nA={ref:"labelInnerClone",class:"Label__Inner Label__Inner--clone"};function oA(t,e,s,i,n,o){return Object(E["D"])(),Object(E["g"])(E["d"],{css:!1,onEnter:t.onEnter,onClick:t.onClick},{default:Object(E["Z"])(()=>[Object(E["j"])("button",{class:Object(E["w"])(["UIBtn UIBtnPrimary",["UIBtnPrimary--"+t.variant,"UIBtnPrimary--"+t.theme,t.active?"is-active":"",t.hasToggle?"has-toggle":""]]),ref:"root"},[Object(E["j"])("div",JO,[tA,eA,Object(E["j"])("span",sA,[Object(E["j"])("span",iA,[Object(E["J"])(t.$slots,"default",{},void 0,!0)],512),Object(E["j"])("span",nA,[Object(E["J"])(t.$slots,"default",{},void 0,!0)],512)])])],2)]),_:3},8,["onEnter","onClick"])}var aA,rA;(function(t){t["NORMAL"]="normal",t["OUTLINE"]="small",t["SMALL"]="small"})(aA||(aA={})),function(t){t["LIGHT"]="light",t["DARK"]="dark"}(rA||(rA={}));var lA=Object(E["o"])({props:{variant:{type:String,default:aA.NORMAL},theme:{type:String,default:rA.LIGHT},active:{type:Boolean,default:!1},hasToggle:{type:Boolean,default:!1}},methods:{onClick(){$p.playUI("ui_click")},onEnter(){console.log("[UIBtnPrimary] onEnter")}}});s("64d2");const cA=Zt()(lA,[["render",oA],["__scopeId","data-v-1ef5cf26"]]);var hA=cA;const dA={class:"InformationPanel view-default z-information-panel"},uA={class:"Panel__Background__Inner bg-gradient"},pA={class:"Exhibition"},gA={class:"Exhibition__Footer"},mA={class:"Exhibition__Cta"},_A=["href"],bA={class:"About"},fA={class:"About__Content"},vA=["innerHTML"],xA={class:"Nav small-caps"},TA={href:"javascript: Cookiebot.renew()"},EA=Object(E["o"])({});var wA=Object(E["o"])({...EA,__name:"InformationPanel",setup(t){const{locale:e}=Object(i["b"])(),s=Object(E["H"])(null),n=Object(E["H"])(null),o=Object(E["H"])(null),a=Object(E["H"])(null),r=Object(E["H"])(null),l=Object(E["H"])(null),c=Object(E["H"])(null),h=Object(E["H"])(null),d=Object(E["H"])(!1),u=Object(E["H"])(null),p=()=>{u.value&&(FO.a.unbindEl(u.value),bg.isDesktop&&FO.a.initEl(u.value))};Object(E["Y"])(()=>bg.isDesktop,p),Object(E["B"])(()=>{p()}),Object(E["A"])(()=>{u.value&&FO.a.unbindEl(u.value)}),Object(E["Y"])(e,()=>{var t,e,s;null===(t=a.value)||void 0===t||t.classList.remove("is-split"),null===(e=r.value)||void 0===e||e.$refs.inner.classList.remove("is-split"),null===(s=l.value)||void 0===s||s.classList.remove("is-split")});const g=Wt(60);function m(t){const e=wt["b"].utils.selector(t);wt["b"].set(o.value,{autoAlpha:1}),wt["b"].set(t,{overflow:"hidden"}),wt["b"].set(e(".ArtistName__Line"),{yPercent:100}),wt["b"].set(c.value,{opacity:0,y:14}),wt["b"].set(h.value,{autoAlpha:0})}function _(t,e){t.scrollTop=0;const i=68,o=wt["b"].utils.selector(t),a=wt["b"].timeline({defaults:{ease:"linear"},onComplete:e});a.fromTo(n.value,{y:bg.isDesktop?"100%":bg.windowHeight-s.value.offsetTop},{y:0,duration:g(116-i),ease:"quint.inOut"}).to(o(".ArtistName__Line"),{yPercent:0,duration:g(54),ease:"quint.out",stagger:g(8)},g(97-i)).from(o(".Exhibition__Date__Line"),{yPercent:100,duration:g(24),ease:"quart.out"},g(129-i)).addLabel("about","<").from(o(".About__Title__Line"),{yPercent:100,duration:g(24),ease:"quart.out"},"about").from(o(".Exhibition__Name__Line"),{yPercent:100,duration:g(20),ease:"quint.out"},g(145-i)).to(c.value,{y:0,duration:g(71),ease:"quint.out"},"about").to(c.value,{opacity:1,duration:g(60)},"<"+g(11)).add(()=>{d.value=!0},"<").to(h.value,{autoAlpha:1,duration:g(12)},g(156-i))}function b(t){wt["b"].set(t,{clearProps:"overflow"}),u.value&&Object.prototype.hasOwnProperty.call(u.value,"data-simple-scrollbar")&&(u.value["data-simple-scrollbar"].moveBar(),u.value.classList.toggle("is-enabled",u.value["data-simple-scrollbar"].scrollRatio<1))}function f(t){wt["b"].set(t,{overflow:"hidden"})}function v(t,e){const i=wt["b"].timeline({defaults:{ease:"linear"},onComplete:e});i.to([o.value,h.value],{autoAlpha:0,duration:.3}).to(n.value,{y:bg.isDesktop?"100%":bg.windowHeight-s.value.offsetTop+t.scrollTop,duration:.8,ease:"quint.inOut"},.2)}function x(t){var e;wt["b"].set(t,{clearProps:"overflow"}),null===(e=u.value)||void 0===e||e.classList.remove("is-enabled"),d.value=!1}function T(){}return(t,i)=>{const a=Object(E["K"])("inset-border"),p=Object(E["K"])("ui-btn");return Object(E["D"])(),Object(E["g"])(E["d"],{css:!1,onBeforeEnter:m,onEnter:_,onAfterEnter:b,onBeforeLeave:f,onLeave:v,onAfterLeave:x},{default:Object(E["Z"])(()=>[Object(E["j"])("div",dA,[Object(E["j"])("div",{class:"Backdrop",onClick:i[0]||(i[0]=t=>Object(E["S"])(qO).close())}),Object(E["j"])("div",{ref_key:"panel",ref:s,class:"Panel view-default__inner"},[Object(E["j"])("div",{ref_key:"background",ref:n,class:"Panel__Background rounded-24"},[Object(E["j"])("div",uA,[Object(E["m"])(a)])],512),Object(E["j"])("div",{ref_key:"inner",ref:o,class:"Panel__Inner"},[Object(E["j"])("div",pA,[Object(E["j"])("div",gA,[(Object(E["D"])(),Object(E["g"])(zO,{key:Object(E["S"])(e),ref_key:"name",ref:r,class:"Exhibition__Name"},{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("common.exhibition_name")),1)]),_:1})),Object(E["j"])("div",mA,[Object(E["j"])("a",{onClick:T,href:t.$t("about.exhibition_ticket_link"),target:"_blank"},[Object(E["ab"])(Object(E["m"])(p,{variant:Object(E["S"])(aA).SMALL},{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("about.exhibition_cta")),1)]),_:1},8,["variant"]),[[E["X"],d.value]])],8,_A)])])]),Object(E["j"])("div",bA,[Object(E["j"])("div",{ref_key:"scroller",ref:u,class:"About__Inner"},[Object(E["j"])("div",fA,[Object(E["j"])("div",{ref_key:"title",ref:l,class:"About__Title small-caps"},Object(E["O"])(t.$t("about.title")),513),Object(E["j"])("div",{ref_key:"description",ref:c,class:"About__Description text",innerHTML:t.$t("about.description")},null,8,vA)])],512)])],512),Object(E["j"])("div",{ref_key:"footer",ref:h,class:"Panel__Footer"},[Object(E["j"])("ul",xA,[Object(E["j"])("li",null,[Object(E["j"])("a",{href:"#legals",onClick:i[1]||(i[1]=Object(E["bb"])(t=>Object(E["S"])($O).open(Object(E["S"])(YO).LEGALS),["prevent"]))},Object(E["O"])(t.$t("about.nav.legals")),1)]),Object(E["j"])("li",null,[Object(E["j"])("a",{href:"#credits",onClick:i[2]||(i[2]=Object(E["bb"])(t=>Object(E["S"])($O).open(Object(E["S"])(YO).CREDITS),["prevent"]))},Object(E["O"])(t.$t("about.nav.credits")),1)]),Object(E["j"])("li",null,[Object(E["j"])("a",TA,Object(E["O"])(t.$t("about.nav.cookies")),1)])])],512)],512)])]),_:1})}}});s("2625");const OA=Zt()(wA,[["__scopeId","data-v-25eaaaf3"]]);var AA=OA;function yA(t,e,s,i,n,o){return Object(E["D"])(),Object(E["i"])("div",{class:Object(E["w"])(["glviewer",{loaded:t.loaded}])},null,2)}var DA=Object(E["o"])({setup(){const t=Object(E["H"])(!1),e=Object(E["H"])(!1),s=0,i=0;return{isdestroyed:e,loaded:t,glapp:Fm.getInstance(),resLoaded:s,resTotal:i}},mounted(){this.$el.appendChild(Fm.getInstance().canvas),Fm.getInstance().start()}});s("5ee1");const jA=Zt()(DA,[["render",yA]]);var RA=jA;const SA=["title"];function CA(t,e,s,i,n,o){return Object(E["D"])(),Object(E["i"])("button",{type:"button",class:Object(E["w"])(["UIAudioBtn",["UIAudioBtn--"+t.theme,{"is-muted":t.isMuted}]]),title:t.$t("common.toggle_sound"),onClick:e[0]||(e[0]=(...e)=>t.toggleSound&&t.toggleSound(...e))},[(Object(E["D"])(),Object(E["i"])(E["a"],null,Object(E["I"])(5,t=>Object(E["j"])("span",{key:t,class:"Bar"})),64))],10,SA)}var IA;(function(t){t["LIGHT"]="light",t["DARK"]="dark"})(IA||(IA={}));var PA=Object(E["o"])({props:{theme:{type:String,default:IA.LIGHT}},setup(){const t=Object(E["H"])(!1),e=Object(E["e"])(()=>t.value);function s(){t.value=!t.value,$p.setMute(t.value)}return{isMuted:e,toggleSound:s}}});s("6847");const LA=Zt()(PA,[["render",CA],["__scopeId","data-v-3a2d8cfd"]]);var MA=LA;const kA={class:"LegalPage__Container view-default__inner bg-gradient"},NA={class:"LegalPage__Background"},FA={class:"LegalPage__Inner"},BA={class:"Aside"},UA={class:"Nav"},HA={key:0,class:"Nav__Link is-active"},GA=["href","onClick"],VA={class:"Main"},zA=["innerHTML"],XA=Object(E["o"])({});var WA=Object(E["o"])({...XA,__name:"LegalPage",setup(t){const e=Object(E["H"])(null);return Object(E["Y"])(()=>[$O.page,$O.isOpen],()=>{e.value.scrollTop=0}),(t,s)=>{const i=Object(E["K"])("inset-border"),n=Object(E["K"])("heading");return Object(E["D"])(),Object(E["i"])("div",{ref_key:"root",ref:e,class:"LegalPage view-default z-legal-page"},[Object(E["j"])("div",kA,[Object(E["j"])("div",NA,[Object(E["m"])(i)]),Object(E["j"])("div",FA,[Object(E["j"])("div",BA,[Object(E["j"])("ul",UA,[(Object(E["D"])(!0),Object(E["i"])(E["a"],null,Object(E["I"])(Object(E["S"])(YO),e=>(Object(E["D"])(),Object(E["i"])("li",{key:e,class:"Nav__Item"},[e===Object(E["S"])($O).page?(Object(E["D"])(),Object(E["i"])("h1",HA,[Object(E["m"])(n,null,{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t(e+".title")),1)]),_:2},1024)])):(Object(E["D"])(),Object(E["i"])("a",{key:1,class:"Nav__Link",href:"#"+e,onClick:Object(E["bb"])(t=>Object(E["S"])($O).open(e),["prevent"])},[Object(E["m"])(n,null,{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t(e+".title")),1)]),_:2},1024)],8,GA))]))),128))])]),Object(E["j"])("div",VA,[Object(E["j"])("div",{class:"Content text",innerHTML:t.$t(Object(E["S"])($O).page+".content")},null,8,zA)])])])],512)}}});s("187c");const qA=Zt()(WA,[["__scopeId","data-v-6c6ba699"]]);var YA=qA;const KA=t=>(Object(E["F"])("data-v-c1fe4b02"),t=t(),Object(E["E"])(),t),ZA={key:0,class:"CookieBanner"},$A=KA(()=>Object(E["j"])("button",null,null,-1)),QA=Object(E["l"])("OK");function JA(t,e,s,i,n,o){const a=Object(E["K"])("ui-btn");return Object(E["D"])(),Object(E["g"])(E["d"],{onEnter:t.onEnter,onLeave:t.onLeave,appear:""},{default:Object(E["Z"])(()=>[t.$store.state.showCookieBanner?(Object(E["D"])(),Object(E["i"])("div",ZA,[Object(E["j"])("div",null,[Object(E["j"])("span",null,Object(E["O"])(t.$t("cookies.description")),1),Object(E["j"])("a",{href:"#legals",onClick:e[0]||(e[0]=Object(E["bb"])(e=>t.legalPage.open(t.LegalPages.LEGALS),["prevent"])),target:"_blank"},Object(E["O"])(t.$t("cookies.cta")),1)]),$A,Object(E["m"])(a,{onClick:t.close},{default:Object(E["Z"])(()=>[QA]),_:1},8,["onClick"])])):Object(E["h"])("",!0)]),_:1},8,["onEnter","onLeave"])}var ty=Object(E["o"])({setup(){return{legalPage:$O,LegalPages:YO}},mounted(){"hidden"===window.localStorage.getItem("cookie-banner")&&this.$store.dispatch("toggleCookieBanner",!1)},methods:{onEnter(t,e){wt["b"].from(t,{delay:5,autoAlpha:0,duration:.4,ease:"customOut",onComplete:e})},onLeave(t,e){wt["b"].to(t,{autoAlpha:0,duration:.3,ease:"customOut",onComplete:e})},close(){window.localStorage.setItem("cookie-banner","hidden"),this.$store.dispatch("toggleCookieBanner",!1)}}});s("f753");const ey=Zt()(ty,[["render",JA],["__scopeId","data-v-c1fe4b02"]]);var sy=ey;const iy=t=>(Object(E["F"])("data-v-e07c281a"),t=t(),Object(E["E"])(),t),ny={class:"RotationBlocker"},oy={class:"RotationBlocker__Wrapper"},ay=iy(()=>Object(E["j"])("p",{class:"Text Text--Top"},[Object(E["j"])("span",{class:"Text__Part Text__Part--Italic"},[Object(E["j"])("span",null," rotate ")]),Object(E["j"])("span",{class:"Text__Part Text__Part--Bold"},[Object(E["j"])("span",null," your phone ")])],-1)),ry={class:"RotationBlocker__Wrapper__Icon"},ly={class:"RotationBlocker__Wrapper__Icon__Wrapper RotationBlocker__Wrapper__Icon__Wrapper--Rectangle"},cy={class:"RotationBlocker__Wrapper__Icon__Wrapper RotationBlocker__Wrapper__Icon__Wrapper--Arrow"},hy=iy(()=>Object(E["j"])("p",{class:"Text Text--Bottom"},[Object(E["j"])("span",{class:"Text__Part Text__Part--Bold"},[Object(E["j"])("span",null,"to enjoy")]),Object(E["j"])("span",{class:"Text__Part Text__Part--Italic"},[Object(E["j"])("span",null,"the experience")])],-1));function dy(t,e,s,i,n,o){const a=Object(E["K"])("ui-icon");return Object(E["ab"])((Object(E["D"])(),Object(E["i"])("div",ny,[Object(E["j"])("div",oy,[ay,Object(E["j"])("div",ry,[Object(E["j"])("div",ly,[Object(E["m"])(a,{class:"Icon--Rectangle",name:"mobile-rectangle"})]),Object(E["j"])("div",cy,[Object(E["m"])(a,{class:"Icon--Arrow",name:"mobile-spin-arrow"})])]),hy])],512)),[[E["X"],t.isScreenVisible]])}var uy=Object(E["o"])({setup(){return{rectangleTl:null,arrowTl:null}},mounted(){this.isScreenVisible&&this.onEnter()},methods:{onEnter(){const t=wt["b"].utils.selector(this.$el);wt["b"].from([t(".Text--Top > span > span")],{x:"-100%",duration:1,ease:"quart.out",delay:.7}),wt["b"].from([t(".Text--Bottom > span > span")],{x:"100%",duration:1,ease:"quart.out",delay:.7}),wt["b"].from([t(".RotationBlocker__Wrapper__Icon")],{autoAlpha:0,delay:.7,duration:1}),this.rectangleTl=wt["b"].timeline({repeat:-1,delay:1.75}).to([t(".RotationBlocker__Wrapper__Icon__Wrapper--Rectangle")],{rotation:-5,duration:2,ease:"quart.out"}).to([t(".RotationBlocker__Wrapper__Icon__Wrapper--Rectangle")],{rotation:10,duration:1.7,ease:"quart.in"}),this.arrowTl=wt["b"].timeline({repeat:-1,delay:1.75}).to([t(".RotationBlocker__Wrapper__Icon__Wrapper--Arrow")],{rotation:360,duration:1.7,ease:"quart.in",delay:2})}},computed:{isScreenVisible(){return xg.isMobile&&bg.isLandscape}},watch:{isScreenVisible(t){t?this.onEnter():(this.rectangleTl.progress(0),this.rectangleTl.kill(),this.arrowTl.progress(0),this.arrowTl.kill())}}});s("9b11");const py=Zt()(uy,[["render",dy],["__scopeId","data-v-e07c281a"]]);var gy=py;const my=t=>(Object(E["F"])("data-v-9aad1f1c"),t=t(),Object(E["E"])(),t),_y={class:"Loading"},by={class:"Loading__Inner view-default"},fy={class:"Center"},vy=Object(E["k"])('<svg class="Border" viewBox="0 0 456 597" xmlns="http://www.w3.org/2000/svg" data-v-9aad1f1c><path d="M228 596.5C290.873 596.5 347.759 563.1 388.911 509.168C430.062 455.236 455.5 380.752 455.5 298.5C455.5 216.248 430.062 141.764 388.911 87.8324C347.759 33.9004 290.873 0.5 228 0.5C165.127 0.5 108.241 33.9004 67.0893 87.8324C25.9381 141.764 0.5 216.248 0.5 298.5C0.5 380.752 25.9381 455.236 67.0893 509.168C108.241 563.1 165.127 596.5 228 596.5Z" data-v-9aad1f1c></path></svg><svg class="Text" viewBox="0 0 515 650" xmlns="http://www.w3.org/2000/svg" data-v-9aad1f1c><path id="Text__Path__Path" d="M258,638.5 C122.858,638.5 13.5,498.243 13.5,325.5 C13.5,152.757 122.858,12.5 258,12.5 C393.142,12.5 502.5,152.757 502.5,325.5 C502.5,498.243 393.142,638.5 258,638.5 Z" data-v-9aad1f1c></path><text data-v-9aad1f1c><textPath href="#Text__Path__Path" startOffset="0" class="Text__Path" data-v-9aad1f1c>THE FEMALE GAZE THE FEMALE GAZE THE FEMALE GAZE THE FEMALE GAZE THE FEMALE GAZE THE FEMALE GAZE THE FEMALE GAZE THE FEMALE GAZE THE FEMALE GAZE THE FEMALE GAZE THE FEMALE GAZE THE FEMALE GAZE THE FEMALE GAZE </textPath></text></svg>',2),xy=["srcset"],Ty=["src","alt"],Ey=my(()=>Object(E["j"])("span",null,[Object(E["j"])("span",{class:"Dot"},"."),Object(E["j"])("span",{class:"Dot"},"."),Object(E["j"])("span",{class:"Dot"},".")],-1));function wy(t,e,s,i,n,o){return Object(E["D"])(),Object(E["i"])("div",_y,[Object(E["j"])("div",by,[Object(E["j"])("div",fy,[vy,Object(E["j"])("picture",{class:Object(E["w"])(["Girl Girl--Right",{"is-loaded":t.isImageLoaded}])},[Object(E["j"])("source",{srcset:"/assets/images/loading/girl.png 1x, /assets/images/loading/girl@2x.png 2x"},null,8,xy),Object(E["j"])("img",{src:"/assets/images/loading/girl.png",alt:t.$t("loading.label"),onLoad:e[0]||(e[0]=t=>this.isImageLoaded=!0)},null,40,Ty)],2)]),Object(E["j"])("span",{class:Object(E["w"])(["Label subtitle",{"is-loading":t.startLoading}])},[Object(E["j"])("span",null,[Object(E["l"])(Object(E["O"])(t.$t("loading.label"))+" ",1),Ey])],2)])])}wt["a"].registerPlugin(BT.a);const{send:Oy,state:Ay}=Object(Ot["b"])(Wx);var yy=Object(E["o"])({components:{},setup(){const t=Object(E["e"])(()=>Math.round(100*x().state.app.load_progress)+"%");return{...Object(Ot["b"])(Wx),progress:t}},data(){return{fstate:"none",isImageLoaded:!1,leaving:!1,startLoading:!1}},mounted(){this.onStart()},methods:{onClick(){},onStart(){const t=wt["a"].utils.selector(this.$el);wt["a"].timeline({repeat:-1}).fromTo([t(".Text__Path")],{attr:{startOffset:-160}},{attr:{startOffset:0},duration:2,ease:"none"},"start"),wt["a"].timeline({delay:0}).from([t(".Loading__Inner")],{opacity:0,duration:1,ease:"none"},"start").from([t(".Label > span")],{yPercent:100,duration:1,ease:"quart.out",onComplete:()=>{Wx.send("LOADING_INTRO_COMPLETE")}},"start").add(()=>{this.startLoading=!0},"-=0.3")},onEnter(){console.log("onEnter")},onReveal(){wt["a"].timeline({onComplete:()=>Oy({type:"LOADING_OUTRO_COMPLETE"})}).to([this.$el],{opacity:0,duration:1,ease:"none"})}},watch:{state:{handler(t,e){(this.state.matches("museum_loading.fromhome")||this.state.matches("museum_loading.intro")||this.state.matches("painting_loading.fromhome")||this.state.matches("painting_loading.intro")||this.state.matches("gallery_loading.intro")||this.state.matches("gallery_loading.fromshare"))&&this.$nextTick(this.onEnter),(this.state.matches("museum_loading.outro")||this.state.matches("painting_loading.outro")||this.state.matches("gallery_loading.outro"))&&this.onReveal()},immediate:!0}}});s("7ee8");const Dy=Zt()(yy,[["render",wy],["__scopeId","data-v-9aad1f1c"]]);var jy=Dy;const Ry=t=>(Object(E["F"])("data-v-796dad72"),t=t(),Object(E["E"])(),t),Sy={class:"Museum view-default"},Cy=Ry(()=>Object(E["j"])("div",{class:"Museum__gradient-bottom"},null,-1)),Iy={class:"Museum__Inner view-default__inner"},Py={class:"ScrollHint"},Ly=Ry(()=>Object(E["j"])("span",{class:"ScrollHint__Bar-1"},null,-1)),My=Ry(()=>Object(E["j"])("span",{class:"ScrollHint__Bar-2"},null,-1)),ky={class:"ScrollHint__Label small-caps"};function Ny(t,e,s,i,n,o){const a=Object(E["K"])("UIBtnDive"),r=Object(E["K"])("ArtworkCaption"),l=Object(E["K"])("GetTicket"),c=Object(E["K"])("CustomCursor");return Object(E["D"])(),Object(E["i"])("div",Sy,[Cy,Object(E["j"])("div",Iy,[Object(E["m"])(E["d"],{onEnter:t.artworkEnterAnim,onLeave:t.artworkLeaveAnim},{default:Object(E["Z"])(()=>[t.showDiveBtn?(Object(E["D"])(),Object(E["g"])(a,{key:0,type:"button",onClick:t.onGoPainting},null,8,["onClick"])):Object(E["h"])("",!0)]),_:1},8,["onEnter","onLeave"]),Object(E["m"])(E["d"],{onEnter:t.scrollEnterAnim,onLeave:t.scrollLeaveAnim},{default:Object(E["Z"])(()=>[Object(E["ab"])(Object(E["j"])("div",Py,[Ly,My,Object(E["j"])("div",ky,Object(E["O"])(t.$t("museum.scroll_hint")),1)],512),[[E["X"],t.showScrollHint]])]),_:1},8,["onEnter","onLeave"]),Object(E["m"])(E["d"],{onEnter:t.artworkEnterAnim,onLeave:t.artworkLeaveAnim},{default:Object(E["Z"])(()=>[t.nearbyArtworkId||t.forceArtworkDescription?(Object(E["D"])(),Object(E["g"])(r,{key:0,artworkId:t.nearbyArtworkId||t.selectedArtworkId,open:t.forceArtworkDescription},null,8,["artworkId","open"])):Object(E["h"])("",!0)]),_:1},8,["onEnter","onLeave"]),Object(E["m"])(E["d"],{onEnter:t.artworkEnterAnim,onLeave:t.artworkLeaveAnim},{default:Object(E["Z"])(()=>[t.showTickets?(Object(E["D"])(),Object(E["g"])(l,{key:0})):Object(E["h"])("",!0)]),_:1},8,["onEnter","onLeave"]),Object(E["ab"])(Object(E["m"])(c,null,{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("museum.main_painting_cursor")),1)]),_:1},512),[[E["X"],t.showMainPaintingCursor]])])])}var Fy=s("9184");const By=t=>(Object(E["F"])("data-v-05d94d52"),t=t(),Object(E["E"])(),t),Uy=Object(E["k"])('<svg class="Border" width="308" height="66" viewBox="0 0 308 66" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-05d94d52><rect class="Border__bg" x="3" y="4" width="302" height="59" rx="23" fill="#433C49" fill-opacity="0.2" data-v-05d94d52></rect><rect x="3" y="4" width="302" height="59" rx="23" stroke="url(#a)" stroke-width="2" data-v-05d94d52></rect><rect x="1" y="2" width="306" height="63" rx="25" stroke="#F6F3E4" stroke-width="2" data-v-05d94d52></rect><rect x="1" y="2" width="306" height="63" rx="25" stroke="url(#b)" stroke-width="2" data-v-05d94d52></rect><defs data-v-05d94d52><filter id="d" x="104.5" y="-54.8168" width="119.527" height="176.634" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB" data-v-05d94d52><feFlood flood-opacity="0" result="BackgroundImageFix" data-v-05d94d52></feFlood><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape" data-v-05d94d52></feBlend><feGaussianBlur stdDeviation="12" result="effect1_foregroundBlur_1522_13877" data-v-05d94d52></feGaussianBlur></filter><filter id="e" x="63.4998" y="-51.4501" width="96.4565" height="169.9" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB" data-v-05d94d52><feFlood flood-opacity="0" result="BackgroundImageFix" data-v-05d94d52></feFlood><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape" data-v-05d94d52></feBlend><feGaussianBlur stdDeviation="12" result="effect1_foregroundBlur_1522_13877" data-v-05d94d52></feGaussianBlur></filter><linearGradient id="a" x1="220.434" y1="4.5" x2="-37.9364" y2="74.5589" gradientUnits="userSpaceOnUse" data-v-05d94d52><stop stop-color="#F6F3E4" data-v-05d94d52></stop><stop offset="1" stop-color="#F6F3E4" stop-opacity="0" data-v-05d94d52></stop></linearGradient><linearGradient id="b" x1="50.2353" y1="-18.1195" x2="128.169" y2="129.902" gradientUnits="userSpaceOnUse" data-v-05d94d52><stop stop-color="#F5AAE0" data-v-05d94d52></stop><stop offset=".4844" stop-color="#A47CDA" stop-opacity=".8208" data-v-05d94d52></stop><stop offset="1" stop-color="#4D4BD2" stop-opacity=".63" data-v-05d94d52></stop></linearGradient></defs></svg><div class="Reflect" data-v-05d94d52><svg width="231" height="193" viewBox="0 0 231 193" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-05d94d52><g filter="url(#blurReflect1)" data-v-05d94d52><rect width="40.0547" height="200" transform="matrix(.71605 .69805 -.6913 .72257 192.19 10)" fill="#fff" data-v-05d94d52></rect></g><g filter="url(#blurReflect2)" data-v-05d94d52><rect width="16.0219" height="200" transform="matrix(.71605 .69805 -.6913 .72257 148.26 18.3879)" fill="#fff" data-v-05d94d52></rect></g><defs data-v-05d94d52><filter id="blurReflect1" x="43.9297" y="0" width="186.942" height="192.473" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB" data-v-05d94d52><feFlood flood-opacity="0" result="BackgroundImageFix" data-v-05d94d52></feFlood><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape" data-v-05d94d52></feBlend><feGaussianBlur stdDeviation="5" result="effect1_foregroundBlur_163_381" data-v-05d94d52></feGaussianBlur></filter><filter id="blurReflect2" x="0" y="8.3879" width="169.733" height="175.697" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB" data-v-05d94d52><feFlood flood-opacity="0" result="BackgroundImageFix" data-v-05d94d52></feFlood><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape" data-v-05d94d52></feBlend><feGaussianBlur stdDeviation="5" result="effect1_foregroundBlur_163_381" data-v-05d94d52></feGaussianBlur></filter></defs></svg></div>',2),Hy={ref:"label",class:"Label small-caps font-medium"},Gy={class:"Label__Inner Label__Inner--main"},Vy={class:"Label__Inner Label__Inner--clone"},zy={ref:"corner",class:"Corner",fill:"none",viewBox:"0 0 281 43"},Xy=By(()=>Object(E["j"])("path",{stroke:"url(#UIBtnDive-Corner-gradient)","stroke-linecap":"round","stroke-width":"8",d:"M4.76 4h248.11a24 24 0 0 1 24 24v11"},null,-1)),Wy=By(()=>Object(E["j"])("defs",null,[Object(E["j"])("linearGradient",{id:"UIBtnDive-Corner-gradient",x1:"337.13",x2:"12.29",y1:"4",y2:"4",gradientUnits:"userSpaceOnUse"},[Object(E["j"])("stop",{"stop-color":"var(--white)"}),Object(E["j"])("stop",{offset:"1","stop-color":"#fff","stop-opacity":"0"})])],-1)),qy=[Xy,Wy];function Yy(t,e,s,i,n,o){return Object(E["D"])(),Object(E["i"])("button",{class:"UIBtn UIBtnDive",onMouseenter:e[0]||(e[0]=(...e)=>t.onMouseEnter&&t.onMouseEnter(...e)),onClick:e[1]||(e[1]=(...e)=>t.onClick&&t.onClick(...e))},[Uy,Object(E["j"])("span",Hy,[Object(E["j"])("span",Gy,[Object(E["J"])(t.$slots,"default",{},()=>[Object(E["l"])(Object(E["O"])(t.$t("museum.cta_experience")),1)],!0)]),Object(E["j"])("span",Vy,[Object(E["J"])(t.$slots,"default",{},()=>[Object(E["l"])(Object(E["O"])(t.$t("museum.cta_experience")),1)],!0)])],512),(Object(E["D"])(),Object(E["i"])("svg",zy,qy,512))],32)}var Ky=Object(E["o"])({methods:{onMouseEnter(){$p.playUI("ui_rollover_long")},onClick(){$p.playUI("ui_click")}}});s("9197");const Zy=Zt()(Ky,[["render",Yy],["__scopeId","data-v-05d94d52"]]);var $y=Zy,Qy=s("496d"),Jy=s.n(Qy),tD=s("67ba"),eD=s.n(tD);const sD="083";function iD(t){return t===sD}function nD(t){const{tm:e}=Object(i["b"])(),s=e("museum.artworks");return{...s[t],id:t,isMainPainting:iD(t)}}const oD=t=>(Object(E["F"])("data-v-fcf053dc"),t=t(),Object(E["E"])(),t),aD=oD(()=>Object(E["j"])("div",{class:"progress"},null,-1)),rD=[aD],lD={class:"Shadow"},cD={key:0,src:Jy.a,alt:""},hD={key:1,src:eD.a,alt:""},dD={class:"Inner"},uD={class:"Header"},pD={class:"Suptitle small-caps"},gD=["innerHTML"],mD=Object(E["o"])({});var _D=Object(E["o"])({...mD,__name:"ArtworkCaption",props:{artworkId:null,open:null},setup(t){const e=t,s=nD(e.artworkId),i=Object(E["e"])(()=>!bg.isDesktop),n=Object(E["e"])(()=>i.value&&s.isMainPainting),o=Object(Fy["a"])(Wx,t=>t.context.selectedArtworkId),a=Object(E["e"])(()=>!!o.value);Object(E["Y"])(a,t=>{t?w():j()});const r=Object(E["H"])(!1),l=Object(E["H"])(null),c=Object(E["H"])(null),h=Object(E["H"])(null),d=Object(E["H"])(null),u=Object(E["H"])(null),p=Object(E["H"])(null),g=Object(E["H"])(null),m=Object(E["H"])(null),_=Object(E["H"])(null),b=Object(E["H"])(null),f=Object(E["H"])(null),v={};function x(){const t=u.value.querySelector(".Suptitle");wt["b"].set(t,{height:f.value.offsetHeight});const e=u.value.getBoundingClientRect(),s=p.value.getBoundingClientRect(),i=g.value.getBoundingClientRect(),n=.73,o=i.height*n,a=i.height-o;v.cardY=e.top,v.cardOffsetY=s.height+a-32,v.titleScale=n,v.subtitleOffsetY=-a,wt["b"].set(u.value,{y:v.cardOffsetY}),wt["b"].set(g.value,{scale:v.titleScale}),wt["b"].set(m.value,{y:v.subtitleOffsetY})}function T(){Wx.send({type:"SELECT_ARTWORK",artworkId:null})}function w(){const t=document.querySelectorAll(".UIBtnDive"),e=u.value.getBoundingClientRect(),s=bg.isDesktop?130:.5*bg.windowHeight,i=-v.cardY+s,n=Math.max(-v.cardY+.5*bg.windowHeight-.5*e.height,i);v.finaleCardY=n;const o=s+e.height+100;A(e,o);const a=wt["b"].timeline({onComplete:()=>{l.value.addEventListener("click",T)}});a.set([f.value,_.value],{yPercent:100,y:0}).to([d.value.$el,t],{autoAlpha:0},"start").to(p.value,{autoAlpha:1},"start").to(u.value,{y:v.finaleCardY,x:bg.isDesktop?"+=60":0,duration:1.067,ease:"quint.inOut"},"start").to(g.value,{scale:1,duration:1.067,ease:"quint.inOut"},"start").to(m.value,{y:0,duration:1.067,ease:"quint.inOut"},"start").to(b.value,{yPercent:-100,duration:.7,ease:"quint.inOut"},"start+=0.4").to(f.value,{yPercent:0,duration:.7,ease:"quint.inOut"},"start+=0.4").to(_.value,{yPercent:0,duration:.7,ease:"quint.inOut"},"start+=0.4")}Object(E["B"])(()=>{x(),e.open&&w()}),Object(E["A"])(()=>{Wx.send({type:"SELECT_ARTWORK",artworkId:null})});const O={height:0,scrollBarHeight:0};function A(t,e){O.height=e,O.scrollBarHeight=bg.windowHeight/O.height,l.value.style.setProperty("--height-container",O.height+"px");let s=bg.isDesktop?60:0;s+=t.left+t.width,wt["b"].set(l.value,{autoAlpha:0,height:bg.windowHeight}),O.scrollBarHeight<=.9&&(l.value.style.setProperty("--offset-x",s+"px"),l.value.style.setProperty("--offset-y",t.top+"px"),l.value.style.setProperty("--height-progress",100*O.scrollBarHeight+"%"),wt["b"].to(l.value,{autoAlpha:1,delay:1.2}),r.value=!0)}function y(){l.value&&(l.value.removeEventListener("click",T),r.value=!1,wt["b"].set(l.value,{autoAlpha:0}))}function D(){Wx.send({type:"SELECT_ARTWORK",artworkId:null})}function j(){const t=document.querySelectorAll(".UIBtnDive"),e=wt["b"].timeline({});e.to([d.value.$el,t],{autoAlpha:1},"start+=1.2").to(p.value,{autoAlpha:0,duration:1.067,onComplete:()=>{y()}},"start").to(u.value,{y:v.cardOffsetY,x:0,duration:1.067,ease:"quint.inOut"},"start").to(g.value,{scale:v.titleScale,duration:1.067,ease:"quint.inOut"},"start").to(m.value,{y:v.subtitleOffsetY,duration:1.067,ease:"quint.inOut"},"start").to(b.value,{yPercent:0,duration:.6,ease:"quint.inOut"},"start").to(f.value,{yPercent:105,duration:.6,ease:"quint.inOut"},"start").to(_.value,{yPercent:105,duration:.6,ease:"quint.inOut"},"start")}function R(t){const e=t.target,s=e.scrollTop,i=.5*bg.windowHeight,n=s/(e.scrollHeight-e.offsetHeight),o=i-i*O.scrollBarHeight,a=o*n;l.value.style.setProperty("--progress",a+"px");const r=v.finaleCardY-s;wt["b"].set(u.value,{y:r})}function S(){Wx.send("GOTO_PAINTING")}return(t,o)=>{const v=Object(E["K"])("heading"),x=Object(E["K"])("ui-btn-secondary");return Object(E["D"])(),Object(E["i"])("div",{class:Object(E["w"])(["ArtworkCaption",{"ArtworkCaption--opened":Object(E["S"])(a),"ArtworkCaption--has-scroll":r.value}])},[Object(E["ab"])(Object(E["j"])("div",{ref_key:"scroll",ref:l,class:"FakeScroll",onScroll:R},[Object(E["j"])("div",{ref_key:"scrollBar",ref:h,class:"FakeScroll__bar"},rD,512),Object(E["j"])("div",{ref_key:"scrollInner",ref:c,class:"FakeScroll__inner"},null,512)],544),[[E["X"],Object(E["S"])(a)]]),Object(E["j"])("div",lD,[Object(E["S"])(i)?(Object(E["D"])(),Object(E["i"])("img",cD)):(Object(E["D"])(),Object(E["i"])("img",hD))]),Object(E["j"])("div",dD,[Object(E["j"])("div",{ref_key:"card",ref:u,class:"Card"},[Object(E["j"])("div",uD,[Object(E["j"])("div",{ref_key:"title",ref:g,class:"Title"},[Object(E["m"])(v,{onClick:o[0]||(o[0]=t=>!Object(E["S"])(a)&&Object(E["S"])(Wx).send({type:"SELECT_ARTWORK",artworkId:e.artworkId})),text:t.$rt(Object(E["S"])(s).title)},null,8,["text"])],512),Object(E["j"])("div",{ref_key:"subtitle",ref:m,class:"Subtitle small-caps"},[Object(E["j"])("span",null,Object(E["O"])(t.$rt(Object(E["S"])(s).date)),1),Object(E["j"])("span",{ref_key:"spanMaterial",ref:_,class:"material"},"— "+Object(E["O"])(t.$rt(Object(E["S"])(s).material)),513)],512),Object(E["j"])("div",pD,[Object(E["ab"])(Object(E["j"])("span",{ref_key:"spanMainPainting",ref:b,class:"main-painting"},Object(E["O"])(t.$t("museum.main_painting_label")),513),[[E["X"],Object(E["S"])(s).isMainPainting]]),Object(E["j"])("span",{ref_key:"spanMuseum",ref:f,class:"museum"},Object(E["O"])(t.$rt(Object(E["S"])(s).museum)),513)])]),Object(E["j"])("div",{ref_key:"content",ref:p,class:"Content"},[Object(E["j"])("div",{class:"Description text",innerHTML:t.$rt(Object(E["S"])(s).description)},null,8,gD),Object(E["m"])(x,{onClick:D},{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("common.back_to_museum")),1)]),_:1})],512)],512),Object(E["ab"])(Object(E["m"])(x,{ref_key:"readMoreBtn",ref:d,theme:t.UIBtnSecondaryTheme.LIGHT,onClick:o[1]||(o[1]=t=>Object(E["S"])(Wx).send({type:"SELECT_ARTWORK",artworkId:e.artworkId}))},{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("common.read_more")),1)]),_:1},8,["theme"]),[[E["X"],!Object(E["S"])(i)]]),Object(E["ab"])(Object(E["m"])($y,{type:"button",onClick:S},null,512),[[E["X"],Object(E["S"])(n)]])])],2)}}});s("0214");const bD=Zt()(_D,[["__scopeId","data-v-fcf053dc"]]);var fD=bD;const vD=t=>(Object(E["F"])("data-v-1984fbc7"),t=t(),Object(E["E"])(),t),xD={class:"ArtworkDetails"},TD=vD(()=>Object(E["j"])("div",{class:"Shadow"},null,-1)),ED={class:"Inner"},wD={class:"Header"},OD={class:"Title"},AD={class:"Suptitle small-caps"},yD={class:"Subtitle small-caps"},DD=["innerHTML"],jD=Object(E["o"])({});var RD=Object(E["o"])({...jD,__name:"ArtworkDetails",props:{artworkId:null},setup(t){const e=t,s=nD(e.artworkId);function i(){Wx.send({type:"SELECT_ARTWORK",artworkId:null})}return(t,e)=>{const n=Object(E["K"])("heading"),o=Object(E["K"])("ui-btn-secondary");return Object(E["D"])(),Object(E["i"])("div",xD,[TD,Object(E["j"])("div",ED,[Object(E["j"])("div",wD,[Object(E["j"])("div",OD,[Object(E["m"])(n,null,{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$rt(Object(E["S"])(s).title)),1)]),_:1})]),Object(E["j"])("div",AD,Object(E["O"])(t.$rt(Object(E["S"])(s).museum)),1),Object(E["j"])("div",yD,Object(E["O"])(t.$rt(Object(E["S"])(s).date))+" — "+Object(E["O"])(t.$rt(Object(E["S"])(s).material)),1)]),Object(E["j"])("div",{class:"Description text",innerHTML:t.$rt(Object(E["S"])(s).description)},null,8,DD),Object(E["m"])(o,{onClick:i},{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("common.back_to_museum")),1)]),_:1})])])}}});s("07b7");const SD=Zt()(RD,[["__scopeId","data-v-1984fbc7"]]);var CD=SD;const ID=t=>(Object(E["F"])("data-v-6a37e1cf"),t=t(),Object(E["E"])(),t),PD={ref:"root",class:"CustomCursor z-cursor"},LD={class:"Cursor"},MD=ID(()=>Object(E["j"])("span",{class:"Border"},null,-1)),kD={class:"Label cta",ref:"label"};function ND(t,e,s,i,n,o){return Object(E["D"])(),Object(E["g"])(E["d"],{onEnter:t.onEnter,onLeave:t.onLeave},{default:Object(E["Z"])(()=>[Object(E["ab"])(Object(E["j"])("div",PD,[Object(E["j"])("div",LD,[MD,Object(E["j"])("span",kD,[Object(E["j"])("span",null,[Object(E["J"])(t.$slots,"default",{},void 0,!0)])],512)])],512),[[E["X"],t.show]])]),_:3},8,["onEnter","onLeave"])}function FD(t,e,s){return t*(1-s)+e*s}function BD(){const t=Object(E["G"])({x:0,y:0});function e({clientX:e,clientY:s}){t.x=e,t.y=s}return Object(E["B"])(()=>{window.addEventListener("mousemove",e,!1)}),Object(E["C"])(()=>{window.removeEventListener("mousemove",e,!1)}),Object(E["R"])(t)}var UD=Object(E["o"])({props:{inertia:{type:Number,default:.15},show:{type:Boolean,default:!1}},setup(t){const e=Object(E["H"])(null),s=(Object(E["H"])(null),Object(E["Q"])(t,"inertia")),{x:i,y:n}=BD(),o=Object(E["H"])(i.value),a=Object(E["H"])(n.value);let r=null,l=null;function c(){o.value=FD(o.value,i.value,s.value),a.value=FD(a.value,n.value,s.value),r({x:o.value,y:a.value})}function h(t,e){const s=wt["b"].utils.selector(t),i=wt["b"].timeline({onComplete:()=>{e()}});i.set(s(".Label span"),{autoAlpha:0,y:50}).set([s(".Border")],{scale:0}).to([s(".Border")],{scale:1,y:0,duration:1,ease:"quart.out"},"start").to(s(".Label span"),{autoAlpha:1,y:0,duration:1,ease:"quart.out"},"start")}function d(t,e){const s=wt["b"].utils.selector(t),i=wt["b"].timeline({onComplete:()=>{e(),wt["b"].set([s(".Border")],{clearProps:"all"})}});i.to([s(".Border")],{scale:0,duration:1,ease:"quart.out"},"start").to([s(".Label span")],{autoAlpha:0,duration:1,ease:"quart.out"},"start")}return Object(E["B"])(()=>{Object(E["v"])(()=>{r=wt["b"].quickSetter(e.value,"css"),l=wt["b"].quickSetter(e.value.querySelector(".Label"),"css"),wt["b"].ticker.add(c)})}),Object(E["A"])(()=>{wt["b"].ticker.remove(c)}),{onEnter:h,onLeave:d,root:e}}});s("6007");const HD=Zt()(UD,[["render",ND],["__scopeId","data-v-6a37e1cf"]]);var GD=HD;const VD={class:"GetTicket"},zD={class:"Shadow"},XD={key:0,src:Jy.a,alt:""},WD={key:1,src:eD.a,alt:""},qD={class:"Inner"},YD={class:"Header"},KD={ref:"subtitle",class:"Subtitle small-caps"},ZD={class:"Title"},$D={class:"Exhibition__Cta"},QD=["href"],JD=Object(E["o"])({});var tj=Object(E["o"])({...JD,__name:"GetTicket",setup(t){const e=Object(E["e"])(()=>!bg.isDesktop);return(t,s)=>{const i=Object(E["K"])("heading"),n=Object(E["K"])("ui-btn");return Object(E["D"])(),Object(E["i"])("div",VD,[Object(E["j"])("div",zD,[Object(E["S"])(e)?(Object(E["D"])(),Object(E["i"])("img",XD)):(Object(E["D"])(),Object(E["i"])("img",WD))]),Object(E["j"])("div",qD,[Object(E["j"])("div",YD,[Object(E["j"])("div",KD,[Object(E["j"])("span",null,Object(E["O"])(t.$t("tickets.date")),1)],512),Object(E["j"])("div",ZD,[Object(E["m"])(i,{text:t.$t("tickets.title")},null,8,["text"])]),Object(E["j"])("div",$D,[Object(E["m"])(n,{variant:Object(E["S"])(aA).SMALL,theme:Object(E["S"])(rA).DARK},{default:Object(E["Z"])(()=>[Object(E["j"])("a",{href:t.$t("about.exhibition_ticket_link"),target:"_blank"},Object(E["O"])(t.$t("about.exhibition_cta")),9,QD)]),_:1},8,["variant","theme"])])])])])}}});s("9e18");const ej=Zt()(tj,[["__scopeId","data-v-a7a045f8"]]);var sj=ej;const ij=Object(E["o"])({components:{UIBtnDive:$y,ArtworkCaption:fD,ArtworkDetails:CD,CustomCursor:GD,GetTicket:sj},setup(){const{state:t,send:e}=Object(Ot["b"])(Wx),s=Object(E["H"])(!1),i=Object(E["H"])(!1),n=Object(E["e"])(()=>{let t=cb.pathProgress%1;return t<0&&(t+=1),t}),o=Object(E["e"])(()=>n.value>=0&&n.value<=.1&&s.value),a=Object(E["e"])(()=>n.value>=.85&&n.value<=.92),r=Object(Fy["a"])(Wx,t=>t.context.nearbyArtworkId),l=Object(Fy["a"])(Wx,t=>t.context.hoveredArtworkId),c=Object(E["e"])(()=>!!r.value||i.value),h=Object(Fy["a"])(Wx,t=>t.context.selectedArtworkId),d=Object(E["e"])(()=>h.value),u=Object(E["e"])(()=>iD(l.value)&&iD(d.value)&&bg.isDesktop),p=Object(E["e"])(()=>bg.isDesktop&&iD(r.value)),g=Object(E["e"])(()=>!!r.value);Object(E["Y"])(t,(e,s)=>{t.value.matches("museum.explore")&&!s.matches("museum.explore")&&Object(E["v"])(m),s&&"SELECT_ARTWORK"===t.value.event.type&&h.value===s.context.selectedArtworkId&&iD(h.value)&&Wx.send("GOTO_PAINTING")}),Object(E["Y"])(h,t=>{i.value=t&&!r.value}),Object(E["B"])(()=>{wt["b"].set(".Museum, .AppHeader",{autoAlpha:0}),t.value.matches("museum.explore")&&Object(E["v"])(m)}),Object(E["z"])(()=>{i.value=!1});const m=()=>{const t=wt["b"].utils.selector(document.body),e=t(".AppHeader .AppHeader__Logo"),i=t(".AppHeader .UIBtnGallery"),n=t(".AppHeader .BtnInformation"),o=t(".Museum__gradient-bottom");wt["b"].set(".Museum, .AppHeader",{clearProps:"all"}),s.value=!0;const a=wt["b"].timeline({onComplete:()=>{}});a.from([e,i,n],{duration:1.033,autoAlpha:0,ease:"customOut",stagger:.1},"start").from(o,{duration:1.033,autoAlpha:0,ease:"customOut"},"start").from([e,i,n],{duration:1.033,y:20,ease:"customOut2",stagger:.1},"start").to(o,{duration:.6,autoAlpha:.5,ease:"customOut"},"start+=5")},_=(t,e)=>{wt["b"].utils.selector(document.body);const s=t.querySelector(".ScrollHint__Label"),i=t.querySelector(".ScrollHint__Bar-1"),n=t.querySelector(".ScrollHint__Bar-2"),o=wt["b"].timeline({onComplete:()=>{t.classList.add("ScrollHint--showed"),e()}});o.from(i,{duration:1,y:80,scaleY:0,ease:"customOut2"},"start").to(i,{duration:.6,autoAlpha:0,ease:"customOut"},"start").from(s,{duration:1,autoAlpha:0,ease:"customOut"},"start+=0.33").from(s,{duration:1,y:20,ease:"customOut2"},"start+=0.33").from(n,{duration:1,y:56,ease:"customOut2"},"start+=0.433").from(n,{duration:1,autoAlpha:0,ease:"customOut"},"start+=0.433")},b=(t,e)=>{const s=t.querySelector(".ScrollHint__Label"),i=t.querySelector(".ScrollHint__Bar-1"),n=t.querySelector(".ScrollHint__Bar-2"),o=wt["b"].timeline({onComplete:()=>{wt["b"].set([t,s,i,n],{clearProps:"all"}),e()}});o.to(t,{duration:1,autoAlpha:0,ease:"customOut"},"start")},f=(t,e)=>{const s=wt["b"].timeline({onComplete:e});s.set(t,{clearProps:"all"}).from(t,{autoAlpha:0,duration:.8,ease:"customOut"})},v=(t,e)=>{const s=wt["b"].timeline({onComplete:e});s.to(t,{autoAlpha:0,duration:.4,ease:"customOut"})},x=()=>{e("GOTO_PAINTING")};return{...Object(Ot["b"])(Wx),showArtwork:c,hoveredArtworkId:l,forceArtworkDescription:i,showDiveBtn:p,showScrollHint:o,showTickets:a,nearbyArtworkId:r,selectedArtworkId:h,showArtworkCaption:g,showMainPaintingCursor:u,pathProgress:n,onGoPainting:x,scrollEnterAnim:_,scrollLeaveAnim:b,artworkEnterAnim:f,artworkLeaveAnim:v}}});var nj=ij;s("42c0");const oj=Zt()(nj,[["render",Ny],["__scopeId","data-v-796dad72"]]);var aj=oj;const rj=t=>(Object(E["F"])("data-v-1fa5b053"),t=t(),Object(E["E"])(),t),lj={class:"Painting"},cj=rj(()=>Object(E["j"])("div",{class:"Flash"},null,-1)),hj=[cj],dj={key:0,class:"PaintingExplore view-default"},uj={class:"view-default__inner"},pj={key:0,class:"SeeAll__Veil"},gj={key:3,class:"PaintingPhoto view-default"},mj={class:"view-default__inner"},_j={key:4,class:"PaintingSnapshot view-default"},bj=rj(()=>Object(E["j"])("div",{class:"view-default__inner"},null,-1)),fj=[bj],vj={key:5,class:"PaintingIntro z-index-ui"};function xj(t,e,s,i,n,o){const a=Object(E["K"])("UIBtnCamera"),r=Object(E["K"])("UIPnlPreset"),l=Object(E["K"])("ui-btn-secondary"),c=Object(E["K"])("ui-icon"),h=Object(E["K"])("PhotoSettings"),d=Object(E["K"])("LightSettings"),u=Object(E["K"])("PoseSettings"),p=Object(E["K"])("BackgroundSettings");return Object(E["D"])(),Object(E["i"])("div",lj,[Object(E["j"])("div",{class:Object(E["w"])(["PaintingFlash",{"PaintingFlash--flashing":t.flash}])},hj,2),Object(E["m"])(E["d"],{onEnter:t.onEnterUI,onEnterCancelled:t.onEnterCancelledUI,onLeave:t.onLeaveUI,appear:""},{default:Object(E["Z"])(()=>[t.state.matches("painting.explore.default")?(Object(E["D"])(),Object(E["i"])("div",dj,[Object(E["j"])("div",uj,[Object(E["m"])(a,{ready:t.uiReady,onClick:t.goToPhoto},null,8,["ready","onClick"]),Object(E["m"])(r,{ready:t.uiReady},null,8,["ready"])])])):Object(E["h"])("",!0)]),_:1},8,["onEnter","onEnterCancelled","onLeave"]),t.showSeeAll?(Object(E["D"])(),Object(E["i"])("div",pj)):Object(E["h"])("",!0),t.showSeeAll&&t.Viewport.isDesktop?(Object(E["D"])(),Object(E["g"])(l,{key:1,delay:.5,class:"SeeAll",variant:"light",onClick:t.onSeeAll},{center:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("my_gaze.see_all")),1)]),right:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("my_gaze.pictures")),1)]),_:1},8,["delay","onClick"])):Object(E["h"])("",!0),t.showSeeAll&&!t.Viewport.isDesktop?(Object(E["D"])(),Object(E["g"])(l,{key:2,delay:.5,class:"SeeAll",variant:"light",onClick:t.onSeeAll},{center:Object(E["Z"])(()=>[Object(E["m"])(c,{name:"see-all"})]),_:1},8,["delay","onClick"])):Object(E["h"])("",!0),t.state.matches("painting.photo")?(Object(E["D"])(),Object(E["i"])("div",gj,[Object(E["j"])("div",mj,[Object(E["m"])(h)])])):Object(E["h"])("",!0),t.state.matches("painting.snapshot")?(Object(E["D"])(),Object(E["i"])("div",_j,fj)):Object(E["h"])("",!0),Object(E["m"])(E["d"],{onEnter:t.onEnterLight,onLeave:t.onLeaveLight,appear:""},{default:Object(E["Z"])(()=>[t.state.matches("painting.edit_light")?(Object(E["D"])(),Object(E["g"])(d,{key:0,ready:t.lightReady,open:t.lightOpen},null,8,["ready","open"])):Object(E["h"])("",!0)]),_:1},8,["onEnter","onLeave"]),Object(E["m"])(E["d"],{onEnter:t.onEnterSliderSettings,onLeave:t.onLeaveSliderSettings,appear:""},{default:Object(E["Z"])(()=>[t.state.matches("painting.edit_pose")?(Object(E["D"])(),Object(E["g"])(u,{key:0})):Object(E["h"])("",!0)]),_:1},8,["onEnter","onLeave"]),Object(E["m"])(E["d"],{onEnter:t.onEnterSliderSettings,onLeave:t.onLeaveSliderSettings,appear:""},{default:Object(E["Z"])(()=>[t.state.matches("painting.edit_background")?(Object(E["D"])(),Object(E["g"])(p,{key:0})):Object(E["h"])("",!0)]),_:1},8,["onEnter","onLeave"]),t.state.matches("painting.intro")?(Object(E["D"])(),Object(E["i"])("div",vj,[Object(E["m"])(l,{delay:3.5,onClick:t.onSkipClick},{center:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("painting.intro.skip")),1)]),_:1},8,["delay","onClick"])])):Object(E["h"])("",!0)])}const Tj=t=>(Object(E["F"])("data-v-adaaaf08"),t=t(),Object(E["E"])(),t),Ej=["for","innerHTML"],wj={class:"InputRange__Field"},Oj=Tj(()=>Object(E["j"])("svg",{viewBox:"0 0 24 24",fill:"none"},[Object(E["j"])("path",{d:"M15 12L9 12","stroke-width":"2","stroke-linecap":"round"}),Object(E["j"])("path",{d:"M12 15L12 9","stroke-width":"2","stroke-linecap":"round"})],-1)),Aj=[Oj],yj=Tj(()=>Object(E["j"])("svg",{viewBox:"0 0 24 24",fill:"none"},[Object(E["j"])("path",{d:"M15 12H9","stroke-width":"2","stroke-linecap":"round"})],-1)),Dj=[yj],jj={class:"InputRange__Field__Inner"},Rj=["id","name","min","max","step"],Sj=["for"],Cj=Tj(()=>Object(E["j"])("span",{class:"InputRange__Progress"},null,-1));var Ij;(function(t){t["HORIZONTAL"]="horizontal",t["VERTICAL"]="vertical"})(Ij||(Ij={}));const Pj=Object(E["o"])({});var Lj=Object(E["o"])({...Pj,__name:"InputRange",props:{modelValue:null,label:null,id:null,name:null,min:{default:"0"},max:{default:"1"},step:{default:"0.01"},direction:{default:Ij.HORIZONTAL},reversed:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},showButtons:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t;Object(E["T"])(e=>({"2282c52e":t.modelValue,c6beb106:Object(E["S"])(o)}));const i=Object(E["e"])(()=>s.id||s.name),n=Object(E["e"])({get:()=>s.modelValue,set(t){e("update:modelValue",parseFloat(t))}}),o=Object(E["e"])(()=>s.modelValue/parseFloat(s.max));function a(){n.value=Math.min(parseFloat(s.max),parseFloat(n.value)+5*parseFloat(s.step))}function r(){n.value=Math.max(parseFloat(s.min),parseFloat(n.value)-5*parseFloat(s.step))}return(e,s)=>(Object(E["D"])(),Object(E["i"])("div",{class:Object(E["w"])(["InputRange",["InputRange--"+t.direction,{"is-reversed":t.reversed}]])},[t.showLabel?(Object(E["D"])(),Object(E["i"])("label",{key:0,for:Object(E["S"])(i),class:"small-caps",innerHTML:t.label},null,8,Ej)):Object(E["h"])("",!0),Object(E["j"])("div",wj,[t.showButtons?(Object(E["D"])(),Object(E["i"])("button",{key:0,onClick:a,class:"InputRange__Button InputRange__Button--plus"},Aj)):Object(E["h"])("",!0),t.showButtons?(Object(E["D"])(),Object(E["i"])("button",{key:1,onClick:r,class:"InputRange__Button InputRange__Button--minus"},Dj)):Object(E["h"])("",!0),Object(E["j"])("div",jj,[Object(E["ab"])(Object(E["j"])("input",{type:"range",id:Object(E["S"])(i),name:t.name,min:t.min,max:t.max,step:t.step,"onUpdate:modelValue":s[0]||(s[0]=t=>Object(E["t"])(n)?n.value=t:null)},null,8,Rj),[[E["W"],Object(E["S"])(n)]]),Object(E["j"])("output",{for:Object(E["S"])(i),class:"small-caps"},[Object(E["J"])(e.$slots,"default")],8,Sj),Cj])])],2))}});s("3bcd");const Mj=Zt()(Lj,[["__scopeId","data-v-adaaaf08"]]);var kj=Mj;const Nj=t=>(Object(E["F"])("data-v-62650923"),t=t(),Object(E["E"])(),t),Fj={class:"PhotoSettings z-photo-settings"},Bj={class:"Overlay"},Uj={key:0,id:"PhotoSettings-corner",fill:"none",width:"83",height:"84",viewBox:"0 0 83 84"},Hj=Nj(()=>Object(E["j"])("path",{d:"M82.3676 2.13991L20.7029 2.1399C10.434 2.13989 2.10937 10.4645 2.10937 20.7334L2.10936 83.0916",stroke:"white","stroke-width":"2.32419"},null,-1)),Gj=Nj(()=>Object(E["j"])("path",{d:"M30.9687 25.1812V25.1812C27.6464 25.1812 24.9531 27.9264 24.9531 31.2487V31.2487",stroke:"white","stroke-width":"1.54946","stroke-linecap":"round"},null,-1)),Vj=[Hj,Gj],zj={key:1,id:"PhotoSettings-corner",fill:"none",width:"83",height:"84",viewBox:"0 0 83 84"},Xj=Nj(()=>Object(E["j"])("path",{stroke:"#fff","stroke-width":"3",d:"M31.2923 2H26C12.7452 2 2 12.7452 2 26V31.2923"},null,-1)),Wj=[Xj],qj={id:"PhotoSettings-frame"},Yj=Nj(()=>Object(E["j"])("rect",{width:"100%",height:"100%",fill:"white"},null,-1)),Kj=Nj(()=>Object(E["j"])("rect",{class:"Overlay__Frame",width:"100%",height:"100%",mask:"url(#PhotoSettings-frame)"},null,-1)),Zj=Object(E["k"])('<defs data-v-62650923><filter id="PhotoSettings-gridShadow" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse" data-v-62650923><feFlood flood-opacity="0" result="BackgroundImageFix" data-v-62650923></feFlood><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" data-v-62650923></feColorMatrix><feOffset dx="1" dy="1" data-v-62650923></feOffset><feGaussianBlur stdDeviation="1" data-v-62650923></feGaussianBlur><feComposite in2="hardAlpha" operator="out" data-v-62650923></feComposite><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" data-v-62650923></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_353_5142" data-v-62650923></feBlend><feBlend in="SourceGraphic" in2="effect1_dropShadow_353_5142" result="shape" data-v-62650923></feBlend></filter></defs>',1),$j={class:"Overlay__Grid",filter:"url(#PhotoSettings-gridShadow)"},Qj=["x1","y1","y2"],Jj=["x1","y1","y2"],tR=["x1","x2","y2"],eR=["x1","x2","y2"],sR=["x","y"],iR=Nj(()=>Object(E["j"])("circle",{cx:"44",cy:"44",r:"43.5",stroke:"white","stroke-opacity":"0.175"},null,-1)),nR=[iR],oR=["x","y"],aR=Nj(()=>Object(E["j"])("circle",{cx:"13",cy:"13",r:"12.5",stroke:"white","stroke-opacity":"0.175"},null,-1)),rR=[aR],lR={class:"UI"},cR={class:"Formats"},hR={class:"Formats__Nav small-caps"},dR=["onClick"],uR={class:"Formats__Btn__Txt"},pR={class:"Settings"},gR=Nj(()=>Object(E["j"])("div",{class:"Settings__Background"},[Object(E["j"])("div",{class:"Settings__Background__Inner"})],-1)),mR={class:"Settings__Inner"},_R={class:"Settings__Menu"},bR={class:"Settings__MenuItem Settings__MenuItem--Main"},fR=["data-index","title","onClick","onMouseenter"],vR={key:0,class:"Actions"},xR={key:1,class:"Actions"},TR={class:"Actions__Height__Label small-caps"};var ER;(function(t){t["BRIGHTNESS"]="brightness",t["CONTRAST"]="contrast",t["SATURATION"]="saturation",t["TEMPERATURE"]="temperature"})(ER||(ER={}));const wR=Object(E["o"])({});var OR=Object(E["o"])({...wR,__name:"PhotoSettings",setup(t){Object(E["T"])(t=>({"7d538c06":Object(E["S"])(s).top,"9adafefa":Object(E["S"])(s).bottom,"696d3c5f":Object(E["S"])(s).left,"76de9e78":Object(E["S"])(s).right,"0e23357a":Object(E["S"])(c).height,"532f662a":Object(E["S"])(c).width}));const e=["square","landscape","portrait"],s=Object(E["e"])(()=>bg.isDesktop?{top:63,right:283,bottom:63,left:281}:{top:134,right:20,bottom:189,left:20});function i(t,e,s,i){const n=t/e,o=s/i;let a=s,r=i;return n>o?r=s/n:n<o&&(a=i*n),{width:a,height:r}}const{send:n,state:o}=Object(Ot["b"])(Wx),a=Object(E["e"])({get:()=>o.value.context.povDatas.format,set(t){n({type:"UPDATE_POV_DATA",pov:{format:t}})}}),r=(Object(E["e"])(()=>`0 0 ${bg.windowWidth} ${bg.windowHeight}`),Object(E["H"])(Lx[a.value].width)),l=Object(E["H"])(Lx[a.value].height);Object(E["Y"])(a,t=>{const{width:e,height:s}=Lx[t],i={duration:.45,ease:"cubic"};wt["b"].to(r,{value:e,...i}),wt["b"].to(l,{value:s,...i})});const c=Object(E["e"])(()=>{const t=Object(E["S"])(s),e=bg.windowWidth-(t.left+t.right),n=bg.windowHeight-(t.top+t.bottom),{width:o,height:a}=i(Object(E["S"])(r),Object(E["S"])(l),e,n),c=t.left+e/2-o/2,h=t.top+n/2-a/2;return Gb.frame.x=c,Gb.frame.y=h,Gb.frame.width=o,Gb.frame.height=a,{x:c,y:h,width:o,height:a}}),h=wt["b"].utils.pipe(wt["b"].utils.interpolate(-100,100),wt["b"].utils.snap(1),t=>Math.sign(t)>0?"+"+t:""+t),d=Object(E["e"])({get:()=>o.value.context.povDatas.contrast,set(t){n({type:"UPDATE_POV_DATA",pov:{contrast:t}})}}),u=Object(E["e"])(()=>h(d.value)),p=Object(E["e"])({get:()=>o.value.context.povDatas.saturation,set(t){n({type:"UPDATE_POV_DATA",pov:{saturation:t}})}}),g=Object(E["e"])(()=>h(p.value)),m=Object(E["e"])({get:()=>o.value.context.povDatas.brightness,set(t){n({type:"UPDATE_POV_DATA",pov:{brightness:t}})}}),_=Object(E["e"])(()=>h(m.value)),b=Object(E["e"])({get:()=>o.value.context.povDatas.temperature,set(t){n({type:"UPDATE_POV_DATA",pov:{temperature:t}})}}),f=Object(E["e"])(()=>h(b.value)),v=Object(E["e"])({get:()=>o.value.context.povDatas.zoom,set(t){n({type:"UPDATE_POV_DATA",pov:{zoom:t}})}}),x=wt["b"].utils.pipe(wt["b"].utils.interpolate([.5,1,2]),wt["b"].utils.snap(.1),t=>"x"+t),T=Object(E["e"])(()=>x(v.value)),w=Object(E["e"])({get:()=>{const t=o.value.context.povDatas.position[1],e=(t-.4)/2.6;return console.log("get yPosition",{height:t,h:e}),e},set(t){const e=o.value.context.povDatas.position,s=wt["b"].utils.interpolate([.4,3],t);console.log("set yPosition",{height:t,h:s}),n({type:"UPDATE_POV_DATA",pov:{position:[e[0],s,e[2]]}})}}),O=wt["b"].utils.pipe(wt["b"].utils.interpolate([-1,1]),wt["b"].utils.snap(.05),t=>""+t),A=Object(E["e"])(()=>O(w.value)),y=[{name:ER.CONTRAST,value:d,formattedValue:u},{name:ER.BRIGHTNESS,value:m,formattedValue:_},{name:ER.SATURATION,value:p,formattedValue:g},{name:ER.TEMPERATURE,value:b,formattedValue:f}],D=Object(E["H"])(y[0]),j=Object(E["H"])(y[0]);Object(E["H"])(!0);function R(t){a.value=t}function S(){I("ui_click_camera_snap"),n("SUBMIT")}function C(){const t=wt["b"].utils.selector(".PhotoSettings"),e=wt["b"].timeline({onComplete:()=>{wt["b"].set([t(".Formats__Btn")],{clearProps:"all"})}});e.from(t(".Overlay"),{autoAlpha:0,scale:1.1,duration:.9,ease:"expo.inOut"},"start").from([t(".Formats__Btn")],{autoAlpha:0,duration:.6,stagger:.02,ease:"customOut"},"start+=0.6").from(t(".Settings__Background"),{scaleY:.4,autoAlpha:0,duration:.6,ease:"quart.out"},"start+=0.4").from(t(".Settings__Background__Inner"),{autoAlpha:0,duration:.3,ease:"quart.out"},"start+=1.0").from(t(".Settings__MenuItem"),{scale:.4,autoAlpha:0,duration:1,transition:"none",ease:"quart.out",delay:wt["b"].utils.wrap([0,.3,.15,.15,.3])},"start+=0.6").from([t(".InputRange, .Actions__Height__Label")],{autoAlpha:0,duration:.6,stagger:.02,ease:"customOut"},"start+=0.8").from([t(".UIBtnShutter")],{autoAlpha:0,scale:.6,duration:.6,ease:"quart.out"},"start+=0.8").from(t(".UIBtnClose"),{autoAlpha:0,duration:.6,ease:"customOut"},"start+=0.8")}function I(t){$p.playUI(t)}function P(){n("CANCEL")}return Object(E["B"])(()=>{C()}),Object(E["A"])(()=>{}),(t,s)=>{const i=Object(E["K"])("ui-icon"),n=Object(E["K"])("ui-btn-close");return Object(E["D"])(),Object(E["i"])("div",Fj,[(Object(E["D"])(),Object(E["i"])("svg",Bj,[Object(E["j"])("defs",null,[Object(E["S"])(bg).isDesktop?(Object(E["D"])(),Object(E["i"])("symbol",Uj,Vj)):(Object(E["D"])(),Object(E["i"])("symbol",zj,Wj))]),Object(E["j"])("mask",qj,[Yj,Object(E["j"])("rect",Object(E["u"])({fill:"black",rx:"16"},Object(E["S"])(c)),null,16)]),Kj,(Object(E["D"])(),Object(E["i"])("svg",Object(E["x"])(Object(E["q"])(Object(E["S"])(c))),[Zj,Object(E["j"])("g",$j,[Object(E["j"])("line",{x1:Object(E["S"])(c).width,y1:2*Object(E["S"])(c).height/3,x2:"0",y2:2*Object(E["S"])(c).height/3},null,8,Qj),Object(E["j"])("line",{x1:Object(E["S"])(c).width,y1:1*Object(E["S"])(c).height/3,x2:"0",y2:1*Object(E["S"])(c).height/3},null,8,Jj),Object(E["j"])("line",{x1:1*Object(E["S"])(c).width/3,y1:"0",x2:1*Object(E["S"])(c).width/3,y2:Object(E["S"])(c).height},null,8,tR),Object(E["j"])("line",{x1:2*Object(E["S"])(c).width/3,y1:"0",x2:2*Object(E["S"])(c).width/3,y2:Object(E["S"])(c).height},null,8,eR)]),Object(E["S"])(bg).isDesktop?(Object(E["D"])(),Object(E["i"])("svg",{key:0,class:"Overlay__Crosshairs",x:Object(E["S"])(c).width/2-44,y:Object(E["S"])(c).height/2-44,width:"88",height:"88",viewBox:"0 0 88 88",fill:"none"},nR,8,sR)):(Object(E["D"])(),Object(E["i"])("svg",{key:1,class:"Overlay__Crosshairs",x:Object(E["S"])(c).width/2-13,y:Object(E["S"])(c).height/2-13,width:"26",height:"26",viewBox:"0 0 26 26",fill:"none"},rR,8,oR))],16))])),Object(E["j"])("div",lR,[Object(E["j"])("div",cR,[Object(E["j"])("ul",hR,[(Object(E["D"])(!0),Object(E["i"])(E["a"],null,Object(E["I"])(Object(E["S"])(e),e=>(Object(E["D"])(),Object(E["i"])("li",{key:e,class:"Formats__Item"},[Object(E["j"])("button",{type:"button",class:Object(E["w"])(["Formats__Btn",{"is-active":Object(E["S"])(a)===e}]),onClick:t=>R(e)},[Object(E["m"])(i,{name:e,class:"Formats__Btn__Icon"},null,8,["name"]),Object(E["j"])("span",uR,Object(E["O"])(t.$t("painting.photo.format_"+e)),1)],10,dR)]))),128))])]),Object(E["j"])("div",pR,[gR,Object(E["j"])("div",mR,[Object(E["m"])(kj,{name:D.value.name,label:t.$t("painting.photo."+D.value.name),modelValue:D.value.value,"onUpdate:modelValue":s[0]||(s[0]=t=>D.value.value=t)},{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(D.value.formattedValue),1)]),_:1},8,["name","label","modelValue"]),Object(E["j"])("ul",_R,[Object(E["j"])("li",bR,[Object(E["j"])("button",{type:"button",class:"UIBtnShutter",onClick:S},[Object(E["m"])(i,{name:"camera",class:"UIBtnShutter__Icon"})])]),(Object(E["D"])(),Object(E["i"])(E["a"],null,Object(E["I"])(y,(e,n)=>Object(E["j"])("li",{key:e.name,class:Object(E["w"])(["Settings__MenuItem",{"Settings__MenuItem--Left":n<y.length/2,"Settings__MenuItem--Right":n>=y.length/2}])},[Object(E["j"])("button",{type:"button",class:Object(E["w"])(["Settings__Btn",{"is-active":D.value.name===e.name}]),"data-index":n,title:t.$t("painting.photo."+e.name),onClick:t=>{I("ui_click_camera_function"),D.value=e,j.value=D.value},onMouseenter:t=>{I("ui_rollover_switch"),j.value=D.value,D.value=e},onMouseleave:s[1]||(s[1]=t=>D.value=j.value)},[Object(E["m"])(i,{name:e.name,class:"Settings__MenuItem__Icon"},null,8,["name"])],42,fR)],2)),64))])])]),Object(E["S"])(bg).isDesktop?(Object(E["D"])(),Object(E["i"])("div",vR,[Object(E["m"])(kj,{name:"zoom",label:t.$t("painting.photo.zoom"),step:"0.1",direction:Object(E["S"])(Ij).VERTICAL,reversed:!0,onInput:s[2]||(s[2]=t=>{I("ui_zoom_adjust")}),modelValue:Object(E["S"])(v),"onUpdate:modelValue":s[3]||(s[3]=t=>Object(E["t"])(v)?v.value=t:null)},{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(Object(E["S"])(T)),1)]),_:1},8,["label","direction","modelValue"]),Object(E["m"])(kj,{name:"height",label:t.$t("painting.photo.height"),step:"0.05",direction:Object(E["S"])(Ij).VERTICAL,reversed:!0,onInput:s[4]||(s[4]=t=>{I("ui_height_adjust")}),modelValue:Object(E["S"])(w),"onUpdate:modelValue":s[5]||(s[5]=t=>Object(E["t"])(w)?w.value=t:null)},{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(Object(E["S"])(A)),1)]),_:1},8,["label","direction","modelValue"])])):(Object(E["D"])(),Object(E["i"])("div",xR,[Object(E["m"])(kj,{class:"Actions__Zoom",name:"zoom",label:t.$t("painting.photo.zoom"),step:"0.1",direction:Object(E["S"])(Ij).HORIZONTAL,reversed:!0,onInput:s[6]||(s[6]=t=>{I("ui_zoom_adjust")}),modelValue:Object(E["S"])(v),"onUpdate:modelValue":s[7]||(s[7]=t=>Object(E["t"])(v)?v.value=t:null)},{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(Object(E["S"])(T)),1)]),_:1},8,["label","direction","modelValue"]),Object(E["m"])(kj,{class:"Actions__Height",name:"height",step:"0.05",label:"",direction:Object(E["S"])(Ij).VERTICAL,reversed:!0,onInput:s[8]||(s[8]=t=>{I("ui_height_adjust")}),modelValue:Object(E["S"])(w),"onUpdate:modelValue":s[9]||(s[9]=t=>Object(E["t"])(w)?w.value=t:null)},{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(Object(E["S"])(A)),1)]),_:1},8,["direction","modelValue"]),Object(E["j"])("label",TR,Object(E["O"])(t.$t("painting.photo.height")),1)])),Object(E["m"])(n,{delay:1,onClick:P,text:Object(E["S"])(bg).isDesktop?t.$t("painting.photo.close"):""},null,8,["text"])])])}}});s("7519");const AR=Zt()(OR,[["__scopeId","data-v-62650923"]]);var yR=AR;const DR=t=>(Object(E["F"])("data-v-15c02bf4"),t=t(),Object(E["E"])(),t),jR={class:"Settings",ref:"root"},RR={class:"Background"},SR=["viewBox"],CR={id:"LightSettings__Mask"},IR=["width","height"],PR={class:"LightSettings__Mask__Group"},LR=["cx","cy","transform-origin"],MR=["x","y","width","height","stroke-width"],kR={class:"Settings__Inner"},NR={key:0,class:"ButtonsList"},FR=Object(E["l"])("Move"),BR=Object(E["l"])("Direction"),UR={class:"Main"},HR={class:"Footer"},GR={key:0,class:"ButtonsParams"},VR=DR(()=>Object(E["j"])("span",{class:"Background"},[Object(E["j"])("span",{class:"Border"})],-1)),zR={key:0,class:"ButtonsParams"},XR=DR(()=>Object(E["j"])("span",{class:"Background"},[Object(E["j"])("span",{class:"Border"})],-1));function WR(t,e,s,i,n,o){const a=Object(E["K"])("UIBtnClosePnl"),r=Object(E["K"])("UIBtnPrimary"),l=Object(E["K"])("InputRange"),c=Object(E["K"])("ui-icon"),h=Object(E["K"])("InputToggle");return Object(E["D"])(),Object(E["i"])("div",{class:Object(E["w"])(["LightSettings",{ready:t.ready}])},[Object(E["m"])(a,{open:t.open,ready:t.ready,onClick:e[0]||(e[0]=e=>t.send("EXIT"))},null,8,["open","ready"]),Object(E["j"])("div",jR,[Object(E["j"])("div",RR,[(Object(E["D"])(),Object(E["i"])("svg",{class:"Border",viewBox:`0 0 ${t.menuWidth} ${t.menuHeight}`},[Object(E["j"])("defs",null,[Object(E["j"])("mask",CR,[Object(E["j"])("rect",{x:0,y:0,width:t.menuWidth,height:t.menuHeight,fill:"#fff"},null,8,IR),Object(E["j"])("g",PR,[Object(E["j"])("circle",{class:"LightSettings__Mask",cx:t.menuWidth/2,cy:t.menuHeight,r:"24",fill:"#000","transform-origin":`${t.menuWidth/2}px ${t.menuHeight}px`},null,8,LR)])])]),Object(E["j"])("rect",{class:"rect",mask:"url(#LightSettings__Mask)",x:t.strokeWidth/2,y:t.strokeWidth/2,width:t.menuWidth-t.strokeWidth,height:t.menuHeight-t.strokeWidth,"stroke-opacity":"0.45","stroke-width":t.strokeWidth+"px",rx:"8"},null,8,MR)],8,SR))]),Object(E["j"])("div",kR,[t.Viewport.isDesktop?(Object(E["D"])(),Object(E["i"])("div",NR,[Object(E["m"])(r,{hasToggle:!0,active:t.state.matches("painting.edit_light.move"),variant:t.UIBtnPrimaryVariant.SMALL,onClick:e[1]||(e[1]=e=>t.send("MOVE"))},{default:Object(E["Z"])(()=>[FR]),_:1},8,["active","variant"]),Object(E["m"])(r,{hasToggle:!0,active:t.state.matches("painting.edit_light.lookat"),variant:t.UIBtnPrimaryVariant.SMALL,onClick:e[2]||(e[2]=e=>t.send("LOOKAT"))},{default:Object(E["Z"])(()=>[BR]),_:1},8,["active","variant"])])):Object(E["h"])("",!0),Object(E["j"])("div",UR,[Object(E["m"])(l,{class:"color",direction:t.InputRangeDirection.HORIZONTAL,label:"COLOR",showLabel:!1,showButtons:!1,modelValue:t.lightHue,"onUpdate:modelValue":e[3]||(e[3]=e=>t.lightHue=e),min:"0",max:"1",step:"0.01"},null,8,["direction","modelValue"]),Object(E["m"])(l,{class:"saturation",direction:t.InputRangeDirection.HORIZONTAL,label:"SATURATION",showLabel:!1,modelValue:t.lightSaturation,"onUpdate:modelValue":e[4]||(e[4]=e=>t.lightSaturation=e),min:"0",max:"1",step:"0.01"},null,8,["direction","modelValue"]),Object(E["m"])(l,{class:"intensity",direction:t.InputRangeDirection.HORIZONTAL,label:"INTENSITY",showLabel:!1,modelValue:t.lightIntensity,"onUpdate:modelValue":e[5]||(e[5]=e=>t.lightIntensity=e),min:"0.1",max:"3",step:"0.1"},null,8,["direction","modelValue"])]),Object(E["j"])("div",HR,[Object(E["m"])(h,{modelValue:t.lightOn,"onUpdate:modelValue":e[6]||(e[6]=e=>t.lightOn=e)},{false:Object(E["Z"])(()=>[Object(E["m"])(c,{name:"night"})]),true:Object(E["Z"])(()=>[Object(E["m"])(c,{name:"sun"})]),_:1},8,["modelValue"])])])],512),Object(E["m"])(E["d"],{name:"panel",appear:""},{default:Object(E["Z"])(()=>[t.state.matches("painting.edit_light.lookat")&&t.Viewport.isDesktop?(Object(E["D"])(),Object(E["i"])("div",GR,[VR,Object(E["m"])(l,{direction:t.InputRangeDirection.VERTICAL,label:"HEIGHT",modelValue:t.lightLookAtHeight,"onUpdate:modelValue":e[7]||(e[7]=e=>t.lightLookAtHeight=e),step:"0.1",reversed:!0},null,8,["direction","modelValue"])])):Object(E["h"])("",!0)]),_:1}),Object(E["m"])(E["d"],{name:"panel",appear:""},{default:Object(E["Z"])(()=>[t.state.matches("painting.edit_light.move")&&t.Viewport.isDesktop?(Object(E["D"])(),Object(E["i"])("div",zR,[XR,Object(E["m"])(l,{direction:t.InputRangeDirection.VERTICAL,label:"HEIGHT",modelValue:t.lightHeight,"onUpdate:modelValue":e[8]||(e[8]=e=>t.lightHeight=e),step:"0.1",reversed:!0},null,8,["direction","modelValue"])])):Object(E["h"])("",!0)]),_:1})],2)}const qR=t=>(Object(E["F"])("data-v-b3c0018c"),t=t(),Object(E["E"])(),t),YR=qR(()=>Object(E["j"])("span",{class:"Border"},[Object(E["j"])("span",{class:"Background"})],-1)),KR=Object(E["o"])({});var ZR=Object(E["o"])({...KR,__name:"UIBtnClosePnl",props:{open:{type:Boolean,default:!1}},setup(t){function e(){$p.playUI("ui_click")}const s=Object(E["H"])(!1);return Object(E["B"])(()=>{Object(E["v"])(()=>{s.value=!0})}),(i,n)=>{const o=Object(E["K"])("ui-icon");return Object(E["D"])(),Object(E["i"])("button",{class:Object(E["w"])(["UIBtn UIBtnClosePnl",{"is-open":t.open,ready:s.value}]),onClick:e},[YR,Object(E["m"])(o,{name:"close"})],2)}}});s("6977");const $R=Zt()(ZR,[["__scopeId","data-v-b3c0018c"]]);var QR=$R;const JR={class:"InputToggle"},tS=["id","name"],eS={class:"Options"},sS=Object(E["o"])({});var iS=Object(E["o"])({...sS,__name:"InputToggle",props:{modelValue:{type:Boolean},id:null,name:null},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=Object(uT["g"])(()=>s.id||s.name),n=Object(uT["g"])({get:()=>s.modelValue,set(t){e("update:modelValue",t)}});return(e,s)=>(Object(E["D"])(),Object(E["i"])("label",JR,[Object(E["ab"])(Object(E["j"])("input",{type:"checkbox",id:Object(E["S"])(i),name:t.name,"onUpdate:modelValue":s[0]||(s[0]=t=>Object(E["t"])(n)?n.value=t:null)},null,8,tS),[[E["V"],Object(E["S"])(n)]]),Object(E["j"])("span",eS,[Object(E["j"])("span",{class:Object(E["w"])(["Background",{"is-active":Object(E["S"])(n)}])},null,2),Object(E["j"])("span",{class:Object(E["w"])(["Option Option--false",{"is-active":!Object(E["S"])(n)}])},[Object(E["J"])(e.$slots,"false")],2),Object(E["j"])("span",{class:Object(E["w"])(["Option Option--true",{"is-active":Object(E["S"])(n)}])},[Object(E["J"])(e.$slots,"true")],2)])]))}});s("b77a");const nS=Zt()(iS,[["__scopeId","data-v-7d055900"]]);var oS=nS;function aS(t,e,s){var i,n,o;if(0==e)i=n=o=s;else{var a=function(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+6*(e-t)*s:s<.5?e:s<2/3?t+(e-t)*(2/3-s)*6:t},r=s<.5?s*(1+e):s+e-s*e,l=2*s-r;i=a(l,r,t+1/3),n=a(l,r,t),o=a(l,r,t-1/3)}return`rgb(${Math.round(255*i)}, ${Math.round(255*n)}, ${Math.round(255*o)})`}const{send:rS,state:lS}=Object(Ot["b"])(Wx),cS=Object(uT["r"])({props:{open:{type:Boolean,default:!1},ready:{type:Boolean,default:!1}},setup(){const{state:t,send:e}=Object(Ot["b"])(Wx),s=Object(SE["m"])(1.6),i=Object(SE["m"])(1.6),n=Object(SE["m"])(1.6),o=Object(SE["m"])(null);let a=null;const r=()=>{o.value&&(s.value=Math.max(n.value,o.value.offsetWidth),i.value=Math.max(n.value,o.value.offsetHeight))};return Object(uT["H"])(()=>{o.value&&(a=new ResizeObserver(t=>{t.forEach(t=>{t.contentRect&&r()})}),a.observe(o.value),r())}),Object(uT["I"])(()=>{PT.off(PT.events.RESIZE,r)}),{state:t,send:e,root:o,menuWidth:s,menuHeight:i,strokeWidth:n}},data(){return{InputRangeDirection:Ij,UIBtnPrimaryVariant:aA,Viewport:bg}},components:{UIBtnPrimary:hA,UIBtnClosePnl:QR,InputRange:kj,InputToggle:oS},computed:{lightOn:{get:()=>lS.value.context.povDatas.lightDatas[lS.value.context.selectedLightIndex].isOn,set(t){rS({type:"UPDATE_LIGHT_DATA",light:{isOn:t}})}},lightHeight:{get:()=>lS.value.context.povDatas.lightDatas[lS.value.context.selectedLightIndex].position[1]/5,set(t){const e=lS.value.context.povDatas.lightDatas[lS.value.context.selectedLightIndex].position;e.set([e[0],5*t,e[2]]),rS({type:"UPDATE_LIGHT_DATA",light:{position:e}})}},lightLookAtHeight:{get:()=>lS.value.context.povDatas.lightDatas[lS.value.context.selectedLightIndex].lookat[1]/5,set(t){const e=lS.value.context.povDatas.lightDatas[lS.value.context.selectedLightIndex].lookat;e.set([e[0],5*t,e[2]]),rS({type:"UPDATE_LIGHT_DATA",light:{lookat:e}})}},lightHue:{get:()=>lS.value.context.povDatas.lightDatas[lS.value.context.selectedLightIndex].hue,set(t){rS({type:"UPDATE_LIGHT_DATA",light:{hue:t}})}},lightSaturation:{get:()=>lS.value.context.povDatas.lightDatas[lS.value.context.selectedLightIndex].saturation,set(t){rS({type:"UPDATE_LIGHT_DATA",light:{saturation:t}})}},lightIntensity:{get:()=>lS.value.context.povDatas.lightDatas[lS.value.context.selectedLightIndex].intensity,set(t){rS({type:"UPDATE_LIGHT_DATA",light:{intensity:t}})}},lightHueRGB(){const t=aS(lS.value.context.povDatas.lightDatas[lS.value.context.selectedLightIndex].hue,1,.5);return t}}}),hS=()=>{Object(E["T"])(t=>({"5bd80a86":t.lightHueRGB}))},dS=cS.setup;cS.setup=dS?(t,e)=>(hS(),dS(t,e)):hS;var uS=cS;s("1536");const pS=Zt()(uS,[["render",WR],["__scopeId","data-v-15c02bf4"]]);var gS=pS;function mS(t,e,s,i,n,o){const a=Object(E["K"])("SliderSettings");return Object(E["D"])(),Object(E["g"])(a,{items:t.items,label:"Pose",propertyName:"pose",initialShowTutorial:!t.state.context.paintingPoseTutorialCompleted},null,8,["items","initialShowTutorial"])}const _S=t=>(Object(E["F"])("data-v-297842be"),t=t(),Object(E["E"])(),t),bS={key:0,class:"Veil"},fS={class:"Slider"},vS={class:"Tutorial"},xS={key:0,class:"List"},TS={class:"Main"},ES={class:"Image"},wS={class:"Image__Top"},OS=["srcset"],AS=["srcset"],yS=["src","alt"],DS={class:"Image__Bottom"},jS=["srcset"],RS=["srcset"],SS=["src","alt"],CS={class:"Title"},IS={class:"Pagination cta"},PS=["innerHTML"],LS={class:"Footer"},MS={class:"Nav",ref:"nav"},kS=_S(()=>Object(E["j"])("span",{class:"Border"},[Object(E["j"])("span",{class:"Background"})],-1)),NS={key:0,class:"Nav__Button__Inner"},FS={class:"Nav__Button__Icon"},BS={class:"Nav__Button__Icon Hover"},US={key:1,class:"Nav__Button__Inner"},HS={class:"Nav__Button__Icon"},GS={class:"Nav__Button__Icon Hover"},VS=_S(()=>Object(E["j"])("span",{class:"Border"},[Object(E["j"])("span",{class:"Background"})],-1)),zS=["data-text"],XS={class:"Label__Inner"},WS=_S(()=>Object(E["j"])("span",{class:"Border"},[Object(E["j"])("span",{class:"Background"})],-1)),qS={key:0,class:"Nav__Button__Inner"},YS={class:"Nav__Button__Icon"},KS={class:"Nav__Button__Icon Hover"},ZS={key:1,class:"Nav__Button__Inner"},$S={class:"Nav__Button__Icon"},QS={class:"Nav__Button__Icon Hover"},JS=_S(()=>Object(E["j"])("span",null,"i",-1));function tC(t,e,s,i,n,o){const a=Object(E["K"])("line-by-line"),r=Object(E["K"])("ui-icon"),l=Object(E["K"])("UIBtnClosePnl"),c=Object(E["K"])("ui-btn-round");return Object(E["D"])(),Object(E["i"])("div",{class:Object(E["w"])(["SliderSettings",{ready:t.ready}])},[t.showTutorial?(Object(E["D"])(),Object(E["i"])("span",bS)):Object(E["h"])("",!0),Object(E["j"])("div",fS,[Object(E["j"])("div",vS,[Object(E["m"])(E["d"],{css:!1,onOnEnter:t.onEnterTutorial,onLeave:t.onLeaveTutorial,appear:""},{default:Object(E["Z"])(()=>[t.showTutorial?(Object(E["D"])(),Object(E["i"])("ul",xS,[Object(E["m"])(E["d"],{css:!1,onEnter:t.onEnterItem,onLeave:t.onLeaveItem,appear:""},{default:Object(E["Z"])(()=>[(Object(E["D"])(),Object(E["i"])("li",{class:"Item",key:"item-"+t.currentItem.id},[Object(E["j"])("div",TS,[Object(E["j"])("div",ES,[Object(E["j"])("picture",wS,[Object(E["j"])("source",{srcset:`/assets/images/${t.currentItem.image}--top--mobile.png 1x, /assets/images/${t.currentItem.image}--top--mobile@2x.png 2x`,media:"(max-width: 1050px)"},null,8,OS),Object(E["j"])("source",{srcset:`/assets/images/${t.currentItem.image}--top.png 1x, /assets/images/${t.currentItem.image}--top@2x.png 2x`},null,8,AS),Object(E["j"])("img",{src:`/assets/images/${t.currentItem.image}--top.png`,alt:t.currentItem.shortname},null,8,yS)]),Object(E["j"])("picture",DS,[Object(E["j"])("source",{srcset:`/assets/images/${t.currentItem.image}--bottom--mobile.png 1x, /assets/images/${t.currentItem.image}--bottom--mobile@2x.png 2x`,media:"(max-width: 1050px)"},null,8,jS),Object(E["j"])("source",{srcset:`/assets/images/${t.currentItem.image}--bottom.png 1x, /assets/images/${t.currentItem.image}--bottom@2x.png 2x`},null,8,RS),Object(E["j"])("img",{src:`/assets/images/${t.currentItem.image}--bottom.png`,alt:t.currentItem.shortname},null,8,SS)])]),Object(E["j"])("div",CS,[Object(E["j"])("h3",IS,Object(E["O"])(t.label)+" "+Object(E["O"])(t.currentIndex+1<10?"0"+(t.currentIndex+1):t.currentIndex+1)+"/"+Object(E["O"])(t.items.length<10?"0"+t.items.length:t.items.length),1),Object(E["j"])("h2",null,[(Object(E["D"])(!0),Object(E["i"])(E["a"],null,Object(E["I"])(t.currentItem.title,(e,s)=>(Object(E["D"])(),Object(E["i"])("span",{key:`item-${t.currentItem.id}-title-word-${s}`,class:"Title__Word"},[(Object(E["D"])(!0),Object(E["i"])(E["a"],null,Object(E["I"])(e.parts,(e,s)=>(Object(E["D"])(),Object(E["i"])("span",{key:`item-${t.currentItem.id}-title-part-${s}`,class:Object(E["w"])(["Title__Part",["Title__Part--"+e.style,"Title__Part--"+e.direction]])},[Object(E["j"])("span",{innerHTML:e.text},null,8,PS)],2))),128))]))),128))])]),t.currentItem.description?(Object(E["D"])(),Object(E["g"])(a,{key:0,delay:.75,tag:"p",class:"Description italic-current"},{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.currentItem.description),1)]),_:1},8,["delay"])):Object(E["h"])("",!0)])]))]),_:1},8,["onEnter","onLeave"])])):Object(E["h"])("",!0)]),_:1},8,["onOnEnter","onLeave"])]),Object(E["j"])("div",LS,[Object(E["j"])("nav",MS,[Object(E["j"])("button",{class:"Nav__Button Nav__Button--previous",onClick:e[0]||(e[0]=(...e)=>t.goToPrevious&&t.goToPrevious(...e))},[kS,t.Viewport.isDesktop?(Object(E["D"])(),Object(E["i"])("span",NS,[Object(E["j"])("span",FS,[Object(E["m"])(r,{name:"arrow-left"})]),Object(E["j"])("span",BS,[Object(E["m"])(r,{name:"arrow-left"})])])):(Object(E["D"])(),Object(E["i"])("span",US,[Object(E["j"])("span",HS,[Object(E["m"])(r,{name:"arrow-small-left"})]),Object(E["j"])("span",GS,[Object(E["m"])(r,{name:"arrow-small-left"})])]))]),Object(E["j"])("button",{class:"Nav__List",onClick:e[1]||(e[1]=(...e)=>t.onChoose&&t.onChoose(...e))},[VS,Object(E["m"])(E["d"],{css:!1,onEnter:t.onEnterNav,onLeave:t.onLeaveNav,appear:""},{default:Object(E["Z"])(()=>[(Object(E["D"])(),Object(E["i"])("span",{class:"Nav__Item",key:"nav-"+t.currentItem.id},[Object(E["j"])("span",{class:"Label cta","data-text":t.$t("slider.buttonText")},[Object(E["j"])("span",XS,Object(E["O"])(t.$t("slider.buttonText")),1)],8,zS)]))]),_:1},8,["onEnter","onLeave"])]),Object(E["j"])("button",{class:"Nav__Button Nav__Button--next",onClick:e[2]||(e[2]=(...e)=>t.goToNext&&t.goToNext(...e))},[WS,t.Viewport.isDesktop?(Object(E["D"])(),Object(E["i"])("span",qS,[Object(E["j"])("span",YS,[Object(E["m"])(r,{name:"arrow-right"})]),Object(E["j"])("span",KS,[Object(E["m"])(r,{name:"arrow-right"})])])):(Object(E["D"])(),Object(E["i"])("span",ZS,[Object(E["j"])("span",$S,[Object(E["m"])(r,{name:"arrow-small-right"})]),Object(E["j"])("span",QS,[Object(E["m"])(r,{name:"arrow-small-right"})])]))])],512),Object(E["m"])(l,{open:t.open,ready:t.ready,onClick:e[3]||(e[3]=e=>t.send("EXIT"))},null,8,["open","ready"]),Object(E["m"])(E["d"],{css:!1,onEnter:t.onEnterTutorialButton,onLeave:t.onLeaveTutorialButton},{default:Object(E["Z"])(()=>[t.showTutorial?Object(E["h"])("",!0):(Object(E["D"])(),Object(E["g"])(c,{key:0,class:"Tutorial__Button",variant:"small",onClick:e[4]||(e[4]=e=>t.showTutorial=!0)},{default:Object(E["Z"])(()=>[JS]),_:1}))]),_:1},8,["onEnter","onLeave"])])])],2)}const{send:eC,state:sC}=Object(Ot["b"])(Wx);var iC,nC;(function(t){t["ITALIC"]="italic",t["BOLD"]="bold"})(iC||(iC={})),function(t){t["LEFT"]="left",t["RIGHT"]="right"}(nC||(nC={}));var oC=Object(uT["r"])({props:{propertyName:{type:String,default:""},items:{type:Object,default:[]},label:{type:String,default:""},initialShowTutorial:{type:Boolean,default:!0}},setup(t){const{state:e,send:s}=Object(Ot["b"])(Wx),i=e.value.context.povDatas[t.propertyName],n=Object(SE["m"])(t.items.findIndex(t=>t.id===i)),o=Object(uT["g"])(()=>t.items.find((t,e)=>e===n.value)),a=Object(SE["m"])(0),r=Object(SE["m"])(!1),l=Object(SE["m"])(!1),c=Object(SE["m"])(null),h=!0,d=Object(SE["m"])(t.initialShowTutorial);return{state:e,send:s,currentIndex:n,currentItem:o,direction:a,ready:r,open:l,nav:c,isInitial:h,showTutorial:d}},data(){return{UIBtnPrimaryVariant:aA,Viewport:bg}},components:{UIBtnPrimary:hA,UIBtnClosePnl:QR,InputToggle:oS},mounted(){this.direction=0,this.$nextTick(()=>{this.ready=!0,setTimeout(()=>this.open=!0,600)})},methods:{onChoose(){eC("SUBMIT")},onEnterTutorial(t,e){e()},onLeaveTutorial(t,e){this.direction=0,this.onLeaveItem(t,e,!0)},onEnterItem(t,e){const s=wt["b"].utils.selector(t),i=wt["b"].timeline({onComplete:e}).addLabel("upper",(this.isInitial,"start"));this.showTutorial&&(i.from([s(".Title__Part--left > span")],{transform:"none",xPercent:0===this.direction?100:100*this.direction,duration:1.6,ease:"quart.inOut"},"upper").from([s(".Title__Part--right > span")],{transform:"none",xPercent:0===this.direction?-100:100*this.direction,duration:1.6,ease:"quart.inOut"},"upper").from([s(".Description")],{y:20,duration:1,ease:"quart.out"},"upper+=0.75").from([s(".Description")],{autoAlpha:0,duration:1,ease:"none"},"upper+=0.75").from([s(".Title .cta")],{clearProps:"opacity"},"start").from([s(".Image__Top")],{y:0===this.direction?-20:0,scale:0===this.direction?.95:.9,xPercent:33*this.direction,rotation:10*this.direction,transformOrigin:0===this.direction?"50% 0%":this.direction>0?"100% 0%":"0% 0%",opacity:0,duration:1.5,ease:"quart.inOut"},"upper").from([s(".Image__Bottom")],{y:0===this.direction?20:0,xPercent:33*this.direction,scale:0===this.direction?.95:.9,rotation:-10*this.direction,transformOrigin:0===this.direction?"50% 100%":this.direction>0?"100% 100%":"0% 100%",opacity:0,duration:1.5,ease:"quart.inOut"},"upper"),0===this.direction&&i.from([s(".Pagination")],{autoAlpha:0,duration:1,ease:"none"},"upper").fromTo(this.$el.querySelector(".Veil"),{opacity:0},{opacity:.65,duration:1,ease:"none"},"upper")),this.isInitial=!1},onLeaveItem(t,e,s=!1){const i=wt["b"].utils.selector(t),n=wt["b"].timeline({onComplete:e});(this.showTutorial||s)&&(n.to([i(".Title__Part--left > span")],{xPercent:0===this.direction?-100:-100*this.direction,duration:1,ease:"quart.out"},"start").to([i(".Title__Part--right > span")],{xPercent:0===this.direction?100:-100*this.direction,duration:1,ease:"quart.out"},"start").set([i(".Title .cta")],{opacity:0},"start").to([i(".Image__Top")],{xPercent:-33*this.direction,scale:.9,rotation:-10*this.direction,transformOrigin:0===this.direction?"50% 0%":this.direction>0?"0% 0%":"100% 0%",opacity:0,duration:1,ease:"quart.out"},"start").to([i(".Image__Bottom")],{xPercent:-33*this.direction,scale:.9,rotation:10*this.direction,transformOrigin:0===this.direction?"50% 100%":this.direction>0?"0% 100%":"100% 100%",opacity:0,duration:1,ease:"quart.out"},"start"),i(".Description").length&&n.to([i(".Description")],{y:-20,autoAlpha:0,duration:1,ease:"quart.out"},"start")),s&&n.to(this.$el.querySelector(".Veil"),{opacity:0,duration:1,ease:"quart.out"},"start")},onEnterNav(t,e){const s=wt["b"].utils.selector(t),i=wt["b"].utils.selector(this.nav);wt["b"].timeline({onComplete:e}).set([i("button")],{pointerEvents:"none"},"start").from([s(".Label > span")],{transition:"none",yPercent:this.direction>=0?100:-100,clearProps:"all",duration:1,ease:"quart.out"},this.isInitial?"start+=0.5":"start").set([i("button")],{clearProps:"pointerEvents"})},onLeaveNav(t,e){const s=wt["b"].utils.selector(t),i=wt["b"].utils.selector(this.nav);wt["b"].timeline({onComplete:e}).set([i("button")],{pointerEvents:"none"},"start").to([s(".Label > span")],{yPercent:this.direction>=0?-100:100,transition:"none",clearProps:"all",duration:.6,ease:"quart.out"},"start")},onEnterTutorialButton(t,e){wt["b"].utils.selector(t);wt["b"].timeline({onComplete:e}).from(t,{autoAlpha:0,duration:.6,ease:"quart.out"},"start")},onLeaveTutorialButton(t,e){wt["b"].timeline({onComplete:e}).to(t,{autoAlpha:0,duration:.6,ease:"quart.out"},"start")},goToPrevious(){this.showTutorial?this.direction=-1:this.direction=0,this.currentIndex=0===this.currentIndex?this.items.length-1:this.currentIndex-1;const t={};t[this.propertyName]=this.currentItem.id,eC({type:"UPDATE_POV_DATA",pov:t})},goToNext(){this.showTutorial?this.direction=1:this.direction=0,this.currentIndex=this.currentIndex===this.items.length-1?0:this.currentIndex+1;const t={};t[this.propertyName]=this.currentItem.id,eC({type:"UPDATE_POV_DATA",pov:t})}}});s("0d4c");const aC=Zt()(oC,[["render",tC],["__scopeId","data-v-297842be"]]);var rC=aC,lC=Object(uT["r"])({components:{SliderSettings:rC},setup(){const{state:t,send:e}=Object(Ot["b"])(Wx);return{state:t}},data(){const t=[{id:"pose2",title:[{parts:[{text:"The&nbsp;",style:iC.ITALIC,direction:nC.LEFT}]},{parts:[{text:"Orig",style:iC.BOLD,direction:nC.LEFT},{text:"inal",style:iC.BOLD,direction:nC.RIGHT}]}],shortname:this.$t("painting.pose1.shortname"),image:this.$t("painting.pose1.image")},{id:"pose1",title:[{parts:[{text:"The&nbsp;",style:iC.ITALIC,direction:nC.LEFT}]},{parts:[{text:"chill&nbsp",style:iC.BOLD,direction:nC.LEFT},{text:"pose",style:iC.BOLD,direction:nC.RIGHT}]}],shortname:this.$t("painting.pose2.shortname"),image:this.$t("painting.pose2.image")},{id:"pose3",title:[{parts:[{text:"The&nbsp;",style:iC.ITALIC,direction:nC.LEFT}]},{parts:[{text:"free",style:iC.BOLD,direction:nC.LEFT},{text:"dom",style:iC.BOLD,direction:nC.RIGHT}]}],shortname:this.$t("painting.pose3.shortname"),image:this.$t("painting.pose3.image")},{id:"pose4",title:[{parts:[{text:"The&nbsp;",style:iC.ITALIC,direction:nC.LEFT}]},{parts:[{text:"rev",style:iC.BOLD,direction:nC.LEFT},{text:"olu",style:iC.BOLD,direction:nC.RIGHT},{text:"tion",style:iC.BOLD,direction:nC.RIGHT}]}],shortname:this.$t("painting.pose4.shortname"),image:this.$t("painting.pose4.image")}];return{items:t}}});const cC=Zt()(lC,[["render",mS]]);var hC=cC;function dC(t,e,s,i,n,o){const a=Object(E["K"])("SliderSettings");return Object(E["D"])(),Object(E["g"])(a,{items:t.items,label:"Background",propertyName:"background",initialShowTutorial:!t.state.context.paintingBackgroundTutorialCompleted},null,8,["items","initialShowTutorial"])}var uC=Object(uT["r"])({components:{SliderSettings:rC},setup(){const{state:t,send:e}=Object(Ot["b"])(Wx);return{state:t}},data(){const t=[{id:"bg0",title:[{parts:[{text:"White&nbsp;",style:iC.ITALIC,direction:nC.LEFT},{text:"Wall",style:iC.BOLD,direction:nC.RIGHT}]}],shortname:this.$t("painting.bg0.shortname"),description:this.$t("painting.bg0.description"),image:this.$t("painting.bg0.image")},{id:"bg1",title:[{parts:[{text:"Libr",style:iC.BOLD,direction:nC.LEFT},{text:"ary",style:iC.BOLD,direction:nC.RIGHT}]}],shortname:this.$t("painting.bg1.shortname"),description:this.$t("painting.bg1.description"),image:this.$t("painting.bg1.image")},{id:"bg2",title:[{parts:[{text:"City",style:iC.BOLD,direction:nC.LEFT},{text:"Hall",style:iC.ITALIC,direction:nC.RIGHT}]}],shortname:this.$t("painting.bg2.shortname"),description:this.$t("painting.bg2.description"),image:this.$t("painting.bg2.image")},{id:"bg3",title:[{parts:[{text:"Fac",style:iC.BOLD,direction:nC.LEFT},{text:"tory",style:iC.BOLD,direction:nC.RIGHT}]}],shortname:this.$t("painting.bg3.shortname"),description:this.$t("painting.bg3.description"),image:this.$t("painting.bg3.image")}];return{items:t}}});const pC=Zt()(uC,[["render",dC]]);var gC=pC;const mC=t=>(Object(E["F"])("data-v-79db629e"),t=t(),Object(E["E"])(),t),_C=mC(()=>Object(E["j"])("span",{class:"Border"},[Object(E["j"])("span",{class:"Background"})],-1)),bC=Object(E["o"])({});var fC=Object(E["o"])({...bC,__name:"UIBtnCamera",props:{ready:{type:Boolean,default:!1}},setup(t){function e(){$p.playUI("ui_click")}function s(){$p.playUI("ui_rollover_camera_enter_snap")}return(i,n)=>{const o=Object(E["K"])("ui-icon");return Object(E["D"])(),Object(E["i"])("button",{class:Object(E["w"])(["UIBtn UIBtnCamera",{ready:t.ready}]),onMouseenter:s,onClick:e},[_C,Object(E["m"])(o,{name:"camera"})],34)}}});s("25cd");const vC=Zt()(fC,[["__scopeId","data-v-79db629e"]]);var xC=vC;const TC=t=>(Object(E["F"])("data-v-7a3a793a"),t=t(),Object(E["E"])(),t),EC={class:"Background"},wC=["viewBox"],OC={id:"Presets__Mask"},AC=["width","height"],yC={class:"Presets__Mask__Group"},DC=["cx","cy","transform-origin"],jC=["x","y","width","height","stroke-width"],RC={class:"Presets__Scroller"},SC={class:"Menu"},CC=["onClick"],IC=["srcset"],PC=["src","alt"],LC=TC(()=>Object(E["j"])("span",{class:"Preset__Hover"},null,-1));function MC(t,e,s,i,n,o){const a=Object(E["K"])("UIBtnPreset"),r=Object(E["L"])("click-outside");return Object(E["ab"])((Object(E["D"])(),Object(E["i"])("div",{class:Object(E["w"])(["UIPnlPreset",{ready:t.ready}])},[Object(E["m"])(a,{ready:t.ready,active:t.isOpen,onClick:t.toggleMenu},null,8,["ready","active","onClick"]),Object(E["j"])("div",{class:Object(E["w"])(["Presets",{"is-open":t.isOpen}]),ref:"preset"},[Object(E["j"])("div",EC,[(Object(E["D"])(),Object(E["i"])("svg",{class:"Border",viewBox:`0 0 ${t.menuWidth} ${t.menuHeight}`},[Object(E["j"])("defs",null,[Object(E["j"])("mask",OC,[Object(E["j"])("rect",{x:0,y:0,width:t.menuWidth,height:t.menuHeight,fill:"#fff"},null,8,AC),Object(E["j"])("g",yC,[Object(E["j"])("circle",{class:"Presets__Mask",cx:t.menuWidth/2,cy:t.menuHeight,r:"24",fill:"#000","transform-origin":`${t.menuWidth/2}px ${t.menuHeight}px`},null,8,DC)])])]),Object(E["j"])("rect",{class:"rect",mask:"url(#Presets__Mask)",x:t.strokeWidth/2,y:t.strokeWidth/2,width:t.menuWidth-t.strokeWidth,height:t.menuHeight-t.strokeWidth,"stroke-opacity":"0.45","stroke-width":t.strokeWidth+"px"},null,8,jC)],8,wC))]),Object(E["j"])("div",RC,[Object(E["j"])("ul",SC,[(Object(E["D"])(!0),Object(E["i"])(E["a"],null,Object(E["I"])(t.PRESETS,e=>(Object(E["D"])(),Object(E["i"])("li",{key:e.name,class:"Preset"},[Object(E["j"])("button",{onClick:s=>t.onPresetSelected(e.name)},[Object(E["j"])("picture",null,[Object(E["j"])("source",{srcset:`/assets/images/presets/${e.picture}.jpg 1x, /assets/images/presets/${e.picture}@2x.jpg 2x`},null,8,IC),Object(E["j"])("img",{src:`/assets/images/presets/${e.picture}.jpg`,alt:e.name},null,8,PC)]),LC],8,CC)]))),128))])])],2)],2)),[[r,t.onClickOutside]])}const kC=t=>(Object(E["F"])("data-v-bb1ee3a6"),t=t(),Object(E["E"])(),t),NC=kC(()=>Object(E["j"])("span",{class:"Border"},[Object(E["j"])("span",{class:"Background"})],-1)),FC=Object(E["o"])({});var BC=Object(E["o"])({...FC,__name:"UIBtnPreset",props:{ready:{type:Boolean,default:!1},active:{type:Boolean,default:!1}},setup(t){function e(){$p.playUI("ui_click")}return(s,i)=>{const n=Object(E["K"])("ui-icon");return Object(E["D"])(),Object(E["i"])("button",{class:Object(E["w"])(["UIBtn UIBtnPreset",{ready:t.ready,"is-active":t.active}]),onClick:e},[NC,Object(E["m"])(n,{name:"preset"}),Object(E["m"])(n,{name:"close"})],2)}}});s("c174");const UC=Zt()(BC,[["__scopeId","data-v-bb1ee3a6"]]);var HC=UC,GC=s("8264"),VC=s.n(GC);const zC=[{picture:"1",name:Kb.DEFAULT},{picture:"2",name:Kb.SPOTLIGHT},{picture:"3",name:Kb.BLUE_PINK},{picture:"4",name:Kb.RAINBOW},{picture:"5",name:Kb.GREEN_RED},{picture:"6",name:Kb.RED}];var XC=Object(E["o"])({props:{ready:{type:Boolean,default:!1}},components:{UIBtnPreset:HC},directives:{clickOutside:VC.a.directive},setup(){const t=Object(E["H"])(1.6),e=Object(E["H"])(1.6),s=Object(E["H"])(1.6),i=Object(E["H"])(null);let n=null;const o=()=>{i.value&&(t.value=Math.max(s.value,i.value.offsetWidth),e.value=Math.max(s.value,i.value.offsetHeight))};Object(E["B"])(()=>{n=new ResizeObserver(t=>{t.forEach(t=>{t.contentRect&&o()})}),n.observe(i.value),o()}),Object(E["C"])(()=>{PT.off(PT.events.RESIZE,o)});const a=Object(E["H"])(!1),r=()=>{a.value=!a.value,a.value},l=()=>{a.value=!1},c=t=>{$b.apply(t)};return{isOpen:a,PRESETS:zC,menuWidth:t,menuHeight:e,strokeWidth:s,preset:i,toggleMenu:r,onClickOutside:l,onPresetSelected:c}}});s("72d1");const WC=Zt()(XC,[["render",MC],["__scopeId","data-v-7a3a793a"]]);var qC=WC;const YC=t=>(Object(E["F"])("data-v-0c523108"),t=t(),Object(E["E"])(),t),KC={class:"UIBtnRound__Inner"},ZC=YC(()=>Object(E["j"])("span",{class:"Border"},[Object(E["j"])("span",{class:"Background"})],-1)),$C={class:"Label__Inner Label__Inner--main"},QC={class:"Label__Inner Label__Inner--clone"},JC=Object(E["o"])({});var tI=Object(E["o"])({...JC,__name:"UIBtnRound",props:{variant:{default:"normal"},tag:{default:"button"}},setup(t){function e(){$p.playUI("ui_rollover_circle")}function s(){$p.playUI("ui_click")}return(i,n)=>(Object(E["D"])(),Object(E["g"])(Object(E["M"])(t.tag),{class:Object(E["w"])(["UIBtn UIBtnRound rounded-full",["UIBtnRound--"+t.variant]]),onMouseenter:e,onClick:s},{default:Object(E["Z"])(()=>[Object(E["j"])("span",KC,[ZC,Object(E["j"])("span",{class:Object(E["w"])(["Label","small"===t.variant?"italic-small":"italic-current"])},[Object(E["j"])("span",$C,[Object(E["J"])(i.$slots,"default")]),Object(E["j"])("span",QC,[Object(E["J"])(i.$slots,"default")])],2)])]),_:3},40,["class"]))}});s("b3cd");const eI=Zt()(tI,[["__scopeId","data-v-0c523108"]]);var sI=eI;const iI={class:"UIBtnSecondary__Inner"},nI={key:0,class:"Border"},oI={class:"Label__Container"},aI={key:0,class:"Label cta"},rI={class:"Label__Inner left Label__Inner--main"},lI={class:"Label__Inner left Label__Inner--clone"},cI={key:1,class:"Label cta"},hI={class:"Label__Inner center Label__Inner--main"},dI={class:"Label__Inner center Label__Inner--clone"},uI={key:2,class:"Label cta"},pI={class:"Label__Inner right Label__Inner--main"},gI={class:"Label__Inner right Label__Inner--clone"};function mI(t,e,s,i,n,o){return Object(E["D"])(),Object(E["g"])(E["d"],{css:!1,onEnter:t.onEnter,onClick:t.onClick},{default:Object(E["Z"])(()=>[(Object(E["D"])(),Object(E["g"])(Object(E["M"])(t.tag),{class:Object(E["w"])(["UIBtn UIBtnSecondary",[t.variant?"UIBtnSecondary--"+t.variant:"",t.ready?"is-ready":""]])},{default:Object(E["Z"])(()=>[Object(E["j"])("div",iI,["light"!==t.variant?(Object(E["D"])(),Object(E["i"])("span",nI)):Object(E["h"])("",!0),Object(E["j"])("span",oI,[t.hasLeftSlot?(Object(E["D"])(),Object(E["i"])("span",aI,[Object(E["j"])("span",rI,[Object(E["J"])(t.$slots,"left",{},void 0,!0)]),Object(E["j"])("span",lI,[Object(E["J"])(t.$slots,"left",{},void 0,!0)])])):Object(E["h"])("",!0),t.hasCenterSlot?(Object(E["D"])(),Object(E["i"])("span",cI,[Object(E["j"])("span",hI,[Object(E["J"])(t.$slots,"center",{},void 0,!0)]),Object(E["j"])("span",dI,[Object(E["J"])(t.$slots,"center",{},void 0,!0)])])):Object(E["h"])("",!0),t.hasRightSlot?(Object(E["D"])(),Object(E["i"])("span",uI,[Object(E["j"])("span",pI,[Object(E["J"])(t.$slots,"right",{},void 0,!0)]),Object(E["j"])("span",gI,[Object(E["J"])(t.$slots,"right",{},void 0,!0)])])):Object(E["h"])("",!0)])])]),_:3},8,["class"]))]),_:3},8,["onEnter","onClick"])}var _I=Object(E["o"])({props:{delay:{type:Number,default:0},variant:{type:String,default:null},tag:{type:String,default:"button"}},data(){return{ready:!1}},computed:{hasLeftSlot(){return!!this.$slots["left"]},hasCenterSlot(){return!!this.$slots["center"]},hasRightSlot(){return!!this.$slots["right"]}},mounted(){this.onEnter()},methods:{onClick(){$p.playUI("ui_click")},onEnter(){const t=wt["a"].utils.selector(this.$el);wt["a"].set(this.$el,{pointerEvents:"none"}),console.log("[UIBtnSecondary] onEnter");const e=wt["a"].timeline({delay:this.delay}).add(()=>this.ready=!0).from([t(".Label__Inner--main")],{yPercent:wt["a"].utils.wrap([-200,200]),clearProps:"all",duration:1,ease:"quart.out"},"start");"light"!==this.variant&&e.from([t(".Border")],{opacity:0,duration:1,ease:"none"},"start").from([t(".Border")],{transition:"none",clearProps:"all",scaleY:0,duration:1,ease:"quart.out"},"start"),e.set(this.$el,{clearProps:"pointerEvents"})}}});s("75e1");const bI=Zt()(_I,[["render",mI],["__scopeId","data-v-d0459f82"]]);var fI=bI;const{send:vI,state:xI}=Object(Ot["b"])(Wx);var TI=Object(E["o"])({components:{PhotoSettings:yR,LightSettings:gS,PoseSettings:hC,BackgroundSettings:gC,UIBtnCamera:xC,UIBtnPrimary:hA,UIBtnRound:sI,UIBtnSecondary:fI,UIPnlPreset:qC,InputRange:kj},setup(){const{state:t,send:e}=Object(Ot["b"])(Wx);return{state:t,send:e,uiReady:Object(E["H"])(!1),lightReady:Object(E["H"])(!1),lightOpen:Object(E["H"])(!1),poseReady:Object(E["H"])(!1),poseOpen:Object(E["H"])(!1),backgroundReady:Object(E["H"])(!1),backgroundOpen:Object(E["H"])(!1),showSeeAll:Object(E["e"])(()=>t.value.matches("painting.explore.default")||t.value.matches("painting.edit_pose")||t.value.matches("painting.edit_background")||t.value.matches("painting.edit_light"))}},data(){return{flash:!1,Viewport:bg}},methods:{goToPhoto(){Wx.send("ENTER_PHOTO")},onEnterLight(t,e){console.log("[Painting] onEnterLight");const s=wt["b"].utils.selector(t);this.lightReady=!1,this.lightOpen=!1;const i=wt["b"].timeline({onComplete:e,delay:.2});i.add(()=>{this.lightOpen=!0},"start+=.1").from([t,s(".Settings > .Background"),s(".Footer"),s(".Main"),s(".ButtonsList")],{autoAlpha:0,transition:"none",y:20,duration:.6,ease:"customOut2",stagger:.1},"start").from([s(".Settings .LightSettings__Mask__Group")],{y:-20,duration:.6,ease:"customOut2"},"start+=.1").add(()=>{this.lightReady=!0})},onLeaveLight(t,e){const s=wt["b"].timeline({onComplete:e});s.to(t,{autoAlpha:0,ease:"customOut2",duration:.3})},onEnterUI(t,e){const s=wt["b"].utils.selector(t);this.uiReady=!1;const i=wt["b"].timeline({onComplete:e,delay:.2});i.from([".UIBtnGallery",s(".UIBtnCamera, .UIPnlPreset")],{autoAlpha:0,duration:.6,transition:"none",y:20,ease:"customOut2",stagger:.1},"start").add(()=>{this.uiReady=!0})},onEnterCancelledUI(t){},onLeaveUI(t,e){const s=wt["b"].timeline({onComplete:e});s.to(t,{autoAlpha:0,ease:"customOut2",duration:.3})},onEnterSliderSettings(t,e){const s=wt["b"].utils.selector(t);wt["b"].timeline({onComplete:e,delay:.2}).from([s(".Nav"),s(".UIBtnClosePnl")],{autoAlpha:0,transition:"none",y:20,duration:.6,ease:"quart.out",stagger:.1},"start").from([s(".List")],{autoAlpha:0,duration:.6,ease:"quart.out"},"start").from([s(".Nav__Button--previous")],{x:-20,duration:1,ease:"quart.out"},"start").from([s(".Nav__Button--next")],{x:20,duration:1,ease:"quart.out"},"start")},onLeaveSliderSettings(t,e){console.log("[Painting] onLeaveSliderSettings"),wt["b"].timeline({onComplete:e}).to(t,{autoAlpha:0,ease:"customOut2",duration:.3})},onSeeAll(){const t=wt["b"].utils.selector(this.$el);wt["b"].timeline({onComplete:()=>{vI("GOTO_GALLERY")}}).to([t(".SeeAll__Veil")],{scaleX:1,duration:.5,ease:"quart.out"},"start")},onSkipClick(){this.send("INTRO_COMPLETE")}},watch:{state:{handler(t,e){this.state.matches("painting.snapshot")&&(this.flash=!0,setTimeout(()=>{this.flash=!1},1e3))},immediate:!0}}});s("8d04");const EI=Zt()(TI,[["render",xj],["__scopeId","data-v-1fa5b053"]]);var wI=EI;const OI=t=>(Object(E["F"])("data-v-30be2a97"),t=t(),Object(E["E"])(),t),AI={class:"PaintingTutorial z-painting-tutorial",ref:"root"},yI=OI(()=>Object(E["j"])("div",{class:"Modal__Background"},null,-1)),DI={class:"Modal__Inner"},jI={class:"Modal__Header"},RI=OI(()=>Object(E["j"])("hr",{class:"Modal__Header__Line"},null,-1)),SI={class:"Step__Heading"},CI={class:"Title Title--Left"},II={class:"Title__Inner"},PI=["innerHTML"],LI={class:"Pagination"},MI={class:"Pagination__Inner"},kI={class:"Step__Animation"},NI={class:"Title Title--Right"},FI={class:"Title__Inner"},BI=["innerHTML"],UI=["innerHTML"],HI=["innerHTML"],GI={class:"Modal__Accept"},VI=["innerHTML"],zI={class:"Pagination"},XI={class:"Pagination__Inner"};function WI(t,e,s,i,n,o){const a=Object(E["K"])("ui-btn-close"),r=Object(E["K"])("line-by-line"),l=Object(E["K"])("ui-icon"),c=Object(E["K"])("ui-btn-secondary");return Object(E["D"])(),Object(E["i"])("div",AI,[Object(E["j"])("div",{class:Object(E["w"])(["Modal",{"is-open":t.isOpen}])},[yI,Object(E["j"])("div",DI,[Object(E["j"])("header",jI,[Object(E["m"])(a,{delay:1.5,text:t.$t("painting.tutorial.cta_close"),onClick:t.onSkip},null,8,["delay","text","onClick"]),RI]),Object(E["j"])("h2",SI,[Object(E["j"])("div",CI,[Object(E["j"])("div",II,[(Object(E["D"])(!0),Object(E["i"])(E["a"],null,Object(E["I"])(t.currentStep.titleLeft,(t,e)=>(Object(E["D"])(),Object(E["i"])("span",{key:"title-left-"+e,class:Object(E["w"])(["Title__Part",["Title__Part--"+t.direction,"Title__Part--"+t.style]])},[Object(E["j"])("span",{innerHTML:t.text},null,8,PI)],2))),128)),Object(E["j"])("div",LI,[Object(E["j"])("div",MI,Object(E["O"])(t.tutorialStep+1)+"/"+Object(E["O"])(t.nbSteps),1)])])]),Object(E["j"])("div",kI,[(Object(E["D"])(),Object(E["i"])("div",{ref:"lottieContainer",key:t.currentStep.index}))]),Object(E["j"])("div",NI,[Object(E["j"])("div",FI,[(Object(E["D"])(!0),Object(E["i"])(E["a"],null,Object(E["I"])(t.currentStep.titleRight,(t,e)=>(Object(E["D"])(),Object(E["i"])("span",{key:"title-right-"+e,class:Object(E["w"])(["Title__Part",["Title__Part--"+t.direction,"Title__Part--"+t.style]])},[Object(E["j"])("span",{innerHTML:t.text},null,8,BI)],2))),128))])])]),t.isInitial?(Object(E["D"])(),Object(E["g"])(r,{delay:1,tag:"div",class:"Step__Description italic-current",key:"step-description__"+(t.tutorialStep+1)},{default:Object(E["Z"])(()=>[Object(E["j"])("p",{innerHTML:t.$t("painting.tutorial.step"+(t.tutorialStep+1)+".desc")},null,8,UI)]),_:1})):(Object(E["D"])(),Object(E["i"])("div",{class:"Step__Description italic-current",key:"step-description__"+(t.tutorialStep+1)},[Object(E["j"])("p",{innerHTML:t.$t("painting.tutorial.step"+(t.tutorialStep+1)+".desc")},null,8,HI)])),Object(E["j"])("nav",GI,[t.seeAll?(Object(E["D"])(),Object(E["g"])(c,{key:0,delay:.1,onClick:t.onAccept},{center:Object(E["Z"])(()=>[Object(E["j"])("span",{innerHTML:t.$t("painting.tutorial.cta_next")},null,8,VI)]),right:Object(E["Z"])(()=>[Object(E["m"])(l,{name:"arrow-small-right"})]),_:1},8,["delay","onClick"])):Object(E["h"])("",!0)]),Object(E["j"])("nav",{class:Object(E["w"])([{seeAllEnabled:t.seeAll},"Modal__Nav"])},[Object(E["m"])(c,{delay:1.25,class:"Modal__Nav__Button Modal__Nav__Button--Previous",onClick:t.onPrevious},{left:Object(E["Z"])(()=>[Object(E["m"])(l,{name:"arrow-small-left"})]),_:1},8,["delay","onClick"]),Object(E["j"])("div",zI,[Object(E["j"])("div",XI,Object(E["O"])(t.tutorialStep+1)+"/"+Object(E["O"])(t.nbSteps),1)]),Object(E["m"])(c,{delay:1.25,class:"Modal__Nav__Button Modal__Nav__Button--Next",onClick:t.onNext},{right:Object(E["Z"])(()=>[Object(E["m"])(l,{name:"arrow-small-right"})]),_:1},8,["delay","onClick"])],2)])],2)],512)}var qI=s("a851"),YI=s.n(qI);const KI=[{titleLeft:[{text:"How&nbsp;",style:"italic",direction:"left"},{text:"to",style:"italic",direction:"right"}],titleRight:[{text:"Mo",style:"bold",direction:"left"},{text:"ve",style:"bold",direction:"right"},{text:"&#8239;?&#8239;",style:"italic",direction:"right"}]},{titleLeft:[{text:"Cho",style:"italic",direction:"left"},{text:"ose",style:"italic",direction:"right"}],titleRight:[{text:"An",style:"bold",direction:"left"},{text:"gle",style:"bold",direction:"right"}]},{titleLeft:[{text:"How&nbsp;",style:"italic",direction:"left"},{text:"to",style:"italic",direction:"right"}],titleRight:[{text:"Li",style:"bold",direction:"left"},{text:"ght",style:"bold",direction:"right"},{text:"&#8239;?&#8239;",style:"italic",direction:"right"}]},{titleLeft:[{text:"Sho",style:"italic",direction:"left"},{text:"ot&nbsp;a&nbsp;",style:"italic",direction:"left"}],titleRight:[{text:"Pho",style:"bold",direction:"left"},{text:"to",style:"bold",direction:"right"}]},{titleLeft:[{text:"See all",style:"italic",direction:"left"}],titleRight:[{text:"Oth",style:"bold",direction:"left"},{text:"ers",style:"bold",direction:"right"}]}],ZI=KI.length;var $I=Object(E["o"])({components:{UIBtnSecondary:fI},setup(){const{send:t}=Object(Ot["b"])(Wx),e=Object(E["H"])(null),s=Object(E["H"])(!1),i=Object(E["H"])(!1),n=Object(E["H"])(0),o=Object(E["H"])(null),a=Object(E["H"])(!0),r=Object(E["e"])(()=>{const t=n.value,e=ri.resolve(`./assets/lottie/painting-tutorial-${t+1}.json`),s=YI.a.loadAnimation({container:o.value,renderer:"svg",loop:!0,autoplay:!0,path:e});return{index:t,animation:s,...KI[t]}});function l(t){t<0||t>=ZI||(a.value=!1,n.value=t,i.value||n.value!==ZI-1||(i.value=!0))}function c(){let t=n.value-1;t<0&&(t=ZI-1),l(t)}function h(){let t=n.value+1;t>=ZI&&(t=0),l(t)}function d(){i.value?p():h()}function u(t=0){const i=wt["b"].utils.selector(e.value);wt["b"].timeline({delay:t}).add(()=>{s.value=!0},"start").from([i(".Modal__Header__Line")],{scaleX:0,duration:.5,ease:"quart.out"},"start+=0.25").from([i(".Title__Part--left span")],{xPercent:100,duration:1,ease:"quart.out"},"start").from([i(".Title__Part--right span")],{xPercent:-100,duration:1,ease:"quart.out"},"start").from([i(".Pagination__Inner")],{yPercent:100,duration:1,ease:"quart.out"},"start")}function p(){const i=wt["b"].utils.selector(e.value);wt["b"].timeline({onComplete:()=>{t("COMPLETE_TUTORIAL")}}).add(()=>{s.value=!1},"start").to([i(".Modal__Inner")],{autoAlpha:0,duration:1,ease:"quart.out"},"start")}return Object(E["B"])(()=>{u(1)}),{root:e,onSkip:p,send:t,tutorialStep:n,currentStep:r,onPrevious:c,onNext:h,onAccept:d,nbSteps:ZI,lottieContainer:o,isOpen:s,isInitial:a,seeAll:i}}});s("e78a");const QI=Zt()($I,[["render",WI],["__scopeId","data-v-30be2a97"]]);var JI=QI;const tP=t=>(Object(E["F"])("data-v-5c376371"),t=t(),Object(E["E"])(),t),eP={class:"Share"},sP={key:0,class:"ShareImage view-default"},iP={ref:"picture",class:"Picture"},nP=["src"],oP={key:1,class:"SharePreview view-default"},aP={class:"SharePreview__Inner view-default__inner"},rP={class:"SharePreview__Buttons"},lP={key:0,class:"MyGaze z-about"},cP={key:0,class:"MyGaze__Header"},hP=tP(()=>Object(E["j"])("h2",{class:"MyGaze__Header__Title Title"},[Object(E["j"])("span",{class:"Title__Part Title__Part--Italic Title__Part--Left"},[Object(E["j"])("span",null,"The  ")]),Object(E["j"])("span",{class:"Title__Part Title__Part--Bold Title__Part--Left"},[Object(E["j"])("span",null,"Fem")]),Object(E["j"])("span",{class:"Title__Part Title__Part--Bold Title__Part--Right"},[Object(E["j"])("span",null,"ale ")]),Object(E["j"])("span",{class:"Title__Part Title__Part--Italic Title__Part--Right"},[Object(E["j"])("span",null,"Gaze")])],-1)),dP=tP(()=>Object(E["j"])("hr",{class:"MyGaze__Header__Line"},null,-1)),uP={key:1,class:"MyGaze__Header"},pP=tP(()=>Object(E["j"])("h2",{class:"MyGaze__Header__Title Title"},[Object(E["j"])("span",{class:"Title__Part Title__Part--Italic Title__Part--Left"},[Object(E["j"])("span",null,"My  ")]),Object(E["j"])("span",{class:"Title__Part Title__Part--Bold Title__Part--Left"},[Object(E["j"])("span",null,"Ga")]),Object(E["j"])("span",{class:"Title__Part Title__Part--Bold Title__Part--Right"},[Object(E["j"])("span",null,"ze ")])],-1)),gP=tP(()=>Object(E["j"])("hr",{class:"MyGaze__Header__Line"},null,-1)),mP={class:"MyGaze__Left"},_P={class:"Metas"},bP={class:"subtitle"},fP={class:"italic-current"},vP={class:"subtitle"},xP={class:"italic-current"},TP=tP(()=>Object(E["j"])("span",{class:"Spacer"},null,-1)),EP=tP(()=>Object(E["j"])("h1",{class:"Title"},[Object(E["j"])("span",{class:"Title__Part Title__Part--Right Title__Part--Italic"},[Object(E["j"])("span",null,"My ")]),Object(E["j"])("br"),Object(E["j"])("span",{class:"Title__Part Title__Part--Left Title__Part--Bold"},[Object(E["j"])("span",null,"Ga")]),Object(E["j"])("span",{class:"Title__Part Title__Part--Right Title__Part--Bold"},[Object(E["j"])("span",null,"ze ")])],-1)),wP={class:"MyGaze__Footer"},OP={class:"MyGaze__Right"},AP=["src","alt"],yP=tP(()=>Object(E["j"])("div",{class:"MyGaze__Veil"},null,-1));function DP(t,e,s,i,n,o){const a=Object(E["K"])("ui-btn-secondary"),r=Object(E["K"])("ui-icon");return Object(E["D"])(),Object(E["i"])("div",eP,[t.datauri&&(t.state.matches("share.preview")||t.state.matches("share.upload"))?(Object(E["D"])(),Object(E["i"])("div",sP,[Object(E["j"])("figure",iP,[Object(E["j"])("img",{src:t.datauri},null,8,nP)],512)])):Object(E["h"])("",!0),t.state.matches("share.preview")||t.state.matches("share.upload")?(Object(E["D"])(),Object(E["i"])("div",oP,[Object(E["j"])("div",aP,[Object(E["j"])("div",rP,[Object(E["m"])(a,{delay:.5,class:Object(E["w"])(["SharePreview__CtaSubmit",{active:t.state.matches("share.upload")}]),onClick:t.onSubmit,disabled:t.state.matches("share.upload")},{center:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("share.cta_submit")),1)]),_:1},8,["delay","class","onClick","disabled"]),Object(E["m"])(a,{delay:.5,class:"SharePreview__CtaRestart",onClick:t.onCancel,disabled:t.state.matches("share.upload")},{center:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("share.cta_restart")),1)]),_:1},8,["delay","onClick","disabled"])])])])):Object(E["h"])("",!0),Object(E["m"])(E["d"],{css:!1,onEnter:t.onMyGazeEnter,appear:""},{default:Object(E["Z"])(()=>[t.state.matches("share.select")?(Object(E["D"])(),Object(E["i"])("div",lP,[t.Viewport.isDesktop?(Object(E["D"])(),Object(E["i"])("header",cP,[Object(E["m"])(a,{delay:.3,class:"MyGaze__Back",variant:"light",onClick:t.onMyGazeClose},{left:Object(E["Z"])(()=>[Object(E["m"])(r,{name:"arrow-big-left"})]),center:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("my_gaze.back")),1)]),_:1},8,["delay","onClick"]),hP,Object(E["m"])(a,{delay:.5,class:"MyGaze__SeeAll",variant:"light",onClick:t.onMyGazeSeeAll},{center:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("my_gaze.see_all")),1)]),right:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("my_gaze.pictures")),1)]),_:1},8,["delay","onClick"]),dP])):(Object(E["D"])(),Object(E["i"])("header",uP,[Object(E["m"])(a,{delay:.3,class:"MyGaze__Back",variant:"light",onClick:t.onMyGazeClose},{left:Object(E["Z"])(()=>[Object(E["m"])(r,{name:"arrow-big-left"})]),_:1},8,["delay","onClick"]),pP,Object(E["m"])(a,{delay:.5,class:"MyGaze__SeeAll",variant:"light",onClick:t.onMyGazeSeeAll},{right:Object(E["Z"])(()=>[Object(E["m"])(r,{name:"see-all"})]),_:1},8,["delay","onClick"]),gP])),Object(E["j"])("div",mP,[Object(E["j"])("ul",_P,[Object(E["j"])("li",null,[Object(E["j"])("h3",bP,[Object(E["j"])("span",null,Object(E["O"])(t.$t("my_gaze.background")),1)]),Object(E["j"])("p",fP,[Object(E["j"])("span",null,Object(E["O"])(t.povDatas?t.$t("my_gaze."+t.povDatas.background):""),1)])]),Object(E["j"])("li",null,[Object(E["j"])("h3",vP,[Object(E["j"])("span",null,Object(E["O"])(t.$t("my_gaze.pose")),1)]),Object(E["j"])("p",xP,[Object(E["j"])("span",null,Object(E["O"])(t.povDatas?t.$t("my_gaze."+t.povDatas.pose):""),1)])])]),TP,EP,Object(E["j"])("footer",wP,[Object(E["m"])(a,{delay:.3,onClick:e[0]||(e[0]=e=>t.doShare("facebook")),type:"button"},{center:Object(E["Z"])(()=>[Object(E["m"])(r,{name:"facebook"})]),_:1},8,["delay"]),t.Viewport.isDesktop&&!t.hideDownload?(Object(E["D"])(),Object(E["g"])(a,{key:0,delay:.7,onClick:t.onDownload,href:t.datauri,download:"",tag:"a"},{left:Object(E["Z"])(()=>[Object(E["m"])(r,{name:"download"})]),center:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("my_gaze.download")),1)]),_:1},8,["delay","onClick","href"])):Object(E["h"])("",!0),t.Viewport.isDesktop||t.hideDownload?Object(E["h"])("",!0):(Object(E["D"])(),Object(E["g"])(a,{key:1,delay:.7,onClick:t.onDownload,href:t.datauri,download:"",tag:"a"},{center:Object(E["Z"])(()=>[Object(E["m"])(r,{name:"download"})]),_:1},8,["delay","onClick","href"]))])]),Object(E["j"])("div",OP,[t.datauri?(Object(E["D"])(),Object(E["i"])("picture",{key:0,class:Object(E["w"])(["MyGaze__Picture",["MyGaze__Picture--"+t.povDatas.format]])},[Object(E["j"])("img",{src:t.datauri,alt:[t.povDatas?t.$t("my_gaze."+t.povDatas.background):"",t.povDatas?t.$t("my_gaze."+t.povDatas.pose):""].join(" ")},null,8,AP)],2)):Object(E["h"])("",!0)]),yP])):Object(E["h"])("",!0)]),_:1},8,["onEnter"])])}const jP={instagram:"https://www.facebook.com/share.php?u=%URL%",facebook:"https://www.facebook.com/share.php?u=%URL%"},{send:RP,state:SP}=Object(Ot["b"])(Wx),CP=Object(E["o"])({components:{},setup(){const{t:t}=Object(i["b"])(),e=Object(Fy["a"])(Wx,t=>t.context.sharedMedia.loaded?t.context.sharedMedia.url:""),s=Object(Fy["a"])(Wx,t=>t.context.povDatas),n=Object(Fy["a"])(Wx,t=>t.context.sharedMedia.blob),o=Object(Fy["a"])(Wx,t=>t.context.povDatas),a=Object(E["H"])(!!window.navigator.share),r=Object(E["e"])(()=>e.value);return{...Object(Ot["b"])(Wx),povDatas:s,shareSource:n,mapPosition:o,supportWebShareAPI:a,shareUrl:r}},data(){return{Viewport:bg,datauri:null,imgUploaded:!1}},computed:{hideDownload(){return xg.isFacebook||xg.isInsta||xg.isSnap}},watch:{shareSource:{handler(){this.shareSource&&(this.datauri&&URL.revokeObjectURL(this.datauri),this.datauri=URL.createObjectURL(this.shareSource))},immediate:!0},state:{handler(t,e){this.state.matches("share.preview")&&this.$nextTick(()=>{const t=wt["b"].timeline();t.to(".ShareImage",{autoAlpha:1,duration:1,ease:"quart.out"},"start").from(".ShareImage",{y:20,scale:1.03,duration:1,ease:"quart.out"},"start")})},immediate:!0}},methods:{onDownload(){},onCancel(){this.state.matches("share.preview")&&this.send("CANCEL")},onSubmit(){this.state.matches("share.preview")&&this.send("SUBMIT")},onMyGazeEnter(t,e){const s=wt["b"].utils.selector(t);wt["b"].timeline({onComplete:e}).set([s(".MyGaze__Veil")],{autoAlpha:0},"start").from([t],{clipPath:"inset(0 100% 0 0)",duration:.75,ease:"quart.out"},"start").from([s(".Title__Part--Left > span")],{transform:"none",xPercent:100,duration:1,ease:"quart.out"},"start+=0.25").from([s(".Title__Part--Right > span")],{transform:"none",xPercent:-100,duration:1,ease:"quart.out"},"start+=0.25").from([s(".MyGaze__Header__Line")],{scaleX:0,duration:1,ease:"quart.out"},"start+=0.25").from([s(".MyGaze__Picture")],{clipPath:"inset(0 0 0 100%)",duration:1,ease:"quart.out"},"start+=0.3").from([s(".MyGaze__Picture img")],{scale:1.1,duration:1,ease:"quart.out"},"start+=0.3").from([s(".Metas .subtitle span")],{yPercent:100,duration:1,ease:"quart.out"},"start+=0.5").from([s(".Metas .italic-current span")],{yPercent:100,duration:1,ease:"quart.out"},"start+=0.6")},onMyGazeClose(){const t=wt["b"].utils.selector(this.$el);wt["b"].timeline({onComplete:()=>RP({type:"CANCEL"})}).to([t(".MyGaze")],{autoAlpha:0,duration:.3,ease:"none"},"start")},onMyGazeSeeAll(){const t=wt["b"].utils.selector(this.$el);wt["b"].timeline({onComplete:()=>RP({type:"GOTO_GALLERY"})}).to([t(".MyGaze__Veil")],{autoAlpha:1,duration:.3,ease:"none"},"start")},doShare(t){if(!jP.hasOwnProperty(t))return;let e=jP[t];e=e.replace("%URL%",this.shareUrl),console.log(this.shareUrl);const s=650,i=350,n=window.screen.height/2-i/2,o=window.screen.width/2-s/2;window.open(e,"sharer",`top=${n},left=${o},toolbar=0,status=0,width=${s},height=${i}`)},openSharer(){const t=window.navigator;if(!t.share||!t.canShare)return;const e=this.shareUrl,s=this.datauri.substr(this.datauri.lastIndexOf("/")),i=new File([this.shareSource],s+".png",{lastModified:(new Date).getTime()}),n=[i];t.canShare({url:e,files:n})?t.share({url:e,files:n}):t.canShare({url:e})&&t.share({url:e})}}});var IP=CP;s("04ec");const PP=Zt()(IP,[["render",DP],["__scopeId","data-v-5c376371"]]);var LP=PP;const MP=t=>(Object(E["F"])("data-v-dc5cb946"),t=t(),Object(E["E"])(),t),kP={class:"Gallery__Inner"},NP={class:"Gallery__Left"},FP={class:"Owner"},BP={class:"Line__Parent Owner__Name"},UP={class:"Line"},HP={class:"Line__Parent Owner__Name"},GP={class:"Line"},VP={class:"Title__Wrapper"},zP={class:"Title"},XP={class:"Title__Part Title__Part--Italic Title__Part--Left"},WP={class:"Title__Part Title__Part--Bold Title__Part--Right"},qP={class:"Subtitle cta"},YP={key:2,class:"ScrollIndicator"},KP={class:"ScrollIndicator__Icon"},ZP={class:"ScrollIndicator__Inner"},$P={class:"ScrollIndicator__Part ScrollIndicator__Part--Bold ScrollIndicator__Part--Top"},QP={class:"ScrollIndicator__Part ScrollIndicator__Part--Italic ScrollIndicator__Part--Bottom"},JP={class:"ScrollIndicator__Part ScrollIndicator__Part--Default ScrollIndicator__Part--Top"},tL={class:"Gallery__Right",ref:"dragTrigger"},eL={key:0,class:"Column"},sL={class:"Loader Loader--Previous",ref:"previousMobile"},iL={class:"Loader Loader--Next",ref:"nextMobile"},nL={key:1,class:"Column"},oL={class:"Loader Loader--Previous",ref:"previousLeft"},aL={class:"Loader Loader--Next",ref:"nextLeft"},rL={key:2,class:"Column"},lL={class:"Loader Loader--Previous",ref:"previousRight"},cL={class:"Loader Loader--Next",ref:"nextRight"},hL={key:0,class:"ScrollIndicator"},dL={class:"ScrollIndicator__Inner"},uL={class:"ScrollIndicator__Part ScrollIndicator__Part--Bold ScrollIndicator__Part--Top"},pL={class:"ScrollIndicator__Part ScrollIndicator__Part--Italic ScrollIndicator__Part--Bottom"},gL={class:"ScrollIndicator__Part ScrollIndicator__Part--Default ScrollIndicator__Part--Top"},mL=MP(()=>Object(E["j"])("div",{class:"Veil"},null,-1));function _L(t,e,s,i,n,o){const a=Object(E["K"])("ui-icon"),r=Object(E["K"])("ui-btn-secondary"),l=Object(E["K"])("Item"),c=Object(E["K"])("CustomCursor"),h=Object(E["K"])("Single");return Object(E["D"])(),Object(E["i"])("div",{class:Object(E["w"])(["Gallery z-about",{active:t.active}])},[Object(E["j"])("div",kP,[Object(E["j"])("div",NP,[t.Viewport.isDesktop?(Object(E["D"])(),Object(E["g"])(r,{key:0,delay:1.3,class:"Gallery__Back",variant:"light",onClick:t.onClose},{left:Object(E["Z"])(()=>[Object(E["m"])(a,{name:"arrow-big-left"})]),center:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("gallery.back")),1)]),_:1},8,["delay","onClick"])):(Object(E["D"])(),Object(E["g"])(r,{key:1,delay:1.3,class:"Gallery__Back",variant:"light",onClick:t.onClose},{center:Object(E["Z"])(()=>[Object(E["m"])(a,{name:"arrow-big-left"})]),_:1},8,["delay","onClick"])),Object(E["j"])("h2",FP,[Object(E["j"])("div",BP,[Object(E["j"])("div",UP,Object(E["O"])(t.$t("common.owner_line1")),1)]),Object(E["j"])("div",HP,[Object(E["j"])("div",GP,Object(E["O"])(t.$t("common.owner_line2")),1)])]),Object(E["j"])("div",VP,[Object(E["j"])("h1",zP,[Object(E["j"])("span",XP,[Object(E["j"])("span",null,Object(E["O"])(t.$t("gallery.title1"))+" ",1)]),Object(E["j"])("span",WP,[Object(E["j"])("span",null,Object(E["O"])(t.$t("gallery.title2")),1)])]),Object(E["j"])("h3",qP,[Object(E["j"])("span",null,Object(E["O"])(t.$t("gallery.subtitle")),1)])]),t.Viewport.isDesktop?(Object(E["D"])(),Object(E["i"])("div",YP,[Object(E["j"])("div",KP,[Object(E["j"])("span",null,[Object(E["m"])(a,{name:"arrow-big-down"})])]),Object(E["j"])("div",ZP,[Object(E["j"])("span",$P,[Object(E["j"])("span",null,Object(E["O"])(t.$t("gallery.scroll1")),1)]),Object(E["j"])("span",QP,[Object(E["j"])("span",null,Object(E["O"])(t.$t("gallery.scroll2"))+" ",1)]),Object(E["j"])("span",JP,[Object(E["j"])("span",null,Object(E["O"])(t.$t("gallery.scroll3")),1)])])])):Object(E["h"])("",!0)]),Object(E["j"])("div",tL,[t.Viewport.isDesktop?Object(E["h"])("",!0):(Object(E["D"])(),Object(E["i"])("div",eL,[Object(E["j"])("div",{class:"Column__Inner Column__Inner--Mobile",ref:"columnMobile",style:Object(E["y"])(`transform: translate3d(${-t.scrollMobile}px, 0, 0)`)},[Object(E["j"])("div",sL,null,512),(Object(E["D"])(!0),Object(E["i"])(E["a"],null,Object(E["I"])(t.items,e=>(Object(E["D"])(),Object(E["g"])(l,{key:"mobile--"+e.id,item:e,onClick:s=>t.onItemClick(e),onMouseenter:s=>t.onItemMouseEnter(e),onMouseleave:s=>t.onItemMouseLeave(e)},null,8,["item","onClick","onMouseenter","onMouseleave"]))),128)),Object(E["j"])("div",iL,null,512)],4)])),t.Viewport.isDesktop?(Object(E["D"])(),Object(E["i"])("div",nL,[Object(E["j"])("div",{class:"Column__Inner Column__Inner--Left",ref:"columnLeft",style:Object(E["y"])(`transform: translate3d(0, ${-t.scrollLeft}px, 0)`)},[Object(E["j"])("div",oL,null,512),(Object(E["D"])(!0),Object(E["i"])(E["a"],null,Object(E["I"])(t.lefts,e=>(Object(E["D"])(),Object(E["g"])(l,{key:"left--"+e.id,item:e,onClick:s=>t.onItemClick(e),onMouseenter:s=>t.onItemMouseEnter(e),onMouseleave:s=>t.onItemMouseLeave(e)},null,8,["item","onClick","onMouseenter","onMouseleave"]))),128)),Object(E["j"])("div",aL,null,512)],4)])):Object(E["h"])("",!0),t.Viewport.isDesktop?(Object(E["D"])(),Object(E["i"])("div",rL,[Object(E["j"])("div",{class:"Column__Inner Column__Inner--Right",ref:"columnRight",style:Object(E["y"])(`transform: translate3d(0, ${t.scrollRight}px, 0)`)},[Object(E["j"])("div",lL,null,512),(Object(E["D"])(!0),Object(E["i"])(E["a"],null,Object(E["I"])(t.rights,e=>(Object(E["D"])(),Object(E["g"])(l,{key:"right--"+e.id,item:e,onClick:s=>t.onItemClick(e),onMouseenter:s=>t.onItemMouseEnter(e),onMouseleave:s=>t.onItemMouseLeave(e)},null,8,["item","onClick","onMouseenter","onMouseleave"]))),128)),Object(E["j"])("div",cL,null,512)],4)])):Object(E["h"])("",!0)],512),t.Viewport.isDesktop?Object(E["h"])("",!0):(Object(E["D"])(),Object(E["i"])("div",hL,[Object(E["j"])("div",dL,[Object(E["j"])("span",uL,[Object(E["j"])("span",null,Object(E["O"])(t.$t("gallery.swipe1")),1)]),Object(E["j"])("span",pL,[Object(E["j"])("span",null,Object(E["O"])(t.$t("gallery.swipe2"))+" ",1)]),Object(E["j"])("span",gL,[Object(E["j"])("span",null,Object(E["O"])(t.$t("gallery.swipe3")),1)])])]))]),mL,t.Viewport.isDesktop?(Object(E["D"])(),Object(E["g"])(E["b"],{key:0,to:"body"},[Object(E["m"])(c,{show:t.showCustomCursor},{default:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("gallery.cursor")),1)]),_:1},8,["show"])])):Object(E["h"])("",!0),t.state.matches("gallery.single")?(Object(E["D"])(),Object(E["g"])(h,{key:1})):Object(E["h"])("",!0)],2)}const bL={key:0,type:"file"},fL=Object(E["j"])("input",{type:"hidden",value:"hello"},null,-1),vL=Object(E["j"])("button",{type:"submit"},"Submit",-1);function xL(t,e,s,i,n,o){return Object(E["D"])(),Object(E["i"])("div",null,[t.debug?(Object(E["D"])(),Object(E["i"])("form",{key:0,onSubmit:e[0]||(e[0]=Object(E["bb"])((...e)=>t.onDebug&&t.onDebug(...e),["prevent"])),style:{position:"fixed","z-index":"10000"}},["create"===t.debug?(Object(E["D"])(),Object(E["i"])("input",bL)):Object(E["h"])("",!0),fL,vL],32)):Object(E["h"])("",!0)])}const TL={Position:[0,0,0],Lookat:[0,0,0],Hue:0,Intensity:1,Saturation:1,IsOn:!0};var EL=Object(E["o"])({props:{debug:{type:String,validator(t){return["create","list"].includes(t)}}},emits:["create:complete","create:error","list:complete","list:error"],methods:{async onDebug(t){if("list"===this.debug)this.list().then(console.log);else if("create"===this.debug){const e=t.currentTarget;if(!e)return;const s=e.querySelector("input");if(!s)return;const i=s.files[0];if(!i)return;const n=await Mf(i);this.create({Artwork:{Format:"landscape",PointOfView:{Position:[4.551731586456299,1.5767663717269897,-5.623378276824951],Rotation:[.0184288639575243,.8856275677680969,.03527455031871796,-.4626878499984741]},PostProcessing:{Brightness:1,Contrast:1,Saturation:1,Temperature:1,Zoom:1},Background:"bg1",Pose:"pose1",Light0:TL,Light1:TL,Light2:TL},Image:n}).then(console.log)}},async create(t){console.log("[API] create",{params:t});const e=await vs(t);if(e.isOk()){const t=e.unwrap();return this.$emit("create:complete",t),t}return this.$emit("create:error",e.error),e.error},async list(t){const e=await xs(t);if(e.isOk()){const t=e.unwrap();return this.$emit("list:complete",t),t}return this.$emit("list:error",e.error),e.error}}});const wL=Zt()(EL,[["render",xL]]);var OL=wL;const AL=t=>(Object(E["F"])("data-v-73d1cd93"),t=t(),Object(E["E"])(),t),yL={class:"Single"},DL=AL(()=>Object(E["j"])("div",{class:"Single__Veil"},null,-1)),jL={key:0,class:"Single__Header"},RL=Object(E["k"])('<h2 class="Single__Header__Title Title" data-v-73d1cd93><span class="Title__Part Title__Part--Italic Title__Part--Left" data-v-73d1cd93><span data-v-73d1cd93>The  </span></span><span class="Title__Part Title__Part--Bold Title__Part--Left" data-v-73d1cd93><span data-v-73d1cd93>Fem</span></span><span class="Title__Part Title__Part--Bold Title__Part--Right" data-v-73d1cd93><span data-v-73d1cd93>ale </span></span><span class="Title__Part Title__Part--Italic Title__Part--Right" data-v-73d1cd93><span data-v-73d1cd93>Gaze</span></span></h2><hr class="Single__Header__Line" data-v-73d1cd93>',2),SL={key:1,class:"Single__Header"},CL=Object(E["k"])('<h2 class="Single__Header__Title Title" data-v-73d1cd93><span class="Title__Part Title__Part--Italic Title__Part--Left" data-v-73d1cd93><span data-v-73d1cd93>Ano</span></span><span class="Title__Part Title__Part--Italic Title__Part--Right" data-v-73d1cd93><span data-v-73d1cd93>ther  </span></span><span class="Title__Part Title__Part--Bold Title__Part--Left" data-v-73d1cd93><span data-v-73d1cd93>Ga</span></span><span class="Title__Part Title__Part--Bold Title__Part--Right" data-v-73d1cd93><span data-v-73d1cd93>ze </span></span></h2><hr class="Single__Header__Line" data-v-73d1cd93>',2),IL={class:"Single__Left"},PL={class:"Metas"},LL={key:0},ML={class:"subtitle"},kL={class:"italic-current"},NL={key:1},FL={class:"subtitle"},BL={class:"italic-current"},UL=Object(E["k"])('<span class="Spacer" data-v-73d1cd93></span><h1 class="Title" data-v-73d1cd93><span class="Title__Part Title__Part--Right Title__Part--Italic" data-v-73d1cd93><span data-v-73d1cd93>Another </span></span><br data-v-73d1cd93><span class="Title__Part Title__Part--Left Title__Part--Bold" data-v-73d1cd93><span data-v-73d1cd93>Ga</span></span><span class="Title__Part Title__Part--Right Title__Part--Bold" data-v-73d1cd93><span data-v-73d1cd93>ze </span></span></h1>',2),HL={class:"Single__Footer"},GL={class:"Single__Right"},VL=["src","alt"];function zL(t,e,s,i,n,o){const a=Object(E["K"])("ui-icon"),r=Object(E["K"])("ui-btn-secondary");return Object(E["D"])(),Object(E["i"])("div",yL,[DL,t.Viewport.isDesktop?(Object(E["D"])(),Object(E["i"])("header",jL,[Object(E["m"])(r,{delay:.3,class:"Single__Back",variant:"light",onClick:t.onClose},{left:Object(E["Z"])(()=>[Object(E["m"])(a,{name:"arrow-big-left"})]),center:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("gallery.single.back")),1)]),_:1},8,["delay","onClick"]),RL])):(Object(E["D"])(),Object(E["i"])("header",SL,[Object(E["m"])(r,{delay:.3,class:"Single__Back",variant:"light",onClick:t.onClose},{left:Object(E["Z"])(()=>[Object(E["m"])(a,{name:"arrow-big-left"})]),_:1},8,["delay","onClick"]),CL])),Object(E["j"])("div",IL,[Object(E["j"])("ul",PL,[t.povDatas.background?(Object(E["D"])(),Object(E["i"])("li",LL,[Object(E["j"])("h3",ML,[Object(E["j"])("span",null,Object(E["O"])(t.$t("my_gaze.background")),1)]),Object(E["j"])("p",kL,[Object(E["j"])("span",null,Object(E["O"])(t.povDatas?t.$t("my_gaze."+t.povDatas.background):""),1)])])):Object(E["h"])("",!0),t.povDatas.pose?(Object(E["D"])(),Object(E["i"])("li",NL,[Object(E["j"])("h3",FL,[Object(E["j"])("span",null,Object(E["O"])(t.$t("my_gaze.pose")),1)]),Object(E["j"])("p",BL,[Object(E["j"])("span",null,Object(E["O"])(t.povDatas?t.$t("my_gaze."+t.povDatas.pose):""),1)])])):Object(E["h"])("",!0)]),UL,Object(E["j"])("footer",HL,[Object(E["m"])(r,{delay:.7,onClick:t.onLoadSameSettings},{center:Object(E["Z"])(()=>[Object(E["l"])(Object(E["O"])(t.$t("gallery.single.copy")),1)]),_:1},8,["delay","onClick"])])]),Object(E["j"])("div",GL,[t.url?(Object(E["D"])(),Object(E["i"])("picture",{key:0,class:Object(E["w"])(["Single__Picture",["Single__Picture--"+t.povDatas.format]])},[Object(E["j"])("img",{src:t.url,alt:[t.povDatas?t.$t("my_gaze."+t.povDatas.background):"",t.povDatas?t.$t("my_gaze."+t.povDatas.pose):""].join(" ")},null,8,VL)],2)):Object(E["h"])("",!0)])])}var XL=Object(uT["r"])({setup(){const{send:t,state:e}=Object(Ot["b"])(Wx),s=Object(Fy["a"])(Wx,t=>t.context.galleryPovDatas),i=Object(Fy["a"])(Wx,t=>t.context.galleryUrl);return{state:e,send:t,povDatas:s,url:i}},data(){return{Viewport:bg}},mounted(){this.onEnter()},methods:{onEnter(){const t=wt["a"].utils.selector(this.$el);wt["a"].timeline({}).fromTo([t(".Single__Veil")],{autoAlpha:1,scaleX:0,transformOrigin:"0% 50%"},{scaleX:1,duration:.3,ease:"quart.out"},"start").to([t(".Single__Veil")],{scaleX:0,transformOrigin:"100% 50%",duration:.5,ease:"quart.out"}).addLabel("open","start+=0.3").from([this.$el],{clipPath:"inset(0 100% 0 0)",duration:.75,ease:"quart.out"},"start").from([t(".Title__Part--Left > span")],{transform:"none",xPercent:100,duration:1,ease:"quart.out"},"open+=0.25").from([t(".Title__Part--Right > span")],{transform:"none",xPercent:-100,duration:1,ease:"quart.out"},"open+=0.25").from([t(".Single__Header__Line")],{scaleX:0,duration:1,ease:"quart.out"},"open+=0.25").from([t(".Single__Picture")],{clipPath:"inset(0 0 0 100%)",duration:1,ease:"quart.out"},"open+=0.3").from([t(".Single__Picture img")],{scale:1.1,duration:1,ease:"quart.out"},"open+=0.3").from([t(".Metas .subtitle span")],{yPercent:100,duration:1,ease:"quart.out"},"open+=0.5").from([t(".Metas .italic-current span")],{yPercent:100,duration:1,ease:"quart.out"},"open+=0.6")},onClose(){const t=wt["a"].utils.selector(this.$el);wt["a"].timeline({onComplete:()=>{this.send({type:"CANCEL"})}}).fromTo([t(".Single__Veil")],{autoAlpha:1,scaleX:0,transformOrigin:"100% 50%"},{scaleX:1,duration:.3,ease:"quart.out"},"start").fromTo([this.$el],{clipPath:"inset(0 0% 0 0)"},{clipPath:"inset(0 100% 0 0)",duration:.5,ease:"quart.out"},"start+=0.3")},onLoadSameSettings(){const t=wt["a"].utils.selector(this.$el);wt["a"].timeline({onComplete:()=>{this.send({type:"OPEN_PHOTO",pov:this.state.context.galleryPovDatas})}}).fromTo([t(".Single__Veil")],{autoAlpha:1,scaleX:0,transformOrigin:"100% 50%"},{scaleX:1,duration:.5,ease:"quart.out"},"start")}}});s("fd7c");const WL=Zt()(XL,[["render",zL],["__scopeId","data-v-73d1cd93"]]);var qL=WL;const YL=["data-id"],KL=["src","alt"];function ZL(t,e,s,i,n,o){return Object(E["D"])(),Object(E["i"])("div",{class:Object(E["w"])(["Item",["Item--"+t.item.povDatas.format,null!==t.activeItem&&t.activeItem!==this.item?"disabled":"",this.isAppear?"is-appear":""]])},[Object(E["j"])("button",{"data-id":t.item.id,onClick:e[1]||(e[1]=(...e)=>t.onClick&&t.onClick(...e)),onMouseenter:e[2]||(e[2]=(...e)=>t.onMouseenter&&t.onMouseenter(...e)),onMouseleave:e[3]||(e[3]=(...e)=>t.onMouseleave&&t.onMouseleave(...e))},[Object(E["j"])("picture",null,[Object(E["j"])("img",{class:Object(E["w"])({"is-loaded":t.isLoaded}),src:t.item.url,alt:t.item.povDatas.pose+" "+t.item.povDatas.background,onLoad:e[0]||(e[0]=t=>this.isLoaded=!0)},null,42,KL)])],40,YL)],2)}const $L=Object(uT["r"])({emits:["click","mouseenter","mouseleave"],props:{item:{type:Object,default:null},activeItem:{type:Object,default:null}},data(){return{isLoaded:!1,isAppear:!1}},mounted(){this.$nextTick(()=>{this.isAppear=!0})},computed:{delaySecondBtn(){const t=this.item.delay||0;return t+"s"},delaySecondImg(){const t=this.item.delay||0;return t+.5+"s"}},methods:{onClick(){this.$emit("click",this.item)},onMouseenter(){this.$emit("mouseenter",this.item)},onMouseleave(){this.$emit("mouseleave",this.item)}}}),QL=()=>{Object(E["T"])(t=>({"3fb03d6f":t.delaySecondBtn,"3fb056d6":t.delaySecondImg}))},JL=$L.setup;$L.setup=JL?(t,e)=>(QL(),JL(t,e)):QL;var tM=$L;s("9d29");const eM=Zt()(tM,[["render",ZL],["__scopeId","data-v-33104e48"]]);var sM=eM;
/*!
 * matrix 3.10.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/let iM,nM,oM,aM,rM,lM,cM,hM,dM,uM="transform",pM=uM+"Origin",gM=t=>{let e=t.ownerDocument||t;!(uM in t.style)&&"msTransform"in t.style&&(uM="msTransform",pM=uM+"Origin");while(e.parentNode&&(e=e.parentNode));if(nM=window,cM=new DM,e){iM=e,oM=e.documentElement,aM=e.body,hM=iM.createElementNS("http://www.w3.org/2000/svg","g"),hM.style.transform="none";let t=e.createElement("div"),s=e.createElement("div");aM.appendChild(t),t.appendChild(s),t.style.position="static",t.style[uM]="translate3d(0,0,1px)",dM=s.offsetParent!==t,aM.removeChild(t)}return e},mM=t=>{let e,s;while(t&&t!==aM)s=t._gsap,s&&s.uncache&&s.get(t,"x"),s&&!s.scaleX&&!s.scaleY&&s.renderTransform&&(s.scaleX=s.scaleY=1e-4,s.renderTransform(1,s),e?e.push(s):e=[s]),t=t.parentNode;return e},_M=[],bM=[],fM=()=>nM.pageYOffset||iM.scrollTop||oM.scrollTop||aM.scrollTop||0,vM=()=>nM.pageXOffset||iM.scrollLeft||oM.scrollLeft||aM.scrollLeft||0,xM=t=>t.ownerSVGElement||("svg"===(t.tagName+"").toLowerCase()?t:null),TM=t=>"fixed"===nM.getComputedStyle(t).position||(t=t.parentNode,t&&1===t.nodeType?TM(t):void 0),EM=(t,e)=>{if(t.parentNode&&(iM||gM(t))){let s=xM(t),i=s?s.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",n=s?e?"rect":"g":"div",o=2!==e?0:100,a=3===e?100:0,r="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",l=iM.createElementNS?iM.createElementNS(i.replace(/^https/,"http"),n):iM.createElement(n);return e&&(s?(lM||(lM=EM(t)),l.setAttribute("width",.01),l.setAttribute("height",.01),l.setAttribute("transform","translate("+o+","+a+")"),lM.appendChild(l)):(rM||(rM=EM(t),rM.style.cssText=r),l.style.cssText=r+"width:0.1px;height:0.1px;top:"+a+"px;left:"+o+"px",rM.appendChild(l))),l}throw"Need document and parent."},wM=t=>{let e=new DM,s=0;for(;s<t.numberOfItems;s++)e.multiply(t.getItem(s).matrix);return e},OM=t=>{let e,s=t.getCTM();return s||(e=t.style[uM],t.style[uM]="none",t.appendChild(hM),s=hM.getCTM(),t.removeChild(hM),e?t.style[uM]=e:t.style.removeProperty(uM.replace(/([A-Z])/g,"-$1").toLowerCase())),s||cM.clone()},AM=(t,e)=>{let s,i,n,o,a,r,l=xM(t),c=t===l,h=l?_M:bM,d=t.parentNode;if(t===nM)return t;if(h.length||h.push(EM(t,1),EM(t,2),EM(t,3)),s=l?lM:rM,l)c?(n=OM(t),o=-n.e/n.a,a=-n.f/n.d,i=cM):t.getBBox?(n=t.getBBox(),i=t.transform?t.transform.baseVal:{},i=i.numberOfItems?i.numberOfItems>1?wM(i):i.getItem(0).matrix:cM,o=i.a*n.x+i.c*n.y,a=i.b*n.x+i.d*n.y):(i=new DM,o=a=0),e&&"g"===t.tagName.toLowerCase()&&(o=a=0),(c?l:d).appendChild(s),s.setAttribute("transform","matrix("+i.a+","+i.b+","+i.c+","+i.d+","+(i.e+o)+","+(i.f+a)+")");else{if(o=a=0,dM){i=t.offsetParent,n=t;while(n&&(n=n.parentNode)&&n!==i&&n.parentNode)(nM.getComputedStyle(n)[uM]+"").length>4&&(o=n.offsetLeft,a=n.offsetTop,n=0)}if(r=nM.getComputedStyle(t),"absolute"!==r.position&&"fixed"!==r.position){i=t.offsetParent;while(d&&d!==i)o+=d.scrollLeft||0,a+=d.scrollTop||0,d=d.parentNode}n=s.style,n.top=t.offsetTop-a+"px",n.left=t.offsetLeft-o+"px",n[uM]=r[uM],n[pM]=r[pM],n.position="fixed"===r.position?"fixed":"absolute",t.parentNode.appendChild(s)}return s},yM=(t,e,s,i,n,o,a)=>(t.a=e,t.b=s,t.c=i,t.d=n,t.e=o,t.f=a,t);class DM{constructor(t=1,e=0,s=0,i=1,n=0,o=0){yM(this,t,e,s,i,n,o)}inverse(){let{a:t,b:e,c:s,d:i,e:n,f:o}=this,a=t*i-e*s||1e-10;return yM(this,i/a,-e/a,-s/a,t/a,(s*o-i*n)/a,-(t*o-e*n)/a)}multiply(t){let{a:e,b:s,c:i,d:n,e:o,f:a}=this,r=t.a,l=t.c,c=t.b,h=t.d,d=t.e,u=t.f;return yM(this,r*e+c*i,r*s+c*n,l*e+h*i,l*s+h*n,o+d*e+u*i,a+d*s+u*n)}clone(){return new DM(this.a,this.b,this.c,this.d,this.e,this.f)}equals(t){let{a:e,b:s,c:i,d:n,e:o,f:a}=this;return e===t.a&&s===t.b&&i===t.c&&n===t.d&&o===t.e&&a===t.f}apply(t,e={}){let{x:s,y:i}=t,{a:n,b:o,c:a,d:r,e:l,f:c}=this;return e.x=s*n+i*a+l||0,e.y=s*o+i*r+c||0,e}}function jM(t,e,s,i){if(!t||!t.parentNode||(iM||gM(t)).documentElement===t)return new DM;let n=mM(t),o=xM(t),a=o?_M:bM,r=AM(t,s),l=a[0].getBoundingClientRect(),c=a[1].getBoundingClientRect(),h=a[2].getBoundingClientRect(),d=r.parentNode,u=!i&&TM(t),p=new DM((c.left-l.left)/100,(c.top-l.top)/100,(h.left-l.left)/100,(h.top-l.top)/100,l.left+(u?0:vM()),l.top+(u?0:fM()));if(d.removeChild(r),n){l=n.length;while(l--)c=n[l],c.scaleX=c.scaleY=0,c.renderTransform(1,c)}return e?p.inverse():p}
/*!
 * Draggable 3.10.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
 */let RM,SM,CM,IM,PM,LM,MM,kM,NM,FM,BM,UM,HM,GM,VM,zM,XM,WM,qM,YM,KM,ZM=()=>"undefined"!==typeof window,$M=()=>RM||ZM()&&(RM=window.gsap)&&RM.registerPlugin&&RM,QM=t=>"function"===typeof t,JM=t=>"object"===typeof t,tk=t=>"undefined"===typeof t,ek=()=>!1,sk="transform",ik="transformOrigin",nk=t=>Math.round(1e4*t)/1e4,ok=Array.isArray,ak=(t,e)=>{let s=CM.createElementNS?CM.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):CM.createElement(t);return s.style?s:CM.createElement(t)},rk=180/Math.PI,lk=1e20,ck=new DM,hk=Date.now||(()=>(new Date).getTime()),dk=[],uk={},pk=0,gk=/^(?:a|input|textarea|button|select)$/i,mk=0,_k={},bk={},fk=(t,e)=>{let s,i={};for(s in t)i[s]=e?t[s]*e:t[s];return i},vk=(t,e)=>{for(let s in e)s in t||(t[s]=e[s]);return t},xk=(t,e)=>{let s,i=t.length;while(i--)e?t[i].style.touchAction=e:t[i].style.removeProperty("touch-action"),s=t[i].children,s&&s.length&&xk(s,e)},Tk=()=>dk.forEach(t=>t()),Ek=t=>{dk.push(t),1===dk.length&&RM.ticker.add(Tk)},wk=()=>!dk.length&&RM.ticker.remove(Tk),Ok=t=>{let e=dk.length;while(e--)dk[e]===t&&dk.splice(e,1);RM.to(wk,{overwrite:!0,delay:15,duration:0,onComplete:wk,data:"_draggable"})},Ak=(t,e)=>{for(let s in e)s in t||(t[s]=e[s]);return t},yk=(t,e,s,i)=>{if(t.addEventListener){let n=HM[e];i=i||(BM?{passive:!1}:null),t.addEventListener(n||e,s,i),n&&e!==n&&t.addEventListener(e,s,i)}},Dk=(t,e,s)=>{if(t.removeEventListener){let i=HM[e];t.removeEventListener(i||e,s),i&&e!==i&&t.removeEventListener(e,s)}},jk=t=>{t.preventDefault&&t.preventDefault(),t.preventManipulation&&t.preventManipulation()},Rk=(t,e)=>{let s=t.length;while(s--)if(t[s].identifier===e)return!0},Sk=t=>{VM=t.touches&&GM<t.touches.length,Dk(t.target,"touchend",Sk)},Ck=t=>{VM=t.touches&&GM<t.touches.length,yk(t.target,"touchend",Sk)},Ik=t=>SM.pageYOffset||t.scrollTop||t.documentElement.scrollTop||t.body.scrollTop||0,Pk=t=>SM.pageXOffset||t.scrollLeft||t.documentElement.scrollLeft||t.body.scrollLeft||0,Lk=(t,e)=>{yk(t,"scroll",e),kk(t.parentNode)||Lk(t.parentNode,e)},Mk=(t,e)=>{Dk(t,"scroll",e),kk(t.parentNode)||Mk(t.parentNode,e)},kk=t=>!(t&&t!==IM&&9!==t.nodeType&&t!==CM.body&&t!==SM&&t.nodeType&&t.parentNode),Nk=(t,e)=>{let s="x"===e?"Width":"Height",i="scroll"+s,n="client"+s;return Math.max(0,kk(t)?Math.max(IM[i],PM[i])-(SM["inner"+s]||IM[n]||PM[n]):t[i]-t[n])},Fk=(t,e)=>{let s=Nk(t,"x"),i=Nk(t,"y");kk(t)?t=bk:Fk(t.parentNode,e),t._gsMaxScrollX=s,t._gsMaxScrollY=i,e||(t._gsScrollX=t.scrollLeft||0,t._gsScrollY=t.scrollTop||0)},Bk=(t,e,s)=>{let i=t.style;i&&(tk(i[e])&&(e=NM(e,t)||e),null==s?i.removeProperty&&i.removeProperty(e.replace(/([A-Z])/g,"-$1").toLowerCase()):i[e]=s)},Uk=t=>SM.getComputedStyle(t instanceof Element?t:t.host||(t.parentNode||{}).host||t),Hk={},Gk=t=>{if(t===SM)return Hk.left=Hk.top=0,Hk.width=Hk.right=IM.clientWidth||t.innerWidth||PM.clientWidth||0,Hk.height=Hk.bottom=(t.innerHeight||0)-20<IM.clientHeight?IM.clientHeight:t.innerHeight||PM.clientHeight||0,Hk;let e=t.ownerDocument||CM,s=tk(t.pageX)?t.nodeType||tk(t.left)||tk(t.top)?FM(t)[0].getBoundingClientRect():t:{left:t.pageX-Pk(e),top:t.pageY-Ik(e),right:t.pageX-Pk(e)+1,bottom:t.pageY-Ik(e)+1};return tk(s.right)&&!tk(s.width)?(s.right=s.left+s.width,s.bottom=s.top+s.height):tk(s.width)&&(s={width:s.right-s.left,height:s.bottom-s.top,right:s.right,left:s.left,bottom:s.bottom,top:s.top}),s},Vk=(t,e,s)=>{let i,n=t.vars,o=n[s],a=t._listeners[e];return QM(o)&&(i=o.apply(n.callbackScope||t,n[s+"Params"]||[t.pointerEvent])),a&&!1===t.dispatchEvent(e)&&(i=!1),i},zk=(t,e)=>{let s,i,n,o=FM(t)[0];return o.nodeType||o===SM?Wk(o,e):tk(t.left)?(i=t.min||t.minX||t.minRotation||0,s=t.min||t.minY||0,{left:i,top:s,width:(t.max||t.maxX||t.maxRotation||0)-i,height:(t.max||t.maxY||0)-s}):(n={x:0,y:0},{left:t.left-n.x,top:t.top-n.y,width:t.width,height:t.height})},Xk={},Wk=(t,e)=>{e=FM(e)[0];let s,i,n,o,a,r,l,c,h,d,u,p,g,m,_=t.getBBox&&t.ownerSVGElement,b=t.ownerDocument||CM;if(t===SM)n=Ik(b),s=Pk(b),i=s+(b.documentElement.clientWidth||t.innerWidth||b.body.clientWidth||0),o=n+((t.innerHeight||0)-20<b.documentElement.clientHeight?b.documentElement.clientHeight:t.innerHeight||b.body.clientHeight||0);else{if(e===SM||tk(e))return t.getBoundingClientRect();s=n=0,_?(d=t.getBBox(),u=d.width,p=d.height):(t.viewBox&&(d=t.viewBox.baseVal)&&(s=d.x||0,n=d.y||0,u=d.width,p=d.height),u||(g=Uk(t),d="border-box"===g.boxSizing,u=(parseFloat(g.width)||t.clientWidth||0)+(d?0:parseFloat(g.borderLeftWidth)+parseFloat(g.borderRightWidth)),p=(parseFloat(g.height)||t.clientHeight||0)+(d?0:parseFloat(g.borderTopWidth)+parseFloat(g.borderBottomWidth)))),i=u,o=p}return t===e?{left:s,top:n,width:i-s,height:o-n}:(a=jM(e,!0).multiply(jM(t)),r=a.apply({x:s,y:n}),l=a.apply({x:i,y:n}),c=a.apply({x:i,y:o}),h=a.apply({x:s,y:o}),s=Math.min(r.x,l.x,c.x,h.x),n=Math.min(r.y,l.y,c.y,h.y),m=e.parentNode||{},{left:s+(m.scrollLeft||0),top:n+(m.scrollTop||0),width:Math.max(r.x,l.x,c.x,h.x)-s,height:Math.max(r.y,l.y,c.y,h.y)-n})},qk=(t,e,s,i,n,o)=>{let a,r,l,c={};if(e)if(1!==n&&e instanceof Array){if(c.end=a=[],l=e.length,JM(e[0]))for(r=0;r<l;r++)a[r]=fk(e[r],n);else for(r=0;r<l;r++)a[r]=e[r]*n;s+=1.1,i-=1.1}else QM(e)?c.end=s=>{let i,o,a=e.call(t,s);if(1!==n)if(JM(a)){for(o in i={},a)i[o]=a[o]*n;a=i}else a*=n;return a}:c.end=e;return(s||0===s)&&(c.max=s),(i||0===i)&&(c.min=i),o&&(c.velocity=0),c},Yk=t=>{let e;return!(!t||!t.getAttribute||t===PM)&&(!("true"!==(e=t.getAttribute("data-clickable"))&&("false"===e||!t.onclick&&!gk.test(t.nodeName+"")&&"true"!==t.getAttribute("contentEditable")))||Yk(t.parentNode))},Kk=(t,e)=>{let s,i=t.length;while(i--)s=t[i],s.ondragstart=s.onselectstart=e?null:ek,RM.set(s,{lazy:!0,userSelect:e?"text":"none"})},Zk=t=>"fixed"===Uk(t).position||(t=t.parentNode,t&&1===t.nodeType?Zk(t):void 0),$k=function(t,e){t=RM.utils.toArray(t)[0],e=e||{};let s,i,n,o,a,r,l=document.createElement("div"),c=l.style,h=t.firstChild,d=0,u=0,p=t.scrollTop,g=t.scrollLeft,m=t.scrollWidth,_=t.scrollHeight,b=0,f=0,v=0;YM&&!1!==e.force3D?(a="translate3d(",r="px,0px)"):sk&&(a="translate(",r="px)"),this.scrollTop=function(t,e){if(!arguments.length)return-this.top();this.top(-t,e)},this.scrollLeft=function(t,e){if(!arguments.length)return-this.left();this.left(-t,e)},this.left=function(s,i){if(!arguments.length)return-(t.scrollLeft+u);let n=t.scrollLeft-g,o=u;if((n>2||n<-2)&&!i)return g=t.scrollLeft,RM.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-g),void(e.onKill&&e.onKill());s=-s,s<0?(u=s-.5|0,s=0):s>f?(u=s-f|0,s=f):u=0,(u||o)&&(this._skip||(c[sk]=a+-u+"px,"+-d+r),u+b>=0&&(c.paddingRight=u+b+"px")),t.scrollLeft=0|s,g=t.scrollLeft},this.top=function(s,i){if(!arguments.length)return-(t.scrollTop+d);let n=t.scrollTop-p,o=d;if((n>2||n<-2)&&!i)return p=t.scrollTop,RM.killTweensOf(this,{top:1,scrollTop:1}),this.top(-p),void(e.onKill&&e.onKill());s=-s,s<0?(d=s-.5|0,s=0):s>v?(d=s-v|0,s=v):d=0,(d||o)&&(this._skip||(c[sk]=a+-u+"px,"+-d+r)),t.scrollTop=0|s,p=t.scrollTop},this.maxScrollTop=()=>v,this.maxScrollLeft=()=>f,this.disable=function(){h=l.firstChild;while(h)o=h.nextSibling,t.appendChild(h),h=o;t===l.parentNode&&t.removeChild(l)},this.enable=function(){if(h=t.firstChild,h!==l){while(h)o=h.nextSibling,l.appendChild(h),h=o;t.appendChild(l),this.calibrate()}},this.calibrate=function(e){let o,a,r,h=t.clientWidth===s;p=t.scrollTop,g=t.scrollLeft,h&&t.clientHeight===i&&l.offsetHeight===n&&m===t.scrollWidth&&_===t.scrollHeight&&!e||((d||u)&&(a=this.left(),r=this.top(),this.left(-t.scrollLeft),this.top(-t.scrollTop)),o=Uk(t),h&&!e||(c.display="block",c.width="auto",c.paddingRight="0px",b=Math.max(0,t.scrollWidth-t.clientWidth),b&&(b+=parseFloat(o.paddingLeft)+(KM?parseFloat(o.paddingRight):0))),c.display="inline-block",c.position="relative",c.overflow="visible",c.verticalAlign="top",c.boxSizing="content-box",c.width="100%",c.paddingRight=b+"px",KM&&(c.paddingBottom=o.paddingBottom),s=t.clientWidth,i=t.clientHeight,m=t.scrollWidth,_=t.scrollHeight,f=t.scrollWidth-s,v=t.scrollHeight-i,n=l.offsetHeight,c.display="block",(a||r)&&(this.left(a),this.top(r)))},this.content=l,this.element=t,this._skip=!1,this.enable()},Qk=t=>{if(ZM()&&document.body){let t=window&&window.navigator;SM=window,CM=document,IM=CM.documentElement,PM=CM.body,LM=ak("div"),qM=!!window.PointerEvent,MM=ak("div"),MM.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",WM="grab"===MM.style.cursor?"grab":"move",zM=t&&-1!==t.userAgent.toLowerCase().indexOf("android"),UM="ontouchstart"in IM&&"orientation"in SM||t&&(t.MaxTouchPoints>0||t.msMaxTouchPoints>0),KM=function(){let t,e=ak("div"),s=ak("div"),i=s.style,n=PM;return i.display="inline-block",i.position="relative",e.style.cssText=s.innerHTML="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",e.appendChild(s),n.appendChild(e),t=s.offsetHeight+18>e.scrollHeight,n.removeChild(e),t}(),HM=function(t){let e=t.split(","),s=("onpointerdown"in LM?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in LM?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":t).split(","),i={},n=4;while(--n>-1)i[e[n]]=s[n],i[s[n]]=e[n];try{IM.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){BM=1}}))}catch(o){}return i}("touchstart,touchmove,touchend,touchcancel"),yk(CM,"touchcancel",ek),yk(SM,"touchmove",ek),PM&&PM.addEventListener("touchstart",ek),yk(CM,"contextmenu",(function(){for(let t in uk)uk[t].isPressed&&uk[t].endDrag()})),RM=kM=$M()}RM?(XM=RM.plugins.inertia,NM=RM.utils.checkPrefix,sk=NM(sk),ik=NM(ik),FM=RM.utils.toArray,YM=!!NM("perspective")):t&&console.warn("Please gsap.registerPlugin(Draggable)")};class Jk{constructor(t){this._listeners={},this.target=t||this}addEventListener(t,e){let s=this._listeners[t]||(this._listeners[t]=[]);~s.indexOf(e)||s.push(e)}removeEventListener(t,e){let s=this._listeners[t],i=s&&s.indexOf(e)||-1;i>-1&&s.splice(i,1)}dispatchEvent(t){let e;return(this._listeners[t]||[]).forEach(s=>!1===s.call(this,{type:t,target:this.target})&&(e=!1)),e}}class tN extends Jk{constructor(t,e){super(),kM||Qk(1),t=FM(t)[0],XM||(XM=RM.plugins.inertia),this.vars=e=fk(e||{}),this.target=t,this.x=this.y=this.rotation=0,this.dragResistance=parseFloat(e.dragResistance)||0,this.edgeResistance=isNaN(e.edgeResistance)?1:parseFloat(e.edgeResistance)||0,this.lockAxis=e.lockAxis,this.autoScroll=e.autoScroll||0,this.lockedAxis=null,this.allowEventDefault=!!e.allowEventDefault,RM.getProperty(t,"x");let s,i,n,o,a,r,l,c,h,d,u,p,g,m,_,b,f,v,x,T,E,w,O,A,y,D,j,R,S,C,I,P,L=(e.type||"x,y").toLowerCase(),M=~L.indexOf("x")||~L.indexOf("y"),k=-1!==L.indexOf("rotation"),N=k?"rotation":M?"x":"left",F=M?"y":"top",B=!(!~L.indexOf("x")&&!~L.indexOf("left")&&"scroll"!==L),U=!(!~L.indexOf("y")&&!~L.indexOf("top")&&"scroll"!==L),H=e.minimumMovement||2,G=this,V=FM(e.trigger||e.handle||t),z={},X=0,W=!1,q=e.autoScrollMarginTop||40,Y=e.autoScrollMarginRight||40,K=e.autoScrollMarginBottom||40,Z=e.autoScrollMarginLeft||40,$=e.clickableTest||Yk,Q=0,J=t._gsap||RM.core.getCache(t),tt=Zk(t),et=(e,s)=>parseFloat(J.get(t,e,s)),st=t.ownerDocument||CM,it=t=>(jk(t),t.stopImmediatePropagation&&t.stopImmediatePropagation(),!1),nt=e=>{if(G.autoScroll&&G.isDragging&&(W||f)){let e,s,i,n,o,a,r,l,c=t,h=15*G.autoScroll;W=!1,bk.scrollTop=null!=SM.pageYOffset?SM.pageYOffset:null!=st.documentElement.scrollTop?st.documentElement.scrollTop:st.body.scrollTop,bk.scrollLeft=null!=SM.pageXOffset?SM.pageXOffset:null!=st.documentElement.scrollLeft?st.documentElement.scrollLeft:st.body.scrollLeft,n=G.pointerX-bk.scrollLeft,o=G.pointerY-bk.scrollTop;while(c&&!s)s=kk(c.parentNode),e=s?bk:c.parentNode,i=s?{bottom:Math.max(IM.clientHeight,SM.innerHeight||0),right:Math.max(IM.clientWidth,SM.innerWidth||0),left:0,top:0}:e.getBoundingClientRect(),a=r=0,U&&(l=e._gsMaxScrollY-e.scrollTop,l<0?r=l:o>i.bottom-K&&l?(W=!0,r=Math.min(l,h*(1-Math.max(0,i.bottom-o)/K)|0)):o<i.top+q&&e.scrollTop&&(W=!0,r=-Math.min(e.scrollTop,h*(1-Math.max(0,o-i.top)/q)|0)),r&&(e.scrollTop+=r)),B&&(l=e._gsMaxScrollX-e.scrollLeft,l<0?a=l:n>i.right-Y&&l?(W=!0,a=Math.min(l,h*(1-Math.max(0,i.right-n)/Y)|0)):n<i.left+Z&&e.scrollLeft&&(W=!0,a=-Math.min(e.scrollLeft,h*(1-Math.max(0,n-i.left)/Z)|0)),a&&(e.scrollLeft+=a)),s&&(a||r)&&(SM.scrollTo(e.scrollLeft,e.scrollTop),ft(G.pointerX+a,G.pointerY+r)),c=e}if(f){let{x:s,y:n}=G;k?(G.deltaX=s-parseFloat(J.rotation),G.rotation=s,J.rotation=s+"deg",J.renderTransform(1,J)):i?(U&&(G.deltaY=n-i.top(),i.top(n)),B&&(G.deltaX=s-i.left(),i.left(s))):M?(U&&(G.deltaY=n-parseFloat(J.y),J.y=n+"px"),B&&(G.deltaX=s-parseFloat(J.x),J.x=s+"px"),J.renderTransform(1,J)):(U&&(G.deltaY=n-parseFloat(t.style.top||0),t.style.top=n+"px"),B&&(G.deltaX=s-parseFloat(t.style.left||0),t.style.left=s+"px")),!c||e||R||(R=!0,!1===Vk(G,"drag","onDrag")&&(B&&(G.x-=G.deltaX),U&&(G.y-=G.deltaY),nt(!0)),R=!1)}f=!1},ot=(e,s)=>{let n,o,{x:a,y:r}=G;t._gsap||(J=RM.core.getCache(t)),J.uncache&&RM.getProperty(t,"x"),M?(G.x=parseFloat(J.x),G.y=parseFloat(J.y)):k?G.x=G.rotation=parseFloat(J.rotation):i?(G.y=i.top(),G.x=i.left()):(G.y=parseFloat(t.style.top||(o=Uk(t))&&o.top)||0,G.x=parseFloat(t.style.left||(o||{}).left)||0),(x||T||E)&&!s&&(G.isDragging||G.isThrowing)&&(E&&(_k.x=G.x,_k.y=G.y,n=E(_k),n.x!==G.x&&(G.x=n.x,f=!0),n.y!==G.y&&(G.y=n.y,f=!0)),x&&(n=x(G.x),n!==G.x&&(G.x=n,k&&(G.rotation=n),f=!0)),T&&(n=T(G.y),n!==G.y&&(G.y=n),f=!0)),f&&nt(!0),e||(G.deltaX=G.x-a,G.deltaY=G.y-r,Vk(G,"throwupdate","onThrowUpdate"))},at=(t,e,s,i)=>(null==e&&(e=-lk),null==s&&(s=lk),QM(t)?n=>{let o=G.isPressed?1-G.edgeResistance:1;return t.call(G,n>s?s+(n-s)*o:n<e?e+(n-e)*o:n)*i}:ok(t)?i=>{let n,o,a=t.length,r=0,l=lk;while(--a>-1)n=t[a],o=n-i,o<0&&(o=-o),o<l&&n>=e&&n<=s&&(r=a,l=o);return t[r]}:isNaN(t)?t=>t:()=>t*i),rt=(t,e,s,i,n,o,a)=>(o=o&&o<lk?o*o:lk,QM(t)?r=>{let l,c,h,d=G.isPressed?1-G.edgeResistance:1,u=r.x,p=r.y;return r.x=u=u>s?s+(u-s)*d:u<e?e+(u-e)*d:u,r.y=p=p>n?n+(p-n)*d:p<i?i+(p-i)*d:p,l=t.call(G,r),l!==r&&(r.x=l.x,r.y=l.y),1!==a&&(r.x*=a,r.y*=a),o<lk&&(c=r.x-u,h=r.y-p,c*c+h*h>o&&(r.x=u,r.y=p)),r}:ok(t)?e=>{let s,i,n,a,r=t.length,l=0,c=lk;while(--r>-1)n=t[r],s=n.x-e.x,i=n.y-e.y,a=s*s+i*i,a<c&&(l=r,c=a);return c<=o?t[l]:e}:t=>t),lt=()=>{let s,n,o,a;l=!1,i?(i.calibrate(),G.minX=u=-i.maxScrollLeft(),G.minY=g=-i.maxScrollTop(),G.maxX=d=G.maxY=p=0,l=!0):e.bounds&&(s=zk(e.bounds,t.parentNode),k?(G.minX=u=s.left,G.maxX=d=s.left+s.width,G.minY=g=G.maxY=p=0):tk(e.bounds.maxX)&&tk(e.bounds.maxY)?(n=zk(t,t.parentNode),G.minX=u=Math.round(et(N,"px")+s.left-n.left),G.minY=g=Math.round(et(F,"px")+s.top-n.top),G.maxX=d=Math.round(u+(s.width-n.width)),G.maxY=p=Math.round(g+(s.height-n.height))):(s=e.bounds,G.minX=u=s.minX,G.minY=g=s.minY,G.maxX=d=s.maxX,G.maxY=p=s.maxY),u>d&&(G.minX=d,G.maxX=d=u,u=G.minX),g>p&&(G.minY=p,G.maxY=p=g,g=G.minY),k&&(G.minRotation=u,G.maxRotation=d),l=!0),e.liveSnap&&(o=!0===e.liveSnap?e.snap||{}:e.liveSnap,a=ok(o)||QM(o),k?(x=at(a?o:o.rotation,u,d,1),T=null):o.points?E=rt(a?o:o.points,u,d,g,p,o.radius,i?-1:1):(B&&(x=at(a?o:o.x||o.left||o.scrollLeft,u,d,i?-1:1)),U&&(T=at(a?o:o.y||o.top||o.scrollTop,g,p,i?-1:1))))},ct=()=>{G.isThrowing=!1,Vk(G,"throwcomplete","onThrowComplete")},ht=()=>{G.isThrowing=!1},dt=(s,n)=>{let o,a,r,c;s&&XM?(!0===s&&(o=e.snap||e.liveSnap||{},a=ok(o)||QM(o),s={resistance:(e.throwResistance||e.resistance||1e3)/(k?10:1)},k?s.rotation=qk(G,a?o:o.rotation,d,u,1,n):(B&&(s[N]=qk(G,a?o:o.points||o.x||o.left,d,u,i?-1:1,n||"x"===G.lockedAxis)),U&&(s[F]=qk(G,a?o:o.points||o.y||o.top,p,g,i?-1:1,n||"y"===G.lockedAxis)),(o.points||ok(o)&&JM(o[0]))&&(s.linkedProps=N+","+F,s.radius=o.radius))),G.isThrowing=!0,c=isNaN(e.overshootTolerance)?1===e.edgeResistance?0:1-G.edgeResistance+.2:e.overshootTolerance,s.duration||(s.duration={max:Math.max(e.minDuration||0,"maxDuration"in e?e.maxDuration:2),min:isNaN(e.minDuration)?0===c||JM(s)&&s.resistance>1e3?0:.5:e.minDuration,overshoot:c}),G.tween=r=RM.to(i||t,{inertia:s,data:"_draggable",onComplete:ct,onInterrupt:ht,onUpdate:e.fastMode?Vk:ot,onUpdateParams:e.fastMode?[G,"onthrowupdate","onThrowUpdate"]:o&&o.radius?[!1,!0]:[]}),e.fastMode||(i&&(i._skip=!0),r.render(1e9,!0,!0),ot(!0,!0),G.endX=G.x,G.endY=G.y,k&&(G.endRotation=G.x),r.play(0),ot(!0,!0),i&&(i._skip=!1))):l&&G.applyBounds()},ut=e=>{let s,i=A;A=jM(t.parentNode,!0),e&&G.isPressed&&!A.equals(i||new DM)&&(s=i.inverse().apply({x:n,y:o}),A.apply(s,s),n=s.x,o=s.y),A.equals(ck)&&(A=null)},pt=()=>{let e,s,c,h=1-G.edgeResistance,m=tt?Pk(st):0,_=tt?Ik(st):0;ut(!1),Xk.x=G.pointerX-m,Xk.y=G.pointerY-_,A&&A.apply(Xk,Xk),n=Xk.x,o=Xk.y,f&&(ft(G.pointerX,G.pointerY),nt(!0)),P=jM(t),i?(lt(),r=i.top(),a=i.left()):(gt()?(ot(!0,!0),lt()):G.applyBounds(),k?(e=t.ownerSVGElement?[J.xOrigin-t.getBBox().x,J.yOrigin-t.getBBox().y]:(Uk(t)[ik]||"0 0").split(" "),b=G.rotationOrigin=jM(t).apply({x:parseFloat(e[0])||0,y:parseFloat(e[1])||0}),ot(!0,!0),s=G.pointerX-b.x-m,c=b.y-G.pointerY+_,a=G.x,r=G.y=Math.atan2(c,s)*rk):(r=et(F,"px"),a=et(N,"px"))),l&&h&&(a>d?a=d+(a-d)/h:a<u&&(a=u-(u-a)/h),k||(r>p?r=p+(r-p)/h:r<g&&(r=g-(g-r)/h))),G.startX=a=nk(a),G.startY=r=nk(r)},gt=()=>G.tween&&G.tween.isActive(),mt=()=>{!MM.parentNode||gt()||G.isDragging||MM.parentNode.removeChild(MM)},_t=(a,r)=>{let l;if(!s||G.isPressed||!a||!("mousedown"!==a.type&&"pointerdown"!==a.type||r)&&hk()-Q<30&&HM[G.pointerEvent.type])I&&a&&s&&jk(a);else{if(y=gt(),G.pointerEvent=a,HM[a.type]?(O=~a.type.indexOf("touch")?a.currentTarget||a.target:st,yk(O,"touchend",vt),yk(O,"touchmove",bt),yk(O,"touchcancel",vt),yk(st,"touchstart",Ck)):(O=null,yk(st,"mousemove",bt)),j=null,qM&&O||(yk(st,"mouseup",vt),a&&a.target&&yk(a.target,"mouseup",vt)),w=$.call(G,a.target)&&!1===e.dragClickables&&!r,w)return yk(a.target,"change",vt),Vk(G,"pressInit","onPressInit"),Vk(G,"press","onPress"),Kk(V,!0),void(I=!1);if(D=!(!O||B===U||!1===G.vars.allowNativeTouchScrolling||G.vars.allowContextMenu&&a&&(a.ctrlKey||a.which>2))&&(B?"y":"x"),I=!D&&!G.allowEventDefault,I&&(jk(a),yk(SM,"touchforcechange",jk)),a.changedTouches?(a=m=a.changedTouches[0],_=a.identifier):a.pointerId?_=a.pointerId:m=_=null,GM++,Ek(nt),o=G.pointerY=a.pageY,n=G.pointerX=a.pageX,Vk(G,"pressInit","onPressInit"),(D||G.autoScroll)&&Fk(t.parentNode),!t.parentNode||!G.autoScroll||i||k||!t.parentNode._gsMaxScrollX||MM.parentNode||t.getBBox||(MM.style.width=t.parentNode.scrollWidth+"px",t.parentNode.appendChild(MM)),pt(),G.tween&&G.tween.kill(),G.isThrowing=!1,RM.killTweensOf(i||t,z,!0),i&&RM.killTweensOf(t,{scrollTo:1},!0),G.tween=G.lockedAxis=null,(e.zIndexBoost||!k&&!i&&!1!==e.zIndexBoost)&&(t.style.zIndex=tN.zIndex++),G.isPressed=!0,c=!(!e.onDrag&&!G._listeners.drag),h=!(!e.onMove&&!G._listeners.move),!1!==e.cursor||e.activeCursor){l=V.length;while(--l>-1)RM.set(V[l],{cursor:e.activeCursor||e.cursor||("grab"===WM?"grabbing":WM)})}Vk(G,"press","onPress")}},bt=e=>{let i,a,r,l,c,d,u=e;if(s&&!VM&&G.isPressed&&e){if(G.pointerEvent=e,i=e.changedTouches,i){if(e=i[0],e!==m&&e.identifier!==_){l=i.length;while(--l>-1&&(e=i[l]).identifier!==_&&e.target!==t);if(l<0)return}}else if(e.pointerId&&_&&e.pointerId!==_)return;O&&D&&!j&&(Xk.x=e.pageX-(tt?Pk(st):0),Xk.y=e.pageY-(tt?Ik(st):0),A&&A.apply(Xk,Xk),a=Xk.x,r=Xk.y,c=Math.abs(a-n),d=Math.abs(r-o),(c!==d&&(c>H||d>H)||zM&&D===j)&&(j=c>d&&B?"x":"y",D&&j!==D&&yk(SM,"touchforcechange",jk),!1!==G.vars.lockAxisOnTouchScroll&&B&&U&&(G.lockedAxis="x"===j?"y":"x",QM(G.vars.onLockAxis)&&G.vars.onLockAxis.call(G,u)),zM&&D===j))?vt(u):(G.allowEventDefault||D&&(!j||D===j)||!1===u.cancelable?I&&(I=!1):(jk(u),I=!0),G.autoScroll&&(W=!0),ft(e.pageX,e.pageY,h))}else I&&e&&s&&jk(e)},ft=(t,e,s)=>{let i,c,h,m,_,v,w=1-G.dragResistance,O=1-G.edgeResistance,y=G.pointerX,D=G.pointerY,j=r,R=G.x,S=G.y,C=G.endX,I=G.endY,P=G.endRotation,L=f;G.pointerX=t,G.pointerY=e,tt&&(t-=Pk(st),e-=Ik(st)),k?(m=Math.atan2(b.y-e,t-b.x)*rk,_=G.y-m,_>180?(r-=360,G.y=m):_<-180&&(r+=360,G.y=m),G.x!==a||Math.abs(r-m)>H?(G.y=m,h=a+(r-m)*w):h=a):(A&&(v=t*A.a+e*A.c+A.e,e=t*A.b+e*A.d+A.f,t=v),c=e-o,i=t-n,c<H&&c>-H&&(c=0),i<H&&i>-H&&(i=0),(G.lockAxis||G.lockedAxis)&&(i||c)&&(v=G.lockedAxis,v||(G.lockedAxis=v=B&&Math.abs(i)>Math.abs(c)?"y":U?"x":null,v&&QM(G.vars.onLockAxis)&&G.vars.onLockAxis.call(G,G.pointerEvent)),"y"===v?c=0:"x"===v&&(i=0)),h=nk(a+i*w),m=nk(r+c*w)),(x||T||E)&&(G.x!==h||G.y!==m&&!k)&&(E&&(_k.x=h,_k.y=m,v=E(_k),h=nk(v.x),m=nk(v.y)),x&&(h=nk(x(h))),T&&(m=nk(T(m)))),l&&(h>d?h=d+Math.round((h-d)*O):h<u&&(h=u+Math.round((h-u)*O)),k||(m>p?m=Math.round(p+(m-p)*O):m<g&&(m=Math.round(g+(m-g)*O)))),(G.x!==h||G.y!==m&&!k)&&(k?(G.endRotation=G.x=G.endX=h,f=!0):(U&&(G.y=G.endY=m,f=!0),B&&(G.x=G.endX=h,f=!0)),s&&!1===Vk(G,"move","onMove")?(G.pointerX=y,G.pointerY=D,r=j,G.x=R,G.y=S,G.endX=C,G.endY=I,G.endRotation=P,f=L):!G.isDragging&&G.isPressed&&(G.isDragging=!0,Vk(G,"dragstart","onDragStart")))},vt=(i,n)=>{if(!s||!G.isPressed||i&&null!=_&&!n&&(i.pointerId&&i.pointerId!==_&&i.target!==t||i.changedTouches&&!Rk(i.changedTouches,_)))return void(I&&i&&s&&jk(i));G.isPressed=!1;let o,a,r,l,c,h=i,d=G.isDragging,u=G.vars.allowContextMenu&&i&&(i.ctrlKey||i.which>2),p=RM.delayedCall(.001,mt);if(O?(Dk(O,"touchend",vt),Dk(O,"touchmove",bt),Dk(O,"touchcancel",vt),Dk(st,"touchstart",Ck)):Dk(st,"mousemove",bt),Dk(SM,"touchforcechange",jk),qM&&O||(Dk(st,"mouseup",vt),i&&i.target&&Dk(i.target,"mouseup",vt)),f=!1,d&&(X=mk=hk(),G.isDragging=!1),w&&!u)return i&&(Dk(i.target,"change",vt),G.pointerEvent=h),Kk(V,!1),Vk(G,"release","onRelease"),Vk(G,"click","onClick"),void(w=!1);Ok(nt),a=V.length;while(--a>-1)Bk(V[a],"cursor",e.cursor||(!1!==e.cursor?WM:null));if(GM--,i){if(o=i.changedTouches,o&&(i=o[0],i!==m&&i.identifier!==_)){a=o.length;while(--a>-1&&(i=o[a]).identifier!==_&&i.target!==t);if(a<0)return}G.pointerEvent=h,G.pointerX=i.pageX,G.pointerY=i.pageY}return u&&h?(jk(h),I=!0,Vk(G,"release","onRelease")):h&&!d?(I=!1,y&&(e.snap||e.bounds)&&dt(e.inertia||e.throwProps),Vk(G,"release","onRelease"),zM&&"touchmove"===h.type||-1!==h.type.indexOf("cancel")||(Vk(G,"click","onClick"),hk()-Q<300&&Vk(G,"doubleclick","onDoubleClick"),l=h.target||t,Q=hk(),c=()=>{Q===S||!G.enabled()||G.isPressed||h.defaultPrevented||(l.click?l.click():st.createEvent&&(r=st.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,SM,1,G.pointerEvent.screenX,G.pointerEvent.screenY,G.pointerX,G.pointerY,!1,!1,!1,!1,0,null),l.dispatchEvent(r)))},zM||h.defaultPrevented||RM.delayedCall(.05,c))):(dt(e.inertia||e.throwProps),G.allowEventDefault||!h||!1===e.dragClickables&&$.call(G,h.target)||!d||D&&(!j||D!==j)||!1===h.cancelable?I=!1:(I=!0,jk(h)),Vk(G,"release","onRelease")),gt()&&p.duration(G.tween.duration()),d&&Vk(G,"dragend","onDragEnd"),!0},xt=e=>{if(e&&G.isDragging&&!i){let s=e.target||t.parentNode,i=s.scrollLeft-s._gsScrollX,a=s.scrollTop-s._gsScrollY;(i||a)&&(A?(n-=i*A.a+a*A.c,o-=a*A.d+i*A.b):(n-=i,o-=a),s._gsScrollX+=i,s._gsScrollY+=a,ft(G.pointerX,G.pointerY))}},Tt=t=>{let e=hk(),s=e-Q<100,i=e-X<50,n=s&&S===Q,o=G.pointerEvent&&G.pointerEvent.defaultPrevented,a=s&&C===Q,r=t.isTrusted||null==t.isTrusted&&s&&n;if((n||i&&!1!==G.vars.suppressClickOnDrag)&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),s&&(!G.pointerEvent||!G.pointerEvent.defaultPrevented)&&(!n||r&&!a))return r&&n&&(C=Q),void(S=Q);(G.isPressed||i||s)&&(r&&t.detail&&s&&!o||jk(t)),s||i||(t&&t.target&&(G.pointerEvent=t),Vk(G,"click","onClick"))},Et=t=>A?{x:t.x*A.a+t.y*A.c+A.e,y:t.x*A.b+t.y*A.d+A.f}:{x:t.x,y:t.y};v=tN.get(t),v&&v.kill(),this.startDrag=(e,s)=>{let i,a,r,l;_t(e||G.pointerEvent,!0),s&&!G.hitTest(e||G.pointerEvent)&&(i=Gk(e||G.pointerEvent),a=Gk(t),r=Et({x:i.left+i.width/2,y:i.top+i.height/2}),l=Et({x:a.left+a.width/2,y:a.top+a.height/2}),n-=r.x-l.x,o-=r.y-l.y),G.isDragging||(G.isDragging=!0,Vk(G,"dragstart","onDragStart"))},this.drag=bt,this.endDrag=t=>vt(t||G.pointerEvent,!0),this.timeSinceDrag=()=>G.isDragging?0:(hk()-X)/1e3,this.timeSinceClick=()=>(hk()-Q)/1e3,this.hitTest=(t,e)=>tN.hitTest(G.target,t,e),this.getDirection=(e,s)=>{let i,n,o,l,c,h,d="velocity"===e&&XM?e:JM(e)&&!k?"element":"start";return"element"===d&&(c=Gk(G.target),h=Gk(e)),i="start"===d?G.x-a:"velocity"===d?XM.getVelocity(t,N):c.left+c.width/2-(h.left+h.width/2),k?i<0?"counter-clockwise":"clockwise":(s=s||2,n="start"===d?G.y-r:"velocity"===d?XM.getVelocity(t,F):c.top+c.height/2-(h.top+h.height/2),o=Math.abs(i/n),l=o<1/s?"":i<0?"left":"right",o<s&&(""!==l&&(l+="-"),l+=n<0?"up":"down"),l)},this.applyBounds=(s,i)=>{let n,o,a,r,c,h;if(s&&e.bounds!==s)return e.bounds=s,G.update(!0,i);if(ot(!0),lt(),l&&!gt()){if(n=G.x,o=G.y,n>d?n=d:n<u&&(n=u),o>p?o=p:o<g&&(o=g),(G.x!==n||G.y!==o)&&(a=!0,G.x=G.endX=n,k?G.endRotation=n:G.y=G.endY=o,f=!0,nt(!0),G.autoScroll&&!G.isDragging)){Fk(t.parentNode),r=t,bk.scrollTop=null!=SM.pageYOffset?SM.pageYOffset:null!=st.documentElement.scrollTop?st.documentElement.scrollTop:st.body.scrollTop,bk.scrollLeft=null!=SM.pageXOffset?SM.pageXOffset:null!=st.documentElement.scrollLeft?st.documentElement.scrollLeft:st.body.scrollLeft;while(r&&!h)h=kk(r.parentNode),c=h?bk:r.parentNode,U&&c.scrollTop>c._gsMaxScrollY&&(c.scrollTop=c._gsMaxScrollY),B&&c.scrollLeft>c._gsMaxScrollX&&(c.scrollLeft=c._gsMaxScrollX),r=c}G.isThrowing&&(a||G.endX>d||G.endX<u||G.endY>p||G.endY<g)&&dt(e.inertia||e.throwProps,a)}return G},this.update=(e,s,i)=>{if(s&&G.isPressed){let e=jM(t),s=P.apply({x:G.x-a,y:G.y-r}),i=jM(t.parentNode,!0);i.apply({x:e.e-s.x,y:e.f-s.y},s),G.x-=s.x-i.e,G.y-=s.y-i.f,nt(!0),pt()}let{x:n,y:o}=G;return ut(!s),e?G.applyBounds():(f&&i&&nt(!0),ot(!0)),s&&(ft(G.pointerX,G.pointerY),f&&nt(!0)),G.isPressed&&!s&&(B&&Math.abs(n-G.x)>.01||U&&Math.abs(o-G.y)>.01&&!k)&&pt(),G.autoScroll&&(Fk(t.parentNode,G.isDragging),W=G.isDragging,nt(!0),Mk(t,xt),Lk(t,xt)),G},this.enable=n=>{let o,a,r,l={lazy:!0};if(!1!==e.cursor&&(l.cursor=e.cursor||WM),RM.utils.checkPrefix("touchCallout")&&(l.touchCallout="none"),"soft"!==n){xk(V,B===U?"none":e.allowNativeTouchScrolling&&t.scrollHeight===t.clientHeight===(t.scrollWidth===t.clientHeight)||e.allowEventDefault?"manipulation":B?"pan-y":"pan-x"),a=V.length;while(--a>-1)r=V[a],qM||yk(r,"mousedown",_t),yk(r,"touchstart",_t),yk(r,"click",Tt,!0),RM.set(r,l),r.getBBox&&r.ownerSVGElement&&RM.set(r.ownerSVGElement,{touchAction:B===U?"none":e.allowNativeTouchScrolling||e.allowEventDefault?"manipulation":B?"pan-y":"pan-x"}),e.allowContextMenu||yk(r,"contextmenu",it);Kk(V,!1)}return Lk(t,xt),s=!0,XM&&"soft"!==n&&XM.track(i||t,M?"x,y":k?"rotation":"top,left"),t._gsDragID=o="d"+pk++,uk[o]=G,i&&(i.enable(),i.element._gsDragID=o),(e.bounds||k)&&pt(),e.bounds&&G.applyBounds(),G},this.disable=e=>{let n,o=G.isDragging,a=V.length;while(--a>-1)Bk(V[a],"cursor",null);if("soft"!==e){xk(V,null),a=V.length;while(--a>-1)n=V[a],Bk(n,"touchCallout",null),Dk(n,"mousedown",_t),Dk(n,"touchstart",_t),Dk(n,"click",Tt),Dk(n,"contextmenu",it);Kk(V,!0),O&&(Dk(O,"touchcancel",vt),Dk(O,"touchend",vt),Dk(O,"touchmove",bt)),Dk(st,"mouseup",vt),Dk(st,"mousemove",bt)}return Mk(t,xt),s=!1,XM&&"soft"!==e&&XM.untrack(i||t,M?"x,y":k?"rotation":"top,left"),i&&i.disable(),Ok(nt),G.isDragging=G.isPressed=w=!1,o&&Vk(G,"dragend","onDragEnd"),G},this.enabled=function(t,e){return arguments.length?t?G.enable(e):G.disable(e):s},this.kill=function(){return G.isThrowing=!1,G.tween&&G.tween.kill(),G.disable(),RM.set(V,{clearProps:"userSelect"}),delete uk[t._gsDragID],G},~L.indexOf("scroll")&&(i=this.scrollProxy=new $k(t,vk({onKill:function(){G.isPressed&&vt(null)}},e)),t.style.overflowY=U&&!UM?"auto":"hidden",t.style.overflowX=B&&!UM?"auto":"hidden",t=i.content),k?z.rotation=1:(B&&(z[N]=1),U&&(z[F]=1)),J.force3D=!("force3D"in e)||e.force3D,this.enable()}static register(t){RM=t,Qk()}static create(t,e){return kM||Qk(!0),FM(t).map(t=>new tN(t,e))}static get(t){return uk[(FM(t)[0]||{})._gsDragID]}static timeSinceDrag(){return(hk()-mk)/1e3}static hitTest(t,e,s){if(t===e)return!1;let i,n,o,a=Gk(t),r=Gk(e),{top:l,left:c,right:h,bottom:d,width:u,height:p}=a,g=r.left>h||r.right<c||r.top>d||r.bottom<l;return g||!s?!g:(o=-1!==(s+"").indexOf("%"),s=parseFloat(s)||0,i={left:Math.max(c,r.left),top:Math.max(l,r.top)},i.width=Math.min(h,r.right)-i.left,i.height=Math.min(d,r.bottom)-i.top,!(i.width<0||i.height<0)&&(o?(s*=.01,n=i.width*i.height,n>=u*p*s||n>=r.width*r.height*s):i.width>s&&i.height>s))}}Ak(tN.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1}),tN.zIndex=1e3,tN.version="3.10.4",$M()&&RM.registerPlugin(tN);
/*!
 * VelocityTracker: 3.10.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
let eN,sN,iN,nN,oN,aN,rN,lN,cN,hN=()=>eN||"undefined"!==typeof window&&(eN=window.gsap),dN={},uN=t=>Math.round(1e4*t)/1e4,pN=t=>cN(t).id,gN=t=>dN[pN("string"===typeof t?iN(t)[0]:t)],mN=t=>{let e,s=oN;if(t-rN>=.05){lN=rN,rN=t;while(s)e=s.g(s.t,s.p),(e!==s.v1||t-s.t1>.2)&&(s.v2=s.v1,s.v1=e,s.t2=s.t1,s.t1=t),s=s._next}},_N={deg:360,rad:2*Math.PI},bN=()=>{eN=hN(),eN&&(iN=eN.utils.toArray,nN=eN.utils.getUnit,cN=eN.core.getCache,aN=eN.ticker,sN=1)};class fN{constructor(t,e,s,i){this.t=t,this.p=e,this.g=t._gsap.get,this.rCap=_N[s||nN(this.g(t,e))],this.v1=this.v2=0,this.t1=this.t2=aN.time,i&&(this._next=i,i._prev=this)}}class vN{constructor(t,e){sN||bN(),this.target=iN(t)[0],dN[pN(this.target)]=this,this._props={},e&&this.add(e)}static register(t){eN=t,bN()}get(t,e){let s,i,n,o=this._props[t]||console.warn("Not tracking "+t+" velocity.");return s=parseFloat(e?o.v1:o.g(o.t,o.p)),i=s-parseFloat(o.v2),n=o.rCap,n&&(i%=n,i!==i%(n/2)&&(i=i<0?i+n:i-n)),uN(i/((e?o.t1:aN.time)-o.t2))}getAll(){let t,e={},s=this._props;for(t in s)e[t]=this.get(t);return e}isTracking(t){return t in this._props}add(t,e){t in this._props||(oN||(aN.add(mN),rN=lN=aN.time),oN=this._props[t]=new fN(this.target,t,e,oN))}remove(t){let e,s,i=this._props[t];i&&(e=i._prev,s=i._next,e&&(e._next=s),s?s._prev=e:oN===i&&(aN.remove(mN),oN=0),delete this._props[t])}kill(t){for(let e in this._props)this.remove(e);t||delete dN[pN(this.target)]}static track(t,e,s){sN||bN();let i,n,o=[],a=iN(t),r=e.split(","),l=(s||"").split(","),c=a.length;while(c--){i=gN(a[c])||new vN(a[c]),n=r.length;while(n--)i.add(r[n],l[n]||l[0]);o.push(i)}return o}static untrack(t,e){let s=(e||"").split(",");iN(t).forEach(t=>{let e=gN(t);e&&(s.length?s.forEach(t=>e.remove(t)):e.kill(1))})}static isTracking(t,e){let s=gN(t);return s&&s.isTracking(e)}static getVelocity(t,e){let s=gN(t);return s&&s.isTracking(e)?s.get(e):console.warn("Not tracking velocity of "+e)}}vN.getByTarget=gN,hN()&&eN.registerPlugin(vN);
/*!
 * InertiaPlugin 3.10.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
let xN,TN,EN,wN,ON,AN,yN,DN,jN,RN,SN,CN,IN=vN.getByTarget,PN=()=>xN||"undefined"!==typeof window&&(xN=window.gsap)&&xN.registerPlugin&&xN,LN=t=>"string"===typeof t,MN=t=>"number"===typeof t,kN=t=>"object"===typeof t,NN=t=>"function"===typeof t,FN=1,BN=Array.isArray,UN=t=>t,HN=1e10,GN=1/HN,VN=.05,zN=t=>Math.round(1e4*t)/1e4,XN=(t,e,s)=>{for(let i in e)i in t||i===s||(t[i]=e[i]);return t},WN=t=>{let e,s,i={};for(e in t)i[e]=kN(s=t[e])&&!BN(s)?WN(s):s;return i},qN=(t,e,s,i,n)=>{let o,a,r,l,c=e.length,h=0,d=HN;if(kN(t)){while(c--){for(r in o=e[c],a=0,t)l=o[r]-t[r],a+=l*l;a<d&&(h=c,d=a)}if((n||HN)<HN&&n<Math.sqrt(d))return t}else while(c--)o=e[c],a=o-t,a<0&&(a=-a),a<d&&o>=i&&o<=s&&(h=c,d=a);return e[h]},YN=(t,e,s,i,n,o,a)=>{if("auto"===t.end)return t;let r,l,c=t.end;if(s=isNaN(s)?HN:s,i=isNaN(i)?-HN:i,kN(e)){if(r=e.calculated?e:(NN(c)?c(e,a):qN(e,c,s,i,o))||e,!e.calculated){for(l in r)e[l]=r[l];e.calculated=!0}r=r[n]}else r=NN(c)?c(e,a):BN(c)?qN(e,c,s,i,o):parseFloat(c);return r>s?r=s:r<i&&(r=i),{max:r,min:r,unitFactor:t.unitFactor}},KN=(t,e,s)=>isNaN(t[e])?s:+t[e],ZN=(t,e)=>e*VN*t/RN,$N=(t,e,s)=>Math.abs((e-t)*RN/s/VN),QN={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},JN=(t,e,s,i)=>{if(e.linkedProps){let n,o,a,r,l,c,h=e.linkedProps.split(","),d={};for(n=0;n<h.length;n++)o=h[n],a=e[o],a&&(MN(a.velocity)?r=a.velocity:(l=l||IN(t),r=l&&l.isTracking(o)?l.get(o):0),c=Math.abs(r/KN(a,"resistance",i)),d[o]=parseFloat(s(t,o))+ZN(r,c));return d}},tF=(t,e,s=10,i=.2,n=1,o=0)=>{if(LN(t)&&(t=wN(t)[0]),!t)return 0;let a,r,l,c,h,d,u,p,g,m,_=0,b=HN,f=e.inertia||e,v=jN(t).get,x=KN(f,"resistance",AN.resistance);for(a in m=JN(t,f,v,x),f)QN[a]||(r=f[a],kN(r)||(p=p||IN(t),p&&p.isTracking(a)?r=MN(r)?{velocity:r}:{velocity:p.get(a)}:(c=+r||0,l=Math.abs(c/x))),kN(r)&&(MN(r.velocity)?c=r.velocity:(p=p||IN(t),c=p&&p.isTracking(a)?p.get(a):0),l=SN(i,s,Math.abs(c/KN(r,"resistance",x))),h=parseFloat(v(t,a))||0,d=h+ZN(c,l),"end"in r&&(r=YN(r,m&&a in m?m:d,r.max,r.min,a,f.radius,c),o&&(CN===e&&(CN=f=WN(e)),f[a]=XN(r,f[a],"end"))),"max"in r&&d>+r.max+GN?(g=r.unitFactor||AN.unitFactors[a]||1,u=h>r.max&&r.min!==r.max||c*g>-15&&c*g<45?i+.1*(s-i):$N(h,r.max,c),u+n<b&&(b=u+n)):"min"in r&&d<+r.min-GN&&(g=r.unitFactor||AN.unitFactors[a]||1,u=h<r.min&&r.min!==r.max||c*g>-45&&c*g<15?i+.1*(s-i):$N(h,r.min,c),u+n<b&&(b=u+n)),u>_&&(_=u)),l>_&&(_=l));return _>b&&(_=b),_>s?s:_<i?i:_},eF=()=>{xN=PN(),xN&&(EN=xN.parseEase,wN=xN.utils.toArray,yN=xN.utils.getUnit,jN=xN.core.getCache,SN=xN.utils.clamp,ON=EN("power3"),RN=ON(.05),DN=xN.core.PropTween,xN.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),AN=xN.config(),xN.registerPlugin(vN),TN=1)};const sF={version:"3.10.4",name:"inertia",register(t){xN=t,eF()},init(t,e,s,i,n){TN||eF();let o=IN(t);if("auto"===e){if(!o)return void console.warn("No inertia tracking on "+t+". InertiaPlugin.track(target) first.");e=o.getAll()}this.target=t,this.tween=s,CN=e;let a,r,l,c,h,d,u,p,g,m=t._gsap,_=m.get,b=e.duration,f=kN(b),v=e.preventOvershoot||f&&0===b.overshoot,x=KN(e,"resistance",AN.resistance),T=MN(b)?b:tF(t,e,f&&b.max||10,f&&b.min||.2,f&&"overshoot"in b?+b.overshoot:v?0:1,!0);for(a in e=CN,CN=0,g=JN(t,e,_,x),e)QN[a]||(r=e[a],NN(r)&&(r=r(i,t,n)),MN(r)?h=r:kN(r)&&!isNaN(r.velocity)?h=+r.velocity:o&&o.isTracking(a)?h=o.get(a):console.warn("ERROR: No velocity was defined for "+t+" property: "+a),d=ZN(h,T),p=0,l=_(t,a),c=yN(l),l=parseFloat(l),kN(r)&&(u=l+d,"end"in r&&(r=YN(r,g&&a in g?g:u,r.max,r.min,a,e.radius,h)),"max"in r&&+r.max<u?v||r.preventOvershoot?d=r.max-l:p=r.max-l-d:"min"in r&&+r.min>u&&(v||r.preventOvershoot?d=r.min-l:p=r.min-l-d)),this._props.push(a),this._pt=new DN(this._pt,t,a,l,0,UN,0,m.set(t,a,this)),this._pt.u=c||0,this._pt.c1=d,this._pt.c2=p);return s.duration(T),FN},render(t,e){let s=e._pt;t=ON(e.tween._time/e.tween._dur);while(s)s.set(s.t,s.p,zN(s.s+s.c1*t+s.c2*t*t)+s.u,s.d,t),s=s._next}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach(t=>sF[t]=vN[t]),PN()&&xN.registerPlugin(sF);var iF=s("b8af"),nF=s.n(iF);function oF(t){return new Promise(e=>{setTimeout(e,1e3*t)})}const aF=!1;const rF=[{id:"1",url:"/assets/images/gallery/item-1.jpg",povDatas:kx("landscape")},{id:"2",url:"/assets/images/gallery/item-2.jpg",povDatas:kx("portrait")},{id:"3",url:"/assets/images/gallery/item-3.jpg",povDatas:kx("landscape")},{id:"4",url:"/assets/images/gallery/item-4.jpg",povDatas:kx("square")},{id:"5",url:"/assets/images/gallery/item-5.jpg",povDatas:kx("square")},{id:"6",url:"/assets/images/gallery/item-6.jpg",povDatas:kx("landscape")},{id:"1",url:"/assets/images/gallery/item-1.jpg",povDatas:kx("landscape")},{id:"2",url:"/assets/images/gallery/item-2.jpg",povDatas:kx("portrait")},{id:"3",url:"/assets/images/gallery/item-3.jpg",povDatas:kx("landscape")},{id:"4",url:"/assets/images/gallery/item-4.jpg",povDatas:kx("square")},{id:"5",url:"/assets/images/gallery/item-5.jpg",povDatas:kx("square")},{id:"6",url:"/assets/images/gallery/item-6.jpg",povDatas:kx("landscape")}];class lF{constructor(){this.loading={NextToken:void 0,Author:!0,HasMore:!0,PerPage:20,is:!1,Promise:Promise.resolve()}}async loadFromSample(){let t=null;return!this.loading.is&&this.loading.HasMore&&(this.loading.is=!0,await oF(2*Math.random()),t=rF.map((t,e)=>(t.id=(rF.length+e).toString(),t)),this.loading.is=!1),t}async loadFromAPI(){let t=null;if(!this.loading.is&&this.loading.HasMore){this.loading.is=!0;const e=await xs({Author:this.loading.Author,Limit:bg.isDesktop?this.loading.PerPage:this.loading.PerPage/2,NextToken:this.loading.NextToken}),s=e.unwrap();return this.loading.NextToken=s.NextToken,0===s.Count&&this.loading.Author?(this.loading.Author=!1,this.loading.NextToken=void 0,this.loading.is=!1,this.loadFromAPI()):(s.NextToken||this.loading.Author||(this.loading.HasMore=!1),this.loading.is=!1,t=s.Items.map(t=>this.parseItem(t)),t)}}async load(){return aF?this.loadFromSample():this.loadFromAPI()}parseItem(t){const e=/^\/\//.test(t.ImageURL)?window.location.protocol+t.ImageURL:t.ImageURL;return{id:t.ArtworkID,url:e,povDatas:{zoom:t.PostProcessing.Zoom,brightness:t.PostProcessing.Brightness,contrast:t.PostProcessing.Contrast,saturation:t.PostProcessing.Saturation,format:t.Format,temperature:t.PostProcessing.Temperature,position:t.PointOfView.Position,rotation:t.PointOfView.Rotation,background:t.Background,pose:t.Pose,lightDatas:[this.parseLight(t.Light0),this.parseLight(t.Light1),this.parseLight(t.Light2)]}}}parseLight(t){return{position:new Float32Array(t.Position),lookat:new Float32Array(t.Lookat),intensity:t.Intensity,hue:t.Hue,saturation:t.Saturation,isOn:t.IsOn}}}wt["a"].registerPlugin(tN),wt["a"].registerPlugin(sF);const{send:cF,state:hF}=Object(Ot["b"])(Wx);var dF=Object(E["o"])({components:{ArtworkAPI:OL,CustomCursor:GD,Single:qL,Item:sM},setup(){return{...Object(Ot["b"])(Wx),resizeObserver:null,intersectionObservers:[],showCustomCursor:Object(E["H"])(!1),scrollLoop:0,vs:null,draggable:null,dragProxy:null,dataSource:new lF}},data(){return{isIntro:!0,loading:{next:!1,previous:!1},isDesktop:null,scrollMobile:0,scrollLeft:0,scrollRight:0,diffMobile:0,diffLeft:0,diffRight:0,dragValue:0,scrollMax:0,scrollMin:0,mobileSize:0,leftSize:0,rightSize:0,Viewport:bg,activeItem:null,active:!1,items:[],lefts:[],rights:[]}},mounted(){this.resizeObserver=new ResizeObserver(t=>{t.forEach(t=>{t.contentRect&&this.onResize()})}),this.resizeObserver.observe(this.$el),this.onResize();const t=this.onEnter();this.loadItems().then(()=>t.play()),this.initScroll(),this.initIntersectionObserver()},unmounted(){this.vs&&(this.vs.off(this.onVirtualScroll),this.vs.destroy()),this.draggable&&this.draggable.kill()},methods:{initIntersectionObserver(){const t=new IntersectionObserver(t=>{t[0].isIntersecting&&this.loadNext()});bg.isDesktop?(t.observe(this.$refs.nextLeft),t.observe(this.$refs.nextRight)):t.observe(this.$refs.nextMobile),this.intersectionObservers.push(t);const e=new IntersectionObserver(t=>{t[0].isIntersecting&&this.loadPrevious()});bg.isDesktop?(e.observe(this.$refs.previousLeft),e.observe(this.$refs.previousRight)):e.observe(this.$refs.previousMobile),this.intersectionObservers.push(e)},destroyIntersectionObserver(){this.intersectionObservers.forEach(t=>{t.disconnect()})},loadNext(){this.isIntro||this.loading.next||(this.loading.next=!0,this.dataSource.loading.is||this.loadItems(!0))},loadPrevious(){this.isIntro||this.loading.previous||(this.loading.previous=!0,this.dataSource.loading.is||this.loadItems(!1))},initScroll(){bg.isTouch?(this.dragProxy=document.createElement("div"),this.draggable=tN.create(this.dragProxy,{trigger:this.$refs.dragTrigger,inertia:!0,maxDuration:1,onDrag:this.onDrag,onThrowUpdate:this.onDrag,onClick:this.onClickDraggable})[0]):(this.vs=new nF.a({passive:!0,useKeyboard:!1,preventTouch:!0}),this.vs.on(this.onVirtualScroll))},onDrag(){if(!this.isIntro&&this.state.matches("gallery.list")){const t=this.Viewport.isDesktop?this.draggable.y:-1*this.draggable.x,e=t-this.dragValue;this.dragValue=t,this.onUpdatePosition(e)}},onVirtualScroll(t){if(!this.isIntro&&this.state.matches("gallery.list")){const e=bg.isDesktop?-1*t.deltaY:-1*t.deltaX;this.onUpdatePosition(e)}},onUpdatePosition(t){const e=this.scrollMobile+t,s=this.scrollLeft+t,i=this.scrollRight+t;this.scrollMobile=Math.max(this.scrollMin,Math.min(this.scrollMax,e)),this.scrollRight=Math.max(this.scrollMin,Math.min(this.scrollMax,i)),this.scrollLeft=Math.max(this.scrollMin,Math.min(this.scrollMax,s))},async loadItems(t=!0){if(!this.dataSource.loading.is){const e=await this.dataSource.load();if(t?this.loading.next=!1:this.loading.previous=!1,e){let s=e.slice();const i=Math.ceil(e.length/2),n=e.splice(0,i),o=e.splice(-i);if(!this.isIntro){const e=(e,s)=>{e.delay=t?.1*s:.1*(n.length-1-s)};n.forEach(e),o.forEach(e)}t?(this.items=this.items.concat(s),this.lefts=this.lefts.concat(n),this.rights=this.rights.concat(o)):(this.items=s.concat(this.items),this.lefts=n.concat(this.lefts),this.rights=o.concat(this.rights)),await this.$nextTick(),this.calculateMinMax(t)}}},onResize(){if(console.log("onResize"),this.calculateMinMax(),null!==this.isDesktop&&this.isDesktop!==bg.isDesktop){const t=bg.isDesktop?bg.windowHeight:bg.windowWidth;this.scrollMobile=t,this.scrollLeft=t,this.scrollRight=t,this.onUpdatePosition(0),this.destroyIntersectionObserver(),this.initIntersectionObserver()}this.isDesktop=bg.isDesktop},calculateMinMax(t=!0){if(bg.isDesktop){const e=this.$refs.columnLeft,s=this.$refs.columnRight;if(e&&s){const i=Math.max(e.offsetHeight,s.offsetHeight);if(this.scrollMax=i-bg.windowHeight-(this.dataSource.loading.HasMore?0:bg.windowHeight/4),this.scrollMin=0+(this.dataSource.loading.HasMore?0:bg.windowHeight/4),!t){const t=e.offsetHeight-this.leftSize,i=s.offsetHeight-this.rightSize;this.scrollLeft+=t,this.scrollRight+=i}this.leftSize=e.offsetHeight,this.rightSize=s.offsetHeight}}else{const e=this.$refs.columnMobile;if(e){if(this.scrollMax=e.offsetWidth-bg.windowWidth-(this.dataSource.loading.HasMore?0:bg.windowWidth/4),this.scrollMin=0+(this.dataSource.loading.HasMore?0:bg.windowWidth/4),!t){const t=e.offsetWidth-this.mobileSize;this.scrollMobile+=t}this.mobileSize=e.offsetWidth}}},onItemMouseEnter(t){this.activeItem=t,this.showCustomCursor=!0},onItemMouseLeave(t){this.activeItem=null,this.showCustomCursor=!1},onItemClick(t){cF({type:"GALLERY_ENTER",pov:t.povDatas,url:t.url})},onClickDraggable(t){if("BUTTON"===t.target.tagName){t.target.getAttribute("data-index")}},onClose(){const t=wt["a"].utils.selector(this.$el);wt["a"].timeline({onComplete:()=>{cF({type:"GOTO_PAINTING"})}}).to([t(".Veil")],{opacity:1,duration:.5,ease:"none",clearProps:"all"},"start")},onEnter(){const t=wt["a"].utils.selector(this.$el);wt["a"].set([t(".Veil")],{clearProps:"all"});const e=wt["a"].timeline({paused:!0,onComplete:()=>{this.isIntro=!1}}).addLabel("scroll","start+=0.3").from([t(".ScrollIndicator")],{opacity:0,duration:.3,ease:"none"},"scroll").from([t(".ScrollIndicator__Icon > span")],{yPercent:-150,duration:1,ease:"quart.out"},"scroll").from([t(".ScrollIndicator__Part--Top > span")],{yPercent:150,duration:1,ease:"quart.out"},"scroll").from([t(".ScrollIndicator__Part--Bottom > span")],{yPercent:-150,duration:1,ease:"quart.out"},"scroll").from([t(".Owner .Line")],{yPercent:100,duration:1,ease:"quart.out",stagger:{each:.25}},"start").addLabel("title","start").from([t(".Title__Part--Left > span")],{xPercent:100,duration:1,ease:"quart.out"},"title").from([t(".Title__Part--Right > span")],{xPercent:-100,duration:1,ease:"quart.out"},"title").from([t(".Title__Wrapper .Subtitle > span")],{yPercent:100,duration:1,ease:"quart.out"},"title+=0.3").add(()=>{this.active=!0},"start+=1.5");return e.fromTo(this,{scrollMobile:0,scrollLeft:0,scrollRight:0},{scrollMobile:bg.windowWidth,scrollLeft:bg.windowHeight,scrollRight:bg.windowHeight,duration:2,ease:"quart.out"},"start"),e}}});s("f617"),s("c8f8");const uF=Zt()(dF,[["render",_L],["__scopeId","data-v-dc5cb946"]]);var pF,gF=uF;(function(t){t["LIGHT"]="light",t["DARK"]="dark"})(pF||(pF={}));var mF=Object(E["o"])({name:"App",setup(){const{t:t}=Object(i["b"])();return bg.init(),{xrActive:Object(Fy["a"])(Wx,t=>t.context.xrActive),...Object(Ot["b"])(Wx)}},components:{AppVersion:kO,CookieBanner:sy,GLViewer:RA,InformationPanel:AA,UIAudioBtn:MA,LegalPage:YA,HomeVue:RO,LoadingVue:jy,MuseumVue:aj,PaintingVue:wI,PaintingTutorialVue:JI,ShareVue:LP,GalleryVue:gF,RotationBlocker:gy},mounted(){this.send("INIT")},computed:{showHeader(){return!this.xrActive&&[Rx.HOME,Rx.PAINTING+".explore",Rx.SHARE+".upload",Rx.SHARE+".select",Rx.GALLERY].some(this.state.matches)},viewList(){return this.state.context.xrActive?[]:Vx(this.state)},showAudioBtn(){return bg.isDesktop,!this.xrActive&&[Rx.PAINTING,Rx.PAINTING_LOADING].some(this.state.matches)},uiTheme(){return this.$store.state.legalPage.isOpen||[Rx.PAINTING,Rx.SHARE,Rx.GALLERY].some(this.state.matches)?pF.DARK:pF.LIGHT}}});s("1a1f"),s("4df7");const _F=Zt()(mF,[["render",CO],["__scopeId","data-v-ac07f5a4"]]);var bF=_F;const fF=t=>(Object(E["F"])("data-v-5a6a7b3d"),t=t(),Object(E["E"])(),t),vF={class:"UIBtn UIBtnMain",ref:"root"},xF={class:"UIBtnMain__Inner"},TF=fF(()=>Object(E["j"])("span",{class:"Border"},[Object(E["j"])("span",{class:"Background"})],-1)),EF={class:"Label cta"},wF={ref:"labelInner",class:"Label__Inner Label__Inner--main"},OF={ref:"labelInnerClone",class:"Label__Inner Label__Inner--clone"},AF={class:"Icon__Wrapper"},yF={class:"Icon Icon--Base"},DF={class:"Icon__Inner"},jF={class:"Icon Icon--Hover"},RF={class:"Icon__Inner"};function SF(t,e,s,i,n,o){const a=Object(E["K"])("ui-icon");return Object(E["D"])(),Object(E["g"])(E["d"],{css:!1,onEnter:t.onEnter,onClick:t.onClick},{default:Object(E["Z"])(()=>[Object(E["j"])("button",vF,[Object(E["j"])("span",xF,[TF,Object(E["j"])("span",EF,[Object(E["j"])("span",wF,[Object(E["J"])(t.$slots,"default",{},void 0,!0)],512),Object(E["j"])("span",OF,[Object(E["J"])(t.$slots,"default",{},void 0,!0)],512)]),Object(E["j"])("span",AF,[Object(E["j"])("span",yF,[Object(E["j"])("span",DF,[Object(E["m"])(a,{name:"arrow-small-right"})])]),Object(E["j"])("span",jF,[Object(E["j"])("span",RF,[Object(E["m"])(a,{name:"arrow-small-right"})])])])])],512)]),_:3},8,["onEnter","onClick"])}var CF=Object(E["o"])({props:{delay:{type:Number,default:0}},mounted(){this.onEnter()},methods:{onClick(){$p.playUI("ui_click")},onEnter(){const t=wt["a"].utils.selector(this.$el);wt["a"].timeline({delay:this.delay}).set([this.$el],{pointerEvents:"none"},"start").from([t(".Border")],{scaleY:0,ease:"quart.out",duration:.5},"start").from([t(".Border")],{opacity:0,ease:"linear",duration:.5},"start").from([t(".Icon--Base")],{clipPath:"circle(0% at 50% 50%)",clearProps:"clipPath",ease:"quart.out",duration:1},"start").from([t(".Icon--Base .Icon__Inner")],{transition:"none",xPercent:-160,clearProps:"all",ease:"quart.out",duration:1},"start").from([t(".Background")],{opacity:0,ease:"none",duration:.5},"start+=0.5").from([t(".Label__Inner--main")],{yPercent:100,ease:"quart.out",duration:1,clearProps:"all"},"start").set([this.$el],{clearProps:"pointerEvents"})}}});s("15cf");const IF=Zt()(CF,[["render",SF],["__scopeId","data-v-5a6a7b3d"]]);var PF=IF;const LF={type:"button",class:"UIBtnClose cta"},MF={class:"UIBtnClose__Text"},kF={class:"Line"},NF=["data-text"],FF=Object(E["k"])('<span class="UIBtnClose__Icon" data-v-f378a566><span class="UIBtnClose__Icon__Mask" data-v-f378a566><svg viewBox="0 0 24 24" class="UIIcon UIIcon--close" data-v-f378a566><path d="M7.87842 7.87622L16.3469 16.3783" class="line line--1 stroke stroke--bold" data-v-f378a566></path><path d="M16.2986 7.70703L7.83009 16.2091" class="line line--2 stroke stroke--bold" data-v-f378a566></path></svg></span></span>',1);function BF(t,e,s,i,n,o){return Object(E["D"])(),Object(E["i"])("button",LF,[Object(E["j"])("span",MF,[Object(E["j"])("span",kF,[Object(E["j"])("span",{class:"Line__Inner","data-text":t.text},Object(E["O"])(t.text),9,NF)])]),FF])}var UF=Object(uT["r"])({props:{delay:{type:Number,default:.5},text:{type:String,default:"Close"}},setup(){return{splits:[]}},mounted(){this.onEnter()},methods:{onEnter(){const t=wt["a"].utils.selector(this.$el);wt["a"].timeline({delay:this.delay}).from([t(".Line__Inner")],{transition:"none",yPercent:100,clearProps:"all",duration:1,ease:"quart.out"},"start").from([t(".UIIcon--close")],{xPercent:60,duration:1,ease:"quart.out"},"start").from([t(".line--1")],{rotation:135,duration:.75,transformOrigin:"50% 50%",ease:"quart.out"},"start+=0.25").from([t(".line--2")],{rotation:45,duration:.75,transformOrigin:"50% 50%",ease:"quart.out"},"start+=0.25")}}});s("6531");const HF=Zt()(UF,[["render",BF],["__scopeId","data-v-f378a566"]]);var GF=HF;function VF(t,e,s,i,n,o){return Object(E["D"])(),Object(E["g"])(Object(E["M"])(t.icon),{class:Object(E["w"])(["UIIcon","UIIcon--"+t.name])},null,8,["class"])}var zF=Object(E["o"])({props:{name:{type:String,required:!0}},computed:{icon(){return this.name,Object(E["n"])(()=>s("153d")("./"+this.name+".svg"))}},mounted(){this.$nextTick(()=>this.$emit("mounted"))}});s("84e1");const XF=Zt()(zF,[["render",VF]]);var WF=XF;const qF=Object(E["k"])('<rect x="0.5" y="0.5" width="100%" height="100%" stroke="var(--white)" data-v-e617c7b2></rect><rect x="0.5" y="0.5" width="100%" height="100%" stroke="url(#InsetBorder-gradient)" data-v-e617c7b2></rect><defs data-v-e617c7b2><linearGradient id="InsetBorder-gradient" x1="255.743" y1="-255.612" x2="1455.95" y2="612.43" gradientUnits="userSpaceOnUse" data-v-e617c7b2><stop stop-color="#F5AAE0" data-v-e617c7b2></stop><stop offset="0.484375" stop-color="#A47CDA" stop-opacity="0.820781" data-v-e617c7b2></stop><stop offset="1" stop-color="#4D4BD2" stop-opacity="0.63" data-v-e617c7b2></stop></linearGradient></defs>',3),YF=[qF],KF=Object(E["o"])({});var ZF=Object(E["o"])({...KF,__name:"InsetBorder",setup(t){Wt(60);const e=Object(E["H"])(null),s=Object(E["H"])(null);Object(E["B"])(()=>{i()});const i=()=>{const t=e.value.offsetWidth,i=e.value.offsetHeight,n=2*t+2*i,o=wt["b"].timeline({delay:1});o.fromTo(s.value,{strokeDasharray:"0 "+.7*n,strokeDashoffset:.08*n},{strokeDasharray:.9*n+" 0 ",duration:1.7,ease:"quint.inOut"})};return(t,i)=>(Object(E["D"])(),Object(E["i"])("div",{ref_key:"root",ref:e,class:"InsetBorder"},[(Object(E["D"])(),Object(E["i"])("svg",{ref_key:"border",ref:s,fill:"none"},YF,512))],512))}});s("630e");const $F=Zt()(ZF,[["__scopeId","data-v-e617c7b2"]]);var QF=$F;const JF=t=>{t.component("ui-btn",hA),t.component("ui-btn-primary",hA),t.component("ui-btn-main",PF),t.component("ui-btn-secondary",fI),t.component("ui-btn-round",sI),t.component("ui-btn-close",GF),t.component("ui-icon",WF),t.component("heading",zO),t.component("inset-border",QF),t.component("line-by-line",GT)};var tB={register:JF};class eB{constructor(){this.onIntroVoiceComplete=()=>{Wx.send("INTRO_COMPLETE")},this.enterMuseum=()=>{$p.play(Fp.GALLERY_MUSIC),$p.fadeIn(Fp.GALLERY_MUSIC,.4),$p.play(Fp.OUTSIDE_PAINTING)},this.exitMuseum=()=>{$p.fadeOutStop(Fp.GALLERY_MUSIC),$p.fadeOutStop(Fp.OUTSIDE_PAINTING)},this.enterToPainting=()=>{$p.fadeOut(Fp.GALLERY_MUSIC).then(()=>$p.stop(Fp.GALLERY_MUSIC)),$p.play(Fp.TRANSITION_PAINTING)},this.enterIntro=()=>{$p.play(Fp.INTRO_VOICE),$p.getAudio(Fp.INTRO_VOICE).on("end",this.onIntroVoiceComplete)},this.exitIntro=()=>{$p.stop(Fp.INTRO_VOICE),$p.getAudio(Fp.INTRO_VOICE).off("end",this.onIntroVoiceComplete)},this.enterPainting=()=>{$p.play(Fp.INSIDE_PAINTING),$p.fadeIn(Fp.INSIDE_PAINTING,.4)},this.exitPainting=()=>{$p.fadeOutStop(Fp.INSIDE_PAINTING)},this.enterShare=()=>{$p.fadeIn(Fp.INSIDE_PAINTING,.4)},this.exitShare=()=>{$p.fadeOutStop(Fp.INSIDE_PAINTING)},this.enterGallery=()=>{$p.fadeIn(Fp.INSIDE_PAINTING,.4)},this.exitGallery=()=>{$p.fadeOutStop(Fp.INSIDE_PAINTING)},this._stateHelper=new Ns([{match:"museum",enter:this.enterMuseum,exit:this.exitMuseum},{match:"museum.toPainting",enter:this.enterToPainting},{match:"painting.intro",enter:this.enterIntro,exit:this.exitIntro},{match:"painting",enter:this.enterPainting,exit:this.exitPainting},{match:"share",enter:this.enterShare,exit:this.exitShare},{match:"gallery",enter:this.enterGallery,exit:this.exitGallery}]),this._stateHelper.start()}}let sB=null;function iB(){null===sB&&(sB=new eB)}iB();const nB=Object(E["f"])(bF);tB.register(nB),SO(nB),nB.use(v,d),nB.use(o),nB.mount("#app")},d03e:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_3_soster_hansen_L0.jpg.pvr.0a2b15b1.ktx"},d0a0:function(t,e,s){"use strict";s("5953")},d0d5:function(t,e,s){t.exports=s.p+"assets/webgl/texts_spritesheet.jpg.f5aa2f29.webp"},d142:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_3_husband_baumann_L0.jpg.pvr.7bfc7b79.ktx"},d1c8:function(t,e){var s=function(t){var e="";return e+="\nvarying vec2 vTexCoord0;\nuniform sampler2D tTex;\n\nvoid main(void){\n  gl_FragColor = texture2D( tTex, vTexCoord0 );\n}\n",e};s.toString=s,t.exports=s},d1e4:function(t,e,s){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+s("f5de")()+"\n#pragma SLOT pv\n\nIN vec3 aPosition;\nIN vec2 aTexCoord0;\n\nuniform mat4 uWorldMatrix;\nuniform mat4 uVP;\n\nOUT vec2 vTexCoord;\n\nvec3 rotate( mat4 m, vec3 v )\n{\n  return m[0].xyz*v.x + m[1].xyz*v.y + m[2].xyz*v.z;\n}\n\nvoid main(void){\n\n  vec3 worldPosition = (uWorldMatrix * vec4(aPosition, 1.0)).xyz;\n  gl_Position = uVP * vec4(worldPosition, 1.0);\n\n  vTexCoord = aTexCoord0;\n}",e};i.toString=i,t.exports=i},d4ad:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_10_fruits_roed_L0.jpg.cd8021d5.webp"},d4f0:function(t,e,s){var i=function(t){var e="";return e+="\n"+s("2387")()+"\n\nuniform vec4 uColor;\n\nvoid main(void){\n\n  FragColor = uColor;\n  \n}",e};i.toString=i,t.exports=i},d542:function(t,e){var s=function(t){var e="";return e+="attribute vec3 aPosition;\n// attribute vec2 aTexCoord;\n\nuniform mat4 uMVP;\n\n// varying vec2 vTexCoord;\n\nvoid main(void){\n\n  gl_Position = uMVP * vec4(aPosition, 1.0);\n  // vTexCoord = aTexCoord;\n  \n}",e};s.toString=s,t.exports=s},d67a:function(t,e,s){"use strict";s("af0b")},d688:function(t,e,s){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n\n#ifndef hasNormals\n  #define hasNormals 1\n#endif \n#ifndef hasTangents\n  #define hasTangents hasNormals\n#endif \n\n#if hasTangents && !hasNormals \n  #pragma error tan but no nrm\n  error\n#endif\n\n#pragma SLOT precision\n\n"+s("f5de")()+"\n\n#pragma SLOT pv\n\n\nIN vec3 aPosition;\n\n#if hasNormals\nIN vec3 aNormal;\n#endif\n\n\n\n\n// uniform mat4 uMVP;\nuniform mat4 uWorldMatrix;\nuniform mat4 uVP;\n\nOUT vec3 vWorldPosition;\n\n\nvec3 rotate( mat4 m, vec3 v )\n{\n  return m[0].xyz*v.x + m[1].xyz*v.y + m[2].xyz*v.z;\n}\n\n\nstruct VertexData {\n  highp vec3 position;\n  highp vec3 worldPos;\n  mat4 worldMatrix;\n};\n\n\nvoid InitVertexData( out VertexData vertex ){\n\n  vertex.position = aPosition + aNormal*OutlineThickness();\n  vertex.worldMatrix = uWorldMatrix;\n   \n}\n\n\nvoid main( void ){\n\n  #pragma SLOT v\n\n  VertexData vertex;\n  InitVertexData( vertex );\n\n  #pragma SLOT vertex_warp\n\n  vec4 worldPos = vertex.worldMatrix * vec4( vertex.position, 1.0 );\n  vertex.worldPos.xyz = worldPos.xyz / worldPos.w;\n\n  #pragma SLOT vertex_warp_world\n\n  gl_Position     = uVP * vec4( vertex.worldPos, 1.0 );\n\n  #pragma SLOT postv\n}",e};i.toString=i,t.exports=i},d747:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_9_architect_bindesboll_L0.jpg.etc.ad845b0f.ktx"},d79f:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_4_pig_thomsen_L0.jpg.astc.4cc79afb.ktx"},d7a9:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_7_eldest_hansen_L0.jpg.astc.a345fef6.ktx"},d805:function(t,e){var s=function(t){var e="";return e+="\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord0;\n\nuniform mat4 uMVP;\n\n\nvarying vec2 vHazeTexCoord1;\nvarying vec2 vHazeTexCoord2;\nvarying vec2 vHazeDiscardCoords;\n\nuniform vec4 uHazeOffsets;\n\n#define HAZE_SCALE 0.28\n\nvoid main( void ){\n  gl_Position = uMVP * vec4( aPosition, 0.0, 1.0 );\n  vTexCoord0 = aTexCoord;\n\n  vec2 sptc = (aTexCoord-.5)/HAZE_SCALE;\n  vHazeDiscardCoords = sptc;\n\n  sptc = (sptc+0.5) / 4.0;\n  vHazeTexCoord1 = sptc + uHazeOffsets.xy;\n  vHazeTexCoord2 = sptc + uHazeOffsets.zw;\n}\n",e};s.toString=s,t.exports=s},d859:function(t,e,s){var i=function(t){var e="";return e+=s("efd0")()+"\n\n\nIN vec4 aPosition;\nIN vec3 aTexCoord;\nIN vec3 aRand;\n\nOUT vec2 vTexCoord;\nOUT vec2 vTexCoordGrad;\n\nuniform mat4 uMVP;\nuniform vec3 uOffset;\n\nvoid main(void) {\n\n  vec3 pos = vec3(aPosition.xy, 0.0);\n  pos.xy += aRand.xy * (1.0 - uOffset.z);\n  pos.z += aRand.z * (1.0 - uOffset.z) * 0.4;\n\n  gl_Position = uMVP * vec4(pos, 1.0);\n\n  vTexCoordGrad = aPosition.xy * 0.2;\n  vTexCoordGrad += uOffset.xy;\n  vTexCoord = aTexCoord.xy;\n  \n}",e};i.toString=i,t.exports=i},d8d7:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_12_gertrud_juel_L0.jpg.pvr.fccbb81b.ktx"},d927:function(t,e,s){},db8b:function(t,e,s){t.exports=s.p+"assets/webgl/names.3ca734a3.jpg"},db97:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_9_architect_bindesboll_L0.jpg.astc.a267e5d2.ktx"},dc05:function(t,e,s){},dc3d:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_6_lamplight_ring_L0.jpg.dxt.f0e69b8f.ktx"},dc77:function(t,e,s){t.exports=s.p+"assets/webgl/main_artwork.jpg.dxt.5ace3a8a.ktx"},dc92:function(t,e){var s=function(t){var e="";return e+="precision lowp float;\n\nvarying vec3 vTexCoord0;\nuniform lowp vec3 uParams;\n\n#define LEN uParams.x\n#define THICKNESS uParams.y\n#define NODASH uParams.z\n\n#define LCOLOR vec3(1.,0.992,0.753)\n\nvoid main(void){\n  float fade = 1.0 - vTexCoord0.x*vTexCoord0.x;\n  float dash = step( 0.5, fract(vTexCoord0.z) );\n  float sides = smoothstep( 1.0, 0.5, abs( vTexCoord0.y) );\n  float nodashalpha = mix( 0.5, 1.0, NODASH );\n  gl_FragColor = vec4( LCOLOR, fade*dash*sides*nodashalpha );\n}\n",e};s.toString=s,t.exports=s},dde9:function(t,e){var s=function(t){var e="";return e+="varying vec2 vTexCoord;\nvarying vec2 vDotCoord;\n\nuniform sampler2D uDotTex;\nuniform float uAlpha;\n\nvoid main(void){\n\n  vec2 tcoord = vTexCoord;\n  vec4 color = texture2D(uDotTex, vDotCoord);\n  float l = ( ( length(vTexCoord.xy - vec2(0.5) ) ) * 2.0) + (1.0 - uAlpha);\n  float a = 1.0 - l;\n  gl_FragColor = vec4(color.r) * a;\n\n}",e};s.toString=s,t.exports=s},de4c:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_4_pig_thomsen_L0.jpg.0dd1046a.webp"},df3c:function(t,e,s){t.exports=s.p+"assets/webgl/main_artwork.jpg.486015ea.webp"},df98:function(t,e,s){"use strict";s.r(e);var i=s("7a23");const n={width:"59",height:"29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o=Object(i["j"])("path",{d:"M27.694 24.717l-3.802-6.364h-2.237V28.81h1.824v-8.014l3.334 5.55h1.71l3.335-5.55v8.014h1.825V18.353h-2.188l-3.801 6.364zm13.808-3.358c-.579-.35-1.268-.527-2.07-.527-.808 0-1.523.174-2.144.523a3.762 3.762 0 00-1.458 1.449c-.35.617-.524 1.326-.524 2.128 0 .792.18 1.494.536 2.107a3.788 3.788 0 001.497 1.437c.64.346 1.382.52 2.228.52 1.4 0 2.58-.409 3.544-1.225l-.969-1.098c-.345.304-.713.53-1.106.68-.392.15-.86.225-1.404.225-.677 0-1.239-.183-1.683-.55-.445-.365-.723-.867-.836-1.504h6.192v-.463c0-.852-.156-1.593-.469-2.225a3.473 3.473 0 00-1.334-1.477zm-4.387 2.932c.108-.623.365-1.118.77-1.486.406-.369.911-.553 1.514-.552.62 0 1.12.18 1.502.54.381.362.6.861.654 1.498h-4.44zm10.163-5.556h-1.76v2.286h-1.68v1.381h1.68V26.1c0 1.922.95 2.883 2.85 2.883.263.002.526-.016.786-.052.229-.031.453-.075.674-.135v-1.367c-.193.03-.37.054-.532.072a5.567 5.567 0 01-.59.026c-.522 0-.89-.124-1.106-.374-.215-.249-.322-.664-.323-1.247V22.4h2.551V21.02h-2.551l.001-2.285zm9.995 2.285v1a3.032 3.032 0 00-1.138-.877 3.723 3.723 0 00-1.55-.31c-.765 0-1.442.173-2.031.522-.59.349-1.052.83-1.384 1.441-.334.613-.5 1.317-.5 2.114 0 .792.163 1.495.491 2.11a3.711 3.711 0 001.352 1.449c.573.35 1.23.527 1.974.527.603 0 1.14-.111 1.614-.333a3.057 3.057 0 001.172-.945v1.09H59V21.02h-1.727zm-.033 5.064a2.24 2.24 0 01-.92 1.046c-.425.26-.91.388-1.453.388-.737 0-1.32-.234-1.751-.701-.43-.468-.646-1.104-.646-1.905 0-.796.224-1.428.67-1.897.448-.469 1.047-.702 1.8-.702.534 0 1.003.129 1.41.385.407.256.704.606.892 1.05l-.002 2.336zM12.84 18c-1.467 0-2.613 1.022-3.652 2.321l-.005-.006a8.522 8.522 0 00-.124-.145l-.009-.009-.06-.068-.002-.002-.063-.07-.007-.008-.058-.064-.005-.005-.062-.067-.004-.005-.057-.061a.05.05 0 01-.008-.008l-.061-.065-.002-.001-.059-.06-.008-.008-.12-.12-.009-.009-.119-.114-.008-.008-.119-.11-.008-.007-.057-.05-.003-.003c-.02-.017-.039-.035-.06-.051l-.006-.006-.055-.046-.006-.004-.06-.05-.004-.004a1.029 1.029 0 00-.055-.044c-.002-.002-.004-.005-.007-.006l-.058-.047-.002-.002c-.02-.014-.037-.029-.056-.043l-.009-.007a3.902 3.902 0 00-.115-.085l-.01-.007-.114-.081-.01-.007a3.43 3.43 0 00-.113-.076l-.01-.005-.053-.035-.004-.002-.057-.035c-.002-.002-.006-.003-.008-.006l-.051-.03a.025.025 0 01-.008-.005l-.057-.033-.007-.004-.05-.029c-.003 0-.007-.003-.01-.004-.018-.01-.037-.021-.056-.03l-.005-.003-.052-.028-.011-.005-.057-.029a2.526 2.526 0 00-.056-.026c-.004-.002-.007-.003-.01-.006a5.086 5.086 0 00-.114-.05l-.012-.005a1.097 1.097 0 00-.053-.022h-.002a1.215 1.215 0 00-.057-.023c-.004 0-.008-.003-.011-.004l-.051-.019a.059.059 0 00-.006-.002l-.056-.02c-.004 0-.007-.002-.01-.003l-.05-.017-.01-.003c-.018-.007-.037-.012-.055-.018-.004 0-.006-.002-.01-.003a.813.813 0 00-.06-.017 3.386 3.386 0 01-.056-.017l-.007-.002-.05-.013-.013-.004-.057-.014-.004-.001-.052-.012-.013-.003a2.097 2.097 0 00-.114-.023l-.015-.003-.052-.01h-.005a1.022 1.022 0 00-.057-.01c-.004 0-.01 0-.014-.002a.638.638 0 01-.049-.007l-.01-.002-.056-.007-.013-.001-.048-.006h-.012l-.057-.006-.012-.002a.73.73 0 01-.049-.004l-.013-.001a16.722 16.722 0 00-.058-.003h-.01a.758.758 0 00-.05-.002c-.004 0-.009 0-.015-.002-.019 0-.039 0-.058-.002h-.136C2.23 18 0 21.504 0 25.214 0 27.535 1.214 29 3.247 29c1.464 0 2.516-.638 4.387-3.664l1.316-2.152c.188.28.386.583.594.908l.132.204.746 1.16C12.132 28.103 13.083 29 14.81 29c1.981 0 3.083-1.484 3.083-3.853 0-3.884-2.281-7.147-5.051-7.147zm-6.633 6.516c-1.517 2.2-2.04 2.693-2.886 2.693-.87 0-1.385-.706-1.385-1.964 0-2.693 1.451-5.448 3.181-5.448h.05c.012 0 .024 0 .035.002h.003c.013 0 .025 0 .038.002h.01c.01 0 .021 0 .032.002h.007l.038.003.01.001.03.004h.009l.037.005.01.001c.01.001.02.002.03.005h.01c.011.003.025.004.036.006l.009.001.03.006c.003 0 .007 0 .01.002.012.002.024.004.037.008h.007l.031.007a.037.037 0 00.01.003l.036.008.006.002.032.008.012.004.032.008.008.003a.417.417 0 01.034.01l.012.005.029.01.009.003.034.012.014.005.026.01.012.004.033.013c.005.002.01.003.014.006l.024.01.014.005a.45.45 0 01.048.022l.022.011.016.008.032.016.015.008.022.011.018.009.023.013a.423.423 0 01.024.013l.02.011.018.011.02.011.03.019a.085.085 0 01.017.01l.02.014.015.01c.012.008.025.015.037.024l.013.009.023.015.012.01.046.032.005.003.025.02a.059.059 0 01.01.007l.08.062.007.005c.029.022.058.045.086.07l.004.002c.393.326.818.796 1.312 1.453-1.14 1.613-1.83 2.626-1.83 2.626zm8.643 2.694c-.864 0-1.277-.528-2.918-2.97l-1.048-1.619c-.285-.427-.557-.82-.818-1.18.945-1.35 1.725-2.022 2.652-2.022 1.927 0 3.468 2.625 3.468 5.849 0 1.228-.435 1.942-1.336 1.942z",fill:"#fff"},null,-1),a=Object(i["j"])("path",{d:"M8.635 1.824v-.736h4.095v.736h-1.632V6h-.832V1.824H8.636zM15.6 2.888c.315.347.472.792.472 1.336s-.157.99-.472 1.336c-.31.347-.714.52-1.216.52-.501 0-.91-.173-1.224-.52-.31-.347-.464-.792-.464-1.336s.155-.99.464-1.336c.315-.347.723-.52 1.224-.52.502 0 .907.173 1.216.52zm-.56 2.184c.155-.219.232-.501.232-.848s-.077-.627-.232-.84a.756.756 0 00-.656-.328.757.757 0 00-.656.328c-.154.213-.232.493-.232.84s.078.63.232.848c.155.213.374.32.656.32.283 0 .502-.107.656-.32zm4.107.688V5.6c-.086.101-.211.19-.376.264-.16.07-.336.104-.528.104-.502 0-.902-.176-1.2-.528-.299-.352-.448-.776-.448-1.272s.149-.92.448-1.272c.298-.352.698-.528 1.2-.528.192 0 .368.037.528.112.165.07.29.155.376.256v-.288h.8v3.256c0 .576-.155 1.008-.464 1.296-.304.293-.707.44-1.208.44-.448 0-.814-.112-1.096-.336-.278-.219-.438-.523-.48-.912h.776c.08.395.346.592.8.592.581 0 .872-.341.872-1.024zm0-.92V3.496a.897.897 0 00-.768-.424c-.299 0-.536.101-.712.304-.171.203-.256.467-.256.792s.085.59.256.792c.176.203.413.304.712.304a.897.897 0 00.768-.424zm3.981.056h.736c-.064.363-.226.65-.488.864-.256.213-.592.32-1.008.32-.496 0-.9-.17-1.216-.512-.309-.341-.464-.787-.464-1.336 0-.533.158-.976.472-1.328a1.52 1.52 0 011.192-.536c.491 0 .87.16 1.136.48.272.315.408.739.408 1.272v.288h-2.424c.011.31.096.555.256.736a.839.839 0 00.64.264c.422 0 .675-.17.76-.512zm-.768-1.856a.82.82 0 00-.568.208c-.149.133-.248.325-.296.576h1.608a.842.842 0 00-.2-.56c-.128-.15-.309-.224-.544-.224zm2.456 2V3.112h-.56v-.664h.56v-.952h.8v.952h.8v.664h-.8v1.84c0 .277.141.416.424.416a.76.76 0 00.456-.144v.728c-.144.085-.344.128-.6.128-.33 0-.595-.088-.792-.264-.192-.176-.288-.435-.288-.776zm2.495.96V.8h.8v1.984c.24-.277.56-.416.96-.416.395 0 .702.12.92.36.224.24.336.56.336.96V6h-.8V3.824c0-.23-.056-.408-.168-.536-.112-.128-.28-.192-.504-.192a.754.754 0 00-.472.16.7.7 0 00-.272.408V6h-.8zm6.153-1.104h.736c-.064.363-.226.65-.488.864-.256.213-.592.32-1.008.32-.496 0-.901-.17-1.216-.512-.309-.341-.464-.787-.464-1.336 0-.533.158-.976.472-1.328a1.52 1.52 0 011.192-.536c.491 0 .87.16 1.136.48.272.315.408.739.408 1.272v.288H31.81c.011.31.096.555.256.736a.839.839 0 00.64.264c.422 0 .675-.17.76-.512zm-.768-1.856a.82.82 0 00-.568.208c-.149.133-.248.325-.296.576h1.608a.842.842 0 00-.2-.56c-.128-.15-.309-.224-.544-.224zm4.256-.608v.824c-.112-.08-.27-.12-.472-.12-.171 0-.323.05-.456.152a.651.651 0 00-.256.416V6h-.8V2.448h.8v.368a.77.77 0 01.32-.32.909.909 0 01.472-.128c.186 0 .317.021.392.064zm4.988.016l.624 2.52.688-2.52h.776L42.997 6h-.8l-.632-2.472L40.933 6h-.8l-1.032-3.552h.8l.688 2.52.624-2.52h.728zm3.53 0V6h-.8V2.448h.8zm-.055-1.416c.101.096.152.21.152.344 0 .133-.05.248-.152.344a.496.496 0 01-.696 0 .47.47 0 01-.144-.344.47.47 0 01.144-.344.496.496 0 01.696 0zm1.229 4.008V3.112h-.56v-.664h.56v-.952h.8v.952h.8v.664h-.8v1.84c0 .277.141.416.424.416a.76.76 0 00.456-.144v.728c-.144.085-.344.128-.6.128-.33 0-.595-.088-.792-.264-.192-.176-.288-.435-.288-.776zM49.14 6V.8h.8v1.984c.24-.277.56-.416.96-.416.395 0 .702.12.92.36.224.24.337.56.337.96V6h-.8V3.824c0-.23-.056-.408-.169-.536-.111-.128-.28-.192-.504-.192a.754.754 0 00-.471.16.7.7 0 00-.273.408V6h-.8z",fill:"#fff"},null,-1),r=[o,a];function l(t,e){return Object(i["D"])(),Object(i["i"])("svg",n,r)}var c=s("b9a6"),h=s.n(c);const d={},u=h()(d,[["render",l]]);e["default"]=u},e13b:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_5_petersen_kobke_L0.jpg.astc.b333ddac.ktx"},e171:function(t,e,s){},e210:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_7_lund_jensen_L0.361ae030.jpg"},e282:function(t,e,s){},e335:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_3_husband_baumann_L0.jpg.astc.b6bec88e.ktx"},e3bb:function(t,e,s){"use strict";s("e171")},e3c2:function(t,e,s){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+s("f5de")()+"\n#pragma SLOT pv\n\nIN vec3 aPosition;\nIN vec2 aTexCoord0;\n\nuniform mat4 uWorldMatrix;\nuniform mat4 uVP;\n\nOUT vec2 vTexCoord;\n\nvoid main(void){\n  vec3 worldPosition = (uWorldMatrix * vec4(aPosition, 1.0)).xyz;\n  gl_Position = uVP * vec4(worldPosition, 1.0);\n  vTexCoord = aTexCoord0;\n\n}",e};i.toString=i,t.exports=i},e40b:function(t,e,s){"use strict";s("0ad2")},e481:function(t,e,s){t.exports=s.p+"img/background-2.18bc35a0.png"},e53d:function(t,e,s){"use strict";s("3cd0")},e59f:function(t,e,s){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#ifndef hasNormals\n  #define hasNormals 1\n#endif \n#ifndef hasTangents\n  #define hasTangents hasNormals\n#endif \n\n\n#if !hasTangents && __VERSION__ != 300\n  #extension GL_OES_standard_derivatives : enable\n#endif \n\n#if __VERSION__ == 300\n  precision lowp sampler2DShadow;\n\n  #define DepthSampler sampler2DShadow\n  \n#else\n  #define DepthSampler sampler2D\n#endif\n\n\n\n#pragma SLOT precision\n\n"+s("dc9a")()+"\n\n#pragma SLOT pf\n\n\nuniform vec3 uCameraPosition;\nIN vec3 vWorldPosition;\n\n#if hasNormals\nIN mediump vec3 vWorldNormal;\n#endif \n\n#if HAS_normal && hasTangents\nIN mediump vec3 vWorldTangent;\nIN mediump vec3 vWorldBitangent;\n#endif \n\n\n\n\nstruct GeometryData\n{\n    vec3  worldPos;\n    mediump vec3   worldNrm;\n    mediump vec3   viewDir;\n    mediump vec3   worldReflect;\n};\n\n\n\n\n"+s("1c5c")()+"\n"+s("6ac2")()+"\n"+s("605a")()+"\n\n\nuniform float uSampleIndex  ;\nuniform vec3 uLSpotPositions  ;\nuniform vec3 uLSpotDirections ;\nuniform vec4 uLSpotAttenuation; \n\n\nmediump float AngleAttenuation(vec3 spotDirection, vec3 lightDirection, vec2 spotAttenuation)\n{\n  mediump float SdotL = dot(spotDirection, lightDirection);\n  mediump float atten = saturate(SdotL * spotAttenuation.x + spotAttenuation.y);\n  return atten * atten;\n}\n\nfloat DistanceAttenuation(float distanceSqr)\n{\n  return 1.0/distanceSqr;\n}\n\nfloat DistanceAttenuationRange(float distanceSqr, vec2 distanceAttenuation)\n{\n  float factor = distanceSqr * distanceAttenuation.x; // x = 1/range squared\n  float smoothFactor = saturate(1.0 - factor * factor);\n  smoothFactor = smoothFactor * smoothFactor;\n\n  float lightAtten = 1.0/distanceSqr;\n  return lightAtten * smoothFactor;\n}\n\n\n\n\n\n#define SHADOW_COUNT 1\n\n\nuniform highp vec2 uShadowKernelRotation;\nuniform DepthSampler tShadowMap;\nuniform highp mat4 uShadowMatrix;\nuniform highp vec4 uShadowTexelBiasVector;\nuniform       vec2 uShadowMapSize;\n\n\nstruct ShadowMapData {\n  mat4 projection;\n  vec4 texelBiasVector;\n  vec2 size; // size , 1/size\n};\n\n#define GET_SHADOWMAP_DATA(i) ShadowMapData( uShadowMatrix, uShadowTexelBiasVector, uShadowMapSize)\n\n\n// RGB depth decoding\n// ------------------\nhighp float decodeDepthRGB(highp vec3 rgb){\n  return(rgb.x+rgb.y*(1.0/255.0))+rgb.z*(1.0/65025.0);\n}\n\n\n#if __VERSION__ == 300\n  \n      \n  float textureShadow( DepthSampler t, float ref, vec2 uvs ){\n    return texture(t, vec3( uvs, ref ) );\n  }\n\n  vec2 textureShadow( DepthSampler t, float ref, vec4 uvs ){\n    \n    return vec2(\n      texture(t, vec3( uvs.xy, ref ) ),\n      texture(t, vec3( uvs.zw, ref ) )\n    );\n\n  }\n\n  vec4 textureShadow( DepthSampler t, float ref, vec4 uvs0, vec4 uvs1 ){\n    \n    return vec4(\n      texture(t, vec3( uvs0.xy, ref ) ),\n      texture(t, vec3( uvs0.zw, ref ) ),\n      texture(t, vec3( uvs1.xy, ref ) ),\n      texture(t, vec3( uvs1.zw, ref ) )\n    );\n\n  }\n\n\n\n#else\n\n\n\n  #if depthFormat( D_RGB )\n    float FETCH_DEPTH( DepthSampler t, vec2 uvs ){\n      return decodeDepthRGB( texture2D(t,uvs).xyz );\n    }\n    //define FETCH_DEPTH(t,uvs) decodeDepthRGB( texture2D(t,uvs).xyz )\n  #endif\n\n  #if depthFormat( D_DEPTH )\n    float FETCH_DEPTH( DepthSampler t, vec2 uvs ){\n      return texture2D(t,uvs).x;\n    }\n    //define FETCH_DEPTH(t,uvs) texture2D(t,uvs).x\n  #endif\n\n  \n  float textureShadow( DepthSampler t, float ref, vec2 uvs ){\n    return step( ref, FETCH_DEPTH(t,uvs));\n  }\n\n  vec2 textureShadow( DepthSampler t, float ref, vec4 uvs ){\n    \n    vec2 occl = vec2(\n      FETCH_DEPTH(t,uvs.xy),\n      FETCH_DEPTH(t,uvs.zw)\n    );\n\n    return step( vec2(ref), occl );\n  }\n\n  vec4 textureShadow( DepthSampler t, float ref, vec4 uvs0, vec4 uvs1 ){\n    \n    vec4 occl = vec4(\n      FETCH_DEPTH(t,uvs0.xy),\n      FETCH_DEPTH(t,uvs0.zw),\n      FETCH_DEPTH(t,uvs1.xy),\n      FETCH_DEPTH(t,uvs1.zw)\n    );\n\n    return step( vec4(ref), occl );\n  }\n\n#endif\n\n\n\n\nfloat resolveShadowNoFiltering(highp float fragZ, DepthSampler depth,highp vec2 uv ){\n    return textureShadow( depth, fragZ, uv );\n}\n\n#if __VERSION__ == 300\n  // Bilinear is natively supported in ES3\n  // Shadowmap filtering must be set by sampler2DShadow filter parameter\n\n  float resolveShadow2x1(highp float fragZ, DepthSampler depth,highp vec2 uv, vec2 mapSize ){\n    return textureShadow( depth, fragZ, uv );\n  }\n\n  float resolveShadow2x2(highp float fragZ, DepthSampler depth,highp vec2 uv, vec2 mapSize ){\n    return textureShadow( depth, fragZ, uv );\n  }\n\n#else\n\n  float resolveShadow2x1(highp float fragZ, DepthSampler depth,highp vec2 uv, vec2 mapSize ){\n\n    highp float coordsPx = uv.x*mapSize.x;\n    highp float uvMin = floor( coordsPx ) * mapSize.y;\n    highp float uvMax = ceil(  coordsPx ) * mapSize.y;\n\n    vec2 occl = textureShadow( depth, fragZ, vec4(\n      uvMin,uv.y,\n      uvMax,uv.y\n    ));\n\n    highp float ratio = coordsPx - uvMin*mapSize.x;\n    return ( ratio * occl.y + occl.x ) - ratio * occl.x;\n\n  }\n\n  float resolveShadow2x2(highp float fragZ, DepthSampler depth,highp vec2 uv, vec2 mapSize ){\n\n    highp vec2 coordsPx = uv*mapSize.x;\n    highp vec2 uvMin=floor( coordsPx ) *mapSize.y;\n    highp vec2 uvMax=ceil(  coordsPx ) *mapSize.y;\n\n    vec4 occl = textureShadow( depth, fragZ, \n      vec4(\n        uvMin,\n        vec2(uvMax.x,uvMin.y)\n      ),\n      vec4(\n        vec2(uvMin.x,uvMax.y),\n        uvMax\n      )\n    );\n\n    highp vec2 ratio = coordsPx - uvMin*mapSize.x;\n    vec2  t = ( ratio.y * occl.zw + occl.xy ) - ratio.y * occl.xy;\n\n    return(ratio.x*t.y+t.x)-ratio.x*t.x;\n  }\n\n#endif\n\n\nfloat calcLightOcclusions(DepthSampler depth, highp vec3 fragCoord, vec2 mapSize ){\n  float s;\n\n  highp vec2 kernelOffset = uShadowKernelRotation * mapSize.y;\n\n  // NO FILTER\n  #if shadowFilter( PCFNONE )\n\n    s = resolveShadowNoFiltering( fragCoord.z, depth, fragCoord.xy );\n  #endif\n\n  // PCF4x1\n  #if shadowFilter( PCF4x1 )\n\n    s = resolveShadowNoFiltering( fragCoord.z, depth, fragCoord.xy + kernelOffset                    );\n    s+= resolveShadowNoFiltering( fragCoord.z, depth, fragCoord.xy - kernelOffset                    );\n    s+= resolveShadowNoFiltering( fragCoord.z, depth, fragCoord.xy + vec2(-kernelOffset.y,kernelOffset.x)  );\n    s+= resolveShadowNoFiltering( fragCoord.z, depth, fragCoord.xy + vec2(kernelOffset.y,-kernelOffset.x)  );\n    s /= 4.0;\n  #endif\n\n  // PCF4x4\n  #if shadowFilter( PCF4x4 )\n\n    s = resolveShadow2x2( fragCoord.z, depth, fragCoord.xy + kernelOffset                         , mapSize );\n    s+= resolveShadow2x2( fragCoord.z, depth, fragCoord.xy - kernelOffset                         , mapSize );\n    s+= resolveShadow2x2( fragCoord.z, depth, fragCoord.xy + vec2(-kernelOffset.y,kernelOffset.x) , mapSize );\n    s+= resolveShadow2x2( fragCoord.z, depth, fragCoord.xy + vec2(kernelOffset.y,-kernelOffset.x) , mapSize );\n    s /= 4.0;\n  #endif\n\n  // PCF2x2\n  #if shadowFilter( PCF2x2 )\n\n    s = resolveShadow2x1( fragCoord.z, depth, fragCoord.xy + kernelOffset , mapSize);\n    s+= resolveShadow2x1( fragCoord.z, depth, fragCoord.xy - kernelOffset , mapSize);\n    s /= 2.0;\n  #endif\n\n\n  if( any( greaterThan( abs( fragCoord - vec3(.5) ), vec3(.5) ) ) ){\n    s = 1.0;\n  }\n\n  return s;\n\n}\n\n// float3 ApplyShadowBias(float3 positionWS, float3 normalWS, float3 lightDirection)\n// {\n//     float invNdotL = 1.0 - saturate(dot(lightDirection, normalWS));\n//     float scale = invNdotL * _ShadowBias.y;\n\n//     // normal bias is negative since we want to apply an inset normal offset\n//     positionWS = lightDirection * _ShadowBias.xxx + positionWS;\n//     positionWS = normalWS * scale.xxx + positionWS;\n//     return positionWS;\n// }\n\nvec3 calcShadowPosition( vec4 texelBiasVector, mat4 shadowProjection, vec3 worldPos, vec3 worldNormal, float invMapSize )\n{\n  float WoP = dot( texelBiasVector, vec4( worldPos, 1.0 ) );\n\n  WoP *= .0005+2.0*invMapSize;\n\n  highp vec4 fragCoord = shadowProjection * vec4( worldPos + WoP * worldNormal, 1.0);\n  return fragCoord.xyz / fragCoord.w;\n}\n\n\n\nvec3 calcShadowPosition( ShadowMapData shadowmap, vec3 worldPos, vec3 worldNormal )\n{\n  float WoP = dot( shadowmap.texelBiasVector, vec4( worldPos, 1.0 ) );\n\n  WoP *= .005+2.0*shadowmap.size.y;\n\n  highp vec4 fragCoord = shadowmap.projection * vec4( worldPos + WoP * worldNormal, 1.0);\n  return fragCoord.xyz / fragCoord.w;\n}\n\n\nmediump float SampleShadowAttenuation( ShadowMapData shadowmap, DepthSampler texture, vec3 worldPos, vec3 worldNormal  ) {\n  highp vec3 coords = calcShadowPosition( shadowmap, worldPos, worldNormal );\n  return calcLightOcclusions( texture, coords, shadowmap.size );\n}\n\n\n\n\n\n//                MAIN\n// ===================\n\nvoid main( void ){\n\n  #pragma SLOT f\n\n  // -----------\n\n  GeometryData geometryData;\n  geometryData.worldPos = vWorldPosition;\n  geometryData.viewDir  = normalize( uCameraPosition - vWorldPosition ); // safe normalize?\n  geometryData.worldNrm = normalize(COMPUTE_NORMAL());\n  geometryData.worldReflect = reflect( -geometryData.viewDir, geometryData.worldNrm );\n\n\n  vec3 lightPositionWS                    = uLSpotPositions  ;\n  mediump vec3 spotDirection              = uLSpotDirections ;\n  mediump vec4 distanceAndSpotAttenuation = uLSpotAttenuation;\n\n  vec3 lightVector = lightPositionWS - geometryData.worldPos;\n  float distanceSqr = dot(lightVector, lightVector);\n\n  mediump vec3 lightDirection = vec3(lightVector * inversesqrt(distanceSqr));\n\n  mediump float attenuation = AngleAttenuation(spotDirection.xyz, lightDirection, distanceAndSpotAttenuation.zw);\n  attenuation *= DistanceAttenuation(distanceSqr);\n  // attenuation *= DistanceAttenuationRange(distanceSqr, distanceAndSpotAttenuation.xy);\n\n  ShadowMapData shadowmapData = GET_SHADOWMAP_DATA();\n  float shadowAttenuation = SampleShadowAttenuation(shadowmapData, tShadowMap, geometryData.worldPos, geometryData.worldNrm );\n\n  mediump float NdotL = sdot(geometryData.worldNrm, lightDirection);\n\n  #pragma SLOT prelightsf\n  #pragma SLOT lightsf\n  #pragma SLOT postlightsf\n\n\n  FragColor.rgb = vec3(attenuation * shadowAttenuation * NdotL);\n\n  FragColor.a = 1.0 / (1.0 + uSampleIndex);\n\n  #pragma SLOT postf_linear\n\n\n\n}",e};i.toString=i,t.exports=i},e5e4:function(t,e){var s=function(t){var e="";return e+="attribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord0;\n\n  \nvoid main( void ){\n\n  gl_Position = vec4( aPosition, 0.0, 1.0 );\n  vTexCoord0 = aTexCoord;\n\n}\n",e};s.toString=s,t.exports=s},e69d:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_9_wife_kobke_L0.jpg.6112477b.webp"},e6a1:function(t,e,s){},e71e:function(t,e,s){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+s("f5de")()+"\n\nIN vec3 aPosition;\nIN vec2 aTexcoord;\n\nOUT vec2 vTexCoord;\n\nuniform mat4 uMVP;\n\nvoid main(void){\n  gl_Position = uMVP * vec4(aPosition, 1.0);\n  vTexCoord = vec2(1. - aTexcoord.x, 1. - aTexcoord.y);\n}",e};i.toString=i,t.exports=i},e74b:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_5_saleswoman_metsu_L0.e59057fa.jpg"},e78a:function(t,e,s){"use strict";s("d927")},e793:function(t,e,s){},e863:function(t,e,s){},e95e:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_1_oldwoman_honthorst_L0.jpg.etc.087c9bb5.ktx"},e98d:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_8_selvportraet_hunaeus_L0.jpg.pvr.557c7479.ktx"},e9b6:function(t,e,s){var i=function(t){var e="";return e+=s("2387")()+"\n\nIN vec2 vTexCoord;\n\nuniform sampler2D uTex;\nuniform vec4 uColor;\nuniform float uAlpha;\n\n// https://drewcassidy.me/2020/06/26/sdf-antialiasing/\n\nvoid main(void) {\n  vec4 tex = texture2D(uTex, vec2(1. - vTexCoord.x, vTexCoord.y));\n\n  vec4 color = uColor;\n  float dist = (0.5 - tex.r);\n  vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n  float pixelDist = dist / length(ddist);\n  color.a = clamp(0.5 - pixelDist, 0.0, 1.0) * uColor.a * uAlpha;\n\n  FragColor = color;\n}",e};i.toString=i,t.exports=i},ea12:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_2_knitting_bendz_L0.jpg.pvr.a87bfa69.ktx"},edd4:function(t,e,s){"use strict";s.r(e),e["default"]={locale_name:t=>{const{normalize:e}=t;return e(["English"])},common:{exhibition_name:t=>{const{normalize:e}=t;return e(["The Female Gaze"])},owner_line1:t=>{const{normalize:e}=t;return e(["Kunsthal"])},owner_line2:t=>{const{normalize:e}=t;return e(["Charlottenborg"])},owner_verb:t=>{const{normalize:e}=t;return e(["presents"])},partnership:t=>{const{normalize:e,interpolate:s,named:i}=t;return e(["in partnership with ",s(i("facebook"))])},toggle_sound:t=>{const{normalize:e}=t;return e(["Sound on/off"])},about:t=>{const{normalize:e}=t;return e(["About"])},about_part1:t=>{const{normalize:e}=t;return e(["Ab"])},about_part2:t=>{const{normalize:e}=t;return e(["out"])},start:t=>{const{normalize:e}=t;return e(["Start the experience"])},footer:{item1:{label:t=>{const{normalize:e}=t;return e(["credits"])},action:t=>{const{normalize:e}=t;return e(["GOTO_CREDITS"])},gtm:{action:t=>{const{normalize:e}=t;return e(["clickcredits"])},label:t=>{const{normalize:e}=t;return e(["Click on Credits Link"])}}},item2:{label:t=>{const{normalize:e}=t;return e(["legals"])},action:t=>{const{normalize:e}=t;return e(["GOTO_LEGALS"])},gtm:{action:t=>{const{normalize:e}=t;return e(["clicklegals"])},label:t=>{const{normalize:e}=t;return e(["Click on Legals Link"])}}},item3:{label:t=>{const{normalize:e}=t;return e(["cookies"])}}}},meta:{title:t=>{const{normalize:e}=t;return e(["The Female Gaze"])},description:t=>{const{normalize:e}=t;return e(["Step into our virtual studio, reimagine a painting of a woman and give agency to a subject that for centuries has been presented in only one way. Available on mobile, desktop, or VR headset."])}},content:{play_video:t=>{const{normalize:e}=t;return e(["Play Video"])},close_video:t=>{const{normalize:e}=t;return e(["Close Video"])}},my_gaze:{back:t=>{const{normalize:e}=t;return e(["Back to the studio"])},see_all:t=>{const{normalize:e}=t;return e(["See all"])},pictures:t=>{const{normalize:e}=t;return e(["pictures"])},download:t=>{const{normalize:e}=t;return e(["Download the experience"])},background:t=>{const{normalize:e}=t;return e(["Background"])},pose:t=>{const{normalize:e}=t;return e(["Pose"])},facebook:t=>{const{normalize:e}=t;return e(["Facebook"])},instagram:t=>{const{normalize:e}=t;return e(["Instagram"])},bg0:t=>{const{normalize:e}=t;return e(["White Wall"])},bg1:t=>{const{normalize:e}=t;return e(["Library"])},bg2:t=>{const{normalize:e}=t;return e(["City Hall"])},bg3:t=>{const{normalize:e}=t;return e(["Factory"])},pose1:t=>{const{normalize:e}=t;return e(["Chill Pose"])},pose2:t=>{const{normalize:e}=t;return e(["Original Pose"])},pose3:t=>{const{normalize:e}=t;return e(["Freedom of Expression"])},pose4:t=>{const{normalize:e}=t;return e(["The Revolutionary"])}},xr:{next:t=>{const{normalize:e}=t;return e(["Next"])},skip:t=>{const{normalize:e}=t;return e(["Skip"])},cancel:t=>{const{normalize:e}=t;return e(["Press to cancel"])},validate:t=>{const{normalize:e}=t;return e(["Press to accept"])},yes:t=>{const{normalize:e}=t;return e(["Yes"])},no:t=>{const{normalize:e}=t;return e(["No"])},on:t=>{const{normalize:e}=t;return e(["ON"])},off:t=>{const{normalize:e}=t;return e(["OFF"])},close:t=>{const{normalize:e}=t;return e(["Close"])},photo_gallery:t=>{const{normalize:e}=t;return e(["Community gallery"])},painting:t=>{const{normalize:e}=t;return e(["Back to studio"])},move:t=>{const{normalize:e}=t;return e(["Move and release to teleport"])},light_settings:t=>{const{normalize:e}=t;return e(["Select the light"])},light_grab:t=>{const{normalize:e}=t;return e(["Grab the light"])},light_drop:t=>{const{normalize:e}=t;return e(["Release to drop the light"])},light_lookat_grab:t=>{const{normalize:e}=t;return e(["Grab the direction"])},light_lookat_drop:t=>{const{normalize:e}=t;return e(["Drop the direction"])},background_settings:t=>{const{normalize:e}=t;return e(["Change background"])},pose_settings:t=>{const{normalize:e}=t;return e(["Change pose"])},photo_take:t=>{const{normalize:e}=t;return e(["Press to take photo"])},depth:t=>{const{normalize:e}=t;return e(["Bring closer / Move away"])},release_to_select:t=>{const{normalize:e}=t;return e(["Release to select"])},contrast:t=>{const{normalize:e}=t;return e(["CONTRAST"])},brightness:t=>{const{normalize:e}=t;return e(["BRIGHTNESS"])},saturation:t=>{const{normalize:e}=t;return e(["SATURATION"])},temperature:t=>{const{normalize:e}=t;return e(["WARMTH"])},lookat:t=>{const{normalize:e}=t;return e(["DIRECTION"])},hue:t=>{const{normalize:e}=t;return e(["COLOR"])},intensity:t=>{const{normalize:e}=t;return e(["INTENSITY"])},select_settings:t=>{const{normalize:e}=t;return e(["Select settings"])},select_contrast:t=>{const{normalize:e}=t;return e(["Adjust contrast"])},select_brightness:t=>{const{normalize:e}=t;return e(["Adjust brightness"])},select_saturation:t=>{const{normalize:e}=t;return e(["Adjust saturation"])},select_temperature:t=>{const{normalize:e}=t;return e(["Adjust warmth"])},select_hue:t=>{const{normalize:e}=t;return e(["Adjust color"])},select_intensity:t=>{const{normalize:e}=t;return e(["Adjust intensity"])},reset:t=>{const{normalize:e}=t;return e(["Reset camera settings?"])},tutorial:t=>{const{normalize:e}=t;return e(["Tutorial"])},try_photo:t=>{const{normalize:e}=t;return e(["Try your camera!"])},tuto_settings_left:t=>{const{normalize:e}=t;return e(["Change camera settings on the left controller"])},tuto_aim_photo:t=>{const{normalize:e}=t;return e(["Move right controller to aim and snap a photo"])},tuto_format_photo:t=>{const{normalize:e}=t;return e(["Change aspect ratio using your right middle finger"])},angle_of_view:t=>{const{normalize:e}=t;return e(["Tilt your head to rotate the frame"])},download:t=>{const{normalize:e}=t;return e(["Download"])},tuto_global:{step1:{title:t=>{const{normalize:e}=t;return e(["How to move"])},desc:t=>{const{normalize:e}=t;return e(["Aim at the floor and use the right stick to move to that position"])}},step2:{title:t=>{const{normalize:e}=t;return e(["Choose angle"])},desc:t=>{const{normalize:e}=t;return e(["Look around or use the left stick to find position"])}},step3:{title:t=>{const{normalize:e}=t;return e(["Grab Lights"])},desc:t=>{const{normalize:e}=t;return e(["Grab and move lights using the right grip button."])}},step4:{title:t=>{const{normalize:e}=t;return e(["Edit Lights"])},desc:t=>{const{normalize:e}=t;return e(["Use the right trigger to select a light source, use the left controller to edit settings."])}},step5:{title:t=>{const{normalize:e}=t;return e(["Shoot a photo"])},desc:t=>{const{normalize:e}=t;return e(["Press the left stick to enter photo mode."])}},step6:{title:t=>{const{normalize:e}=t;return e(["See all others"])},desc:t=>{const{normalize:e}=t;return e(["After taking your own photo you can access the gallery to see all other photos."])}}},image_downloaded:t=>{const{normalize:e}=t;return e(["Downloaded"])},slide_picture:t=>{const{normalize:e}=t;return e(["Aim and press to slide pictures"])},aim_to_dive:t=>{const{normalize:e}=t;return e(["Dive in the painting"])},teleport:t=>{const{normalize:e}=t;return e(["Move right joystick forward to teleport"])},tuto_tilt_head_photo:t=>{const{normalize:e}=t;return e(["Tilt your head to rotate the frame"])},loading_text:t=>{const{normalize:e}=t;return e(["EXPLORE THE MAGIC REFLECTIONS VIRTUAL EXHIBITION BY JOHAN ERDMANN HUMMEL"])}},loading:{label:t=>{const{normalize:e}=t;return e(["Loading"])}},about:{owner_line1:t=>{const{normalize:e}=t;return e(["Kunsthal"])},owner_line2:t=>{const{normalize:e}=t;return e(["Charlottenborg"])},cta_close:t=>{const{normalize:e}=t;return e(["close"])}},painting:{intro:{skip:t=>{const{normalize:e}=t;return e(["Skip"])}},photo:{format_landscape:t=>{const{normalize:e}=t;return e(["Landscape"])},format_portrait:t=>{const{normalize:e}=t;return e(["Portrait"])},format_square:t=>{const{normalize:e}=t;return e(["Square"])},contrast:t=>{const{normalize:e}=t;return e(["Contrast"])},brightness:t=>{const{normalize:e}=t;return e(["Brightness"])},saturation:t=>{const{normalize:e}=t;return e(["Saturation"])},temperature:t=>{const{normalize:e}=t;return e(["Warmth"])},zoom:t=>{const{normalize:e}=t;return e(["Zoom"])},height:t=>{const{normalize:e}=t;return e(["Height"])},close:t=>{const{normalize:e}=t;return e(["Close camera"])}},tutorial:{cta_next:t=>{const{normalize:e}=t;return e(["I understand, let’s go"])},cta_close:t=>{const{normalize:e}=t;return e(["Close Tutorial"])},step1:{desc:t=>{const{normalize:e}=t;return e(["Click on the floor to move to that position"])}},step2:{desc:t=>{const{normalize:e}=t;return e(["Click anywhere and hold, to drag around and find position"])}},step3:{desc:t=>{const{normalize:e}=t;return e(["Click on light to activate, choose between light source and light direction. <br/>When you have chosen the light you want to move, click on the floor to reposition it."])}},step4:{desc:t=>{const{normalize:e}=t;return e(["Press the photo button in the lower middle of the screen to enter photo mode. <br/>Inside the photo mode you will have several options to frame and recolor the photo."])}},step5:{desc:t=>{const{normalize:e}=t;return e(["In the top right corner you can click on the gallery link to see all other photos, if you want to explore even more, click on any photo to be transported to that picture inside the experience."])}}},pose1:{shortname:t=>{const{normalize:e}=t;return e(["The Original Pose"])},image:t=>{const{normalize:e}=t;return e(["poses/pose-painting"])}},pose2:{shortname:t=>{const{normalize:e}=t;return e(["Chill Pose"])},image:t=>{const{normalize:e}=t;return e(["poses/pose-chill"])}},pose3:{shortname:t=>{const{normalize:e}=t;return e(["Freedom of Expression"])},image:t=>{const{normalize:e}=t;return e(["poses/pose-freedom"])}},pose4:{shortname:t=>{const{normalize:e}=t;return e(["Revolutionary"])},image:t=>{const{normalize:e}=t;return e(["poses/pose-revolution"])}},bg0:{shortname:t=>{const{normalize:e}=t;return e(["White Wall"])},description:t=>{const{normalize:e}=t;return e(['Original background from "A Young Girl Preparing Chanterelles", Art Painting by Peter Ilsted'])},image:t=>{const{normalize:e}=t;return e(["backgrounds/backgound-whitewall"])}},bg1:{shortname:t=>{const{normalize:e}=t;return e(["Library"])},description:t=>{const{normalize:e}=t;return e(["Places of Power"])},image:t=>{const{normalize:e}=t;return e(["backgrounds/backgound-library"])}},bg2:{shortname:t=>{const{normalize:e}=t;return e(["City Hall"])},description:t=>{const{normalize:e}=t;return e(["Rhythm of the city"])},image:t=>{const{normalize:e}=t;return e(["backgrounds/backgound-city"])}},bg3:{shortname:t=>{const{normalize:e}=t;return e(["Factory"])},description:t=>{const{normalize:e}=t;return e(["Nature to Industry"])},image:t=>{const{normalize:e}=t;return e(["backgrounds/backgound-factory"])}}},share:{title1:t=>{const{normalize:e}=t;return e(["My"])},title2:t=>{const{normalize:e}=t;return e(["Gaze"])},cta_submit:t=>{const{normalize:e}=t;return e(["Perfect"])},cta_restart:t=>{const{normalize:e}=t;return e(["Retake picture"])},share_title:t=>{const{normalize:e}=t;return e(["Share photo with friends"])},cta_facebook:t=>{const{normalize:e}=t;return e(["on Facebook"])},cta_instagram:t=>{const{normalize:e}=t;return e(["on Instagram"])},cta_share:t=>{const{normalize:e}=t;return e(["Share photo"])},cta_download:t=>{const{normalize:e}=t;return e(["Download my photo"])},cta_gallery:t=>{const{normalize:e}=t;return e(["View photo gallery"])},uploading:t=>{const{normalize:e}=t;return e(["Your photo is uploading"])}},gallery:{title1:t=>{const{normalize:e}=t;return e(["Photo"])},title2:t=>{const{normalize:e}=t;return e(["Gallery"])},subtitle:t=>{const{normalize:e}=t;return e(["Pictures from our community"])},scroll1:t=>{const{normalize:e}=t;return e(["Scroll"])},scroll2:t=>{const{normalize:e}=t;return e(["to"])},scroll3:t=>{const{normalize:e}=t;return e(["Explore"])},back:t=>{const{normalize:e}=t;return e(["Back to the studio"])},cursor:t=>{const{normalize:e}=t;return e(["View"])},single:{back:t=>{const{normalize:e}=t;return e(["Back to the gallery"])},copy:t=>{const{normalize:e}=t;return e(["Load the same settings"])}},swipe1:t=>{const{normalize:e}=t;return e(["Swipe"])},swipe2:t=>{const{normalize:e}=t;return e(["to"])},swipe3:t=>{const{normalize:e}=t;return e(["Explore"])},background:t=>{const{normalize:e}=t;return e(["BACKGROUND"])},pose:t=>{const{normalize:e}=t;return e(["POSE"])},bg0:t=>{const{normalize:e}=t;return e(["White Wall"])},bg1:t=>{const{normalize:e}=t;return e(["Library"])},bg2:t=>{const{normalize:e}=t;return e(["City Hall"])},bg3:t=>{const{normalize:e}=t;return e(["Factory"])},pose1:t=>{const{normalize:e}=t;return e(["Chill pose"])},pose2:t=>{const{normalize:e}=t;return e(["The Original pose"])},pose3:t=>{const{normalize:e}=t;return e(["Freedom of Expression"])},pose4:t=>{const{normalize:e}=t;return e(["Revolutionary Pose"])}},legals:{title:t=>{const{normalize:e}=t;return e(["Legal"])},content:t=>{const{normalize:e}=t;return e(['<h2><strong>Data privacy statement</strong></h2>\n<p>\nAny collection, processing and use (hereinafter "use") of data is solely for the purpose of providing our services. The services have been designed to use as little personal information as possible. For that matter, "personal data" is understood as all individual details about a person or factual circumstances of an identifiable natural person (so-called "affected person"). The following statements on data protection describe what types of data are collected when accessing our website, what happens with these data and how you may object to data usage.\n</p>\n\n\n\n<h2>1. General information on data processing</h2>\n<p>   \n<strong>1.1.Person Responsible (Controller)</strong>\n<br><br>\nResponsible within the meaning of the EU General Data Protection Regulation (GDPR) and the new Federal Data Protection Act (BDSG) is:<br>\nFreunde der Nationalgalerie e.V.<br>\nAddress: Potsdamer Straße 58, 10785 Berlin<br>\nPhone: +49 (0)30 26 39 48 80<br>\nEmail: office[at]freunde-der-nationalgalerie.de\n<br><br>        \n<strong>1.2. Protection of your data</strong>\n<br><br>\nWe have taken technical and organizational measures to ensure that the requirements of the EU General Data Protection Regulation (GDPR) are met by us, as well as, by external service providers working for us.\n<br><br>\nIf we work with other companies to provide our services, such as email and server providers, this will only be done after an extensive selection process. In this selection process, each individual service provider is carefully selected for its suitability in terms of technical and organizational data protection skills. This selection procedure will be documented in writing and an agreement on the order processing of data (order processing contract) will only be concluded if the third party complies with the requirements of Art. 28 GDPR.\n<br><br>\nYour information will be stored on specially protected servers. Access to it is only possible for a few specially authorized persons. \n<br><br>\n<strong>1.3. Erasure of personal data</strong>\n<br><br>\nWe process personal data only if necessary. As soon as the purpose of the data processing is fulfilled, erasure of the data is carried out according to the standards of the erasure concept, unless legal or contractual regulations oppose this.\n</p>\n\n\n\n<h2>2. Use of data on this website and in logfiles</h2>\n<p>       \n<strong>2.1. Scope of processing personal data </strong>\n<br><br>\nWhen visiting our website, our web servers temporarily store every access in a log file. \n<br><br>                         \nThe following data is collected and stored until automated erasure:<br>\n• IP-address of the requesting computer<br>\n• Date and time of access<br>\n• Name and URL of the retrieved file<br>\n• Transmitted amount of data<br>\n• Message if the retrieval was successful<br>\n• Detection data of the browser and operating system used<br>\n• Website from which access is made<br>\n• Name of your Internet access provider\n<br><br>\nWe use the web hosting service Amazon Web Services. The data processing is carried out by: Amazon Web Services EMEA SARL, 38 Avenue John F. Kennedy, L-1855 Luxembourg.<br>\nAWS is a product of: Amazon.com Inc, 410 Terry Avenue North, Seattle WA 98109, USA. The service provides the technical infrastructure to enable us to offer our services, in particular web servers and databases.\n<br><br>\nFurther details and information on the specific data protection provisions of Amazon Web Services can be found at \nhttps://aws.amazon.com/de/privacy/ and https://www.amazon.com/gp/help/customer/display.html?nodeId=468496 \n<br><br>        \n<strong>2.2. Legal basis for processing personal data</strong>\n<br><br>\nThe legal basis for the temporary storage of the data and log files is Art. 6 para. 1 s. 1 lit. f) of the GDPR. Our legitimate interest is to make our website accessible for you.\n<br><br> \n<strong>2.3. Purpose of data processing</strong>\n<br><br>\nThe processing of this data serves: the purpose of enabling the use of the website (connection establishment), system security, the technical administration of the network infrastructure, as well as to optimize the website. The IP address is evaluated only in case of attacks on our network infrastructure or the network infrastructure of our internet provider.<br>\nFurthermore, no input of your personal data is required to use our website.\n<br><br>        \n<strong>2.4. Duration of storage</strong>\n<br><br>\nAs soon as the purpose of the data processing is fulfilled, erasure of the data is carried out. This happens as soon as you close our website. Our hosting service might use data for statistical purposes. Any personal data will be anonymized for this. \n<br><br>        \n<strong>2.5. Right of objection and erasure</strong>\n<br><br>\nThe data processing is necessary in order to present the website and to ensure the website’s operation. Therefore, objecting is impossible.\n</p>      \n\n\n<h2>3. Use of cookies</h2>\n<p>    \n<strong>3.1. Description and scope of data processing</strong>\n<br><br>\nOur website is using cookies. Cookies are stored on your computer when you use our website. Cookies are small text files which are stored on your hard drive assigned to the browser you use. Through this information flows to us or the party who set the cookie. Cookies cannot run programs on or transmit viruses to your computer. Cookies are used to analyze the use of our website in anonymized or pseudonymized form and to enable personalized advertisements on this website. The following data may be transmitted:<br>\n• Frequency of website visits<br>\n• Which functions of the website are used by you<br>\n• Your cookie-settings<br>\n• Language settings<br>\n• Used search terms\n<br><br>\nUpon entering this website, a cookie banner informs you about the use of cookies on this website and asks for your consent to the use of cookies. Also, you are pointed to the data privacy statement of this website. <br>\nNote on data processing in the USA by Google and Facebook:\n<br><br>\nBy clicking on "Agree to all", you consent to your data being processed in the USA in accordance with Art. 6 para. 1 s. 1 lit. a) GDPR. According to the ECJ, the data protection standard in the USA is insufficient and there is a risk that your data will be processed by the US authorities for control and monitoring purposes, possibly also without any legal remedy. If you only consent to the setting of essential cookies, the transfer does not take place. Consent given can be revoked at any time.\n<br><br>\n<strong>3.2. Legal basis for data processing</strong>\n<br><br>\nThe legal basis for the processing of data by cookies, which do not only serve the functionality of our website, is Art. 6 para. 1 s. 1 lit. a) GDPR.\n<br><br>\nThe legal basis for the processing of data for cookies, which serve only the functionality of this website, is Art. 6 para. 1 s. 1 lit. f) GDPR.\n<br><br>  \n<strong>3.3. Purpose of data processing</strong>\n<br><br>  \nOur legitimate interests are to provide you with a working website connection and to ensure a comfortable use of this website. Also, we need to process your personal data to solve occurring safety and security issues, as well as to ensure system stability.\n<br><br>  \nThe data processing takes place to make a statistical evaluation of our website possible.\n<br><br>  \n<strong>3.4. Duration of storage</strong> \n<br><br>  \nThis website uses the following types of cookies. The extend and function of each are being explained below:<br>  \n• Transient cookies (see a)<br>  \n• Persistent cookies (see b)\n<br><br>\na) Transient cookies are automatically deleted when you close the browser. This is especially true for session cookies which store your session ID, with which various requests from your browser can be assigned to your session. This will allow your computer to be recognized when you return to our website. Session cookies are deleted when you log out or close the browse.\n<br><br>\nb) Persistent cookies are automatically deleted after a specified period, which may differ depending on the cookie.\n<br><br>        \n<strong>3.5. Right to objection and erasure</strong> \n<br><br>\nYou have the possibility to revoke your consent to the data processing by means of cookies, which do not only serve the functionality of the website. In addition, we do not set cookies until you have agreed to set cookies when you visit the site. In this way, you can prevent data processing via cookies on our website. You can also delete the cookies in your browser\'s security settings at any time. Please note that you may not be able to use all the features of this website. The setting of cookies can also be prevented at any time by appropriate settings in your internet browser.\n</p>  \n\n      \n<h2>4. Contact</h2>\n<p>        \n<strong>4.1. Description and scope of data processing</strong>\n<br><br>\nVia our website it is possible to contact us via e-mail. This will require different data to answer the request, which will be automatically saved for processing.<br>  \nYour data will not be passed on to third parties, unless you have given your consent. \n<br><br>        \n<strong>4.2. Legal basis for data processing</strong>\n<br><br>\nThe legal basis depends on Art. 6 para. 1 s. 1 lit. b) GDPR.\n<br><br>        \n<strong>4.3. Purpose of data processing</strong>\n<br><br>\nThe processing of personal data from the input form is used solely handling the contact request.\n<br><br>       \n<strong>4.4. Duration of storage</strong>\n<br><br>\nThe data will be deleted as soon as we answer your request. There might occur rare cases when legal or contractual retention periods interfere with the erasure of your personal data. In this case your data will be deleted after these periods.\n<br><br>        \n<strong>4.5. Right to objection and erasure</strong>\n<br><br>\nThe user has the right to withdraw their consent to the processing of personal data at any time. If the user contacts us, they can object to storage of their personal data at any time. In such cases, the conversation cannot be continued. All personal data that has been stored in the course of the contact will be deleted.  \n</p>\n\n       \n<h2>5. Social media links</h2>\n<p>\nWe have included the social media platform Facebook on our services via a link which may result in the social media provider receiving data from you. If you click on the social media link, the website of the respective social media provider is called up. By calling up the website of the respective social media provider via our services, the respective reference data is transmitted to the respective social media provider. The social media provider thereby receives the information that you have visited this website. \n<br><br>\nFurther information on data processing by social media providers can be found here:<br>\nFacebook: https://de-de.facebook.com/help/pages/insights  <br>\nhttps://de-de.facebook.com/about/privacy  <br>\nhttps://de-de.facebook.com/full_data_use_policy<br> \n\n</p>        \n\n\n<h2>6. Tracking and analytics</h2>\n\n<p>\nFor the continuous improvement of our website we use the following tracking and analytics tools. Below you can find information on which personal data is processed in each case and how you can reach the respective service providers:\n        <br><br>\n<strong>6.1. Facebook Custom Audience / Facebook Pixel</strong>\n        \n<br><br>\n<strong>6.1.1. Description and scope of data processing</strong>\n<br><br>\nOur website uses the visitor action pixel from Facebook ("Facebook Pixel") for conversion measurement. The data processing is carried out by: Facebook Ireland Ltd, 4 Grand Canal Square, Grand Canal Harbour, Dublin 2, Ireland.\nWith the help of the Facebook pixel, the behaviour of page visitors can be tracked after they visit our website. This allows the effectiveness of Facebook ads to be evaluated for statistical and market research purposes and future advertising measures to be optimised. Facebook receives the following categories of data: the forwarding URL, browser information and the person\'s Facebook user ID if they have a Facebook account and are logged in to Facebook. IP addresses for D are converted to a Germany IP by default. \n<br><br>\nThe data is stored and processed by Facebook so that a connection to the respective user profile is possible and Facebook can use the data for its own advertising purposes, in accordance with the Facebook Data Use Policy. This allows Facebook to serve ads on Facebook pages and outside of Facebook. This use of the data cannot be influenced by us as the site operator.\nYou can find Facebook\'s data protection information at https://www.facebook.com/about/privacy/      \n<br><br>\n<strong>6.1.2. Legal basis for data processing</strong>\n<br><br>\nThe legal basis for the use of the application is your consent, pursuant to Art. 6 para. 1 s. 1 lit. a) GDPR. \n        <br><br>\n<strong>6.1.3. Purpose of data processing</strong>\n<br><br>\nWe process your data for the purpose of demand-oriented and continuous optimisation of our website. This also results in our legitimate interest in data processing.\n        <br><br>\n<strong>6.1.4. Duration of storage</strong>\n<br><br>\nThe data will be deleted as soon as it is no longer required for our recording purposes and no legal, official or contractual regulations prevent deletion.\n        <br><br>\n<strong>6.1.5. Right to objection and erasure</strong>\n<br><br>\nYou have the option to revoke your consent to data processing at any time. Please contact us for this purpose. You can deactivate the "Custom Audiences" remarketing function in the Ad Settings section at https://www.facebook.com/ads/preferences/?entry_product=ad_settings_screen, provided you have a Facebook account. If you do not have a Facebook account, you can deactivate usage-based advertising from Facebook on the website of the European Interactive Digital Advertising Alliance: http://www.youronlinechoices.com/de/praferenzmanagement/ \n        <br><br>\n<strong>6.2. Google Analytics</strong>\n       <br><br>\n<strong>6.2.1. Description and scope of data processing</strong>\n<br><br>\nOur website uses Google Analytics. This is a service for analysing access to websites provided by Google LLC. ("Google") and enables us to improve our internet offer. The data processing for the European Economic Area and for Switzerland is carried out by: Google Ireland Limited, Gordon House, Barrow Street, Dublin 4, Ireland.<br><br>\nCookies enable us to analyse your use of our website. The information collected by means of a cookie is: \n<br>\n• IP address, <br>\n• time of access,  <br>\n• access duration<br>\nand is transferred to a Google server in the USA and stored there. The evaluation of your activities on our website is transmitted to us in the form of reports. Google may pass on the information collected to third parties if this is required by law or if third parties process this data on behalf of Google. The Google tracking codes on our website use the "_anonymizeIp()" function, which means that IP addresses are only processed in abbreviated form in order to exclude the possibility of a direct link to you.You can find more information on the terms of use and data protection of Google Analytics at https://www.google.de/intl/de/policies/ and at http://www.google.com/analytics/terms/de.html \n        <br><br>\n<strong>6.2.2. Legal basis for data processing</strong>\n<br><br>\nThe legal basis for the processing of personal data is your consent in accordance with Art. 6 para. 1 s.1 lit. a) GDPR. \n        <br><br>\n<strong>6.2.3. Purpose of the data processing</strong>\n<br><br>\nThe processing of your personal data enables us to analyse your surfing behaviour. By evaluating the data obtained, we are able to compile information on the use of the individual components of our website. This helps us to continuously improve our website and its user-friendliness. \n        <br><br>\n<strong>6.2.4. Duration of storage</strong>\n<br><br>\nThe data will be deleted 14 / 26 / 38 / 50 months after your [last] visit to our website.\n        <br><br>\n<strong>6.2.5. Right to objection and erasure</strong>\n<br><br>\nYou have the possibility at any time to revoke a given consent to data processing with effect for the future. Please contact us for this purpose. You can also prevent the installation of cookies from Google Analytics by setting your browser software accordingly. In this case, however, you may not be able to use all the functions of our website to their full extent. Google Analytics can also be deactivated and controlled by browser extensions, e.g. http://tools.google.com/dlpage/gaoptout?hl=de \n        <br><br>\n<strong>6.3. Google Tag Manager</strong>\n        <br><br>\n<strong>6.3.1. Description and scope of data processing</strong>\n<br><br>\nGoogle Tag Manager is a solution with which we can manage so-called website tags via an interface (and thus, for example, integrate Google marketing services into our online offering). The Tag Manager itself (which implements the tags) does not process any personal data. With regard to the processing of personal data, please refer to the information on Google services. The data processing for the European Economic Area and for Switzerland is carried out by:Google Ireland Limited, Gordon House, Barrow Street, Dublin 4, Ireland.\n<br><br>\nYou can access the Google Tag Manager usage guidelines here: https://www.google.com/intl/de/tagmanager/use-policy.html \n</p>\n\n\n<h2>7. Other tools of third-party providers</h2>\n\n<p>\nWe also use third-party providers to help us with the site\'s appearance and functionality. These are listed below:\n        <br><br>\n<strong>7.1. Google Web Fonts</strong>\n        <br><br>\n<strong>7.1.1. Description and scope of data processing</strong>\n<br><br>\nWe use web fonts provided by Google. for uniform representation of fonts on the website. Data processing for the European Economic Area and for Switzerland is carried out by: Google Ireland Limited, Gordon House, Barrow Street, Dublin 4, Ireland.\n<br><br>\nWhen you call up a page, your browser loads the required web fonts into your browser cache to display texts and fonts correctly. To do this, the browser you use must connect to Google\'s servers. As a result, Google learns that our website has been accessed via your IP address. \n<br><br>\nFor more information about Google Web Fonts, see https://developers.google.com/fonts/faq and Google\'s privacy policy: https://www.google.com/policies/privacy/.\n        <br><br>\n<strong>7.1.2. Legal basis of data processing</strong>\n<br><br>\nThe legal basis is Art. 6 para. 1 s. 1 lit. f) GDPR. It is in our interest to make our website visually appealing and user-friendly at the same time.\n        <br><br>\n<strong>7.1.3. Purpose of data processing</strong>\n<br><br>\nWe use web fonts provided by Google for uniform representation of fonts on the website. The reason for us using Google web fonts is our interest to make our website vivid and user-friendly.\n        <br><br>\n<strong>7.1.4. Duration of storage</strong>\n<br><br>\nWe process personal data only as long as necessary. As soon as the purpose of the data processing is fulfilled, erasure of the data is carried out according to the standards of the erasure concept, unless legal or contractual regulations oppose this.\n        <br><br>\n<strong>7.1.5. Right to objection and erasure</strong>\n<br><br>\nIn the settings of your browser you can select to not download the fonts from servers of third parties. In this case, a default font which is already installed on your computer will be used.\n\n</p>\n\n\n<h2>8. Service providers from third countries</h2>\n\n<p>\nIn order to be able to provide our services, we use the support of service providers from third party countries (non-EU countries). In order to ensure the protection of your personal data in this case, we conclude processing contracts with each - carefully selected - service provider. All of our processors provide sufficient guarantees to implement appropriate technical and organizational measures. Our third country data processors are either located in a country with an adequate level of data protection (Art. 45 GDPR) or provide appropriate safeguards (Art 46 GDPR). \n<br><br>\nAdequate level of protection: The provider comes from a country whose level of data protection has been recognized by the EU Commission. For more information, see: https://ec.europa.eu/info/law/law-topic/data-protection/data-transfers-outside-eu/adequacy-protection-personal-data-non-eu-countries_en \n<br><br>\nEU standard contract clauses: Our provider has submitted to the EU standard contractual clauses to ensure secure data transfer. For more information, see: https://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=OJ:L:2010:039:0005:0018:DE:PDF  \nBinding Corporate Rules: Article 47 of the GDPR provides the possibility of ensuring data protection when transferring data to a third country via Binding Corporate Rules. These are examined and approved by the data security authorities within the framework of the consistency mechanism pursuant to Art. 63 GDPR. \n<br><br>\nConsent: In addition, a data transfer to a third country without an adequate level of protection will only take place if you have given us your consent in accordance with Art. 49 sec. 1 lit. a) GDPR for this purpose.\n\n</p>\n\n\n<h2>9. Your rights</h2>\n\n<p>\nYou have the following rights with respect to the personal data concerning you: \n<br><br>\n<strong>9.1. Right to withdraw a given consent (Art. 7 GDPR)</strong>\n<br><br>\nIf you have given your consent to the processing of your data, you can withdraw it at any time. This will affect the admissibility of processing your personal data by us for the time after you have withdrawn your consent. To withdraw your consent, contact us personally or in written form.\n<br><br>\n<strong>9.2. Right of access (Art. 15 GDPR)</strong>\n<br><br>\nYou have the right to obtain from us confirmation as to whether or not personal data concerning you are being processed, and, where that is the case, access to your personal data and the following information:<br>\n• the purpose of processing;<br>\n• the categories of personal data concerned;<br>\n• the recipients or the categories of recipient to whom your personal data have been or will be disclosed, in particular recipients in countries outside of the EU or international organisations; <br>\n• where possible, the envisaged period for which your personal data will be stored, or, if not possible, the criteria used to determine that period;<br>\n• all available information on the source of your personal data; <br>\n• the existence of automated decision-making, including profiling, referred to Art. 22 para. 1 and 4 GDPR and, in those cases, meaningful information about the logic involved, as well as the significance and the envisaged consequences of such processing for you.<br>\nIn the case of such a request, you must provide enough information about your identity to proof that the request concerns your own personal data.\n        <br><br>\n<strong>9.3. Right to rectification and erasure (Art. 16, 17 GDPR)</strong>\n<br><br>\nYou have the right to obtain from us without undue delay the rectification and completion of inaccurate personal data concerning yourself.\n<br><br>\nYou may also request the erasure of your personal data if any of the following applies to you:<br>\n• the personal data concerning you are no longer necessary for the purposes for which they were collected or otherwise processed;<br>\n• you withdraw consent on which the processing is based according to Art. 6 para. 1 s.1 lit. a) or Art. 9 para. 2 lit. a) GDPR, and where there is no other legal ground of processing;<br>\n• you object to the processing pursuant to Art. 21 para. 1 GDPR and there are no overriding legitimate grounds for the processing, or the you object to the processing pursuant to Art. 21 para. 2 GDPR;<br>\n• the personal data have been unlawfully processed;<br>\n• the personal data have to be erased for compliance with a legal obligation in Union or Member State law to which we are subject;<br>\n• the personal data have been collected in relation to the offer of information society services referred to in Art. 8 para. 1.\n<br><br>\nWhere we made the personal data public and are obliged to erase the personal data pursuant to Art. 17 para. 1 GDPR, we, taking account of available technology and the cost of implementation, shall take reasonable steps, including technical measures, to inform controllers which are processing the personal data that you have requested the erasure by such controllers of any links to, or copy or replication of, those personal data.\n<br><br>\nThese rights shall not apply to the extent that processing is necessary:<br>\n• for exercising the right of freedom of expression and information;<br>\n• for compliance with a legal obligation which requires processing by Union or Member State law to which we are subject or for the performance of a task carried out in the public interest or in the exercise of official authority vested in the controller;<br>\n• for reasons of public interest in the area of public health in accordance of Art. 9 para. 2 lit. h) and i) as well as Art. 9 para. 3 GDPR;<br>\n• for archiving purposes in the public interest, scientific or historical research purposes or statistical purposes in accordance with Art. 89 para. 1 GDPR, in so far as the right referred to above is likely to render impossible or seriously impair the achievement of the objectives of that processing, or<br>\n• for the establishment, exercise or defence of legal claims.\n<br><br>\n<strong>9.4. Right to restriction of processing (Art. 18 GDPR)</strong>\n<br><br>\nYou shall have the right to obtain from us restriction of processing where one of the following applies:<br>\n• the accuracy of the personal data is contested by you, for a period enabling us to verify the accuracy of the personal data;<br>\n• the processing is unlawful and you oppose the erasure of the personal data and request the restriction of their use instead;<br>\n• we no longer need the personal data for the purposes of the processing, but they are required by you for the establishment, exercise or defence of legal claims;<br>\n• you have objected to processing pursuant to Art. 21 para. 1 GDPR pending the verification whether our legitimate grounds override yours.\n<br><br>\nWhere processing has been restricted under the aforementioned conditions, such personal data shall, except for storage, only be processed with your consent or for the establishment, exercise or defence of legal claims or for the protection of the rights of another natural or legal person or for reasons of important public interest of the Union or of a Member State.<br>\nIf the limitation of the processing is restricted, you will be informed by us before the restriction is lifted.\n<br><br>\n<strong>9.5. Right to information (Art. 19 GDPR)</strong>\n<br><br>\nIf you have asserted us your right to rectification, erasure or restriction of data processing, we will inform all recipients of your personal data to correct, delete or restrict the processing of data, unless this proves impossible or involves disproportionate effort.\n<br><br>\nYou also have the right to know which recipients have received your personal data.\n<br><br>\n<strong>9.6. Right to data portability (Art. 20 GDPR)</strong>\n<br><br>\nYou have the right to receive your personal data, which you provided to us, in a structured, commonly used and machine-readable format. Also, you have the right to transmit those data to another controller, where<br>\n• the processing is based on consent pursuant of Art. 6 para. 1 s.1 lit. a) GDPR or of Art. 9 para. 2 lit. a) GDPR or is based on a contract pursuant of Art. 6 para. 1 s. 1 lit. b) DS-GVO; and<br>\n• the processing is carried out by automated means.\n<br><br>\nIn exercising your right to data portability, you have the right to obtain that personal data transmitted directly from us to another controller, as far as technically feasible. The right to data portability does not apply to processing of personal data necessary for the performance of a task carried out in the public interest or in the exercise of official authority that has been delegated to us.\n        <br><br>\n<strong>9.7. Right to object (Art. 21 GDPR)</strong>\n<br><br>\nWhere we based the processing of your personal data on a legitimate interest (Art. 6 para. 1 s. 1 lit. f) GDPR), you may object to the processing. The same applies if the data processing is based on Art. 6 para. 1 s. 1 lit. e).\nIn this case, we ask you to explain the reasons why we should not process your personal data. Based on this we will terminate or adapt the data processing or show you our legitimate reasons why we continue the data processing\n<br><br>\n<strong>9.8. Right to lodge a complaint with supervisory authority (Art. 77 GDPR)</strong>\n<br><br>\nWithout prejudice to any other administrative or judicial remedy, you shall have the right to complain to a supervisory authority, in particular in the Member State of your residence, place of work or place of alleged infringement, if you believe that the processing of the personal data concerning you is against the infringes of the GDPR.\nThe supervisory authority to which the complaint has been submitted shall inform you of the status and results of the complaint, including the possibility of a judicial remedy according to Article 78 GDPR.\n\n\n</p>\n<h2>10.How you perceive these rights</h2>\n\n<p>\nTo exercise these rights, please contact us.\n\n</p>\n\n\n<h2>11.Subject to change</h2>\n\n<p>\nWe reserve the right to change this privacy policy in compliance with legal requirements.\nDecember 2021\n</p>'])}},credits:{title:t=>{const{normalize:e}=t;return e(["Credits"])},content:t=>{const{normalize:e}=t;return e(["<h2>Virtual Gallery, Copyright images</h2><p>Die Granitschale im Berliner Lustgarten, Nationalgalerie (File number JEH WVZ083)<br>© Foto: Nationalgalerie der Staatlichen Museen zu Berlin - Preußischer Kulturbesitz<br>Fotograf/in: Jörg P. Anders</p><p>Das Schleifen der Granitschale, Nationalgalerie (JEH WVZ080)<br>© Foto: Nationalgalerie der Staatlichen Museen zu Berlin - Preußischer Kulturbesitz<br>Fotograf/in: Jörg P. Anders</p><p>Porträt der Luise Mila, Nationalgalerie (JEH WVZ052)<br>© Foto: Nationalgalerie der Staatlichen Museen zu Berlin - Preußischer Kulturbesitz<br>Fotograf/in: Andres Kilger</p><p>Junge Leute beim Schaukeln in einem Garten bei Neapel, Museumslandschaft Hessen Kassel (JEH WVZ069)<br>© Museumslandschaft Hessen Kassel, Gemäldegalerie Alte Meister</p><p>Landschaft mit Regenbogen, Angermuseum Erfurt (JEH WVZ109):<br>© Angermuseum Erfurt, Foto: Dirk Urban</p><p>Die Fermate, Neue Pinakothek (JEH WVZ050)<br>© Bayerische Staatsgemäldesammlungen – Neue Pinakothek, München</p><p>Die Schachpartie, Landesmuseum Hannover (JEH WVZ063)<br>© Landesmuseum Hannover</p>"])}},cookies:{description:t=>{const{normalize:e}=t;return e(["This website uses cookies."])},link:t=>{const{normalize:e}=t;return e(["#"])},cta:t=>{const{normalize:e}=t;return e(["Read more"])}},slider:{buttonText:t=>{const{normalize:e}=t;return e(["SELECT"])}}}},ee26:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_8_selvportraet_hunaeus_L0.jpg.astc.ac2f8525.ktx"},efd0:function(t,e){var s=function(t){var e="";return e+="#if __VERSION__ == 300\n  #define IN in\n  #define OUT out\n#else\n  #define IN attribute\n  #define OUT varying\n#endif",e};s.toString=s,t.exports=s},efd9:function(t,e,s){var i=function(t){var e="";return e+="#pragma SLOT version\n\n#pragma SLOT definitions\n\n#pragma SLOT precision\n\n"+s("dc9a")()+"\n#pragma SLOT pf\n\nIN vec3 vTexCoord;\n\n// hsv2rgb from http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl\n\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvoid main(void){\n  float inf = step(progress(), 0.5);\n  float high = step(0.5, vTexCoord.z);\n  float low = 1.0 - high;\n  float right = step(vTexCoord.z - progress(), 0.0);\n  float cutA = mix(high * right, low * (1.0 - right), inf);\n  float a = mix(1.0, cutA, halfCut());\n\n  float coordProgress = mix(vTexCoord.z, 1. - vTexCoord.z, isReversed());\n  vec3 defaultColor = vec3(1., 253. / 255., 192. / 255.);\n  vec3 hueGradient = hsv2rgb(vec3(coordProgress, 1., 1.));\n  vec3 colorGradient = mix(vec3(1., 1., 1.), hsv2rgb(vec3(hue(), 1., 1.)), coordProgress);\n  vec3 blackWhiteGradient = vec3(coordProgress, coordProgress, coordProgress);\n\n  float hueStep = step(0.26, lineType());\n  float colorStep = step(0.51, lineType());\n  float blackWhiteStep = step(0.76, lineType());\n  vec3 colorTemp1 = mix(defaultColor, hueGradient, hueStep);\n  vec3 colorTemp2 = mix(colorTemp1, colorGradient, colorStep);\n  vec3 color = mix(colorTemp2, blackWhiteGradient, blackWhiteStep);\n\n  FragColor = vec4(color.rgb, a);\n}",e};i.toString=i,t.exports=i},f1b4:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_8_child_syberg_L0.jpg.astc.e4ca6b4d.ktx"},f25b:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_5_petersen_kobke_L0.jpg.8dd70a15.webp"},f58e:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_1_schandorph_kroyer_L0.dfc5b2c8.jpg"},f617:function(t,e,s){"use strict";s("e793")},f62c:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_6_marine_ditlev_L0.jpg.pvr.116ce660.ktx"},f6a1:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_10_fruits_roed_L0.jpg.pvr.1f28336c.ktx"},f753:function(t,e,s){"use strict";s("a731")},f8c6:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_10_fruits_roed_L0.1ae542f4.jpg"},faaf:function(t,e){var s=function(t){var e="";return e+="\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec3 vTexCoord0;\n\nuniform mat4 uMVP;\nuniform lowp vec3 uParams;\n\n#define LEN uParams.x\n#define THICKNESS uParams.y\n#define NODASH uParams.z\n\n\nvoid main( void ){\n  gl_Position = uMVP * vec4( THICKNESS * aPosition.y, 0.0, -LEN*(aPosition.x), 1.0 );\n  vTexCoord0 = aTexCoord.xyx;\n  vTexCoord0.x = vTexCoord0.x * 2.0 - 1.0;\n  vTexCoord0.y = vTexCoord0.y * 2.0 - 1.0;\n  vTexCoord0.z = vTexCoord0.z * LEN * NODASH * 20.0 + 0.75;// dash per meters\n\n}\n",e};s.toString=s,t.exports=s},fba8:function(t,e,s){t.exports=s.p+"assets/webgl/art_1_7_eldest_hansen_L0.jpg.pvr.fdb8014f.ktx"},fc8f:function(t,e,s){},fd7c:function(t,e,s){"use strict";s("67d1")},fd92:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_8_selvportraet_hunaeus_L0.jpg.7d29cf48.webp"},fe46:function(t,e,s){},fef0:function(t,e,s){t.exports=s.p+"assets/webgl/art_2_6_marine_ditlev_L0.jpg.astc.8b56d362.ktx"},ff38:function(t,e,s){},ffc1:function(t,e,s){}});