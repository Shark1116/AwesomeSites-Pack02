"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[766],{1445:(t,e,s)=>{s.d(e,{m:()=>p});var r=s(4634),i=s(4312),a=s(6239),n=s(2634),o=s(7248),h=s(4093),l=s(2343),c=s(9110),u=s(1620),d=s(2826);class p{constructor(t,e=-1,s,r=d.IFH){this.name=t,this.tracks=s,this.duration=e,this.blendMode=r,this.uuid=u.generateUUID(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],s=t.tracks,r=1/(t.fps||1);for(let t=0,i=s.length;t!==i;++t)e.push(f(s[t]).scale(r));const i=new this(t.name,t.duration,e,t.blendMode);return i.uuid=t.uuid,i}static toJSON(t){const e=[],s=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,r=s.length;t!==r;++t)e.push(i.t.toJSON(s[t]));return r}static CreateFromMorphTargetSequence(t,e,s,i){const a=e.length,n=[];for(let t=0;t<a;t++){let h=[],l=[];h.push((t+a-1)%a,t,(t+1)%a),l.push(0,1,0);const c=r.Z.getKeyframeOrder(h);h=r.Z.sortedArray(h,1,c),l=r.Z.sortedArray(l,1,c),i||0!==h[0]||(h.push(a),l.push(l[0])),n.push(new o.d(".morphTargetInfluences["+e[t].name+"]",h,l).scale(1/s))}return new this(t,-1,n)}static findByName(t,e){let s=t;if(!Array.isArray(t)){const e=t;s=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<s.length;t++)if(s[t].name===e)return s[t];return null}static CreateClipsFromMorphTargetSequences(t,e,s){const r={},i=/^([\w-]*?)([\d]+)$/;for(let e=0,s=t.length;e<s;e++){const s=t[e],a=s.name.match(i);if(a&&a.length>1){const t=a[1];let e=r[t];e||(r[t]=e=[]),e.push(s)}}const a=[];for(const t in r)a.push(this.CreateFromMorphTargetSequence(t,r[t],e,s));return a}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const s=function(t,e,s,i,a){if(0!==s.length){const n=[],o=[];r.Z.flattenJSON(s,n,o,i),0!==n.length&&a.push(new t(e,n,o))}},i=[],a=t.name||"default",n=t.fps||30,l=t.blendMode;let u=t.length||-1;const d=t.hierarchy||[];for(let t=0;t<d.length;t++){const r=d[t].keys;if(r&&0!==r.length)if(r[0].morphTargets){const t={};let e;for(e=0;e<r.length;e++)if(r[e].morphTargets)for(let s=0;s<r[e].morphTargets.length;s++)t[r[e].morphTargets[s]]=-1;for(const s in t){const t=[],a=[];for(let i=0;i!==r[e].morphTargets.length;++i){const i=r[e];t.push(i.time),a.push(i.morphTarget===s?1:0)}i.push(new o.d(".morphTargetInfluence["+s+"]",t,a))}u=t.length*n}else{const a=".bones["+e[t].name+"]";s(c.y,a+".position",r,"pos",i),s(h.i,a+".quaternion",r,"rot",i),s(c.y,a+".scale",r,"scl",i)}}if(0===i.length)return null;return new this(a,u,i,l)}resetDuration(){let t=0;for(let e=0,s=this.tracks.length;e!==s;++e){const s=this.tracks[e];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function f(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return o.d;case"vector":case"vector2":case"vector3":case"vector4":return c.y;case"color":return n.R;case"quaternion":return h.i;case"bool":case"boolean":return a._;case"string":return l.N}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],s=[];r.Z.flattenJSON(t.keys,e,s,"value"),t.times=e,t.values=s}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}},4634:(t,e,s)=>{s.d(e,{Z:()=>a});var r=s(1859),i=s(2826);const a={arraySlice:function(t,e,s){return a.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==s?s:t.length)):t.slice(e,s)},convertArray:function(t,e,s){return!t||!s&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,s=new Array(e);for(let t=0;t!==e;++t)s[t]=t;return s.sort((function(e,s){return t[e]-t[s]})),s},sortedArray:function(t,e,s){const r=t.length,i=new t.constructor(r);for(let a=0,n=0;n!==r;++a){const r=s[a]*e;for(let s=0;s!==e;++s)i[n++]=t[r+s]}return i},flattenJSON:function(t,e,s,r){let i=1,a=t[0];for(;void 0!==a&&void 0===a[r];)a=t[i++];if(void 0===a)return;let n=a[r];if(void 0!==n)if(Array.isArray(n))do{n=a[r],void 0!==n&&(e.push(a.time),s.push.apply(s,n)),a=t[i++]}while(void 0!==a);else if(void 0!==n.toArray)do{n=a[r],void 0!==n&&(e.push(a.time),n.toArray(s,s.length)),a=t[i++]}while(void 0!==a);else do{n=a[r],void 0!==n&&(e.push(a.time),s.push(n)),a=t[i++]}while(void 0!==a)},subclip:function(t,e,s,r,i=30){const n=t.clone();n.name=e;const o=[];for(let t=0;t<n.tracks.length;++t){const e=n.tracks[t],h=e.getValueSize(),l=[],c=[];for(let t=0;t<e.times.length;++t){const a=e.times[t]*i;if(!(a<s||a>=r)){l.push(e.times[t]);for(let s=0;s<h;++s)c.push(e.values[t*h+s])}}0!==l.length&&(e.times=a.convertArray(l,e.times.constructor),e.values=a.convertArray(c,e.values.constructor),o.push(e))}n.tracks=o;let h=1/0;for(let t=0;t<n.tracks.length;++t)h>n.tracks[t].times[0]&&(h=n.tracks[t].times[0]);for(let t=0;t<n.tracks.length;++t)n.tracks[t].shift(-1*h);return n.resetDuration(),n},makeClipAdditive:function(t,e=0,s=t,n=30){n<=0&&(n=30);const o=s.tracks.length,h=e/n;for(let e=0;e<o;++e){const i=s.tracks[e],n=i.ValueTypeName;if("bool"===n||"string"===n)continue;const o=t.tracks.find((function(t){return t.name===i.name&&t.ValueTypeName===n}));if(void 0===o)continue;let l=0;const c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);let u=0;const d=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);const p=i.times.length-1;let f;if(h<=i.times[0]){const t=l,e=c-l;f=a.arraySlice(i.values,t,e)}else if(h>=i.times[p]){const t=p*c+l,e=t+c-l;f=a.arraySlice(i.values,t,e)}else{const t=i.createInterpolant(),e=l,s=c-l;t.evaluate(h),f=a.arraySlice(t.resultBuffer,e,s)}if("quaternion"===n){(new r._).fromArray(f).normalize().conjugate().toArray(f)}const m=o.times.length;for(let t=0;t<m;++t){const e=t*d+u;if("quaternion"===n)r._.multiplyQuaternionsFlat(o.values,e,f,0,o.values,e);else{const t=d-2*u;for(let s=0;s<t;++s)o.values[e+s]-=f[s]}}}return t.blendMode=i.gSk,t}}},4312:(t,e,s)=>{s.d(e,{t:()=>h});var r=s(2826),i=s(6964),a=s(5956),n=s(2354),o=s(4634);class h{constructor(t,e,s,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=o.Z.convertArray(e,this.TimeBufferType),this.values=o.Z.convertArray(s,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let s;if(e.toJSON!==this.toJSON)s=e.toJSON(t);else{s={name:t.name,times:o.Z.convertArray(t.times,Array),values:o.Z.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(s.interpolation=e)}return s.type=t.ValueTypeName,s}InterpolantFactoryMethodDiscrete(t){return new n.c(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new a.l(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new i.d(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case r.Syv:e=this.InterpolantFactoryMethodDiscrete;break;case r.NMF:e=this.InterpolantFactoryMethodLinear;break;case r.pIN:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return r.Syv;case this.InterpolantFactoryMethodLinear:return r.NMF;case this.InterpolantFactoryMethodSmooth:return r.pIN}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let s=0,r=e.length;s!==r;++s)e[s]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let s=0,r=e.length;s!==r;++s)e[s]*=t}return this}trim(t,e){const s=this.times,r=s.length;let i=0,a=r-1;for(;i!==r&&s[i]<t;)++i;for(;-1!==a&&s[a]>e;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);const t=this.getValueSize();this.times=o.Z.arraySlice(s,i,a),this.values=o.Z.arraySlice(this.values,i*t,a*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const s=this.times,r=this.values,i=s.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let e=0;e!==i;e++){const r=s[e];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,r),t=!1;break}if(null!==a&&a>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,r,a),t=!1;break}a=r}if(void 0!==r&&o.Z.isTypedArray(r))for(let e=0,s=r.length;e!==s;++e){const s=r[e];if(isNaN(s)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,s),t=!1;break}}return t}optimize(){const t=o.Z.arraySlice(this.times),e=o.Z.arraySlice(this.values),s=this.getValueSize(),i=this.getInterpolation()===r.pIN,a=t.length-1;let n=1;for(let r=1;r<a;++r){let a=!1;const o=t[r];if(o!==t[r+1]&&(1!==r||o!==t[0]))if(i)a=!0;else{const t=r*s,i=t-s,n=t+s;for(let r=0;r!==s;++r){const s=e[t+r];if(s!==e[i+r]||s!==e[n+r]){a=!0;break}}}if(a){if(r!==n){t[n]=t[r];const i=r*s,a=n*s;for(let t=0;t!==s;++t)e[a+t]=e[i+t]}++n}}if(a>0){t[n]=t[a];for(let t=a*s,r=n*s,i=0;i!==s;++i)e[r+i]=e[t+i];++n}return n!==t.length?(this.times=o.Z.arraySlice(t,0,n),this.values=o.Z.arraySlice(e,0,n*s)):(this.times=t,this.values=e),this}clone(){const t=o.Z.arraySlice(this.times,0),e=o.Z.arraySlice(this.values,0),s=new(0,this.constructor)(this.name,t,e);return s.createInterpolant=this.createInterpolant,s}}h.prototype.TimeBufferType=Float32Array,h.prototype.ValueBufferType=Float32Array,h.prototype.DefaultInterpolation=r.NMF},5907:(t,e,s)=>{s.d(e,{i:()=>l});const r="\\[\\]\\.:\\/",i=new RegExp("[\\[\\]\\.:\\/]","g"),a="[^\\[\\]\\.:\\/]",n="[^"+r.replace("\\.","")+"]",o=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",a)+/(WCOD+)?/.source.replace("WCOD",n)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",a)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",a)+"$"),h=["material","materials","bones"];class l{constructor(t,e,s){this.path=e,this.parsedPath=s||l.parseTrackName(e),this.node=l.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,s){return t&&t.isAnimationObjectGroup?new l.Composite(t,e,s):new l(t,e,s)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(i,"")}static parseTrackName(t){const e=o.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const s={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=s.nodeName&&s.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=s.nodeName.substring(r+1);-1!==h.indexOf(t)&&(s.nodeName=s.nodeName.substring(0,r),s.objectName=t)}if(null===s.propertyName||0===s.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return s}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const s=t.skeleton.getBoneByName(e);if(void 0!==s)return s}if(t.children){const s=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const a=s(i.children);if(a)return a}return null},r=s(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const s=this.resolvedProperty;for(let r=0,i=s.length;r!==i;++r)t[e++]=s[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const s=this.resolvedProperty;for(let r=0,i=s.length;r!==i;++r)s[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const s=this.resolvedProperty;for(let r=0,i=s.length;r!==i;++r)s[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const s=this.resolvedProperty;for(let r=0,i=s.length;r!==i;++r)s[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,s=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=l.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(s){let r=e.objectIndex;switch(s){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;default:if(void 0===t[s])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[s]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const a=t[r];if(void 0===a){const s=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s+"."+r+" but it wasn't found.",t)}let n=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?n=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(n=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][n]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}l.Composite=class{constructor(t,e,s){const r=s||l.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const s=this._targetGroup.nCachedObjects_,r=this._bindings[s];void 0!==r&&r.getValue(t,e)}setValue(t,e){const s=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=s.length;r!==i;++r)s[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,s=t.length;e!==s;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,s=t.length;e!==s;++e)t[e].unbind()}},l.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},l.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},l.prototype.GetterByBindingType=[l.prototype._getValue_direct,l.prototype._getValue_array,l.prototype._getValue_arrayElement,l.prototype._getValue_toArray],l.prototype.SetterByBindingTypeAndVersioning=[[l.prototype._setValue_direct,l.prototype._setValue_direct_setNeedsUpdate,l.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[l.prototype._setValue_array,l.prototype._setValue_array_setNeedsUpdate,l.prototype._setValue_array_setMatrixWorldNeedsUpdate],[l.prototype._setValue_arrayElement,l.prototype._setValue_arrayElement_setNeedsUpdate,l.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[l.prototype._setValue_fromArray,l.prototype._setValue_fromArray_setNeedsUpdate,l.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]]},6239:(t,e,s)=>{s.d(e,{_:()=>a});var r=s(2826),i=s(4312);class a extends i.t{}a.prototype.ValueTypeName="bool",a.prototype.ValueBufferType=Array,a.prototype.DefaultInterpolation=r.Syv,a.prototype.InterpolantFactoryMethodLinear=void 0,a.prototype.InterpolantFactoryMethodSmooth=void 0},2634:(t,e,s)=>{s.d(e,{R:()=>i});var r=s(4312);class i extends r.t{}i.prototype.ValueTypeName="color"},7248:(t,e,s)=>{s.d(e,{d:()=>i});var r=s(4312);class i extends r.t{}i.prototype.ValueTypeName="number"},4093:(t,e,s)=>{s.d(e,{i:()=>n});var r=s(2826),i=s(4312),a=s(3539);class n extends i.t{InterpolantFactoryMethodLinear(t){return new a.z(this.times,this.values,this.getValueSize(),t)}}n.prototype.ValueTypeName="quaternion",n.prototype.DefaultInterpolation=r.NMF,n.prototype.InterpolantFactoryMethodSmooth=void 0},2343:(t,e,s)=>{s.d(e,{N:()=>a});var r=s(2826),i=s(4312);class a extends i.t{}a.prototype.ValueTypeName="string",a.prototype.ValueBufferType=Array,a.prototype.DefaultInterpolation=r.Syv,a.prototype.InterpolantFactoryMethodLinear=void 0,a.prototype.InterpolantFactoryMethodSmooth=void 0},9110:(t,e,s)=>{s.d(e,{y:()=>i});var r=s(4312);class i extends r.t{}i.prototype.ValueTypeName="vector"},8124:(t,e,s)=>{s.d(e,{v:()=>a});var r=s(1620),i=s(2826);class a{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=i.W2J,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=r.generateUUID()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,s){t*=this.stride,s*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[s+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=r.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(e,this.stride);return s.setUsage(this.usage),s}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=r.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}},1599:(t,e,s)=>{s.d(e,{k:()=>n});var r=s(2399),i=s(8709);const a=new r.P;class n{constructor(t,e,s,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=s,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,s=this.data.count;e<s;e++)a.fromBufferAttribute(this,e),a.applyMatrix4(t),this.setXYZ(e,a.x,a.y,a.z);return this}applyNormalMatrix(t){for(let e=0,s=this.count;e<s;e++)a.fromBufferAttribute(this,e),a.applyNormalMatrix(t),this.setXYZ(e,a.x,a.y,a.z);return this}transformDirection(t){for(let e=0,s=this.count;e<s;e++)a.fromBufferAttribute(this,e),a.transformDirection(t),this.setXYZ(e,a.x,a.y,a.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,s){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=s,this}setXYZ(t,e,s,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=s,this.data.array[t+2]=r,this}setXYZW(t,e,s,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=s,this.data.array[t+2]=r,this.data.array[t+3]=i,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const s=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[s+e])}return new i.Tl(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new n(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const s=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[s+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}},2226:(t,e,s)=>{s.d(e,{O:()=>h});var r=s(8892),i=s(2480),a=s(6852);class n extends i.h{constructor(){super(new a.i(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}var o=s(7760);class h extends r._{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(o.T.DefaultUp),this.updateMatrix(),this.target=new o.T,this.shadow=new n}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}},8892:(t,e,s)=>{s.d(e,{_:()=>a});var r=s(7760),i=s(6936);class a extends r.T{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new i.I(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}},2480:(t,e,s)=>{s.d(e,{h:()=>u});var r=s(3672),i=s(5021),a=s(2399),n=s(930),o=s(7023);const h=new r.y,l=new a.P,c=new a.P;class u{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new i.F(512,512),this.map=null,this.mapPass=null,this.matrix=new r.y,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new o.i,this._frameExtents=new i.F(1,1),this._viewportCount=1,this._viewports=[new n.L(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,s=this.matrix;l.setFromMatrixPosition(t.matrixWorld),e.position.copy(l),c.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(c),e.updateMatrixWorld(),h.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(h),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(e.projectionMatrix),s.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}},637:(t,e,s)=>{s.d(e,{c:()=>f});var r=s(8892),i=s(2480),a=s(7111),n=s(3672),o=s(5021),h=s(2399),l=s(930);const c=new n.y,u=new h.P,d=new h.P;class p extends i.h{constructor(){super(new a.c(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new o.F(4,2),this._viewportCount=6,this._viewports=[new l.L(2,1,1,1),new l.L(0,1,1,1),new l.L(3,1,1,1),new l.L(1,1,1,1),new l.L(3,0,1,1),new l.L(1,0,1,1)],this._cubeDirections=[new h.P(1,0,0),new h.P(-1,0,0),new h.P(0,0,1),new h.P(0,0,-1),new h.P(0,1,0),new h.P(0,-1,0)],this._cubeUps=[new h.P(0,1,0),new h.P(0,1,0),new h.P(0,1,0),new h.P(0,1,0),new h.P(0,0,1),new h.P(0,0,-1)]}updateMatrices(t,e=0){const s=this.camera,r=this.matrix,i=t.distance||s.far;i!==s.far&&(s.far=i,s.updateProjectionMatrix()),u.setFromMatrixPosition(t.matrixWorld),s.position.copy(u),d.copy(s.position),d.add(this._cubeDirections[e]),s.up.copy(this._cubeUps[e]),s.lookAt(d),s.updateMatrixWorld(),r.makeTranslation(-u.x,-u.y,-u.z),c.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(c)}}class f extends r._{constructor(t,e,s=0,r=1){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=s,this.decay=r,this.shadow=new p}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}},5693:(t,e,s)=>{s.d(e,{P:()=>l});var r=s(8892),i=s(2480),a=s(1620),n=s(7111);class o extends i.h{constructor(){super(new n.c(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,s=2*a.RAD2DEG*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;s===e.fov&&r===e.aspect&&i===e.far||(e.fov=s,e.aspect=r,e.far=i,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}var h=s(7760);class l extends r._{constructor(t,e,s=0,r=Math.PI/3,i=0,a=1){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(h.T.DefaultUp),this.updateMatrix(),this.target=new h.T,this.distance=s,this.angle=r,this.penumbra=i,this.decay=a,this.shadow=new o}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}},1783:(t,e,s)=>{s.d(e,{Q:()=>a});var r=s(8160),i=s(3034);class a extends i.a{constructor(t){super(t),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,s,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const a=this,n=r.C.get(t);if(void 0!==n)return a.manager.itemStart(t),setTimeout((function(){e&&e(n),a.manager.itemEnd(t)}),0),n;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(t,o).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(a.options,{colorSpaceConversion:"none"}))})).then((function(s){r.C.add(t,s),e&&e(s),a.manager.itemEnd(t)})).catch((function(e){i&&i(e),a.manager.itemError(t),a.manager.itemEnd(t)})),a.manager.itemStart(t)}}},6446:(t,e,s)=>{s.d(e,{S:()=>n});var r=s(8160),i=s(3034),a=s(3782);class n extends i.a{constructor(t){super(t)}load(t,e,s,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const n=this,o=r.C.get(t);if(void 0!==o)return n.manager.itemStart(t),setTimeout((function(){e&&e(o),n.manager.itemEnd(t)}),0),o;const h=(0,a.c)("img");function l(){u(),r.C.add(t,this),e&&e(this),n.manager.itemEnd(t)}function c(e){u(),i&&i(e),n.manager.itemError(t),n.manager.itemEnd(t)}function u(){h.removeEventListener("load",l,!1),h.removeEventListener("error",c,!1)}return h.addEventListener("load",l,!1),h.addEventListener("error",c,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(h.crossOrigin=this.crossOrigin),n.manager.itemStart(t),h.src=t,h}}},8726:(t,e,s)=>{s.d(e,{Z:()=>r});class r{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let s=0,r=t.length;s<r;s++)e+=String.fromCharCode(t[s]);try{return decodeURIComponent(escape(e))}catch(t){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}},9026:(t,e,s)=>{s.d(e,{d:()=>n});var r=s(6446),i=s(9752),a=s(3034);class n extends a.a{constructor(t){super(t)}load(t,e,s,a){const n=new i.x,o=new r.S(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(t){n.image=t,n.needsUpdate=!0,void 0!==e&&e(n)}),s,a),n}}},4762:(t,e,s)=>{s.d(e,{E:()=>o});var r=s(5021),i=s(7417),a=s(6936),n=s(1620);class o extends i.W{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new r.F(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return n.clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new a.I(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new a.I(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new a.I(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}},7417:(t,e,s)=>{s.d(e,{W:()=>o});var r=s(2826),i=s(3459),a=s(5021),n=s(6936);class o extends i.F{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new n.I(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new n.I(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=r.IOt,this.normalScale=new a.F(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}},3187:(t,e,s)=>{s.d(e,{U:()=>a});var r=s(3459),i=s(6936);class a extends r.F{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new i.I(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}},1034:(t,e,s)=>{s.d(e,{_:()=>r});class r{constructor(t,e,s,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(s),this.sampleValues=e,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let s=this._cachedIndex,r=e[s],i=e[s-1];t:{e:{let a;s:{r:if(!(t<r)){for(let a=s+2;;){if(void 0===r){if(t<i)break r;return s=e.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===a)break;if(i=r,r=e[++s],t<r)break e}a=e.length;break s}if(t>=i)break t;{const n=e[1];t<n&&(s=2,i=n);for(let a=s-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(s===a)break;if(r=i,i=e[--s-1],t>=i)break e}a=s,s=0}}for(;s<a;){const r=s+a>>>1;t<e[r]?a=r:s=r+1}if(r=e[s],i=e[s-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return s=e.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,i,r)}return this.interpolate_(s,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,s=this.sampleValues,r=this.valueSize,i=t*r;for(let t=0;t!==r;++t)e[t]=s[i+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}},6964:(t,e,s)=>{s.d(e,{d:()=>a});var r=s(2826),i=s(1034);class a extends i._{constructor(t,e,s,i){super(t,e,s,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:r.Pnf,endingEnd:r.Pnf}}intervalChanged_(t,e,s){const i=this.parameterPositions;let a=t-2,n=t+1,o=i[a],h=i[n];if(void 0===o)switch(this.getSettings_().endingStart){case r._lf:a=t,o=2*e-s;break;case r._sL:a=i.length-2,o=e+i[a]-i[a+1];break;default:a=t,o=s}if(void 0===h)switch(this.getSettings_().endingEnd){case r._lf:n=t,h=2*s-e;break;case r._sL:n=1,h=s+i[1]-i[0];break;default:n=t-1,h=e}const l=.5*(s-e),c=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(h-s),this._offsetPrev=a*c,this._offsetNext=n*c}interpolate_(t,e,s,r){const i=this.resultBuffer,a=this.sampleValues,n=this.valueSize,o=t*n,h=o-n,l=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(s-e)/(r-e),f=p*p,m=f*p,y=-u*m+2*u*f-u*p,g=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*p+1,v=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f;for(let t=0;t!==n;++t)i[t]=y*a[l+t]+g*a[h+t]+v*a[o+t]+b*a[c+t];return i}}},2354:(t,e,s)=>{s.d(e,{c:()=>i});var r=s(1034);class i extends r._{constructor(t,e,s,r){super(t,e,s,r)}interpolate_(t){return this.copySampleValue_(t-1)}}},5956:(t,e,s)=>{s.d(e,{l:()=>i});var r=s(1034);class i extends r._{constructor(t,e,s,r){super(t,e,s,r)}interpolate_(t,e,s,r){const i=this.resultBuffer,a=this.sampleValues,n=this.valueSize,o=t*n,h=o-n,l=(s-e)/(r-e),c=1-l;for(let t=0;t!==n;++t)i[t]=a[h+t]*c+a[o+t]*l;return i}}},3539:(t,e,s)=>{s.d(e,{z:()=>a});var r=s(1034),i=s(1859);class a extends r._{constructor(t,e,s,r){super(t,e,s,r)}interpolate_(t,e,s,r){const a=this.resultBuffer,n=this.sampleValues,o=this.valueSize,h=(s-e)/(r-e);let l=t*o;for(let t=l+o;l!==t;l+=4)i._.slerpFlat(a,0,n,l-o,n,l,h);return a}}},1581:(t,e,s)=>{s.d(e,{N:()=>i});var r=s(7760);class i extends r.T{constructor(){super(),this.isBone=!0,this.type="Bone"}}},3294:(t,e,s)=>{s.d(e,{b:()=>i});var r=s(109);class i extends r.x{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}},6190:(t,e,s)=>{s.d(e,{w:()=>f});var r=s(8924),i=s(3392),a=s(3672),n=s(7760),o=s(2399),h=s(3187),l=s(9349);const c=new a.y,u=new i.z,d=new r.a,p=new o.P;class f extends n.T{constructor(t=new l.u,e=new h.U){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const s=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,a=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),d.copy(s.boundingSphere),d.applyMatrix4(r),d.radius+=i,!1===t.ray.intersectsSphere(d))return;c.copy(r).invert(),u.copy(t.ray).applyMatrix4(c);const n=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=n*n,h=s.index,l=s.attributes.position;if(null!==h){for(let s=Math.max(0,a.start),i=Math.min(h.count,a.start+a.count);s<i;s++){const i=h.getX(s);p.fromBufferAttribute(l,i),m(p,i,o,r,t,e,this)}}else{for(let s=Math.max(0,a.start),i=Math.min(l.count,a.start+a.count);s<i;s++)p.fromBufferAttribute(l,s),m(p,s,o,r,t,e,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const s=t[e[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=s.length;t<e;t++){const e=s[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function m(t,e,s,r,i,a,n){const h=u.distanceSqToPoint(t);if(h<s){const s=new o.P;u.closestPointToPoint(t,s),s.applyMatrix4(r);const l=i.ray.origin.distanceTo(s);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(h),point:s,index:e,face:null,object:n})}}},7893:(t,e,s)=>{s.d(e,{O:()=>c});var r=s(2826),i=s(1581),a=s(3672),n=s(2074),o=s(1620);const h=new a.y,l=new a.y;class c{constructor(t=[],e=[]){this.uuid=o.generateUUID(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new a.y)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new a.y;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,s=this.boneMatrices,r=this.boneTexture;for(let r=0,i=t.length;r<i;r++){const i=t[r]?t[r].matrixWorld:l;h.multiplyMatrices(i,e[r]),h.toArray(s,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new c(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=o.ceilPowerOfTwo(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const s=new n.I(e,t,t,r.wk1,r.VzW);return s.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=s,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,s=this.bones.length;e<s;e++){const s=this.bones[e];if(s.name===t)return s}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let s=0,r=t.bones.length;s<r;s++){const r=t.bones[s];let n=e[r];void 0===n&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),n=new i.N),this.bones.push(n),this.boneInverses.push((new a.y).fromArray(t.boneInverses[s]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,s=this.boneInverses;for(let r=0,i=e.length;r<i;r++){const i=e[r];t.bones.push(i.uuid);const a=s[r];t.boneInverses.push(a.toArray())}return t}}},5777:(t,e,s)=>{s.d(e,{T:()=>d});var r=s(5232),i=s(3672),a=s(2399),n=s(930);const o=new a.P,h=new n.L,l=new n.L,c=new a.P,u=new i.y;class d extends r.K{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new i.y,this.bindMatrixInverse=new i.y}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new n.L,e=this.geometry.attributes.skinWeight;for(let s=0,r=e.count;s<r;s++){t.fromBufferAttribute(e,s);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(s,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const s=this.skeleton,r=this.geometry;h.fromBufferAttribute(r.attributes.skinIndex,t),l.fromBufferAttribute(r.attributes.skinWeight,t),o.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let t=0;t<4;t++){const r=l.getComponent(t);if(0!==r){const i=h.getComponent(t);u.multiplyMatrices(s.bones[i].matrixWorld,s.boneInverses[i]),e.addScaledVector(c.copy(o).applyMatrix4(u),r)}}return e.applyMatrix4(this.bindMatrixInverse)}}},2074:(t,e,s)=>{s.d(e,{I:()=>a});var r=s(9752),i=s(2826);class a extends r.x{constructor(t=null,e=1,s=1,r,a,n,o,h,l=i.TyD,c=i.TyD,u,d){super(null,n,o,h,l,c,r,a,u,d),this.isDataTexture=!0,this.image={data:t,width:e,height:s},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}}}]);
//# sourceMappingURL=766.be35d9d5ea03fba53ec5.js.map