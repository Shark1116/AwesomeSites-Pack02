"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[937],{1937:(t,e,i)=>{i.r(e),i.d(e,{ACESFilmicToneMapping:()=>a.LY2,AddEquation:()=>a.bGH,AddOperation:()=>a.NDo,AdditiveAnimationBlendMode:()=>a.gSk,AdditiveBlending:()=>a.WMw,AlphaFormat:()=>a.OTo,AlwaysDepth:()=>a.Se2,AlwaysStencilFunc:()=>a.cum,AmbientLight:()=>vi,AmbientLightProbe:()=>Wi,AnimationClip:()=>ri.m,AnimationLoader:()=>oi,AnimationMixer:()=>ys,AnimationObjectGroup:()=>us,AnimationUtils:()=>ls.Z,ArcCurve:()=>Ct,ArrayCamera:()=>qi.H,ArrowHelper:()=>pr,Audio:()=>Qi.B,AudioAnalyser:()=>Ki,AudioContext:()=>Xi.H,AudioListener:()=>$i.S,AudioLoader:()=>ki.m,AxesHelper:()=>dr.y,BackSide:()=>a._Li,BasicDepthPacking:()=>a.z81,BasicShadowMap:()=>a._MY,Bone:()=>tt.N,BooleanKeyframeTrack:()=>ns._,Box2:()=>Os,Box3:()=>Ls.Z,Box3Helper:()=>or,BoxBufferGeometry:()=>St.n,BoxGeometry:()=>St.D,BoxHelper:()=>ar,BufferAttribute:()=>it.Tl,BufferGeometry:()=>I.u,BufferGeometryLoader:()=>Li,ByteType:()=>a.T95,Cache:()=>Ni.C,Camera:()=>Zi.V,CameraHelper:()=>rr.R,CanvasTexture:()=>Mt,CapsuleBufferGeometry:()=>Dt,CapsuleGeometry:()=>Dt,CatmullRomCurve3:()=>Pt.Y,CineonToneMapping:()=>a.YGz,CircleBufferGeometry:()=>Ht.t,CircleGeometry:()=>Ht.z,ClampToEdgeWrapping:()=>a.uWy,Clock:()=>bs.S,Color:()=>w.I,ColorKeyframeTrack:()=>rs.R,ColorManagement:()=>ks.ep,CompressedTexture:()=>xt.E,CompressedTextureLoader:()=>hi.D,ConeBufferGeometry:()=>Jt,ConeGeometry:()=>Jt,CubeCamera:()=>Vi._,CubeReflectionMapping:()=>a.fY$,CubeRefractionMapping:()=>a.vxC,CubeTexture:()=>wt.B,CubeTextureLoader:()=>li,CubeUVReflectionMapping:()=>a.g8_,CubicBezierCurve:()=>Bt,CubicBezierCurve3:()=>Lt,CubicInterpolant:()=>_s.d,CullFaceBack:()=>a.tm_,CullFaceFront:()=>a.S2y,CullFaceFrontBack:()=>a.B02,CullFaceNone:()=>a.PeU,Curve:()=>At.H,CurvePath:()=>Nt,CustomBlending:()=>a.Xaj,CustomToneMapping:()=>a.dZ3,CylinderBufferGeometry:()=>jt.m,CylinderGeometry:()=>jt.f,Cylindrical:()=>Ts,Data3DTexture:()=>l.J,DataArrayTexture:()=>h.p,DataTexture:()=>vt.I,DataTexture2DArray:()=>Or,DataTexture3D:()=>Gr,DataTextureLoader:()=>ui,DataUtils:()=>n,DecrementStencilOp:()=>a.jfJ,DecrementWrapStencilOp:()=>a.T_J,DefaultLoadingManager:()=>Ai.t,DepthFormat:()=>a.qkB,DepthStencilFormat:()=>a.brP,DepthTexture:()=>bt.$,DirectionalLight:()=>gi.O,DirectionalLightHelper:()=>sr,DiscreteInterpolant:()=>As.c,DodecahedronBufferGeometry:()=>qt,DodecahedronGeometry:()=>qt,DoubleSide:()=>a.ehD,DstAlphaFactor:()=>a.fSK,DstColorFactor:()=>a.Vdb,DynamicCopyUsage:()=>a.l8J,DynamicDrawUsage:()=>a.dj0,DynamicReadUsage:()=>a.QM0,EdgesGeometry:()=>Kt,EllipseCurve:()=>_t,EqualDepth:()=>a.eD,EqualStencilFunc:()=>a.jwo,EquirectangularReflectionMapping:()=>a.dSO,EquirectangularRefractionMapping:()=>a.Bf4,Euler:()=>Ns.U,EventDispatcher:()=>ds.p,ExtrudeBufferGeometry:()=>Te,ExtrudeGeometry:()=>Te,FileLoader:()=>ni.h,FlatShading:()=>a.esl,Float16BufferAttribute:()=>it.e6,Float32BufferAttribute:()=>it.a$,Float64BufferAttribute:()=>it.OM,FloatType:()=>a.VzW,Fog:()=>b,FogExp2:()=>M,Font:()=>Br,FontLoader:()=>Fr,FramebufferTexture:()=>yt,FrontSide:()=>a.Wl3,Frustum:()=>Fs.i,GLBufferAttribute:()=>xs,GLSL1:()=>a.v9Y,GLSL3:()=>a.LSk,GreaterDepth:()=>a.w$m,GreaterEqualDepth:()=>a.ksN,GreaterEqualStencilFunc:()=>a.j4z,GreaterStencilFunc:()=>a.OAl,GridHelper:()=>Ks.V,Group:()=>dt.Z,HalfFloatType:()=>a.cLu,HemisphereLight:()=>mi,HemisphereLightHelper:()=>Xs,HemisphereLightProbe:()=>Ui,IcosahedronBufferGeometry:()=>Fe,IcosahedronGeometry:()=>Fe,ImageBitmapLoader:()=>zi.Q,ImageLoader:()=>ci.S,ImageUtils:()=>_r.P,ImmediateRenderObject:()=>Lr,IncrementStencilOp:()=>a.ZRs,IncrementWrapStencilOp:()=>a.oqc,InstancedBufferAttribute:()=>st,InstancedBufferGeometry:()=>Fi,InstancedInterleavedBuffer:()=>vs,InstancedMesh:()=>ht,Int16BufferAttribute:()=>it.aV,Int32BufferAttribute:()=>it.j8,Int8BufferAttribute:()=>it.RN,IntType:()=>a.Kz5,InterleavedBuffer:()=>F.v,InterleavedBufferAttribute:()=>B.k,Interpolant:()=>Cs._,InterpolateDiscrete:()=>a.Syv,InterpolateLinear:()=>a.NMF,InterpolateSmooth:()=>a.pIN,InvertStencilOp:()=>a.eMJ,KeepStencilOp:()=>a.x5V,KeyframeTrack:()=>cs.t,LOD:()=>X,LatheBufferGeometry:()=>Wt,LatheGeometry:()=>Wt,Layers:()=>Ms.S,LessDepth:()=>a.Zr5,LessEqualDepth:()=>a.vCF,LessEqualStencilFunc:()=>a.yt0,LessStencilFunc:()=>a.uXU,Light:()=>di._,LightProbe:()=>Mi,Line:()=>ut.x,Line3:()=>zs,LineBasicMaterial:()=>ii.n,LineCurve:()=>Rt,LineCurve3:()=>Ot,LineDashedMaterial:()=>si,LineLoop:()=>lt.b,LineSegments:()=>ct.e,LinearEncoding:()=>a.rnI,LinearFilter:()=>a.wem,LinearInterpolant:()=>ms.l,LinearMipMapLinearFilter:()=>a.FDw,LinearMipMapNearestFilter:()=>a.lRj,LinearMipmapLinearFilter:()=>a.D1R,LinearMipmapNearestFilter:()=>a.qyh,LinearSRGBColorSpace:()=>a.GUF,LinearToneMapping:()=>a.EoG,Loader:()=>ai.a,LoaderUtils:()=>Ti.Z,LoadingManager:()=>Ai.l,LoopOnce:()=>a.jAl,LoopPingPong:()=>a.uEv,LoopRepeat:()=>a.YKA,LuminanceAlphaFormat:()=>a.cRx,LuminanceFormat:()=>a.Y8D,MOUSE:()=>a.RsA,Material:()=>L.F,MaterialLoader:()=>Pi,MathUtils:()=>Ut,Matrix3:()=>Ci.V,Matrix4:()=>C.y,MaxEquation:()=>a.Sm8,Mesh:()=>et.K,MeshBasicMaterial:()=>ti.v,MeshDepthMaterial:()=>Ke.l,MeshDistanceMaterial:()=>Qe.L,MeshLambertMaterial:()=>Xe,MeshMatcapMaterial:()=>ei,MeshNormalMaterial:()=>Ye.R,MeshPhongMaterial:()=>Ze,MeshPhysicalMaterial:()=>Ve.E,MeshStandardMaterial:()=>qe.W,MeshToonMaterial:()=>$e,MinEquation:()=>a.r_,MirroredRepeatWrapping:()=>a.OoA,MixOperation:()=>a.qhX,MultiplyBlending:()=>a.M5h,MultiplyOperation:()=>a.Ns1,NearestFilter:()=>a.TyD,NearestMipMapLinearFilter:()=>a.vZf,NearestMipMapNearestFilter:()=>a.HTd,NearestMipmapLinearFilter:()=>a.aH4,NearestMipmapNearestFilter:()=>a.YLQ,NeverDepth:()=>a.BVF,NeverStencilFunc:()=>a.MyG,NoBlending:()=>a.jFi,NoColorSpace:()=>a.aCh,NoToneMapping:()=>a.uL9,NormalAnimationBlendMode:()=>a.IFH,NormalBlending:()=>a.bdR,NotEqualDepth:()=>a.M6v,NotEqualStencilFunc:()=>a.RvT,NumberKeyframeTrack:()=>ss.d,Object3D:()=>T.T,ObjectLoader:()=>Ri,ObjectSpaceNormalMap:()=>a.PA7,OctahedronBufferGeometry:()=>Be.R,OctahedronGeometry:()=>Be.p,OneFactor:()=>a.ghN,OneMinusDstAlphaFactor:()=>a.Hy8,OneMinusDstColorFactor:()=>a.Wpd,OneMinusSrcAlphaFactor:()=>a.LgZ,OneMinusSrcColorFactor:()=>a.iWC,OrthographicCamera:()=>bi.i,PCFShadowMap:()=>a._iA,PCFSoftShadowMap:()=>a.ntZ,PMREMGenerator:()=>Cr.a,ParametricGeometry:()=>Tr,Path:()=>kt,PerspectiveCamera:()=>Si.c,Plane:()=>Is.J,PlaneBufferGeometry:()=>Le.B,PlaneGeometry:()=>Le._,PlaneHelper:()=>hr,PointLight:()=>yi.c,PointLightHelper:()=>qs,Points:()=>pt.w,PointsMaterial:()=>Je.U,PolarGridHelper:()=>Qs,PolyhedronBufferGeometry:()=>Vt.u,PolyhedronGeometry:()=>Vt.U,PositionalAudio:()=>Yi.V,PropertyBinding:()=>hs.i,PropertyMixer:()=>os,QuadraticBezierCurve:()=>Gt,QuadraticBezierCurve3:()=>Et,Quaternion:()=>as._,QuaternionKeyframeTrack:()=>is.i,QuaternionLinearInterpolant:()=>Ss.z,REVISION:()=>a.UZH,RGBADepthPacking:()=>a.mSO,RGBAFormat:()=>a.wk1,RGBAIntegerFormat:()=>a.E2K,RGBA_ASTC_10x10_Format:()=>a.FUD,RGBA_ASTC_10x5_Format:()=>a.pKu,RGBA_ASTC_10x6_Format:()=>a.GG6,RGBA_ASTC_10x8_Format:()=>a.Gih,RGBA_ASTC_12x10_Format:()=>a.iiP,RGBA_ASTC_12x12_Format:()=>a.SvJ,RGBA_ASTC_4x4_Format:()=>a.ptH,RGBA_ASTC_5x4_Format:()=>a.jZA,RGBA_ASTC_5x5_Format:()=>a.y2t,RGBA_ASTC_6x5_Format:()=>a.gi4,RGBA_ASTC_6x6_Format:()=>a.Djp,RGBA_ASTC_8x5_Format:()=>a.BG$,RGBA_ASTC_8x6_Format:()=>a.NYV,RGBA_ASTC_8x8_Format:()=>a.xJs,RGBA_BPTC_Format:()=>a.bsb,RGBA_ETC2_EAC_Format:()=>a.ekQ,RGBA_PVRTC_2BPPV1_Format:()=>a.CaW,RGBA_PVRTC_4BPPV1_Format:()=>a.eaV,RGBA_S3TC_DXT1_Format:()=>a.BFQ,RGBA_S3TC_DXT3_Format:()=>a.v3W,RGBA_S3TC_DXT5_Format:()=>a.ILR,RGBFormat:()=>a.UCm,RGB_ETC1_Format:()=>a.fto,RGB_ETC2_Format:()=>a.l0P,RGB_PVRTC_2BPPV1_Format:()=>a.vCx,RGB_PVRTC_4BPPV1_Format:()=>a._AM,RGB_S3TC_DXT1_Format:()=>a.wuA,RGFormat:()=>a.av9,RGIntegerFormat:()=>a.CtA,RawShaderMaterial:()=>je,Ray:()=>Bs.z,Raycaster:()=>ws.i,RectAreaLight:()=>xi,RedFormat:()=>a.hEm,RedIntegerFormat:()=>a.D9w,ReinhardToneMapping:()=>a.CdI,RepeatWrapping:()=>a.rpg,ReplaceStencilOp:()=>a.ce8,ReverseSubtractEquation:()=>a.rOj,RingBufferGeometry:()=>Re,RingGeometry:()=>Re,SRGBColorSpace:()=>a.KI_,Scene:()=>S.x,ShaderChunk:()=>x.W,ShaderLib:()=>y.V,ShaderMaterial:()=>He.j,ShadowMaterial:()=>De,Shape:()=>Qt,ShapeBufferGeometry:()=>Oe,ShapeGeometry:()=>Oe,ShapePath:()=>mr,ShapeUtils:()=>_e,ShortType:()=>a.iAb,Skeleton:()=>Q.O,SkeletonHelper:()=>Js,SkinnedMesh:()=>K.T,SmoothShading:()=>a.wcA,Source:()=>gt.H,Sphere:()=>Ii.a,SphereBufferGeometry:()=>Ge.A,SphereGeometry:()=>Ge.x,Spherical:()=>Ps.$,SphericalHarmonics3:()=>wi,SplineCurve:()=>zt,SpotLight:()=>fi.P,SpotLightHelper:()=>Ws,Sprite:()=>q,SpriteMaterial:()=>R,SrcAlphaFactor:()=>a.k74,SrcAlphaSaturateFactor:()=>a.RlZ,SrcColorFactor:()=>a.KhW,StaticCopyUsage:()=>a.HgB,StaticDrawUsage:()=>a.W2J,StaticReadUsage:()=>a.JWc,StereoCamera:()=>Ji,StreamCopyUsage:()=>a.Z6B,StreamDrawUsage:()=>a.QZ1,StreamReadUsage:()=>a.Ir4,StringKeyframeTrack:()=>es.N,SubtractEquation:()=>a.Wbm,SubtractiveBlending:()=>a.N4l,TOUCH:()=>a.QmN,TangentSpaceNormalMap:()=>a.IOt,TetrahedronBufferGeometry:()=>Ee,TetrahedronGeometry:()=>Ee,TextGeometry:()=>Ir,Texture:()=>mt.x,TextureLoader:()=>pi.d,TorusBufferGeometry:()=>ze.C,TorusGeometry:()=>ze.X,TorusKnotBufferGeometry:()=>Ne.X,TorusKnotGeometry:()=>Ne.F,Triangle:()=>P.C,TriangleFanDrawMode:()=>a.z$h,TriangleStripDrawMode:()=>a.UlW,TrianglesDrawMode:()=>a.WwZ,TubeBufferGeometry:()=>ke,TubeGeometry:()=>ke,UVMapping:()=>a.xfE,Uint16BufferAttribute:()=>it.ql,Uint32BufferAttribute:()=>it.lC,Uint8BufferAttribute:()=>it.WT,Uint8ClampedBufferAttribute:()=>it.rA,Uniform:()=>gs,UniformsLib:()=>g.r,UniformsUtils:()=>v.rD,UnsignedByteType:()=>a.ywz,UnsignedInt248Type:()=>a.wJv,UnsignedIntType:()=>a.JQ4,UnsignedShort4444Type:()=>a.k0A,UnsignedShort5551Type:()=>a.irR,UnsignedShortType:()=>a.LsT,VSMShadowMap:()=>a.dwk,Vector2:()=>A.F,Vector3:()=>_.P,Vector4:()=>_i.L,VectorKeyframeTrack:()=>ts.y,VideoTexture:()=>ft,WebGL1Renderer:()=>f,WebGL3DRenderTarget:()=>u,WebGLArrayRenderTarget:()=>c,WebGLCubeRenderTarget:()=>d.o,WebGLMultipleRenderTargets:()=>p,WebGLMultisampleRenderTarget:()=>Rr,WebGLRenderTarget:()=>o.d,WebGLRenderer:()=>m.C,WebGLUtils:()=>Pr.f,WireframeGeometry:()=>Ue,WrapAroundEnding:()=>a._sL,ZeroCurvatureEnding:()=>a.Pnf,ZeroFactor:()=>a.c8b,ZeroSlopeEnding:()=>a._lf,ZeroStencilOp:()=>a.ad5,_SRGBAFormat:()=>a.L_r,sRGBEncoding:()=>a.knz});var s={};i.r(s),i.d(s,{ArcCurve:()=>Ct,CatmullRomCurve3:()=>Pt.Y,CubicBezierCurve:()=>Bt,CubicBezierCurve3:()=>Lt,EllipseCurve:()=>_t,LineCurve:()=>Rt,LineCurve3:()=>Ot,QuadraticBezierCurve:()=>Gt,QuadraticBezierCurve3:()=>Et,SplineCurve:()=>zt});var r={};i.r(r),i.d(r,{BoxBufferGeometry:()=>St.n,BoxGeometry:()=>St.D,CapsuleBufferGeometry:()=>Dt,CapsuleGeometry:()=>Dt,CircleBufferGeometry:()=>Ht.t,CircleGeometry:()=>Ht.z,ConeBufferGeometry:()=>Jt,ConeGeometry:()=>Jt,CylinderBufferGeometry:()=>jt.m,CylinderGeometry:()=>jt.f,DodecahedronBufferGeometry:()=>qt,DodecahedronGeometry:()=>qt,EdgesGeometry:()=>Kt,ExtrudeBufferGeometry:()=>Te,ExtrudeGeometry:()=>Te,IcosahedronBufferGeometry:()=>Fe,IcosahedronGeometry:()=>Fe,LatheBufferGeometry:()=>Wt,LatheGeometry:()=>Wt,OctahedronBufferGeometry:()=>Be.R,OctahedronGeometry:()=>Be.p,PlaneBufferGeometry:()=>Le.B,PlaneGeometry:()=>Le._,PolyhedronBufferGeometry:()=>Vt.u,PolyhedronGeometry:()=>Vt.U,RingBufferGeometry:()=>Re,RingGeometry:()=>Re,ShapeBufferGeometry:()=>Oe,ShapeGeometry:()=>Oe,SphereBufferGeometry:()=>Ge.A,SphereGeometry:()=>Ge.x,TetrahedronBufferGeometry:()=>Ee,TetrahedronGeometry:()=>Ee,TorusBufferGeometry:()=>ze.C,TorusGeometry:()=>ze.X,TorusKnotBufferGeometry:()=>Ne.X,TorusKnotGeometry:()=>Ne.F,TubeBufferGeometry:()=>ke,TubeGeometry:()=>ke,WireframeGeometry:()=>Ue});var n={};i.r(n),i.d(n,{fromHalfFloat:()=>Ar,toHalfFloat:()=>Sr});var a=i(2826),o=i(7e3),h=i(7006);class c extends o.d{constructor(t,e,i){super(t,e),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new h.p(null,t,e,i),this.texture.isRenderTargetTexture=!0}}var l=i(3648);class u extends o.d{constructor(t,e,i){super(t,e),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new l.J(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class p extends o.d{constructor(t,e,i,s={}){super(t,e,s),this.isWebGLMultipleRenderTargets=!0;const r=this.texture;this.texture=[];for(let t=0;t<i;t++)this.texture[t]=r.clone(),this.texture[t].isRenderTargetTexture=!0}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let s=0,r=this.texture.length;s<r;s++)this.texture[s].image.width=t,this.texture[s].image.height=e,this.texture[s].image.depth=i;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let e=0,i=t.texture.length;e<i;e++)this.texture[e]=t.texture[e].clone(),this.texture[e].isRenderTargetTexture=!0;return this}}var d=i(1509),m=i(6078);class f extends m.C{}f.prototype.isWebGL1Renderer=!0;var y=i(1713),g=i(7409),v=i(8952),x=i(623),w=i(6936);class M{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new w.I(t),this.density=e}clone(){return new M(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class b{constructor(t,e=1,i=1e3){this.isFog=!0,this.name="",this.color=new w.I(t),this.near=e,this.far=i}clone(){return new b(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}var S=i(8937),A=i(5021),_=i(2399),C=i(3672),P=i(3084),T=i(7760),I=i(9349),F=i(8124),B=i(1599),L=i(3459);class R extends L.F{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new w.I(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let O;const G=new _.P,E=new _.P,z=new _.P,N=new A.F,k=new A.F,U=new C.y,W=new _.P,D=new _.P,H=new _.P,j=new A.F,J=new A.F,V=new A.F;class q extends T.T{constructor(t){if(super(),this.isSprite=!0,this.type="Sprite",void 0===O){O=new I.u;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new F.v(t,5);O.setIndex([0,1,2,0,2,3]),O.setAttribute("position",new B.k(e,3,0,!1)),O.setAttribute("uv",new B.k(e,2,3,!1))}this.geometry=O,this.material=void 0!==t?t:new R,this.center=new A.F(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),E.setFromMatrixScale(this.matrixWorld),U.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),z.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&E.multiplyScalar(-z.z);const i=this.material.rotation;let s,r;0!==i&&(r=Math.cos(i),s=Math.sin(i));const n=this.center;Z(W.set(-.5,-.5,0),z,n,E,s,r),Z(D.set(.5,-.5,0),z,n,E,s,r),Z(H.set(.5,.5,0),z,n,E,s,r),j.set(0,0),J.set(1,0),V.set(1,1);let a=t.ray.intersectTriangle(W,D,H,!1,G);if(null===a&&(Z(D.set(-.5,.5,0),z,n,E,s,r),J.set(0,1),a=t.ray.intersectTriangle(W,H,D,!1,G),null===a))return;const o=t.ray.origin.distanceTo(G);o<t.near||o>t.far||e.push({distance:o,point:G.clone(),uv:P.C.getUV(G,W,D,H,j,J,V,new A.F),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function Z(t,e,i,s,r,n){N.subVectors(t,i).addScalar(.5).multiply(s),void 0!==r?(k.x=n*N.x-r*N.y,k.y=r*N.x+n*N.y):k.copy(N),t.copy(e),t.x+=k.x,t.y+=k.y,t.applyMatrix4(U)}const $=new _.P,Y=new _.P;class X extends T.T{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let t=0,i=e.length;t<i;t++){const i=e[t];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0){e=Math.abs(e);const i=this.levels;let s;for(s=0;s<i.length&&!(e<i[s].distance);s++);return i.splice(s,0,{distance:e,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let i,s;for(i=1,s=e.length;i<s&&!(t<e[i].distance);i++);return e[i-1].object}return null}raycast(t,e){if(this.levels.length>0){$.setFromMatrixPosition(this.matrixWorld);const i=t.ray.origin.distanceTo($);this.getObjectForDistance(i).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){$.setFromMatrixPosition(t.matrixWorld),Y.setFromMatrixPosition(this.matrixWorld);const i=$.distanceTo(Y)/t.zoom;let s,r;for(e[0].object.visible=!0,s=1,r=e.length;s<r&&i>=e[s].distance;s++)e[s-1].object.visible=!1,e[s].object.visible=!0;for(this._currentLevel=s-1;s<r;s++)e[s].object.visible=!1}}toJSON(t){const e=super.toJSON(t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const i=this.levels;for(let t=0,s=i.length;t<s;t++){const s=i[t];e.object.levels.push({object:s.object.uuid,distance:s.distance})}return e}}var K=i(5777),Q=i(7893),tt=i(1581),et=i(5232),it=i(8709);class st extends it.Tl{constructor(t,e,i,s=1){"number"==typeof i&&(s=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const rt=new C.y,nt=new C.y,at=[],ot=new et.K;class ht extends et.K{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new st(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const i=this.matrixWorld,s=this.count;if(ot.geometry=this.geometry,ot.material=this.material,void 0!==ot.material)for(let r=0;r<s;r++){this.getMatrixAt(r,rt),nt.multiplyMatrices(i,rt),ot.matrixWorld=nt,ot.raycast(t,at);for(let t=0,i=at.length;t<i;t++){const i=at[t];i.instanceId=r,i.object=this,e.push(i)}at.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new st(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}var ct=i(9151),lt=i(3294),ut=i(109),pt=i(6190),dt=i(5376),mt=i(9752);class ft extends mt.x{constructor(t,e,i,s,r,n,o,h,c){super(t,e,i,s,r,n,o,h,c),this.isVideoTexture=!0,this.minFilter=void 0!==n?n:a.wem,this.magFilter=void 0!==r?r:a.wem,this.generateMipmaps=!1;const l=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){l.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class yt extends mt.x{constructor(t,e,i){super({width:t,height:e}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=a.TyD,this.minFilter=a.TyD,this.generateMipmaps=!1,this.needsUpdate=!0}}var gt=i(1658),vt=i(2074),xt=i(1893),wt=i(6011);class Mt extends mt.x{constructor(t,e,i,s,r,n,a,o,h){super(t,e,i,s,r,n,a,o,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}var bt=i(398),St=i(4244),At=i(2494);class _t extends At.H{constructor(t=0,e=0,i=1,s=1,r=0,n=2*Math.PI,a=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=n,this.aClockwise=a,this.aRotation=o}getPoint(t,e){const i=e||new A.F,s=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const n=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(r=n?0:s),!0!==this.aClockwise||n||(r===s?r=-s:r-=s);const a=this.aStartAngle+t*r;let o=this.aX+this.xRadius*Math.cos(a),h=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),i=o-this.aX,s=h-this.aY;o=i*t-s*e+this.aX,h=i*e+s*t+this.aY}return i.set(o,h)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class Ct extends _t{constructor(t,e,i,s,r,n){super(t,e,i,i,s,r,n),this.isArcCurve=!0,this.type="ArcCurve"}}var Pt=i(780);function Tt(t,e,i,s,r){const n=.5*(s-e),a=.5*(r-i),o=t*t;return(2*i-2*s+n+a)*(t*o)+(-3*i+3*s-2*n-a)*o+n*t+i}function It(t,e,i,s){return function(t,e){const i=1-t;return i*i*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,i)+function(t,e){return t*t*e}(t,s)}function Ft(t,e,i,s,r){return function(t,e){const i=1-t;return i*i*i*e}(t,e)+function(t,e){const i=1-t;return 3*i*i*t*e}(t,i)+function(t,e){return 3*(1-t)*t*t*e}(t,s)+function(t,e){return t*t*t*e}(t,r)}class Bt extends At.H{constructor(t=new A.F,e=new A.F,i=new A.F,s=new A.F){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=s}getPoint(t,e=new A.F){const i=e,s=this.v0,r=this.v1,n=this.v2,a=this.v3;return i.set(Ft(t,s.x,r.x,n.x,a.x),Ft(t,s.y,r.y,n.y,a.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Lt extends At.H{constructor(t=new _.P,e=new _.P,i=new _.P,s=new _.P){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=s}getPoint(t,e=new _.P){const i=e,s=this.v0,r=this.v1,n=this.v2,a=this.v3;return i.set(Ft(t,s.x,r.x,n.x,a.x),Ft(t,s.y,r.y,n.y,a.y),Ft(t,s.z,r.z,n.z,a.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Rt extends At.H{constructor(t=new A.F,e=new A.F){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new A.F){const i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const i=e||new A.F;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ot extends At.H{constructor(t=new _.P,e=new _.P){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new _.P){const i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Gt extends At.H{constructor(t=new A.F,e=new A.F,i=new A.F){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new A.F){const i=e,s=this.v0,r=this.v1,n=this.v2;return i.set(It(t,s.x,r.x,n.x),It(t,s.y,r.y,n.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Et extends At.H{constructor(t=new _.P,e=new _.P,i=new _.P){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new _.P){const i=e,s=this.v0,r=this.v1,n=this.v2;return i.set(It(t,s.x,r.x,n.x),It(t,s.y,r.y,n.y),It(t,s.z,r.z,n.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class zt extends At.H{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new A.F){const i=e,s=this.points,r=(s.length-1)*t,n=Math.floor(r),a=r-n,o=s[0===n?n:n-1],h=s[n],c=s[n>s.length-2?s.length-1:n+1],l=s[n>s.length-3?s.length-1:n+2];return i.set(Tt(a,o.x,h.x,c.x,l.x),Tt(a,o.y,h.y,c.y,l.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const i=this.points[e];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push((new A.F).fromArray(i))}return this}}class Nt extends At.H{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Rt(e,t))}getPoint(t,e){const i=t*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=i){const t=s[r]-i,n=this.curves[r],a=n.getLength(),o=0===a?0:1-t/a;return n.getPointAt(o,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,s=this.curves.length;i<s;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let i;for(let s=0,r=this.curves;s<r.length;s++){const n=r[s],a=n.isEllipseCurve?2*t:n.isLineCurve||n.isLineCurve3?1:n.isSplineCurve?t*n.points.length:t,o=n.getPoints(a);for(let t=0;t<o.length;t++){const s=o[t];i&&i.equals(s)||(e.push(s),i=s)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){const i=this.curves[e];t.curves.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const i=t.curves[e];this.curves.push((new s[i.type]).fromJSON(i))}return this}}class kt extends Nt{constructor(t){super(),this.type="Path",this.currentPoint=new A.F,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const i=new Rt(this.currentPoint.clone(),new A.F(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,s){const r=new Gt(this.currentPoint.clone(),new A.F(t,e),new A.F(i,s));return this.curves.push(r),this.currentPoint.set(i,s),this}bezierCurveTo(t,e,i,s,r,n){const a=new Bt(this.currentPoint.clone(),new A.F(t,e),new A.F(i,s),new A.F(r,n));return this.curves.push(a),this.currentPoint.set(r,n),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),i=new zt(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,s,r,n){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(t+a,e+o,i,s,r,n),this}absarc(t,e,i,s,r,n){return this.absellipse(t,e,i,i,s,r,n),this}ellipse(t,e,i,s,r,n,a,o){const h=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+h,e+c,i,s,r,n,a,o),this}absellipse(t,e,i,s,r,n,a,o){const h=new _t(t,e,i,s,r,n,a,o);if(this.curves.length>0){const t=h.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(h);const c=h.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}var Ut=i(1620);class Wt extends I.u{constructor(t=[new A.F(0,.5),new A.F(.5,0),new A.F(0,-.5)],e=12,i=0,s=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:s},e=Math.floor(e),s=Ut.clamp(s,0,2*Math.PI);const r=[],n=[],a=[],o=[],h=[],c=1/e,l=new _.P,u=new A.F,p=new _.P,d=new _.P,m=new _.P;let f=0,y=0;for(let e=0;e<=t.length-1;e++)switch(e){case 0:f=t[e+1].x-t[e].x,y=t[e+1].y-t[e].y,p.x=1*y,p.y=-f,p.z=0*y,m.copy(p),p.normalize(),o.push(p.x,p.y,p.z);break;case t.length-1:o.push(m.x,m.y,m.z);break;default:f=t[e+1].x-t[e].x,y=t[e+1].y-t[e].y,p.x=1*y,p.y=-f,p.z=0*y,d.copy(p),p.x+=m.x,p.y+=m.y,p.z+=m.z,p.normalize(),o.push(p.x,p.y,p.z),m.copy(d)}for(let r=0;r<=e;r++){const p=i+r*c*s,d=Math.sin(p),m=Math.cos(p);for(let i=0;i<=t.length-1;i++){l.x=t[i].x*d,l.y=t[i].y,l.z=t[i].x*m,n.push(l.x,l.y,l.z),u.x=r/e,u.y=i/(t.length-1),a.push(u.x,u.y);const s=o[3*i+0]*d,c=o[3*i+1],p=o[3*i+0]*m;h.push(s,c,p)}}for(let i=0;i<e;i++)for(let e=0;e<t.length-1;e++){const s=e+i*t.length,n=s,a=s+t.length,o=s+t.length+1,h=s+1;r.push(n,a,h),r.push(o,h,a)}this.setIndex(r),this.setAttribute("position",new it.a$(n,3)),this.setAttribute("uv",new it.a$(a,2)),this.setAttribute("normal",new it.a$(h,3))}static fromJSON(t){return new Wt(t.points,t.segments,t.phiStart,t.phiLength)}}class Dt extends Wt{constructor(t=1,e=1,i=4,s=8){const r=new kt;r.absarc(0,-e/2,t,1.5*Math.PI,0),r.absarc(0,e/2,t,0,.5*Math.PI),super(r.getPoints(i),s),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:i,radialSegments:s}}static fromJSON(t){return new Dt(t.radius,t.length,t.capSegments,t.radialSegments)}}var Ht=i(4593),jt=i(4330);class Jt extends jt.f{constructor(t=1,e=1,i=8,s=1,r=!1,n=0,a=2*Math.PI){super(0,t,e,i,s,r,n,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:s,openEnded:r,thetaStart:n,thetaLength:a}}static fromJSON(t){return new Jt(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}var Vt=i(5732);class qt extends Vt.U{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2,s=1/i;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new qt(t.radius,t.detail)}}const Zt=new _.P,$t=new _.P,Yt=new _.P,Xt=new P.C;class Kt extends I.u{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const i=4,s=Math.pow(10,i),r=Math.cos(Ut.DEG2RAD*e),n=t.getIndex(),a=t.getAttribute("position"),o=n?n.count:a.count,h=[0,0,0],c=["a","b","c"],l=new Array(3),u={},p=[];for(let t=0;t<o;t+=3){n?(h[0]=n.getX(t),h[1]=n.getX(t+1),h[2]=n.getX(t+2)):(h[0]=t,h[1]=t+1,h[2]=t+2);const{a:e,b:i,c:o}=Xt;if(e.fromBufferAttribute(a,h[0]),i.fromBufferAttribute(a,h[1]),o.fromBufferAttribute(a,h[2]),Xt.getNormal(Yt),l[0]=`${Math.round(e.x*s)},${Math.round(e.y*s)},${Math.round(e.z*s)}`,l[1]=`${Math.round(i.x*s)},${Math.round(i.y*s)},${Math.round(i.z*s)}`,l[2]=`${Math.round(o.x*s)},${Math.round(o.y*s)},${Math.round(o.z*s)}`,l[0]!==l[1]&&l[1]!==l[2]&&l[2]!==l[0])for(let t=0;t<3;t++){const e=(t+1)%3,i=l[t],s=l[e],n=Xt[c[t]],a=Xt[c[e]],o=`${i}_${s}`,d=`${s}_${i}`;d in u&&u[d]?(Yt.dot(u[d].normal)<=r&&(p.push(n.x,n.y,n.z),p.push(a.x,a.y,a.z)),u[d]=null):o in u||(u[o]={index0:h[t],index1:h[e],normal:Yt.clone()})}}for(const t in u)if(u[t]){const{index0:e,index1:i}=u[t];Zt.fromBufferAttribute(a,e),$t.fromBufferAttribute(a,i),p.push(Zt.x,Zt.y,Zt.z),p.push($t.x,$t.y,$t.z)}this.setAttribute("position",new it.a$(p,3))}}}class Qt extends kt{constructor(t){super(t),this.uuid=Ut.generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let i=0,s=this.holes.length;i<s;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const i=t.holes[e];this.holes.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){const i=this.holes[e];t.holes.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const i=t.holes[e];this.holes.push((new kt).fromJSON(i))}return this}}const te=function(t,e,i=2){const s=e&&e.length,r=s?e[0]*i:t.length;let n=ee(t,0,r,i,!0);const a=[];if(!n||n.next===n.prev)return a;let o,h,c,l,u,p,d;if(s&&(n=function(t,e,i,s){const r=[];let n,a,o,h,c;for(n=0,a=e.length;n<a;n++)o=e[n]*s,h=n<a-1?e[n+1]*s:t.length,c=ee(t,o,h,s,!1),c===c.next&&(c.steiner=!0),r.push(pe(c));for(r.sort(he),n=0;n<r.length;n++)ce(r[n],i),i=ie(i,i.next);return i}(t,e,n,i)),t.length>80*i){o=c=t[0],h=l=t[1];for(let e=i;e<r;e+=i)u=t[e],p=t[e+1],u<o&&(o=u),p<h&&(h=p),u>c&&(c=u),p>l&&(l=p);d=Math.max(c-o,l-h),d=0!==d?1/d:0}return se(n,a,i,o,h,d),a};function ee(t,e,i,s,r){let n,a;if(r===function(t,e,i,s){let r=0;for(let n=e,a=i-s;n<i;n+=s)r+=(t[a]-t[n])*(t[n+1]+t[a+1]),a=n;return r}(t,e,i,s)>0)for(n=e;n<i;n+=s)a=be(n,t[n],t[n+1],a);else for(n=i-s;n>=e;n-=s)a=be(n,t[n],t[n+1],a);return a&&ye(a,a.next)&&(Se(a),a=a.next),a}function ie(t,e){if(!t)return t;e||(e=t);let i,s=t;do{if(i=!1,s.steiner||!ye(s,s.next)&&0!==fe(s.prev,s,s.next))s=s.next;else{if(Se(s),s=e=s.prev,s===s.next)break;i=!0}}while(i||s!==e);return e}function se(t,e,i,s,r,n,a){if(!t)return;!a&&n&&function(t,e,i,s){let r=t;do{null===r.z&&(r.z=ue(r.x,r.y,e,i,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,i,s,r,n,a,o,h,c=1;do{for(i=t,t=null,n=null,a=0;i;){for(a++,s=i,o=0,e=0;e<c&&(o++,s=s.nextZ,s);e++);for(h=c;o>0||h>0&&s;)0!==o&&(0===h||!s||i.z<=s.z)?(r=i,i=i.nextZ,o--):(r=s,s=s.nextZ,h--),n?n.nextZ=r:t=r,r.prevZ=n,n=r;i=s}n.nextZ=null,c*=2}while(a>1)}(r)}(t,s,r,n);let o,h,c=t;for(;t.prev!==t.next;)if(o=t.prev,h=t.next,n?ne(t,s,r,n):re(t))e.push(o.i/i),e.push(t.i/i),e.push(h.i/i),Se(t),t=h.next,c=h.next;else if((t=h)===c){a?1===a?se(t=ae(ie(t),e,i),e,i,s,r,n,2):2===a&&oe(t,e,i,s,r,n):se(ie(t),e,i,s,r,n,1);break}}function re(t){const e=t.prev,i=t,s=t.next;if(fe(e,i,s)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(de(e.x,e.y,i.x,i.y,s.x,s.y,r.x,r.y)&&fe(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function ne(t,e,i,s){const r=t.prev,n=t,a=t.next;if(fe(r,n,a)>=0)return!1;const o=r.x<n.x?r.x<a.x?r.x:a.x:n.x<a.x?n.x:a.x,h=r.y<n.y?r.y<a.y?r.y:a.y:n.y<a.y?n.y:a.y,c=r.x>n.x?r.x>a.x?r.x:a.x:n.x>a.x?n.x:a.x,l=r.y>n.y?r.y>a.y?r.y:a.y:n.y>a.y?n.y:a.y,u=ue(o,h,e,i,s),p=ue(c,l,e,i,s);let d=t.prevZ,m=t.nextZ;for(;d&&d.z>=u&&m&&m.z<=p;){if(d!==t.prev&&d!==t.next&&de(r.x,r.y,n.x,n.y,a.x,a.y,d.x,d.y)&&fe(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,m!==t.prev&&m!==t.next&&de(r.x,r.y,n.x,n.y,a.x,a.y,m.x,m.y)&&fe(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;d&&d.z>=u;){if(d!==t.prev&&d!==t.next&&de(r.x,r.y,n.x,n.y,a.x,a.y,d.x,d.y)&&fe(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;m&&m.z<=p;){if(m!==t.prev&&m!==t.next&&de(r.x,r.y,n.x,n.y,a.x,a.y,m.x,m.y)&&fe(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function ae(t,e,i){let s=t;do{const r=s.prev,n=s.next.next;!ye(r,n)&&ge(r,s,s.next,n)&&we(r,n)&&we(n,r)&&(e.push(r.i/i),e.push(s.i/i),e.push(n.i/i),Se(s),Se(s.next),s=t=n),s=s.next}while(s!==t);return ie(s)}function oe(t,e,i,s,r,n){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&me(a,t)){let o=Me(a,t);return a=ie(a,a.next),o=ie(o,o.next),se(a,e,i,s,r,n),void se(o,e,i,s,r,n)}t=t.next}a=a.next}while(a!==t)}function he(t,e){return t.x-e.x}function ce(t,e){if(e=function(t,e){let i=e;const s=t.x,r=t.y;let n,a=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){const t=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=s&&t>a){if(a=t,t===s){if(r===i.y)return i;if(r===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(s===a)return n;const o=n,h=n.x,c=n.y;let l,u=1/0;i=n;do{s>=i.x&&i.x>=h&&s!==i.x&&de(r<c?s:a,r,h,c,r<c?a:s,r,i.x,i.y)&&(l=Math.abs(r-i.y)/(s-i.x),we(i,t)&&(l<u||l===u&&(i.x>n.x||i.x===n.x&&le(n,i)))&&(n=i,u=l)),i=i.next}while(i!==o);return n}(t,e),e){const i=Me(e,t);ie(e,e.next),ie(i,i.next)}}function le(t,e){return fe(t.prev,t,e.prev)<0&&fe(e.next,t,t.next)<0}function ue(t,e,i,s,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-s)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function pe(t){let e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function de(t,e,i,s,r,n,a,o){return(r-a)*(e-o)-(t-a)*(n-o)>=0&&(t-a)*(s-o)-(i-a)*(e-o)>=0&&(i-a)*(n-o)-(r-a)*(s-o)>=0}function me(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&ge(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(we(t,e)&&we(e,t)&&function(t,e){let i=t,s=!1;const r=(t.x+e.x)/2,n=(t.y+e.y)/2;do{i.y>n!=i.next.y>n&&i.next.y!==i.y&&r<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next}while(i!==t);return s}(t,e)&&(fe(t.prev,t,e.prev)||fe(t,e.prev,e))||ye(t,e)&&fe(t.prev,t,t.next)>0&&fe(e.prev,e,e.next)>0)}function fe(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function ye(t,e){return t.x===e.x&&t.y===e.y}function ge(t,e,i,s){const r=xe(fe(t,e,i)),n=xe(fe(t,e,s)),a=xe(fe(i,s,t)),o=xe(fe(i,s,e));return r!==n&&a!==o||(!(0!==r||!ve(t,i,e))||(!(0!==n||!ve(t,s,e))||(!(0!==a||!ve(i,t,s))||!(0!==o||!ve(i,e,s)))))}function ve(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function xe(t){return t>0?1:t<0?-1:0}function we(t,e){return fe(t.prev,t,t.next)<0?fe(t,e,t.next)>=0&&fe(t,t.prev,e)>=0:fe(t,e,t.prev)<0||fe(t,t.next,e)<0}function Me(t,e){const i=new Ae(t.i,t.x,t.y),s=new Ae(e.i,e.x,e.y),r=t.next,n=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,s.next=i,i.prev=s,n.next=s,s.prev=n,s}function be(t,e,i,s){const r=new Ae(t,e,i);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function Se(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ae(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class _e{static area(t){const e=t.length;let i=0;for(let s=e-1,r=0;r<e;s=r++)i+=t[s].x*t[r].y-t[r].x*t[s].y;return.5*i}static isClockWise(t){return _e.area(t)<0}static triangulateShape(t,e){const i=[],s=[],r=[];Ce(t),Pe(i,t);let n=t.length;e.forEach(Ce);for(let t=0;t<e.length;t++)s.push(n),n+=e[t].length,Pe(i,e[t]);const a=te(i,s);for(let t=0;t<a.length;t+=3)r.push(a.slice(t,t+3));return r}}function Ce(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Pe(t,e){for(let i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}class Te extends I.u{constructor(t=new Qt([new A.F(.5,.5),new A.F(-.5,.5),new A.F(-.5,-.5),new A.F(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const i=this,s=[],r=[];for(let e=0,i=t.length;e<i;e++){n(t[e])}function n(t){const n=[],a=void 0!==e.curveSegments?e.curveSegments:12,o=void 0!==e.steps?e.steps:1;let h=void 0!==e.depth?e.depth:1,c=void 0===e.bevelEnabled||e.bevelEnabled,l=void 0!==e.bevelThickness?e.bevelThickness:.2,u=void 0!==e.bevelSize?e.bevelSize:l-.1,p=void 0!==e.bevelOffset?e.bevelOffset:0,d=void 0!==e.bevelSegments?e.bevelSegments:3;const m=e.extrudePath,f=void 0!==e.UVGenerator?e.UVGenerator:Ie;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),h=e.amount);let y,g,v,x,w,M=!1;m&&(y=m.getSpacedPoints(o),M=!0,c=!1,g=m.computeFrenetFrames(o,!1),v=new _.P,x=new _.P,w=new _.P),c||(d=0,l=0,u=0,p=0);const b=t.extractPoints(a);let S=b.shape;const C=b.holes;if(!_e.isClockWise(S)){S=S.reverse();for(let t=0,e=C.length;t<e;t++){const e=C[t];_e.isClockWise(e)&&(C[t]=e.reverse())}}const P=_e.triangulateShape(S,C),T=S;for(let t=0,e=C.length;t<e;t++){const e=C[t];S=S.concat(e)}function I(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(i).add(t)}const F=S.length,B=P.length;function L(t,e,i){let s,r,n;const a=t.x-e.x,o=t.y-e.y,h=i.x-t.x,c=i.y-t.y,l=a*a+o*o,u=a*c-o*h;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(l),p=Math.sqrt(h*h+c*c),d=e.x-o/u,m=e.y+a/u,f=((i.x-c/p-d)*c-(i.y+h/p-m)*h)/(a*c-o*h);s=d+a*f-t.x,r=m+o*f-t.y;const y=s*s+r*r;if(y<=2)return new A.F(s,r);n=Math.sqrt(y/2)}else{let t=!1;a>Number.EPSILON?h>Number.EPSILON&&(t=!0):a<-Number.EPSILON?h<-Number.EPSILON&&(t=!0):Math.sign(o)===Math.sign(c)&&(t=!0),t?(s=-o,r=a,n=Math.sqrt(l)):(s=a,r=o,n=Math.sqrt(l/2))}return new A.F(s/n,r/n)}const R=[];for(let t=0,e=T.length,i=e-1,s=t+1;t<e;t++,i++,s++)i===e&&(i=0),s===e&&(s=0),R[t]=L(T[t],T[i],T[s]);const O=[];let G,E=R.concat();for(let t=0,e=C.length;t<e;t++){const e=C[t];G=[];for(let t=0,i=e.length,s=i-1,r=t+1;t<i;t++,s++,r++)s===i&&(s=0),r===i&&(r=0),G[t]=L(e[t],e[s],e[r]);O.push(G),E=E.concat(G)}for(let t=0;t<d;t++){const e=t/d,i=l*Math.cos(e*Math.PI/2),s=u*Math.sin(e*Math.PI/2)+p;for(let t=0,e=T.length;t<e;t++){const e=I(T[t],R[t],s);k(e.x,e.y,-i)}for(let t=0,e=C.length;t<e;t++){const e=C[t];G=O[t];for(let t=0,r=e.length;t<r;t++){const r=I(e[t],G[t],s);k(r.x,r.y,-i)}}}const z=u+p;for(let t=0;t<F;t++){const e=c?I(S[t],E[t],z):S[t];M?(x.copy(g.normals[0]).multiplyScalar(e.x),v.copy(g.binormals[0]).multiplyScalar(e.y),w.copy(y[0]).add(x).add(v),k(w.x,w.y,w.z)):k(e.x,e.y,0)}for(let t=1;t<=o;t++)for(let e=0;e<F;e++){const i=c?I(S[e],E[e],z):S[e];M?(x.copy(g.normals[t]).multiplyScalar(i.x),v.copy(g.binormals[t]).multiplyScalar(i.y),w.copy(y[t]).add(x).add(v),k(w.x,w.y,w.z)):k(i.x,i.y,h/o*t)}for(let t=d-1;t>=0;t--){const e=t/d,i=l*Math.cos(e*Math.PI/2),s=u*Math.sin(e*Math.PI/2)+p;for(let t=0,e=T.length;t<e;t++){const e=I(T[t],R[t],s);k(e.x,e.y,h+i)}for(let t=0,e=C.length;t<e;t++){const e=C[t];G=O[t];for(let t=0,r=e.length;t<r;t++){const r=I(e[t],G[t],s);M?k(r.x,r.y+y[o-1].y,y[o-1].x+i):k(r.x,r.y,h+i)}}}function N(t,e){let i=t.length;for(;--i>=0;){const s=i;let r=i-1;r<0&&(r=t.length-1);for(let t=0,i=o+2*d;t<i;t++){const i=F*t,n=F*(t+1);W(e+s+i,e+r+i,e+r+n,e+s+n)}}}function k(t,e,i){n.push(t),n.push(e),n.push(i)}function U(t,e,r){D(t),D(e),D(r);const n=s.length/3,a=f.generateTopUV(i,s,n-3,n-2,n-1);H(a[0]),H(a[1]),H(a[2])}function W(t,e,r,n){D(t),D(e),D(n),D(e),D(r),D(n);const a=s.length/3,o=f.generateSideWallUV(i,s,a-6,a-3,a-2,a-1);H(o[0]),H(o[1]),H(o[3]),H(o[1]),H(o[2]),H(o[3])}function D(t){s.push(n[3*t+0]),s.push(n[3*t+1]),s.push(n[3*t+2])}function H(t){r.push(t.x),r.push(t.y)}!function(){const t=s.length/3;if(c){let t=0,e=F*t;for(let t=0;t<B;t++){const i=P[t];U(i[2]+e,i[1]+e,i[0]+e)}t=o+2*d,e=F*t;for(let t=0;t<B;t++){const i=P[t];U(i[0]+e,i[1]+e,i[2]+e)}}else{for(let t=0;t<B;t++){const e=P[t];U(e[2],e[1],e[0])}for(let t=0;t<B;t++){const e=P[t];U(e[0]+F*o,e[1]+F*o,e[2]+F*o)}}i.addGroup(t,s.length/3-t,0)}(),function(){const t=s.length/3;let e=0;N(T,e),e+=T.length;for(let t=0,i=C.length;t<i;t++){const i=C[t];N(i,e),e+=i.length}i.addGroup(t,s.length/3-t,1)}()}this.setAttribute("position",new it.a$(s,3)),this.setAttribute("uv",new it.a$(r,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function(t,e,i){if(i.shapes=[],Array.isArray(t))for(let e=0,s=t.length;e<s;e++){const s=t[e];i.shapes.push(s.uuid)}else i.shapes.push(t.uuid);i.options=Object.assign({},e),void 0!==e.extrudePath&&(i.options.extrudePath=e.extrudePath.toJSON());return i}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const i=[];for(let s=0,r=t.shapes.length;s<r;s++){const r=e[t.shapes[s]];i.push(r)}const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new s[r.type]).fromJSON(r)),new Te(i,t.options)}}const Ie={generateTopUV:function(t,e,i,s,r){const n=e[3*i],a=e[3*i+1],o=e[3*s],h=e[3*s+1],c=e[3*r],l=e[3*r+1];return[new A.F(n,a),new A.F(o,h),new A.F(c,l)]},generateSideWallUV:function(t,e,i,s,r,n){const a=e[3*i],o=e[3*i+1],h=e[3*i+2],c=e[3*s],l=e[3*s+1],u=e[3*s+2],p=e[3*r],d=e[3*r+1],m=e[3*r+2],f=e[3*n],y=e[3*n+1],g=e[3*n+2];return Math.abs(o-l)<Math.abs(a-c)?[new A.F(a,1-h),new A.F(c,1-u),new A.F(p,1-m),new A.F(f,1-g)]:[new A.F(o,1-h),new A.F(l,1-u),new A.F(d,1-m),new A.F(y,1-g)]}};class Fe extends Vt.U{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2;super([-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Fe(t.radius,t.detail)}}var Be=i(6908),Le=i(7532);class Re extends I.u{constructor(t=.5,e=1,i=8,s=1,r=0,n=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:s,thetaStart:r,thetaLength:n},i=Math.max(3,i);const a=[],o=[],h=[],c=[];let l=t;const u=(e-t)/(s=Math.max(1,s)),p=new _.P,d=new A.F;for(let t=0;t<=s;t++){for(let t=0;t<=i;t++){const s=r+t/i*n;p.x=l*Math.cos(s),p.y=l*Math.sin(s),o.push(p.x,p.y,p.z),h.push(0,0,1),d.x=(p.x/e+1)/2,d.y=(p.y/e+1)/2,c.push(d.x,d.y)}l+=u}for(let t=0;t<s;t++){const e=t*(i+1);for(let t=0;t<i;t++){const s=t+e,r=s,n=s+i+1,o=s+i+2,h=s+1;a.push(r,n,h),a.push(n,o,h)}}this.setIndex(a),this.setAttribute("position",new it.a$(o,3)),this.setAttribute("normal",new it.a$(h,3)),this.setAttribute("uv",new it.a$(c,2))}static fromJSON(t){return new Re(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class Oe extends I.u{constructor(t=new Qt([new A.F(0,.5),new A.F(-.5,-.5),new A.F(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const i=[],s=[],r=[],n=[];let a=0,o=0;if(!1===Array.isArray(t))h(t);else for(let e=0;e<t.length;e++)h(t[e]),this.addGroup(a,o,e),a+=o,o=0;function h(t){const a=s.length/3,h=t.extractPoints(e);let c=h.shape;const l=h.holes;!1===_e.isClockWise(c)&&(c=c.reverse());for(let t=0,e=l.length;t<e;t++){const e=l[t];!0===_e.isClockWise(e)&&(l[t]=e.reverse())}const u=_e.triangulateShape(c,l);for(let t=0,e=l.length;t<e;t++){const e=l[t];c=c.concat(e)}for(let t=0,e=c.length;t<e;t++){const e=c[t];s.push(e.x,e.y,0),r.push(0,0,1),n.push(e.x,e.y)}for(let t=0,e=u.length;t<e;t++){const e=u[t],s=e[0]+a,r=e[1]+a,n=e[2]+a;i.push(s,r,n),o+=3}}this.setIndex(i),this.setAttribute("position",new it.a$(s,3)),this.setAttribute("normal",new it.a$(r,3)),this.setAttribute("uv",new it.a$(n,2))}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let i=0,s=t.length;i<s;i++){const s=t[i];e.shapes.push(s.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const i=[];for(let s=0,r=t.shapes.length;s<r;s++){const r=e[t.shapes[s]];i.push(r)}return new Oe(i,t.curveSegments)}}var Ge=i(5140);class Ee extends Vt.U{constructor(t=1,e=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Ee(t.radius,t.detail)}}var ze=i(9937),Ne=i(8178);class ke extends I.u{constructor(t=new Et(new _.P(-1,-1,0),new _.P(-1,1,0),new _.P(1,1,0)),e=64,i=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:s,closed:r};const n=t.computeFrenetFrames(e,r);this.tangents=n.tangents,this.normals=n.normals,this.binormals=n.binormals;const a=new _.P,o=new _.P,h=new A.F;let c=new _.P;const l=[],u=[],p=[],d=[];function m(r){c=t.getPointAt(r/e,c);const h=n.normals[r],p=n.binormals[r];for(let t=0;t<=s;t++){const e=t/s*Math.PI*2,r=Math.sin(e),n=-Math.cos(e);o.x=n*h.x+r*p.x,o.y=n*h.y+r*p.y,o.z=n*h.z+r*p.z,o.normalize(),u.push(o.x,o.y,o.z),a.x=c.x+i*o.x,a.y=c.y+i*o.y,a.z=c.z+i*o.z,l.push(a.x,a.y,a.z)}}!function(){for(let t=0;t<e;t++)m(t);m(!1===r?e:0),function(){for(let t=0;t<=e;t++)for(let i=0;i<=s;i++)h.x=t/e,h.y=i/s,p.push(h.x,h.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=s;e++){const i=(s+1)*(t-1)+(e-1),r=(s+1)*t+(e-1),n=(s+1)*t+e,a=(s+1)*(t-1)+e;d.push(i,r,a),d.push(r,n,a)}}()}(),this.setIndex(d),this.setAttribute("position",new it.a$(l,3)),this.setAttribute("normal",new it.a$(u,3)),this.setAttribute("uv",new it.a$(p,2))}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new ke((new s[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class Ue extends I.u{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],i=new Set,s=new _.P,r=new _.P;if(null!==t.index){const n=t.attributes.position,a=t.index;let o=t.groups;0===o.length&&(o=[{start:0,count:a.count,materialIndex:0}]);for(let t=0,h=o.length;t<h;++t){const h=o[t],c=h.start;for(let t=c,o=c+h.count;t<o;t+=3)for(let o=0;o<3;o++){const h=a.getX(t+o),c=a.getX(t+(o+1)%3);s.fromBufferAttribute(n,h),r.fromBufferAttribute(n,c),!0===We(s,r,i)&&(e.push(s.x,s.y,s.z),e.push(r.x,r.y,r.z))}}}else{const n=t.attributes.position;for(let t=0,a=n.count/3;t<a;t++)for(let a=0;a<3;a++){const o=3*t+a,h=3*t+(a+1)%3;s.fromBufferAttribute(n,o),r.fromBufferAttribute(n,h),!0===We(s,r,i)&&(e.push(s.x,s.y,s.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new it.a$(e,3))}}}function We(t,e,i){const s=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return!0!==i.has(s)&&!0!==i.has(r)&&(i.add(s),i.add(r),!0)}class De extends L.F{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new w.I(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}var He=i(7993);class je extends He.j{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}var Je=i(3187),Ve=i(4762),qe=i(7417);class Ze extends L.F{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new w.I(16777215),this.specular=new w.I(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new w.I(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=a.IOt,this.normalScale=new A.F(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=a.Ns1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class $e extends L.F{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new w.I(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new w.I(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=a.IOt,this.normalScale=new A.F(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}var Ye=i(809);class Xe extends L.F{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new w.I(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new w.I(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=a.Ns1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}var Ke=i(7147),Qe=i(2997),ti=i(8300);class ei extends L.F{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new w.I(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=a.IOt,this.normalScale=new A.F(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}var ii=i(12);class si extends ii.n{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}var ri=i(1445),ni=i(831),ai=i(3034);class oi extends ai.a{constructor(t){super(t)}load(t,e,i,s){const r=this,n=new ni.h(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(t,(function(i){try{e(r.parse(JSON.parse(i)))}catch(e){s?s(e):console.error(e),r.manager.itemError(t)}}),i,s)}parse(t){const e=[];for(let i=0;i<t.length;i++){const s=ri.m.parse(t[i]);e.push(s)}return e}}var hi=i(2261),ci=i(6446);class li extends ai.a{constructor(t){super(t)}load(t,e,i,s){const r=new wt.B,n=new ci.S(this.manager);n.setCrossOrigin(this.crossOrigin),n.setPath(this.path);let a=0;function o(i){n.load(t[i],(function(t){r.images[i]=t,a++,6===a&&(r.needsUpdate=!0,e&&e(r))}),void 0,s)}for(let e=0;e<t.length;++e)o(e);return r}}class ui extends ai.a{constructor(t){super(t)}load(t,e,i,s){const r=this,n=new vt.I,o=new ni.h(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(t,(function(t){const i=r.parse(t);i&&(void 0!==i.image?n.image=i.image:void 0!==i.data&&(n.image.width=i.width,n.image.height=i.height,n.image.data=i.data),n.wrapS=void 0!==i.wrapS?i.wrapS:a.uWy,n.wrapT=void 0!==i.wrapT?i.wrapT:a.uWy,n.magFilter=void 0!==i.magFilter?i.magFilter:a.wem,n.minFilter=void 0!==i.minFilter?i.minFilter:a.wem,n.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.encoding&&(n.encoding=i.encoding),void 0!==i.flipY&&(n.flipY=i.flipY),void 0!==i.format&&(n.format=i.format),void 0!==i.type&&(n.type=i.type),void 0!==i.mipmaps&&(n.mipmaps=i.mipmaps,n.minFilter=a.D1R),1===i.mipmapCount&&(n.minFilter=a.wem),void 0!==i.generateMipmaps&&(n.generateMipmaps=i.generateMipmaps),n.needsUpdate=!0,e&&e(n,i))}),i,s),n}}var pi=i(9026),di=i(8892);class mi extends di._{constructor(t,e,i){super(t,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(T.T.DefaultUp),this.updateMatrix(),this.groundColor=new w.I(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}var fi=i(5693),yi=i(637),gi=i(2226);class vi extends di._{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class xi extends di._{constructor(t,e,i=10,s=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class wi{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new _.P)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const i=t.x,s=t.y,r=t.z,n=this.coefficients;return e.copy(n[0]).multiplyScalar(.282095),e.addScaledVector(n[1],.488603*s),e.addScaledVector(n[2],.488603*r),e.addScaledVector(n[3],.488603*i),e.addScaledVector(n[4],i*s*1.092548),e.addScaledVector(n[5],s*r*1.092548),e.addScaledVector(n[6],.315392*(3*r*r-1)),e.addScaledVector(n[7],i*r*1.092548),e.addScaledVector(n[8],.546274*(i*i-s*s)),e}getIrradianceAt(t,e){const i=t.x,s=t.y,r=t.z,n=this.coefficients;return e.copy(n[0]).multiplyScalar(.886227),e.addScaledVector(n[1],1.023328*s),e.addScaledVector(n[2],1.023328*r),e.addScaledVector(n[3],1.023328*i),e.addScaledVector(n[4],.858086*i*s),e.addScaledVector(n[5],.858086*s*r),e.addScaledVector(n[6],.743125*r*r-.247708),e.addScaledVector(n[7],.858086*i*r),e.addScaledVector(n[8],.429043*(i*i-s*s)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(t,e+3*s);return this}toArray(t=[],e=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(t,e+3*s);return t}static getBasisAt(t,e){const i=t.x,s=t.y,r=t.z;e[0]=.282095,e[1]=.488603*s,e[2]=.488603*r,e[3]=.488603*i,e[4]=1.092548*i*s,e[5]=1.092548*s*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*i*r,e[8]=.546274*(i*i-s*s)}}class Mi extends di._{constructor(t=new wi,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}var bi=i(6852),Si=i(7111),Ai=i(7723),_i=i(930),Ci=i(8922);class Pi extends ai.a{constructor(t){super(t),this.textures={}}load(t,e,i,s){const r=this,n=new ni.h(r.manager);n.setPath(r.path),n.setRequestHeader(r.requestHeader),n.setWithCredentials(r.withCredentials),n.load(t,(function(i){try{e(r.parse(JSON.parse(i)))}catch(e){s?s(e):console.error(e),r.manager.itemError(t)}}),i,s)}parse(t){const e=this.textures;function i(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const s=Pi.createMaterialFromType(t.type);if(void 0!==t.uuid&&(s.uuid=t.uuid),void 0!==t.name&&(s.name=t.name),void 0!==t.color&&void 0!==s.color&&s.color.setHex(t.color),void 0!==t.roughness&&(s.roughness=t.roughness),void 0!==t.metalness&&(s.metalness=t.metalness),void 0!==t.sheen&&(s.sheen=t.sheen),void 0!==t.sheenColor&&(s.sheenColor=(new w.I).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(s.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==s.emissive&&s.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==s.specular&&s.specular.setHex(t.specular),void 0!==t.specularIntensity&&(s.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==s.specularColor&&s.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(s.shininess=t.shininess),void 0!==t.clearcoat&&(s.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(s.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.iridescence&&(s.iridescence=t.iridescence),void 0!==t.iridescenceIOR&&(s.iridescenceIOR=t.iridescenceIOR),void 0!==t.iridescenceThicknessRange&&(s.iridescenceThicknessRange=t.iridescenceThicknessRange),void 0!==t.transmission&&(s.transmission=t.transmission),void 0!==t.thickness&&(s.thickness=t.thickness),void 0!==t.attenuationDistance&&(s.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==s.attenuationColor&&s.attenuationColor.setHex(t.attenuationColor),void 0!==t.fog&&(s.fog=t.fog),void 0!==t.flatShading&&(s.flatShading=t.flatShading),void 0!==t.blending&&(s.blending=t.blending),void 0!==t.combine&&(s.combine=t.combine),void 0!==t.side&&(s.side=t.side),void 0!==t.shadowSide&&(s.shadowSide=t.shadowSide),void 0!==t.opacity&&(s.opacity=t.opacity),void 0!==t.transparent&&(s.transparent=t.transparent),void 0!==t.alphaTest&&(s.alphaTest=t.alphaTest),void 0!==t.depthTest&&(s.depthTest=t.depthTest),void 0!==t.depthWrite&&(s.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(s.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(s.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(s.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(s.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(s.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(s.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(s.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(s.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(s.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(s.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(s.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(s.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(s.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(s.rotation=t.rotation),1!==t.linewidth&&(s.linewidth=t.linewidth),void 0!==t.dashSize&&(s.dashSize=t.dashSize),void 0!==t.gapSize&&(s.gapSize=t.gapSize),void 0!==t.scale&&(s.scale=t.scale),void 0!==t.polygonOffset&&(s.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(s.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(s.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(s.dithering=t.dithering),void 0!==t.alphaToCoverage&&(s.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(s.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.visible&&(s.visible=t.visible),void 0!==t.toneMapped&&(s.toneMapped=t.toneMapped),void 0!==t.userData&&(s.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?s.vertexColors=t.vertexColors>0:s.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const e in t.uniforms){const r=t.uniforms[e];switch(s.uniforms[e]={},r.type){case"t":s.uniforms[e].value=i(r.value);break;case"c":s.uniforms[e].value=(new w.I).setHex(r.value);break;case"v2":s.uniforms[e].value=(new A.F).fromArray(r.value);break;case"v3":s.uniforms[e].value=(new _.P).fromArray(r.value);break;case"v4":s.uniforms[e].value=(new _i.L).fromArray(r.value);break;case"m3":s.uniforms[e].value=(new Ci.V).fromArray(r.value);break;case"m4":s.uniforms[e].value=(new C.y).fromArray(r.value);break;default:s.uniforms[e].value=r.value}}if(void 0!==t.defines&&(s.defines=t.defines),void 0!==t.vertexShader&&(s.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(s.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const e in t.extensions)s.extensions[e]=t.extensions[e];if(void 0!==t.shading&&(s.flatShading=1===t.shading),void 0!==t.size&&(s.size=t.size),void 0!==t.sizeAttenuation&&(s.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(s.map=i(t.map)),void 0!==t.matcap&&(s.matcap=i(t.matcap)),void 0!==t.alphaMap&&(s.alphaMap=i(t.alphaMap)),void 0!==t.bumpMap&&(s.bumpMap=i(t.bumpMap)),void 0!==t.bumpScale&&(s.bumpScale=t.bumpScale),void 0!==t.normalMap&&(s.normalMap=i(t.normalMap)),void 0!==t.normalMapType&&(s.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),s.normalScale=(new A.F).fromArray(e)}return void 0!==t.displacementMap&&(s.displacementMap=i(t.displacementMap)),void 0!==t.displacementScale&&(s.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(s.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(s.roughnessMap=i(t.roughnessMap)),void 0!==t.metalnessMap&&(s.metalnessMap=i(t.metalnessMap)),void 0!==t.emissiveMap&&(s.emissiveMap=i(t.emissiveMap)),void 0!==t.emissiveIntensity&&(s.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(s.specularMap=i(t.specularMap)),void 0!==t.specularIntensityMap&&(s.specularIntensityMap=i(t.specularIntensityMap)),void 0!==t.specularColorMap&&(s.specularColorMap=i(t.specularColorMap)),void 0!==t.envMap&&(s.envMap=i(t.envMap)),void 0!==t.envMapIntensity&&(s.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(s.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(s.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(s.lightMap=i(t.lightMap)),void 0!==t.lightMapIntensity&&(s.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(s.aoMap=i(t.aoMap)),void 0!==t.aoMapIntensity&&(s.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(s.gradientMap=i(t.gradientMap)),void 0!==t.clearcoatMap&&(s.clearcoatMap=i(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(s.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(s.clearcoatNormalMap=i(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(s.clearcoatNormalScale=(new A.F).fromArray(t.clearcoatNormalScale)),void 0!==t.iridescenceMap&&(s.iridescenceMap=i(t.iridescenceMap)),void 0!==t.iridescenceThicknessMap&&(s.iridescenceThicknessMap=i(t.iridescenceThicknessMap)),void 0!==t.transmissionMap&&(s.transmissionMap=i(t.transmissionMap)),void 0!==t.thicknessMap&&(s.thicknessMap=i(t.thicknessMap)),void 0!==t.sheenColorMap&&(s.sheenColorMap=i(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(s.sheenRoughnessMap=i(t.sheenRoughnessMap)),s}setTextures(t){return this.textures=t,this}static createMaterialFromType(t){return new{ShadowMaterial:De,SpriteMaterial:R,RawShaderMaterial:je,ShaderMaterial:He.j,PointsMaterial:Je.U,MeshPhysicalMaterial:Ve.E,MeshStandardMaterial:qe.W,MeshPhongMaterial:Ze,MeshToonMaterial:$e,MeshNormalMaterial:Ye.R,MeshLambertMaterial:Xe,MeshDepthMaterial:Ke.l,MeshDistanceMaterial:Qe.L,MeshBasicMaterial:ti.v,MeshMatcapMaterial:ei,LineDashedMaterial:si,LineBasicMaterial:ii.n,Material:L.F}[t]}}var Ti=i(8726),Ii=i(8924);class Fi extends I.u{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}var Bi=i(3782);class Li extends ai.a{constructor(t){super(t)}load(t,e,i,s){const r=this,n=new ni.h(r.manager);n.setPath(r.path),n.setRequestHeader(r.requestHeader),n.setWithCredentials(r.withCredentials),n.load(t,(function(i){try{e(r.parse(JSON.parse(i)))}catch(e){s?s(e):console.error(e),r.manager.itemError(t)}}),i,s)}parse(t){const e={},i={};function s(t,s){if(void 0!==e[s])return e[s];const r=t.interleavedBuffers[s],n=function(t,e){if(void 0!==i[e])return i[e];const s=t.arrayBuffers[e],r=new Uint32Array(s).buffer;return i[e]=r,r}(t,r.buffer),a=(0,Bi.rf)(r.type,n),o=new F.v(a,r.stride);return o.uuid=r.uuid,e[s]=o,o}const r=t.isInstancedBufferGeometry?new Fi:new I.u,n=t.data.index;if(void 0!==n){const t=(0,Bi.rf)(n.type,n.array);r.setIndex(new it.Tl(t,1))}const a=t.data.attributes;for(const e in a){const i=a[e];let n;if(i.isInterleavedBufferAttribute){const e=s(t.data,i.data);n=new B.k(e,i.itemSize,i.offset,i.normalized)}else{const t=(0,Bi.rf)(i.type,i.array);n=new(i.isInstancedBufferAttribute?st:it.Tl)(t,i.itemSize,i.normalized)}void 0!==i.name&&(n.name=i.name),void 0!==i.usage&&n.setUsage(i.usage),void 0!==i.updateRange&&(n.updateRange.offset=i.updateRange.offset,n.updateRange.count=i.updateRange.count),r.setAttribute(e,n)}const o=t.data.morphAttributes;if(o)for(const e in o){const i=o[e],n=[];for(let e=0,r=i.length;e<r;e++){const r=i[e];let a;if(r.isInterleavedBufferAttribute){const e=s(t.data,r.data);a=new B.k(e,r.itemSize,r.offset,r.normalized)}else{const t=(0,Bi.rf)(r.type,r.array);a=new it.Tl(t,r.itemSize,r.normalized)}void 0!==r.name&&(a.name=r.name),n.push(a)}r.morphAttributes[e]=n}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const h=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==h)for(let t=0,e=h.length;t!==e;++t){const e=h[t];r.addGroup(e.start,e.count,e.materialIndex)}const c=t.data.boundingSphere;if(void 0!==c){const t=new _.P;void 0!==c.center&&t.fromArray(c.center),r.boundingSphere=new Ii.a(t,c.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}}class Ri extends ai.a{constructor(t){super(t)}load(t,e,i,s){const r=this,n=""===this.path?Ti.Z.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||n;const a=new ni.h(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(i){let n=null;try{n=JSON.parse(i)}catch(e){return void 0!==s&&s(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}const a=n.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(n,e):console.error("THREE.ObjectLoader: Can't load "+t)}),i,s)}async loadAsync(t,e){const i=""===this.path?Ti.Z.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||i;const s=new ni.h(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const r=await s.loadAsync(t,e),n=JSON.parse(r),a=n.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+t);return await this.parseAsync(n)}parse(t,e){const i=this.parseAnimations(t.animations),s=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,s),n=this.parseImages(t.images,(function(){void 0!==e&&e(h)})),a=this.parseTextures(t.textures,n),o=this.parseMaterials(t.materials,a),h=this.parseObject(t.object,r,o,a,i),c=this.parseSkeletons(t.skeletons,h);if(this.bindSkeletons(h,c),void 0!==e){let t=!1;for(const e in n)if(n[e].data instanceof HTMLImageElement){t=!0;break}!1===t&&e(h)}return h}async parseAsync(t){const e=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),s=this.parseGeometries(t.geometries,i),r=await this.parseImagesAsync(t.images),n=this.parseTextures(t.textures,r),a=this.parseMaterials(t.materials,n),o=this.parseObject(t.object,s,a,n,e),h=this.parseSkeletons(t.skeletons,o);return this.bindSkeletons(o,h),o}parseShapes(t){const e={};if(void 0!==t)for(let i=0,s=t.length;i<s;i++){const s=(new Qt).fromJSON(t[i]);e[s.uuid]=s}return e}parseSkeletons(t,e){const i={},s={};if(e.traverse((function(t){t.isBone&&(s[t.uuid]=t)})),void 0!==t)for(let e=0,r=t.length;e<r;e++){const r=(new Q.O).fromJSON(t[e],s);i[r.uuid]=r}return i}parseGeometries(t,e){const i={};if(void 0!==t){const s=new Li;for(let n=0,a=t.length;n<a;n++){let a;const o=t[n];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":a=s.parse(o);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:o.type in r?a=r[o.type].fromJSON(o,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${o.type}"`)}a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),!0===a.isBufferGeometry&&void 0!==o.userData&&(a.userData=o.userData),i[o.uuid]=a}}return i}parseMaterials(t,e){const i={},s={};if(void 0!==t){const r=new Pi;r.setTextures(e);for(let e=0,n=t.length;e<n;e++){const n=t[e];if("MultiMaterial"===n.type){const t=[];for(let e=0;e<n.materials.length;e++){const s=n.materials[e];void 0===i[s.uuid]&&(i[s.uuid]=r.parse(s)),t.push(i[s.uuid])}s[n.uuid]=t}else void 0===i[n.uuid]&&(i[n.uuid]=r.parse(n)),s[n.uuid]=i[n.uuid]}}return s}parseAnimations(t){const e={};if(void 0!==t)for(let i=0;i<t.length;i++){const s=t[i],r=ri.m.parse(s);e[r.uuid]=r}return e}parseImages(t,e){const i=this,s={};let r;function n(t){if("string"==typeof t){const e=t;return function(t){return i.manager.itemStart(t),r.load(t,(function(){i.manager.itemEnd(t)}),void 0,(function(){i.manager.itemError(t),i.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:i.resourcePath+e)}return t.data?{data:(0,Bi.rf)(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const i=new Ai.l(e);r=new ci.S(i),r.setCrossOrigin(this.crossOrigin);for(let e=0,i=t.length;e<i;e++){const i=t[e],r=i.url;if(Array.isArray(r)){const t=[];for(let e=0,i=r.length;e<i;e++){const i=n(r[e]);null!==i&&(i instanceof HTMLImageElement?t.push(i):t.push(new vt.I(i.data,i.width,i.height)))}s[i.uuid]=new gt.H(t)}else{const t=n(i.url);s[i.uuid]=new gt.H(t)}}}return s}async parseImagesAsync(t){const e=this,i={};let s;async function r(t){if("string"==typeof t){const i=t,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i)?i:e.resourcePath+i;return await s.loadAsync(r)}return t.data?{data:(0,Bi.rf)(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){s=new ci.S(this.manager),s.setCrossOrigin(this.crossOrigin);for(let e=0,s=t.length;e<s;e++){const s=t[e],n=s.url;if(Array.isArray(n)){const t=[];for(let e=0,i=n.length;e<i;e++){const i=n[e],s=await r(i);null!==s&&(s instanceof HTMLImageElement?t.push(s):t.push(new vt.I(s.data,s.width,s.height)))}i[s.uuid]=new gt.H(t)}else{const t=await r(s.url);i[s.uuid]=new gt.H(t)}}}return i}parseTextures(t,e){function i(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const s={};if(void 0!==t)for(let r=0,n=t.length;r<n;r++){const n=t[r];void 0===n.image&&console.warn('THREE.ObjectLoader: No "image" specified for',n.uuid),void 0===e[n.image]&&console.warn("THREE.ObjectLoader: Undefined image",n.image);const a=e[n.image],o=a.data;let h;Array.isArray(o)?(h=new wt.B,6===o.length&&(h.needsUpdate=!0)):(h=o&&o.data?new vt.I:new mt.x,o&&(h.needsUpdate=!0)),h.source=a,h.uuid=n.uuid,void 0!==n.name&&(h.name=n.name),void 0!==n.mapping&&(h.mapping=i(n.mapping,Oi)),void 0!==n.offset&&h.offset.fromArray(n.offset),void 0!==n.repeat&&h.repeat.fromArray(n.repeat),void 0!==n.center&&h.center.fromArray(n.center),void 0!==n.rotation&&(h.rotation=n.rotation),void 0!==n.wrap&&(h.wrapS=i(n.wrap[0],Gi),h.wrapT=i(n.wrap[1],Gi)),void 0!==n.format&&(h.format=n.format),void 0!==n.type&&(h.type=n.type),void 0!==n.encoding&&(h.encoding=n.encoding),void 0!==n.minFilter&&(h.minFilter=i(n.minFilter,Ei)),void 0!==n.magFilter&&(h.magFilter=i(n.magFilter,Ei)),void 0!==n.anisotropy&&(h.anisotropy=n.anisotropy),void 0!==n.flipY&&(h.flipY=n.flipY),void 0!==n.premultiplyAlpha&&(h.premultiplyAlpha=n.premultiplyAlpha),void 0!==n.unpackAlignment&&(h.unpackAlignment=n.unpackAlignment),void 0!==n.userData&&(h.userData=n.userData),s[n.uuid]=h}return s}parseObject(t,e,i,s,r){let n,a,o;function h(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function c(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let s=0,r=t.length;s<r;s++){const r=t[s];void 0===i[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),e.push(i[r])}return e}return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),i[t]}}function l(t){return void 0===s[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t),s[t]}switch(t.type){case"Scene":n=new S.x,void 0!==t.background&&(Number.isInteger(t.background)?n.background=new w.I(t.background):n.background=l(t.background)),void 0!==t.environment&&(n.environment=l(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?n.fog=new b(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(n.fog=new M(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":n=new Si.c(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(n.focus=t.focus),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.filmGauge&&(n.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(n.filmOffset=t.filmOffset),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"OrthographicCamera":n=new bi.i(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"AmbientLight":n=new vi(t.color,t.intensity);break;case"DirectionalLight":n=new gi.O(t.color,t.intensity);break;case"PointLight":n=new yi.c(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":n=new xi(t.color,t.intensity,t.width,t.height);break;case"SpotLight":n=new fi.P(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":n=new mi(t.color,t.groundColor,t.intensity);break;case"LightProbe":n=(new Mi).fromJSON(t);break;case"SkinnedMesh":a=h(t.geometry),o=c(t.material),n=new K.T(a,o),void 0!==t.bindMode&&(n.bindMode=t.bindMode),void 0!==t.bindMatrix&&n.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(n.skeleton=t.skeleton);break;case"Mesh":a=h(t.geometry),o=c(t.material),n=new et.K(a,o);break;case"InstancedMesh":a=h(t.geometry),o=c(t.material);const e=t.count,i=t.instanceMatrix,s=t.instanceColor;n=new ht(a,o,e),n.instanceMatrix=new st(new Float32Array(i.array),16),void 0!==s&&(n.instanceColor=new st(new Float32Array(s.array),s.itemSize));break;case"LOD":n=new X;break;case"Line":n=new ut.x(h(t.geometry),c(t.material));break;case"LineLoop":n=new lt.b(h(t.geometry),c(t.material));break;case"LineSegments":n=new ct.e(h(t.geometry),c(t.material));break;case"PointCloud":case"Points":n=new pt.w(h(t.geometry),c(t.material));break;case"Sprite":n=new q(c(t.material));break;case"Group":n=new dt.Z;break;case"Bone":n=new tt.N;break;default:n=new T.T}if(n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),void 0!==t.matrix?(n.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(n.matrixAutoUpdate=t.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.rotation&&n.rotation.fromArray(t.rotation),void 0!==t.quaternion&&n.quaternion.fromArray(t.quaternion),void 0!==t.scale&&n.scale.fromArray(t.scale)),void 0!==t.castShadow&&(n.castShadow=t.castShadow),void 0!==t.receiveShadow&&(n.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(n.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(n.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(n.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&n.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(n.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.frustumCulled&&(n.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(n.renderOrder=t.renderOrder),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.layers&&(n.layers.mask=t.layers),void 0!==t.children){const a=t.children;for(let t=0;t<a.length;t++)n.add(this.parseObject(a[t],e,i,s,r))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const i=e[t];n.animations.push(r[i])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(n.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const i=e[t],s=n.getObjectByProperty("uuid",i.object);void 0!==s&&n.addLevel(s,i.distance)}}return n}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const i=e[t.skeleton];void 0===i?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(i,t.bindMatrix)}}))}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}const Oi={UVMapping:a.xfE,CubeReflectionMapping:a.fY$,CubeRefractionMapping:a.vxC,EquirectangularReflectionMapping:a.dSO,EquirectangularRefractionMapping:a.Bf4,CubeUVReflectionMapping:a.g8_},Gi={RepeatWrapping:a.rpg,ClampToEdgeWrapping:a.uWy,MirroredRepeatWrapping:a.OoA},Ei={NearestFilter:a.TyD,NearestMipmapNearestFilter:a.YLQ,NearestMipmapLinearFilter:a.aH4,LinearFilter:a.wem,LinearMipmapNearestFilter:a.qyh,LinearMipmapLinearFilter:a.D1R};var zi=i(1783),Ni=i(8160),ki=i(6371);class Ui extends Mi{constructor(t,e,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const s=(new w.I).set(t),r=(new w.I).set(e),n=new _.P(s.r,s.g,s.b),a=new _.P(r.r,r.g,r.b),o=Math.sqrt(Math.PI),h=o*Math.sqrt(.75);this.sh.coefficients[0].copy(n).add(a).multiplyScalar(o),this.sh.coefficients[1].copy(n).sub(a).multiplyScalar(h)}}class Wi extends Mi{constructor(t,e=1){super(void 0,e),this.isAmbientLightProbe=!0;const i=(new w.I).set(t);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const Di=new C.y,Hi=new C.y,ji=new C.y;class Ji{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Si.c,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Si.c,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,ji.copy(t.projectionMatrix);const i=e.eyeSep/2,s=i*e.near/e.focus,r=e.near*Math.tan(Ut.DEG2RAD*e.fov*.5)/e.zoom;let n,a;Hi.elements[12]=-i,Di.elements[12]=i,n=-r*e.aspect+s,a=r*e.aspect+s,ji.elements[0]=2*e.near/(a-n),ji.elements[8]=(a+n)/(a-n),this.cameraL.projectionMatrix.copy(ji),n=-r*e.aspect-s,a=r*e.aspect-s,ji.elements[0]=2*e.near/(a-n),ji.elements[8]=(a+n)/(a-n),this.cameraR.projectionMatrix.copy(ji)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Hi),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Di)}}var Vi=i(6022),qi=i(6772),Zi=i(3777),$i=i(9105),Yi=i(8362),Xi=i(754);class Ki{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}}var Qi=i(4144),ts=i(9110),es=i(2343),is=i(4093),ss=i(7248),rs=i(2634),ns=i(6239),as=i(1859);class os{constructor(t,e,i){let s,r,n;switch(this.binding=t,this.valueSize=i,e){case"quaternion":s=this._slerp,r=this._slerpAdditive,n=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,n=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:s=this._lerp,r=this._lerpAdditive,n=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=n,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const i=this.buffer,s=this.valueSize,r=t*s+s;let n=this.cumulativeWeight;if(0===n){for(let t=0;t!==s;++t)i[r+t]=i[t];n=e}else{n+=e;const t=e/n;this._mixBufferRegion(i,r,0,t,s)}this.cumulativeWeight=n}accumulateAdditive(t){const e=this.buffer,i=this.valueSize,s=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,s,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,i=this.buffer,s=t*e+e,r=this.cumulativeWeight,n=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(i,s,t,1-r,e)}n>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*e,1,e);for(let t=e,r=e+e;t!==r;++t)if(i[t]!==i[t+e]){a.setValue(i,s);break}}saveOriginalState(){const t=this.binding,e=this.buffer,i=this.valueSize,s=i*this._origIndex;t.getValue(e,s);for(let t=i,r=s;t!==r;++t)e[t]=e[s+t%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,s,r){if(s>=.5)for(let s=0;s!==r;++s)t[e+s]=t[i+s]}_slerp(t,e,i,s){as._.slerpFlat(t,e,t,e,t,i,s)}_slerpAdditive(t,e,i,s,r){const n=this._workIndex*r;as._.multiplyQuaternionsFlat(t,n,t,e,t,i),as._.slerpFlat(t,e,t,e,t,n,s)}_lerp(t,e,i,s,r){const n=1-s;for(let a=0;a!==r;++a){const r=e+a;t[r]=t[r]*n+t[i+a]*s}}_lerpAdditive(t,e,i,s,r){for(let n=0;n!==r;++n){const r=e+n;t[r]=t[r]+t[i+n]*s}}}var hs=i(5907),cs=i(4312),ls=i(4634);class us{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ut.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let e=0,i=arguments.length;e!==i;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,i=this._paths,s=this._parsedPaths,r=this._bindings,n=r.length;let a,o=t.length,h=this.nCachedObjects_;for(let c=0,l=arguments.length;c!==l;++c){const l=arguments[c],u=l.uuid;let p=e[u];if(void 0===p){p=o++,e[u]=p,t.push(l);for(let t=0,e=n;t!==e;++t)r[t].push(new hs.i(l,i[t],s[t]))}else if(p<h){a=t[p];const o=--h,c=t[o];e[c.uuid]=p,t[p]=c,e[u]=o,t[o]=l;for(let t=0,e=n;t!==e;++t){const e=r[t],n=e[o];let a=e[p];e[p]=n,void 0===a&&(a=new hs.i(l,i[t],s[t])),e[o]=a}}else t[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,s=i.length;let r=this.nCachedObjects_;for(let n=0,a=arguments.length;n!==a;++n){const a=arguments[n],o=a.uuid,h=e[o];if(void 0!==h&&h>=r){const n=r++,c=t[n];e[c.uuid]=h,t[h]=c,e[o]=n,t[n]=a;for(let t=0,e=s;t!==e;++t){const e=i[t],s=e[n],r=e[h];e[h]=s,e[n]=r}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,s=i.length;let r=this.nCachedObjects_,n=t.length;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a].uuid,h=e[o];if(void 0!==h)if(delete e[o],h<r){const a=--r,o=t[a],c=--n,l=t[c];e[o.uuid]=h,t[h]=o,e[l.uuid]=a,t[a]=l,t.pop();for(let t=0,e=s;t!==e;++t){const e=i[t],s=e[a],r=e[c];e[h]=s,e[a]=r,e.pop()}}else{const r=--n,a=t[r];r>0&&(e[a.uuid]=h),t[h]=a,t.pop();for(let t=0,e=s;t!==e;++t){const e=i[t];e[h]=e[r],e.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const i=this._bindingsIndicesByPath;let s=i[t];const r=this._bindings;if(void 0!==s)return r[s];const n=this._paths,a=this._parsedPaths,o=this._objects,h=o.length,c=this.nCachedObjects_,l=new Array(h);s=r.length,i[t]=s,n.push(t),a.push(e),r.push(l);for(let i=c,s=o.length;i!==s;++i){const s=o[i];l[i]=new hs.i(s,t,e)}return l}unsubscribe_(t){const e=this._bindingsIndicesByPath,i=e[t];if(void 0!==i){const s=this._paths,r=this._parsedPaths,n=this._bindings,a=n.length-1,o=n[a];e[t[a]]=i,n[i]=o,n.pop(),r[i]=r[a],r.pop(),s[i]=s[a],s.pop()}}}class ps{constructor(t,e,i=null,s=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=s;const r=e.tracks,n=r.length,o=new Array(n),h={endingStart:a.Pnf,endingEnd:a.Pnf};for(let t=0;t!==n;++t){const e=r[t].createInterpolant(null);o[t]=e,e.settings=h}this._interpolantSettings=h,this._interpolants=o,this._propertyBindings=new Array(n),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=a.YKA,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){const i=this._clip.duration,s=t._clip.duration,r=s/i,n=i/s;t.warp(1,r,e),this.warp(n,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){const s=this._mixer,r=s.time,n=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=s._lendControlInterpolant(),this._timeScaleInterpolant=a);const o=a.parameterPositions,h=a.sampleValues;return o[0]=r,o[1]=r+i,h[0]=t/n,h[1]=e/n,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,s){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const s=(t-r)*i;if(s<0||0===i)return;this._startTime=null,e=i*s}e*=this._updateTimeScale(t);const n=this._updateTime(e),o=this._updateWeight(t);if(o>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case a.gSk:for(let i=0,s=t.length;i!==s;++i)t[i].evaluate(n),e[i].accumulateAdditive(o);break;case a.IFH:default:for(let i=0,r=t.length;i!==r;++i)t[i].evaluate(n),e[i].accumulate(s,o)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const i=this._weightInterpolant;if(null!==i){const s=i.evaluate(t)[0];e*=s,t>i.parameterPositions[1]&&(this.stopFading(),0===s&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const i=this._timeScaleInterpolant;if(null!==i){e*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,i=this.loop;let s=this.time+t,r=this._loopCount;const n=i===a.uEv;if(0===t)return-1===r?s:n&&1==(1&r)?e-s:s;if(i===a.jAl){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(s>=e)s=e;else{if(!(s<0)){this.time=s;break t}s=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,n)):this._setEndings(0===this.repetitions,!0,n)),s>=e||s<0){const i=Math.floor(s/e);s-=e*i,r+=Math.abs(i);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=t>0?e:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){const e=t<0;this._setEndings(e,!e,n)}else this._setEndings(!1,!1,n);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=s;if(n&&1==(1&r))return e-s}return s}_setEndings(t,e,i){const s=this._interpolantSettings;i?(s.endingStart=a._lf,s.endingEnd=a._lf):(s.endingStart=t?this.zeroSlopeAtStart?a._lf:a.Pnf:a._sL,s.endingEnd=e?this.zeroSlopeAtEnd?a._lf:a.Pnf:a._sL)}_scheduleFading(t,e,i){const s=this._mixer,r=s.time;let n=this._weightInterpolant;null===n&&(n=s._lendControlInterpolant(),this._weightInterpolant=n);const a=n.parameterPositions,o=n.sampleValues;return a[0]=r,o[0]=e,a[1]=r+t,o[1]=i,this}}var ds=i(2310),ms=i(5956);const fs=new Float32Array(1);class ys extends ds.p{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const i=t._localRoot||this._root,s=t._clip.tracks,r=s.length,n=t._propertyBindings,a=t._interpolants,o=i.uuid,h=this._bindingsByRootAndName;let c=h[o];void 0===c&&(c={},h[o]=c);for(let t=0;t!==r;++t){const r=s[t],h=r.name;let l=c[h];if(void 0!==l)++l.referenceCount,n[t]=l;else{if(l=n[t],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,h));continue}const s=e&&e._propertyBindings[t].binding.parsedPath;l=new os(hs.i.create(i,h,s),r.ValueTypeName,r.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,h),n[t]=l}a[t].resultBuffer=l.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,i=t._clip.uuid,s=this._actionsByClip[i];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,i,e)}const e=t._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const i=e[t];0==i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const i=e[t];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,i){const s=this._actions,r=this._actionsByClip;let n=r[e];if(void 0===n)n={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=n;else{const e=n.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=s.length,s.push(t),n.actionByRoot[i]=t}_removeInactiveAction(t){const e=this._actions,i=e[e.length-1],s=t._cacheIndex;i._cacheIndex=s,e[s]=i,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,n=this._actionsByClip,a=n[r],o=a.knownActions,h=o[o.length-1],c=t._byClipCacheIndex;h._byClipCacheIndex=c,o[c]=h,o.pop(),t._byClipCacheIndex=null;delete a.actionByRoot[(t._localRoot||this._root).uuid],0===o.length&&delete n[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const i=e[t];0==--i.referenceCount&&this._removeInactiveBinding(i)}}_lendAction(t){const e=this._actions,i=t._cacheIndex,s=this._nActiveActions++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=i,e[i]=r}_takeBackAction(t){const e=this._actions,i=t._cacheIndex,s=--this._nActiveActions,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=i,e[i]=r}_addInactiveBinding(t,e,i){const s=this._bindingsByRootAndName,r=this._bindings;let n=s[e];void 0===n&&(n={},s[e]=n),n[i]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,i=t.binding,s=i.rootNode.uuid,r=i.path,n=this._bindingsByRootAndName,a=n[s],o=e[e.length-1],h=t._cacheIndex;o._cacheIndex=h,e[h]=o,e.pop(),delete a[r],0===Object.keys(a).length&&delete n[s]}_lendBinding(t){const e=this._bindings,i=t._cacheIndex,s=this._nActiveBindings++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=i,e[i]=r}_takeBackBinding(t){const e=this._bindings,i=t._cacheIndex,s=--this._nActiveBindings,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=i,e[i]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let i=t[e];return void 0===i&&(i=new ms.l(new Float32Array(2),new Float32Array(2),1,fs),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){const e=this._controlInterpolants,i=t.__cacheIndex,s=--this._nActiveControlInterpolants,r=e[s];t.__cacheIndex=s,e[s]=t,r.__cacheIndex=i,e[i]=r}clipAction(t,e,i){const s=e||this._root,r=s.uuid;let n="string"==typeof t?ri.m.findByName(s,t):t;const o=null!==n?n.uuid:t,h=this._actionsByClip[o];let c=null;if(void 0===i&&(i=null!==n?n.blendMode:a.IFH),void 0!==h){const t=h.actionByRoot[r];if(void 0!==t&&t.blendMode===i)return t;c=h.knownActions[0],null===n&&(n=c._clip)}if(null===n)return null;const l=new ps(this,n,e,i);return this._bindAction(l,c),this._addInactiveAction(l,o,r),l}existingAction(t,e){const i=e||this._root,s=i.uuid,r="string"==typeof t?ri.m.findByName(i,t):t,n=r?r.uuid:t,a=this._actionsByClip[n];return void 0!==a&&a.actionByRoot[s]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,i=this._nActiveActions,s=this.time+=t,r=Math.sign(t),n=this._accuIndex^=1;for(let a=0;a!==i;++a){e[a]._update(s,t,r,n)}const a=this._bindings,o=this._nActiveBindings;for(let t=0;t!==o;++t)a[t].apply(n);return this}setTime(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,i=t.uuid,s=this._actionsByClip,r=s[i];if(void 0!==r){const t=r.knownActions;for(let i=0,s=t.length;i!==s;++i){const s=t[i];this._deactivateAction(s);const r=s._cacheIndex,n=e[e.length-1];s._cacheIndex=null,s._byClipCacheIndex=null,n._cacheIndex=r,e[r]=n,e.pop(),this._removeInactiveBindingsForAction(s)}delete s[i]}}uncacheRoot(t){const e=t.uuid,i=this._actionsByClip;for(const t in i){const s=i[t].actionByRoot[e];void 0!==s&&(this._deactivateAction(s),this._removeInactiveAction(s))}const s=this._bindingsByRootAndName[e];if(void 0!==s)for(const t in s){const e=s[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(t,e){const i=this.existingAction(t,e);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class gs{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new gs(void 0===this.value.clone?this.value:this.value.clone())}}class vs extends F.v{constructor(t,e,i=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class xs{constructor(t,e,i,s,r){this.isGLBufferAttribute=!0,this.buffer=t,this.type=e,this.itemSize=i,this.elementSize=s,this.count=r,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}var ws=i(4257),Ms=i(2487),bs=i(6771),Ss=i(3539),As=i(2354),_s=i(6964),Cs=i(1034),Ps=i(4511);class Ts{constructor(t=1,e=0,i=0){return this.radius=t,this.theta=e,this.y=i,this}set(t,e,i){return this.radius=t,this.theta=e,this.y=i,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}clone(){return(new this.constructor).copy(this)}}var Is=i(6546),Fs=i(7023),Bs=i(3392),Ls=i(4812);const Rs=new A.F;class Os{constructor(t=new A.F(1/0,1/0),e=new A.F(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Rs.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Rs.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Gs=new _.P,Es=new _.P;class zs{constructor(t=new _.P,e=new _.P){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Gs.subVectors(t,this.start),Es.subVectors(this.end,this.start);const i=Es.dot(Es);let s=Es.dot(Gs)/i;return e&&(s=Ut.clamp(s,0,1)),s}closestPointToPoint(t,e,i){const s=this.closestPointToPointParameter(t,e);return this.delta(i).multiplyScalar(s).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}var Ns=i(921),ks=i(6255);const Us=new _.P;class Ws extends T.T{constructor(t,e){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;const i=new I.u,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let t=0,e=1,i=32;t<i;t++,e++){const r=t/i*Math.PI*2,n=e/i*Math.PI*2;s.push(Math.cos(r),Math.sin(r),1,Math.cos(n),Math.sin(n),1)}i.setAttribute("position",new it.a$(s,3));const r=new ii.n({fog:!1,toneMapped:!1});this.cone=new ct.e(i,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Us.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Us),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ds=new _.P,Hs=new C.y,js=new C.y;class Js extends ct.e{constructor(t){const e=Vs(t),i=new I.u,s=[],r=[],n=new w.I(0,0,1),a=new w.I(0,1,0);for(let t=0;t<e.length;t++){const i=e[t];i.parent&&i.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(n.r,n.g,n.b),r.push(a.r,a.g,a.b))}i.setAttribute("position",new it.a$(s,3)),i.setAttribute("color",new it.a$(r,3));super(i,new ii.n({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,i=this.geometry,s=i.getAttribute("position");js.copy(this.root.matrixWorld).invert();for(let t=0,i=0;t<e.length;t++){const r=e[t];r.parent&&r.parent.isBone&&(Hs.multiplyMatrices(js,r.matrixWorld),Ds.setFromMatrixPosition(Hs),s.setXYZ(i,Ds.x,Ds.y,Ds.z),Hs.multiplyMatrices(js,r.parent.matrixWorld),Ds.setFromMatrixPosition(Hs),s.setXYZ(i+1,Ds.x,Ds.y,Ds.z),i+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}function Vs(t){const e=[];!0===t.isBone&&e.push(t);for(let i=0;i<t.children.length;i++)e.push.apply(e,Vs(t.children[i]));return e}class qs extends et.K{constructor(t,e,i){super(new Ge.x(e,4,2),new ti.v({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Zs=new _.P,$s=new w.I,Ys=new w.I;class Xs extends T.T{constructor(t,e,i){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const s=new Be.p(e);s.rotateY(.5*Math.PI),this.material=new ti.v({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),n=new Float32Array(3*r.count);s.setAttribute("color",new it.Tl(n,3)),this.add(new et.K(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");$s.copy(this.light.color),Ys.copy(this.light.groundColor);for(let t=0,i=e.count;t<i;t++){const s=t<i/2?$s:Ys;e.setXYZ(t,s.r,s.g,s.b)}e.needsUpdate=!0}t.lookAt(Zs.setFromMatrixPosition(this.light.matrixWorld).negate())}}var Ks=i(5268);class Qs extends ct.e{constructor(t=10,e=16,i=8,s=64,r=4473924,n=8947848){r=new w.I(r),n=new w.I(n);const a=[],o=[];for(let i=0;i<=e;i++){const s=i/e*(2*Math.PI),h=Math.sin(s)*t,c=Math.cos(s)*t;a.push(0,0,0),a.push(h,0,c);const l=1&i?r:n;o.push(l.r,l.g,l.b),o.push(l.r,l.g,l.b)}for(let e=0;e<=i;e++){const h=1&e?r:n,c=t-t/i*e;for(let t=0;t<s;t++){let e=t/s*(2*Math.PI),i=Math.sin(e)*c,r=Math.cos(e)*c;a.push(i,0,r),o.push(h.r,h.g,h.b),e=(t+1)/s*(2*Math.PI),i=Math.sin(e)*c,r=Math.cos(e)*c,a.push(i,0,r),o.push(h.r,h.g,h.b)}}const h=new I.u;h.setAttribute("position",new it.a$(a,3)),h.setAttribute("color",new it.a$(o,3));super(h,new ii.n({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const tr=new _.P,er=new _.P,ir=new _.P;class sr extends T.T{constructor(t,e,i){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===e&&(e=1);let s=new I.u;s.setAttribute("position",new it.a$([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new ii.n({fog:!1,toneMapped:!1});this.lightPlane=new ut.x(s,r),this.add(this.lightPlane),s=new I.u,s.setAttribute("position",new it.a$([0,0,0,0,0,1],3)),this.targetLine=new ut.x(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){tr.setFromMatrixPosition(this.light.matrixWorld),er.setFromMatrixPosition(this.light.target.matrixWorld),ir.subVectors(er,tr),this.lightPlane.lookAt(er),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(er),this.targetLine.scale.z=ir.length()}}var rr=i(1898);const nr=new Ls.Z;class ar extends ct.e{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(24),r=new I.u;r.setIndex(new it.Tl(i,1)),r.setAttribute("position",new it.Tl(s,3)),super(r,new ii.n({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&nr.setFromObject(this.object),nr.isEmpty())return;const e=nr.min,i=nr.max,s=this.geometry.attributes.position,r=s.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=e.x,r[4]=i.y,r[5]=i.z,r[6]=e.x,r[7]=e.y,r[8]=i.z,r[9]=i.x,r[10]=e.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=e.z,r[15]=e.x,r[16]=i.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=i.x,r[22]=e.y,r[23]=e.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}}class or extends ct.e{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new I.u;s.setIndex(new it.Tl(i,1)),s.setAttribute("position",new it.a$([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(s,new ii.n({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}}class hr extends ut.x{constructor(t,e=1,i=16776960){const s=i,r=new I.u;r.setAttribute("position",new it.a$([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),super(r,new ii.n({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const n=new I.u;n.setAttribute("position",new it.a$([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),n.computeBoundingSphere(),this.add(new et.K(n,new ti.v({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?a._Li:a.Wl3,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}}const cr=new _.P;let lr,ur;class pr extends T.T{constructor(t=new _.P(0,0,1),e=new _.P(0,0,0),i=1,s=16776960,r=.2*i,n=.2*r){super(),this.type="ArrowHelper",void 0===lr&&(lr=new I.u,lr.setAttribute("position",new it.a$([0,0,0,0,1,0],3)),ur=new jt.f(0,.5,1,5,1),ur.translate(0,-.5,0)),this.position.copy(e),this.line=new ut.x(lr,new ii.n({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new et.K(ur,new ti.v({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,r,n)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{cr.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(cr,e)}}setLength(t,e=.2*t,i=.2*e){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}var dr=i(8817);class mr{constructor(){this.type="ShapePath",this.color=new w.I,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new kt,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,i,s){return this.currentPath.quadraticCurveTo(t,e,i,s),this}bezierCurveTo(t,e,i,s,r,n){return this.currentPath.bezierCurveTo(t,e,i,s,r,n),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t,e){function i(t){const e=[];for(let i=0,s=t.length;i<s;i++){const s=t[i],r=new Qt;r.curves=s.curves,e.push(r)}return e}function s(t,e){const i=e.length;let s=!1;for(let r=i-1,n=0;n<i;r=n++){let i=e[r],a=e[n],o=a.x-i.x,h=a.y-i.y;if(Math.abs(h)>Number.EPSILON){if(h<0&&(i=e[n],o=-o,a=e[r],h=-h),t.y<i.y||t.y>a.y)continue;if(t.y===i.y){if(t.x===i.x)return!0}else{const e=h*(t.x-i.x)-o*(t.y-i.y);if(0===e)return!0;if(e<0)continue;s=!s}}else{if(t.y!==i.y)continue;if(a.x<=t.x&&t.x<=i.x||i.x<=t.x&&t.x<=a.x)return!0}}return s}const r=_e.isClockWise,n=this.subPaths;if(0===n.length)return[];if(!0===e)return i(n);let a,o,h;const c=[];if(1===n.length)return o=n[0],h=new Qt,h.curves=o.curves,c.push(h),c;let l=!r(n[0].getPoints());l=t?!l:l;const u=[],p=[];let d,m,f=[],y=0;p[y]=void 0,f[y]=[];for(let e=0,i=n.length;e<i;e++)o=n[e],d=o.getPoints(),a=r(d),a=t?!a:a,a?(!l&&p[y]&&y++,p[y]={s:new Qt,p:d},p[y].s.curves=o.curves,l&&y++,f[y]=[]):f[y].push({h:o,p:d[0]});if(!p[0])return i(n);if(p.length>1){let t=!1,e=0;for(let t=0,e=p.length;t<e;t++)u[t]=[];for(let i=0,r=p.length;i<r;i++){const r=f[i];for(let n=0;n<r.length;n++){const a=r[n];let o=!0;for(let r=0;r<p.length;r++)s(a.p,p[r].p)&&(i!==r&&e++,o?(o=!1,u[r].push(a)):t=!0);o&&u[i].push(a)}}e>0&&!1===t&&(f=u)}for(let t=0,e=p.length;t<e;t++){h=p[t].s,c.push(h),m=f[t];for(let t=0,e=m.length;t<e;t++)h.holes.push(m[t].h)}return c}}const{floatView:fr,uint32View:yr,baseTable:gr,shiftTable:vr,mantissaTable:xr,exponentTable:wr,offsetTable:Mr}=br();function br(){const t=new ArrayBuffer(4),e=new Float32Array(t),i=new Uint32Array(t),s=new Uint32Array(512),r=new Uint32Array(512);for(let t=0;t<256;++t){const e=t-127;e<-27?(s[t]=0,s[256|t]=32768,r[t]=24,r[256|t]=24):e<-14?(s[t]=1024>>-e-14,s[256|t]=1024>>-e-14|32768,r[t]=-e-1,r[256|t]=-e-1):e<=15?(s[t]=e+15<<10,s[256|t]=e+15<<10|32768,r[t]=13,r[256|t]=13):e<128?(s[t]=31744,s[256|t]=64512,r[t]=24,r[256|t]=24):(s[t]=31744,s[256|t]=64512,r[t]=13,r[256|t]=13)}const n=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let t=1;t<1024;++t){let e=t<<13,i=0;for(;0==(8388608&e);)e<<=1,i-=8388608;e&=-8388609,i+=947912704,n[t]=e|i}for(let t=1024;t<2048;++t)n[t]=939524096+(t-1024<<13);for(let t=1;t<31;++t)a[t]=t<<23;a[31]=1199570944,a[32]=2147483648;for(let t=33;t<63;++t)a[t]=2147483648+(t-32<<23);a[63]=3347054592;for(let t=1;t<64;++t)32!==t&&(o[t]=1024);return{floatView:e,uint32View:i,baseTable:s,shiftTable:r,mantissaTable:n,exponentTable:a,offsetTable:o}}function Sr(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=(0,Ut.clamp)(t,-65504,65504),fr[0]=t;const e=yr[0],i=e>>23&511;return gr[i]+((8388607&e)>>vr[i])}function Ar(t){const e=t>>10;return yr[0]=xr[Mr[e]+(1023&t)]+wr[e],fr[0]}var _r=i(2318),Cr=i(9760),Pr=i(6186);class Tr extends I.u{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),super()}}class Ir extends I.u{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),super()}}function Fr(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function Br(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function Lr(){console.error("THREE.ImmediateRenderObject has been removed.")}class Rr extends o.d{constructor(t,e,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(t,e,i),this.samples=4}}class Or extends h.p{constructor(t,e,i,s){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(t,e,i,s)}}class Gr extends l.J{constructor(t,e,i,s){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(t,e,i,s)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:a.UZH}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=a.UZH)},2261:(t,e,i)=>{i.d(e,{D:()=>o});var s=i(2826),r=i(831),n=i(1893),a=i(3034);class o extends a.a{constructor(t){super(t)}load(t,e,i,a){const o=this,h=[],c=new n.E,l=new r.h(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let u=0;function p(r){l.load(t[r],(function(t){const i=o.parse(t,!0);h[r]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},u+=1,6===u&&(1===i.mipmapCount&&(c.minFilter=s.wem),c.image=h,c.format=i.format,c.needsUpdate=!0,e&&e(c))}),i,a)}if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)p(e);else l.load(t,(function(t){const i=o.parse(t,!0);if(i.isCubemap){const t=i.mipmaps.length/i.mipmapCount;for(let e=0;e<t;e++){h[e]={mipmaps:[]};for(let t=0;t<i.mipmapCount;t++)h[e].mipmaps.push(i.mipmaps[e*i.mipmapCount+t]),h[e].format=i.format,h[e].width=i.width,h[e].height=i.height}c.image=h}else c.image.width=i.width,c.image.height=i.height,c.mipmaps=i.mipmaps;1===i.mipmapCount&&(c.minFilter=s.wem),c.format=i.format,c.needsUpdate=!0,e&&e(c)}),i,a);return c}}}}]);
//# sourceMappingURL=937.87fa3ea437561c8b81c3.js.map